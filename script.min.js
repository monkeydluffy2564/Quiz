const _0x40d1b2=_0x3671;(function(_0x2c7fa8,_0x4116a8){const _0x486826=_0x3671,_0x437817=_0x2c7fa8();while(!![]){try{const _0x2c2d18=-parseInt(_0x486826(0x498))/0x1*(-parseInt(_0x486826(0x389))/0x2)+parseInt(_0x486826(0x234))/0x3*(-parseInt(_0x486826(0x2f2))/0x4)+-parseInt(_0x486826(0x129))/0x5+parseInt(_0x486826(0x34b))/0x6+parseInt(_0x486826(0x407))/0x7+parseInt(_0x486826(0x199))/0x8+parseInt(_0x486826(0x29c))/0x9;if(_0x2c2d18===_0x4116a8)break;else _0x437817['push'](_0x437817['shift']());}catch(_0x597e65){_0x437817['push'](_0x437817['shift']());}}}(_0x24f6,0xdae78));function _0x3671(_0x487aa0,_0x480fcf){const _0x24f639=_0x24f6();return _0x3671=function(_0x367185,_0x30bbd8){_0x367185=_0x367185-0x85;let _0x48bd1d=_0x24f639[_0x367185];return _0x48bd1d;},_0x3671(_0x487aa0,_0x480fcf);}import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,addDoc,updateDoc,collection,query,where,getDocs,onSnapshot,deleteDoc,writeBatch,runTransaction,serverTimestamp,increment}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';let db,auth,userId,currentMode=_0x40d1b2(0x39a),currentProjectId=null,currentProjectData=null,currentQuizData=null,currentDisplayedQuiz=null,currentStudentName=null,currentStudentProjectData=null,currentPresentationSlide=0x0,allProjects=[],allQuizzesGlobal=[],selectedGlobalQuizId=null,allQuizzes=[],starredQuizzes=[],chartInstances={},unsubscribeProjectsListener=null,unsubscribeStudentsListener=null,unsubscribeQuizzesListener=null,unsubscribeSubmissionsListener=null,unsubscribeStudentProfilesListener=null,confirmAction=null,actionTargetId=null,draggedSvgElement=null,svgOffset={'x':0x0,'y':0x0},quizTimerInterval=null,perQuestionTimerInterval=null,quizStartTime=null,currentQuestionIndex=0x0,studentAnswersPerQuestion=[],currentLiveGameId=null,currentLiveGamePin=null,unsubscribeLiveGameListener=null,lastRenderedAdminQuestionIndex=-0x1;const BADGES={'PERFECT_SCORE':{'id':_0x40d1b2(0x19d),'name':'คะแนนเต็ม','description':_0x40d1b2(0x1e5),'icon':_0x40d1b2(0x36a)},'QUICK_THINKER':{'id':'quick_thinker','name':'เซียนสมองไว','description':_0x40d1b2(0x4d2),'icon':_0x40d1b2(0x3d2)},'ON_FIRE':{'id':'on_fire','name':_0x40d1b2(0x10f),'description':_0x40d1b2(0x378),'icon':_0x40d1b2(0x377)},'FIRST_TRY_ACE':{'id':'first_try_ace','name':_0x40d1b2(0x4d8),'description':_0x40d1b2(0x3a6),'icon':_0x40d1b2(0x252)},'COMEBACK_KING':{'id':'comeback_king','name':'ราชาคัมแบ็ก','description':_0x40d1b2(0x455),'icon':'fa-shield-alt\x20text-gray-600'},'SPECIALIST':{'id':_0x40d1b2(0x19c),'name':_0x40d1b2(0x3d8),'description':_0x40d1b2(0x486),'icon':_0x40d1b2(0x387)},'PERSEVERANCE':{'id':_0x40d1b2(0x4c7),'name':_0x40d1b2(0x10a),'description':_0x40d1b2(0x4e2),'icon':'fa-dumbbell\x20text-gray-700'}},firebaseConfig={'apiKey':_0x40d1b2(0x13b),'authDomain':'ai-quiz-app-aefee.firebaseapp.com','projectId':_0x40d1b2(0x4e4),'storageBucket':_0x40d1b2(0x3da),'messagingSenderId':_0x40d1b2(0x4e7),'appId':_0x40d1b2(0x338),'measurementId':_0x40d1b2(0x3c1)},appId=typeof __app_id!==_0x40d1b2(0x288)?__app_id:_0x40d1b2(0x3cf),adminView=document[_0x40d1b2(0x439)](_0x40d1b2(0x118)),studentView=document[_0x40d1b2(0x439)](_0x40d1b2(0x2f0)),projectDashboardView=document[_0x40d1b2(0x439)]('project-dashboard-view'),projectDetailView=document['getElementById'](_0x40d1b2(0x461)),quizResultsView=document[_0x40d1b2(0x439)](_0x40d1b2(0x2b7)),projectList=document[_0x40d1b2(0x439)]('project-list'),noProjectsMsg=document[_0x40d1b2(0x439)]('no-projects-msg'),projectTitle=document[_0x40d1b2(0x439)]('project-title'),projectIdDisplay=document[_0x40d1b2(0x439)](_0x40d1b2(0x284)),studentList=document[_0x40d1b2(0x439)](_0x40d1b2(0xb1)),messageModal=document['getElementById'](_0x40d1b2(0x17c)),modalMessage=document['getElementById'](_0x40d1b2(0x141)),createProjectModal=document[_0x40d1b2(0x439)](_0x40d1b2(0x3ea)),adminPasswordModal=document[_0x40d1b2(0x439)](_0x40d1b2(0x2ea)),confirmationModal=document['getElementById'](_0x40d1b2(0x2f4)),userIdDisplay=document[_0x40d1b2(0x439)](_0x40d1b2(0x1e9)),topicTab=document['getElementById'](_0x40d1b2(0x420)),textTab=document[_0x40d1b2(0x439)]('text-tab'),topicInputArea=document['getElementById']('topic-input-area'),textInputArea=document[_0x40d1b2(0x439)](_0x40d1b2(0x463)),manageTab=document[_0x40d1b2(0x439)](_0x40d1b2(0x1af)),resultsTab=document[_0x40d1b2(0x439)](_0x40d1b2(0x3d7)),leaderboardTab=document['getElementById'](_0x40d1b2(0x10c)),manageTabContent=document[_0x40d1b2(0x439)](_0x40d1b2(0x3b8)),resultsTabContent=document['getElementById'](_0x40d1b2(0x208)),leaderboardTabContent=document['getElementById'](_0x40d1b2(0x2fc)),projectQuizzesList=document[_0x40d1b2(0x439)]('project-quizzes-list'),fileTab=document['getElementById'](_0x40d1b2(0x3d9)),fileInputArea=document['getElementById'](_0x40d1b2(0x458)),fileUploadInput=document[_0x40d1b2(0x439)]('file-upload-input'),worksheetTab=document[_0x40d1b2(0x439)](_0x40d1b2(0x1c7)),worksheetInputArea=document['getElementById']('worksheet-input-area'),generateWorksheetBtn=document[_0x40d1b2(0x439)]('generate-worksheet-btn'),studentInitialView=document[_0x40d1b2(0x439)](_0x40d1b2(0x181)),studentNameSelectionView=document[_0x40d1b2(0x439)](_0x40d1b2(0x47d)),studentQuizArea=document[_0x40d1b2(0x439)](_0x40d1b2(0x34d)),studentResultArea=document[_0x40d1b2(0x439)](_0x40d1b2(0x15e)),studentReadingArea=document[_0x40d1b2(0x439)]('student-reading-area'),loadQuizBtn=document[_0x40d1b2(0x439)](_0x40d1b2(0x3ca)),startQuizBtn=document[_0x40d1b2(0x439)](_0x40d1b2(0x4f4)),studentJoinGameView=document[_0x40d1b2(0x439)](_0x40d1b2(0x4eb)),presentationModal=document[_0x40d1b2(0x439)]('presentation-modal'),renameQuizModal=document['getElementById'](_0x40d1b2(0x3df)),moveQuizModal=document[_0x40d1b2(0x439)]('move-quiz-modal'),quizSettingsModal=document['getElementById'](_0x40d1b2(0x2d9)),quizStatusModal=document[_0x40d1b2(0x439)](_0x40d1b2(0x1a3)),liveGameView=document['getElementById'](_0x40d1b2(0x114));async function initialize(){const _0x1e4eac=_0x40d1b2;try{const _0x52d835=initializeApp(firebaseConfig);db=getFirestore(_0x52d835),auth=getAuth(_0x52d835),setupAuthListener(),setupEventListeners(),showView('student');}catch(_0x313b0c){console['error'](_0x1e4eac(0x3b0),_0x313b0c),showMessage(_0x1e4eac(0x40d));}}function compareNumericalAnswers(_0x2cad38,_0x1993de){const _0x19a4a6=_0x40d1b2,_0x478978=String(_0x2cad38)[_0x19a4a6(0x2f9)](',','.')['replace'](/[^\d.-]/g,'')[_0x19a4a6(0x1a1)](),_0x551ff9=String(_0x1993de)[_0x19a4a6(0x2f9)](',','.')['replace'](/[^\d.-]/g,'')['trim']();if(_0x478978===''||_0x551ff9==='')return![];const _0x2b1540=parseFloat(_0x478978),_0x33c304=parseFloat(_0x551ff9);if(isNaN(_0x2b1540)||isNaN(_0x33c304))return![];return Math[_0x19a4a6(0x13e)](_0x2b1540-_0x33c304)<0.001;}async function gradeShortAnswer(_0x18c4f7,_0x5cb2f7){const _0x1d0daa=_0x40d1b2,_0x436c93=_0x5cb2f7[_0x1d0daa(0x379)];if(String(_0x18c4f7)['trim']()[_0x1d0daa(0x4a2)]()===String(_0x436c93)[_0x1d0daa(0x1a1)]()['toLowerCase']())return!![];if(compareNumericalAnswers(_0x18c4f7,_0x436c93))return!![];return console['log'](_0x1d0daa(0x347)),await gradeShortAnswerWithAI(_0x18c4f7,_0x436c93);}async function revealAnswerForAdmin(_0xb1459d,_0xa2e340){const _0x2a38fe=_0x40d1b2;if(document['getElementById']('next-live-question-btn'))return;const _0x2b129f=doc(db,_0x2a38fe(0x282)+appId+_0x2a38fe(0x35c),currentLiveGameId);await updateDoc(_0x2b129f,{'questionStatus':_0x2a38fe(0x131)});const _0x5507b9=liveGameView[_0x2a38fe(0x1e8)](_0x2a38fe(0x39e));_0x5507b9&&(_0x5507b9['classList']['remove'](_0x2a38fe(0x2c1)),_0x5507b9[_0x2a38fe(0x1ad)][_0x2a38fe(0x136)](_0x2a38fe(0x440),_0x2a38fe(0x306),_0x2a38fe(0x283),_0x2a38fe(0x4a0),_0x2a38fe(0x105)),_0x5507b9[_0x2a38fe(0x2b0)]=_0x2a38fe(0x167)+_0x5507b9[_0x2a38fe(0x2b0)]);const _0x30c6f7=document[_0x2a38fe(0x439)]('admin-action-buttons');_0x30c6f7&&(_0x30c6f7[_0x2a38fe(0x2b0)]=_0x2a38fe(0x489)+(_0xb1459d+0x1===_0xa2e340?'ดูสรุปผล':_0x2a38fe(0x49b))+'\x20<i\x20class=\x22fas\x20fa-arrow-right\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x2a38fe(0x439)](_0x2a38fe(0x211))['addEventListener']('click',async()=>{const _0x366110=_0x2a38fe,_0x190f0e=doc(db,'artifacts/'+appId+'/public/data/liveGames',currentLiveGameId),_0x11d91f=await getDoc(_0x190f0e);if(!_0x11d91f[_0x366110(0x474)]())return;const _0x34c204=_0x11d91f[_0x366110(0x372)](),_0x1063d={};if(_0x34c204[_0x366110(0x396)])for(const _0x118860 in _0x34c204[_0x366110(0x396)]){_0x1063d[_0x366110(0x434)+_0x118860+_0x366110(0x2e8)]=![];}const _0x5898d5=_0xb1459d+0x1;_0x5898d5<_0xa2e340?(_0x1063d[_0x366110(0x21a)]=_0x5898d5,_0x1063d[_0x366110(0x2af)]=serverTimestamp(),_0x1063d[_0x366110(0x49d)]='answering',await updateDoc(_0x190f0e,_0x1063d)):await updateDoc(_0x190f0e,{'status':_0x366110(0xb2)});}));}function setupAuthListener(){onAuthStateChanged(auth,async _0x45bd84=>{const _0x33f973=_0x3671;if(_0x45bd84){userId=_0x45bd84[_0x33f973(0x340)],userIdDisplay['textContent']=userId;if(unsubscribeProjectsListener)unsubscribeProjectsListener();listenForProjects(),listenForStarredQuizzes();}else await authenticateUser();});}function showPodiumView(_0x5b0648){const _0x5c734d=_0x40d1b2,_0x21f85a=Object[_0x5c734d(0x2c4)](_0x5b0648)['map'](([_0x52a1d0,_0x368cca])=>({'name':_0x52a1d0,'score':_0x368cca[_0x5c734d(0x33c)]||0x0,'badges':_0x368cca['badges']||[]}));_0x21f85a[_0x5c734d(0x3dc)]((_0x3ad7d8,_0x147fd8)=>{const _0x27f444=_0x5c734d,_0xf76a4=_0x147fd8[_0x27f444(0x33c)]-_0x3ad7d8[_0x27f444(0x33c)];if(_0xf76a4!==0x0)return _0xf76a4;return(_0x147fd8['badges'][_0x27f444(0x1f3)]||0x0)-(_0x3ad7d8['badges']['length']||0x0);});const _0x3ea2eb=_0x4cc7b2=>{const _0x21fc18=_0x5c734d;if(!_0x4cc7b2||_0x4cc7b2['length']===0x0)return'';const _0x18c179={'quick_thinker':'⚡️','on_fire':'🔥'};return'<div\x20class=\x22flex\x20justify-center\x20gap-2\x20my-1\x20text-2xl\x22>'+_0x4cc7b2[_0x21fc18(0x263)](_0x3a91fa=>_0x18c179[_0x3a91fa]||'')['join']('')+_0x21fc18(0xb5);},_0x18971c=_0x21f85a[_0x5c734d(0x3ff)](0x3),_0xe0b06f=_0x18971c['length']>0x0?_0x5c734d(0x1a8)+_0x18971c['map']((_0x1d8be1,_0x51b1b5)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20bg-black/10\x20hover:bg-black/30\x20p-2\x20rounded-md\x20transition-colors\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-semibold\x20text-gray-300\x20w-8\x20inline-block\x22>'+(_0x51b1b5+0x4)+'.</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-circle\x20mr-2\x20text-gray-300\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x1d8be1[_0x5c734d(0xe8)]+_0x5c734d(0x2b5)+_0x1d8be1['score']+_0x5c734d(0x3a9))[_0x5c734d(0x17d)]('')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'',_0x192b3d=_0x5c734d(0x367)+(_0x21f85a[0x1]?_0x5c734d(0x4ae)+_0x21f85a[0x1][_0x5c734d(0xe8)]+_0x5c734d(0x3b3)+_0x3ea2eb(_0x21f85a[0x1]['badges'])+_0x5c734d(0xab)+_0x21f85a[0x1][_0x5c734d(0x33c)]+'\x20คะแนน</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-gray-400\x20text-gray-900\x20font-bold\x20p-4\x20rounded-t-lg\x20mt-2\x20h-32\x20flex\x20items-center\x20justify-center\x20text-5xl\x22>2</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x5c734d(0x4ab))+_0x5c734d(0x3a4)+(_0x21f85a[0x0]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22podium-step\x20text-center\x20flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-crown\x20text-6xl\x20mb-2\x20text-yellow-400\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-bold\x20text-3xl\x22>'+_0x21f85a[0x0][_0x5c734d(0xe8)]+_0x5c734d(0x3b3)+_0x3ea2eb(_0x21f85a[0x0][_0x5c734d(0x120)])+_0x5c734d(0x37a)+_0x21f85a[0x0][_0x5c734d(0x33c)]+'\x20คะแนน</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-yellow-500\x20text-yellow-900\x20font-bold\x20p-4\x20rounded-t-lg\x20mt-2\x20h-48\x20flex\x20items-center\x20justify-center\x20text-6xl\x22>1</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'<div\x20class=\x22flex-1\x22></div>')+_0x5c734d(0x3a4)+(_0x21f85a[0x2]?_0x5c734d(0x4c0)+_0x21f85a[0x2][_0x5c734d(0xe8)]+_0x5c734d(0x3b3)+_0x3ea2eb(_0x21f85a[0x2][_0x5c734d(0x120)])+_0x5c734d(0xab)+_0x21f85a[0x2][_0x5c734d(0x33c)]+'\x20คะแนน</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-amber-700\x20text-amber-100\x20font-bold\x20p-4\x20rounded-t-lg\x20mt-2\x20h-24\x20flex\x20items-center\x20justify-center\x20text-4xl\x22>3</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x5c734d(0x4ab))+_0x5c734d(0x2f5)+_0xe0b06f+'\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(currentMode===_0x5c734d(0x4d0)?_0x5c734d(0x3b2):_0x5c734d(0xc9))+_0x5c734d(0x149);liveGameView['innerHTML']=_0x192b3d,currentMode==='admin'&&document[_0x5c734d(0x439)](_0x5c734d(0x1de))[_0x5c734d(0x444)](_0x5c734d(0x128),async()=>{const _0x12315a=_0x5c734d,_0x54e01f=doc(db,'artifacts/'+appId+_0x12315a(0x35c),currentLiveGameId);await deleteDoc(_0x54e01f),showView('admin-dashboard');});}async function handleStartLiveRace(_0x2173c0){const _0x38230b=_0x40d1b2;let _0x54def4=allQuizzes[_0x38230b(0x18c)](_0x239195=>_0x239195['id']===_0x2173c0);if(!_0x54def4){const _0x4d257d=doc(db,_0x38230b(0x282)+appId+_0x38230b(0x3ad),_0x2173c0),_0x77af93=await getDoc(_0x4d257d);if(!_0x77af93[_0x38230b(0x474)]()){showMessage(_0x38230b(0x308));return;}_0x54def4={'id':_0x77af93['id'],..._0x77af93[_0x38230b(0x372)]()};}currentQuizData=getShuffledQuiz(_0x54def4);const _0x16a332=_0x54def4[_0x38230b(0x1cb)]||currentProjectId||null,_0x2d0ce6=Math[_0x38230b(0x22d)](0xa+Math[_0x38230b(0x406)]()*0x5a)[_0x38230b(0x168)]();currentLiveGamePin=_0x2d0ce6;try{const _0x54f36c=await addDoc(collection(db,'artifacts/'+appId+_0x38230b(0x35c)),{'quizId':_0x2173c0,'projectId':_0x16a332,'status':_0x38230b(0xd4),'currentQuestionIndex':-0x1,'players':{},'gamePin':_0x2d0ce6,'createdAt':serverTimestamp()});currentLiveGameId=_0x54f36c['id'],showAdminLobbyView(_0x2d0ce6,_0x54def4['topic']),listenForLiveGameUpdates();}catch(_0x5bd3a0){console[_0x38230b(0x2db)]('Error\x20starting\x20live\x20race:',_0x5bd3a0),showMessage(_0x38230b(0x8e));}}async function handleShowStudentRankings(){const _0x5903a4=_0x40d1b2,_0x589d65=document['querySelector'](_0x5903a4(0x1cf));_0x589d65&&(_0x589d65[_0x5903a4(0x2b0)]=_0x5903a4(0x431));const _0x2910e6=document[_0x5903a4(0x1e8)](_0x5903a4(0x2a2));_0x2910e6&&(_0x2910e6['innerHTML']=_0x5903a4(0x28f));const _0x49f1e5=document[_0x5903a4(0x439)](_0x5903a4(0x2bf));_0x49f1e5[_0x5903a4(0x1ad)][_0x5903a4(0x48b)](_0x5903a4(0x2bb)),document[_0x5903a4(0x439)](_0x5903a4(0x2d8))['onclick']=()=>_0x49f1e5[_0x5903a4(0x1ad)][_0x5903a4(0x136)](_0x5903a4(0x2bb));const _0x26950a=document[_0x5903a4(0x439)](_0x5903a4(0x162)),_0x2ddadc=document[_0x5903a4(0x439)](_0x5903a4(0xb9)),_0x44f2a4=document[_0x5903a4(0x439)](_0x5903a4(0x238)),_0x41064b=document['getElementById']('student-project-leaderboard-content');_0x26950a[_0x5903a4(0x40b)]=()=>{const _0x44059d=_0x5903a4;_0x26950a['classList']['add'](_0x44059d(0x436)),_0x2ddadc[_0x44059d(0x1ad)]['remove'](_0x44059d(0x436)),_0x44f2a4[_0x44059d(0x1ad)][_0x44059d(0x48b)](_0x44059d(0x2bb)),_0x41064b[_0x44059d(0x1ad)][_0x44059d(0x136)](_0x44059d(0x2bb));},_0x2ddadc['onclick']=()=>{const _0x28e4fd=_0x5903a4;_0x2ddadc['classList'][_0x28e4fd(0x136)]('active'),_0x26950a[_0x28e4fd(0x1ad)][_0x28e4fd(0x48b)]('active'),_0x41064b[_0x28e4fd(0x1ad)][_0x28e4fd(0x48b)]('hidden'),_0x44f2a4[_0x28e4fd(0x1ad)]['add'](_0x28e4fd(0x2bb));};try{const _0x230ff7=collection(db,_0x5903a4(0x282)+appId+_0x5903a4(0x44e)+currentQuizData['id']+'/submissions'),_0xef6873=await getDocs(_0x230ff7),_0x4cb26c=_0xef6873[_0x5903a4(0x231)]['map'](_0x5ad733=>_0x5ad733['data']());renderQuizLeaderboard(_0x4cb26c,currentQuizData,_0x5903a4(0x92));const _0x390720=collection(db,'artifacts/'+appId+_0x5903a4(0x2d5)+currentQuizData[_0x5903a4(0x1cb)]+_0x5903a4(0x1e1)),_0x1be264=await getDocs(_0x390720),_0x172974=_0x1be264[_0x5903a4(0x231)][_0x5903a4(0x263)](_0x2fee54=>_0x2fee54[_0x5903a4(0x372)]());renderLeaderboard(_0x172974,'student-project-leaderboard-table-body');}catch(_0x5f233c){console[_0x5903a4(0x2db)](_0x5903a4(0xce),_0x5f233c),showMessage(_0x5903a4(0x39d));}}async function handleSaveToBank(_0xb9e4df){const _0x126511=_0x40d1b2,_0xaecb84=_0xb9e4df[_0x126511(0xc8)],_0x3bb167=_0xaecb84['dataset']['index'],_0x1be881=currentQuizData[_0x126511(0x449)][_0x3bb167];if(!userId){showMessage(_0x126511(0x3a0));return;}try{const _0x15b79f={..._0x1be881,'originalTopic':currentQuizData['topic'],'savedAt':serverTimestamp()},_0x3446ec=collection(db,_0x126511(0x282)+appId+_0x126511(0x3b9)+userId+'/questionBank');await addDoc(_0x3446ec,_0x15b79f),showMessage(_0x126511(0x23e)),_0xaecb84[_0x126511(0x1ad)]['remove'](_0x126511(0x2d7)),_0xaecb84[_0x126511(0x1ad)]['add'](_0x126511(0x1d8)),_0xaecb84[_0x126511(0x247)]=!![];}catch(_0x1647c5){console[_0x126511(0x2db)]('Error\x20saving\x20to\x20question\x20bank:',_0x1647c5),showMessage(_0x126511(0x38c));}}function listenForStarredQuizzes(){const _0x3f1409=_0x40d1b2;if(!userId)return;const _0x15ef8f=collection(db,_0x3f1409(0x282)+appId+_0x3f1409(0x3ad)),_0x1963e0=query(_0x15ef8f,where(_0x3f1409(0x4be),'==',!![]));onSnapshot(_0x1963e0,_0x525670=>{const _0x3fe9f0=_0x3f1409;starredQuizzes=_0x525670[_0x3fe9f0(0x231)][_0x3fe9f0(0x263)](_0x5e668c=>({'id':_0x5e668c['id'],..._0x5e668c[_0x3fe9f0(0x372)]()})),renderProjects();},_0xb016dc=>{const _0x3dfbf7=_0x3f1409;console['error'](_0x3dfbf7(0x3d4),_0xb016dc);});}async function handleToggleStarQuiz(_0x27bfbe){const _0xc5d8ca=_0x40d1b2,_0x553c71=doc(db,'artifacts/'+appId+_0xc5d8ca(0x3ad),_0x27bfbe);try{const _0x3447ac=await getDoc(_0x553c71);if(_0x3447ac[_0xc5d8ca(0x474)]()){const _0x29b761=_0x3447ac['data']()[_0xc5d8ca(0x4be)]||![];await updateDoc(_0x553c71,{'isStarred':!_0x29b761});}}catch(_0x35028e){console[_0xc5d8ca(0x2db)](_0xc5d8ca(0x1b4),_0x35028e),showMessage(_0xc5d8ca(0x3f0));}}async function displayQuestionBank(){const _0x442938=_0x40d1b2,_0x4ff083=document[_0x442938(0x439)](_0x442938(0x4bb));_0x4ff083['innerHTML']=_0x442938(0x29f);try{const _0x53ec60=collection(db,_0x442938(0x282)+appId+_0x442938(0x3b9)+userId+'/questionBank'),_0x47dda3=query(_0x53ec60),_0x569209=await getDocs(_0x47dda3);if(_0x569209[_0x442938(0x496)]){_0x4ff083[_0x442938(0x2b0)]=_0x442938(0x151);return;}let _0x5aa4bb=_0x569209['docs'][_0x442938(0x263)](_0x372fc7=>{const _0x193586=_0x442938,_0x2b1254=_0x372fc7[_0x193586(0x372)](),_0x4a460f=_0x372fc7['id'];return _0x193586(0x111)+JSON[_0x193586(0x38e)](_0x2b1254)+_0x193586(0xe7)+(_0x2b1254[_0x193586(0x89)]||_0x2b1254[_0x193586(0x32a)])+_0x193586(0x230)+_0x2b1254[_0x193586(0x2aa)]+_0x193586(0x178);})['join']('');_0x4ff083[_0x442938(0x2b0)]=_0x442938(0x44a)+_0x5aa4bb+_0x442938(0xd2),document[_0x442938(0x439)](_0x442938(0x169))[_0x442938(0x444)]('click',createQuizFromBank);}catch(_0x3dd26d){console[_0x442938(0x2db)](_0x442938(0xa3),_0x3dd26d),_0x4ff083[_0x442938(0x2b0)]=_0x442938(0x39f);}}function showAdminLiveQuestionView(_0x3dd24e,_0xd51d39,_0x391141){const _0x6b6bd7=_0x40d1b2,_0x44336d=_0x3dd24e[_0x6b6bd7(0x285)]||currentQuizData['quizType'];let _0x377180='';if(_0x44336d===_0x6b6bd7(0x110)||_0x44336d===_0x6b6bd7(0xfc)){const _0x18ccc8=_0x44336d===_0x6b6bd7(0xfc)?[_0x6b6bd7(0x214),_0x6b6bd7(0xa2)]:_0x3dd24e[_0x6b6bd7(0x4ed)],_0x52c7e4=_0x44336d==='true_false'?_0x3dd24e['correctAnswer']?0x0:0x1:_0x3dd24e[_0x6b6bd7(0x16d)];_0x377180=_0x18ccc8[_0x6b6bd7(0x263)]((_0x1dcee9,_0x298c30)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20rounded-lg\x20text-xl\x20flex\x20items-center\x20justify-center\x20text-center\x20bg-white/30\x22\x20data-is-correct=\x22'+(_0x298c30===_0x52c7e4)+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1dcee9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')['join']('');}else{if(_0x44336d===_0x6b6bd7(0x48c)){const _0x38d8ac=_0x3dd24e[_0x6b6bd7(0x3c7)]||[];_0x377180=_0x38d8ac[_0x6b6bd7(0x263)](_0x3c7ca7=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20rounded-lg\x20text-xl\x20flex\x20items-center\x20justify-center\x20text-center\x20bg-white/30\x22\x20data-is-correct=\x22'+(_0x3c7ca7===_0x3dd24e[_0x6b6bd7(0x350)])+_0x6b6bd7(0x483)+_0x3c7ca7+_0x6b6bd7(0x312))[_0x6b6bd7(0x17d)]('');}}const _0x350381=_0x3dd24e[_0x6b6bd7(0x32a)]||_0x3dd24e[_0x6b6bd7(0x89)],_0x3fe400=_0x6b6bd7(0x3ac)+(_0xd51d39+0x1)+_0x6b6bd7(0x16a)+_0x391141+_0x6b6bd7(0x456)+_0x350381+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20max-w-4xl\x20grid\x20grid-cols-1\x20md:grid-cols-2\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x377180+_0x6b6bd7(0x2bc);liveGameView[_0x6b6bd7(0x2b0)]=_0x3fe400;window[_0x6b6bd7(0x14f)]&&MathJax[_0x6b6bd7(0x210)]&&MathJax[_0x6b6bd7(0x210)]([liveGameView]);const _0x3cc1be=document[_0x6b6bd7(0x439)](_0x6b6bd7(0x2b1));document[_0x6b6bd7(0x439)](_0x6b6bd7(0x9f))['addEventListener'](_0x6b6bd7(0x128),async()=>{const _0x3d918a=_0x6b6bd7,_0x168738=doc(db,_0x3d918a(0x282)+appId+'/public/data/liveGames',currentLiveGameId);await updateDoc(_0x168738,{'questionStatus':_0x3d918a(0x131)});const _0xf7240e=liveGameView['querySelector'](_0x3d918a(0x39e));_0xf7240e&&(_0xf7240e[_0x3d918a(0x1ad)][_0x3d918a(0x48b)](_0x3d918a(0x2c1)),_0xf7240e['classList']['add'](_0x3d918a(0x440),_0x3d918a(0x306),_0x3d918a(0x283),'border-4',_0x3d918a(0x105)),_0xf7240e[_0x3d918a(0x2b0)]=_0x3d918a(0x167)+_0xf7240e[_0x3d918a(0x2b0)]),_0x3cc1be[_0x3d918a(0x2b0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22next-live-question-btn\x22\x20class=\x22bg-blue-500\x20hover:bg-blue-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xd51d39+0x1===_0x391141?_0x3d918a(0x2f6):_0x3d918a(0x49b))+_0x3d918a(0x223),document[_0x3d918a(0x439)]('next-live-question-btn')['addEventListener']('click',async()=>{const _0x245535=_0x3d918a,_0x36c745=doc(db,_0x245535(0x282)+appId+'/public/data/liveGames',currentLiveGameId),_0x485fed=await getDoc(_0x36c745);if(!_0x485fed[_0x245535(0x474)]())return;const _0x5621d9=_0x485fed[_0x245535(0x372)](),_0x410b94={};if(_0x5621d9[_0x245535(0x396)])for(const _0x42e5e9 in _0x5621d9[_0x245535(0x396)]){_0x410b94['players.'+_0x42e5e9+_0x245535(0x2e8)]=![];}const _0xb91c64=_0xd51d39+0x1;_0xb91c64<_0x391141?(_0x410b94[_0x245535(0x21a)]=_0xb91c64,_0x410b94['questionDisplayedAt']=serverTimestamp(),_0x410b94[_0x245535(0x49d)]=_0x245535(0x402),await updateDoc(_0x36c745,_0x410b94)):await updateDoc(_0x36c745,{'status':_0x245535(0xb2)});});}),document[_0x6b6bd7(0x439)](_0x6b6bd7(0x1e3))[_0x6b6bd7(0x444)](_0x6b6bd7(0x128),async()=>{const _0x555dc3=_0x6b6bd7,_0x29611f=doc(db,_0x555dc3(0x282)+appId+_0x555dc3(0x35c),currentLiveGameId);await deleteDoc(_0x29611f),showView(_0x555dc3(0x213));});}function _0x24f6(){const _0x418fdd=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x22>','results-table','ลบโปรเจคสำเร็จแล้ว','กรุณาใส่ชื่อใหม่','.csv','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-gray-500\x22>ยังไม่ส่ง\x20(','appendChild','/public/data/projects','teacherSuggestions','fullscreenElement','<i\x20class=\x22fas\x20fa-user-graduate\x20fa-lg\x22></i>','\x22\x20data-name=\x22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-red-700\x22>ตอบผิด\x20(','fa-user-astronaut\x20text-blue-700','text-red-700\x20bg-red-100','6176wSxYxk','raw','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a','เกิดข้อผิดพลาดในการบันทึก','</span></div>','stringify','analytics-tab-content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20bg-gray-100\x20p-2\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-semibold\x20text-indigo-700\x22>เวลาที่เหลือ:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22countdown-display\x22\x20class=\x22font-bold\x20text-lg\x20text-red-600\x22>--:--</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ref','q-explanation-','.pointsLastQuestion','mouseleave','description','players','\x20รายการ\x20เพื่อใช้เป็นตัวเลือกใน\x20dropdown.\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','strength-weakness-analysis-container','student','กรุณาป้อนหัวข้อก่อน','.delete-project-btn','ไม่สามารถโหลดข้อมูลอันดับได้','[data-is-correct=\x22true\x22]','<p\x20class=\x22text-center\x20text-red-500\x22>ไม่สามารถโหลดคลังข้อสอบได้</p>','ไม่พบข้อมูลผู้ใช้','เกิดข้อผิดพลาดในการย้ายแบบทดสอบ','num-choices-container','data:application/vnd.ms-word;charset=utf-8,','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22.\x20Ideal\x20Answer:\x20\x22','ทำคะแนนเต็มในการทำครั้งแรก','\x20ข้อ.\x20แต่ละข้อต้องมีประโยคคำถามที่มีช่องว่าง\x20(questionText\x20containing\x20\x27.....\x27),\x20ตัวเลือก\x20','\x20ข้อ.\x20แต่ละข้อมี\x20','\x20คะแนน</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','คัดลอกแบบทดสอบสำเร็จ','cancel-rename-quiz-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20flex\x20flex-col\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20text-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>ข้อที่\x20','/public/data/quizzes','<tr><td\x20colspan=\x224\x22\x20class=\x22text-center\x20p-4\x20text-gray-500\x22>ยังไม่มีข้อมูลคะแนนสำหรับตารางผู้นำ</td></tr>','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20mb-4\x22>ให้นักเรียนเข้าร่วมด้วยรหัสนี้:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-white\x20text-gray-800\x20rounded-lg\x20p-4\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-6xl\x20font-bold\x20tracking-widest\x22>','Firebase\x20initialization\x20failed:','Error\x20deleting\x20student:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22close-game-final-btn\x22\x20class=\x22mt-8\x20bg-red-600\x20text-white\x20py-2\x20px-6\x20rounded-lg\x20hover:bg-red-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times-circle\x20mr-2\x22></i>จบเกมและกลับหน้าหลัก\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x22><span\x20class=\x22text-xs\x20font-medium\x20px-2.5\x20py-0.5\x20rounded-full\x20','body','split','.quiz-settings-btn','manage-tab-content','/users/','createdAt','Error\x20updating\x20quiz\x20status:','<div\x20id=\x22generated-quiz-actions\x22\x20class=\x22mt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22save-quiz-btn\x22\x20class=\x22w-full\x20bg-green-600\x20text-white\x20py-2\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-green-700\x22><i\x20class=\x22fas\x20fa-save\x20mr-2\x22></i>บันทึกและสร้างรหัส</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','.\x20แต่ละข้อมี\x20','password-error-msg','COMEBACK_KING','substring','G-V90KRM0L63','mousedown','\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20rows=\x223\x22\x20required></textarea>','bar','.edit-quiz-btn','outerHTML','allResponses','student-name-select','touchmove','load-quiz-btn','เกิดข้อผิดพลาดในการโหลดโปรเจค','matching','bg-yellow-200\x20text-yellow-800','Error\x20moving\x20quiz:','ai-quiz-generator-v3','.\x20สำหรับแต่ละคู่\x20ให้สร้างเป็น\x20JSON\x20object\x20แยกกัน\x20โดยแต่ละ\x20object\x20ต้องมี:\x20\x27questionType\x27\x20(ตั้งค่าเป็น\x20\x27matching_item\x27),\x20\x27stem\x27\x20(คำถามฝั่งซ้าย),\x20\x27correctResponse\x27\x20(คำตอบที่ถูกต้องฝั่งขวา),\x20และ\x20\x27explanation\x27.\x20นอกจากนี้\x20ให้สร้าง\x20key\x20ชื่อ\x20\x27allResponses\x27\x20ซึ่งเป็น\x20array\x20ที่รวบรวม\x20\x27correctResponse\x27\x20ทั้งหมด\x20','Error\x20joining\x20live\x20game:','fa-bolt\x20text-blue-500','size','Error\x20listening\x20for\x20starred\x20quizzes:','leaderboard_','สิ้นสุดการทำแบบทดสอบ\x20กำลังส่งคำตอบ...','results-tab','ผู้เชี่ยวชาญ','file-tab','ai-quiz-app-aefee.appspot.com','\x20แบบทดสอบ</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x20mt-2\x20h-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sort','input[name=\x22status-option\x22]','timer-duration-label','rename-quiz-modal','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22font-bold\x20text-lg\x20text-indigo-800\x20pointer-events-none\x22>','fill','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20space-y-2\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20ตัวเลือก,\x20ระบุคำตอบที่ถูกต้อง,\x20และเพิ่มคำอธิบายสั้นๆ.\x20','createElementNS','fas\x20fa-star\x20text-yellow-500','button','passing-score-input','\x22><i\x20class=\x22fas\x20','ไม่สามารถเริ่มเกมได้','create-project-modal','/submissions','clientY','option','admin-testing','name_desc','เกิดข้อผิดพลาดในการติดดาว','</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20mb-8\x20text-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>ชื่อ:\x20....................................................................</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>วันที่:\x20......./......./.........</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>คะแนน:\x20.................</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','filter','q-image-container-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20คู่.\x20สำหรับแต่ละคู่\x20ให้สร้างเป็น\x20JSON\x20object\x20แยกกัน\x20โดยแต่ละ\x20object\x20ต้องมี:\x20\x27questionType\x27\x20(ตั้งค่าเป็น\x20\x27matching_item\x27),\x20\x27stem\x27\x20(คำถามฝั่งซ้าย),\x20\x27correctResponse\x27\x20(คำตอบที่ถูกต้องฝั่งขวา),\x20และ\x20\x27explanation\x27.\x20นอกจากนี้\x20ให้สร้าง\x20key\x20ชื่อ\x20\x27allResponses\x27\x20ซึ่งเป็น\x20array\x20ที่รวบรวม\x20\x27correctResponse\x27\x20ทั้งหมด\x20','\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22q_opt','แบบทดสอบนี้จะเปิดให้ทำในวันที่\x20','บันทึกการแก้ไข','AI\x20กำลังสร้างใบงาน...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mx-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-4\x20text-gray-600\x22>AI\x20กำลังวิเคราะห์จุดอ่อนและสร้างเนื้อหาทบทวนให้คุณโดยเฉพาะ...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-blue-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-blue-700\x20font-semibold\x22>อัตราการส่ง</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-blue-900\x22>','originalQuestion','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-container\x20bg-indigo-50\x20border-indigo-200\x20p-4\x20rounded-lg\x20shadow\x20hover:shadow-lg\x20transition-all\x20duration-300\x20flex\x20flex-col\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-content\x20cursor-pointer\x22\x20data-id=\x22starred-project\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22font-bold\x20text-lg\x20text-indigo-800\x20pointer-events-none\x22>แบบทดสอบที่ติดดาว\x20<i\x20class=\x22fas\x20fa-star\x20text-yellow-400\x22></i></h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x20pointer-events-none\x22>ทางลัดสำหรับแบบทดสอบที่ใช้บ่อย</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-700\x20mt-1\x20pointer-events-none\x22><i\x20class=\x22fas\x20fa-file\x20mr-1\x22></i>\x20','http://www.w3.org/2000/svg','slice','เกี่ยวกับหัวข้อ\x20\x27ความรู้ทั่วไป\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20p-1\x20hover:bg-gray-100\x20rounded\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','answering','\x20class=\x22accent-green-600\x22>\x20<span>ใช่\x20/\x20ถูก</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22><input\x20type=\x22radio\x22\x20name=\x22correct-answer-','<p><strong>คำตอบของคุณ:</strong>\x20<span\x20class=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-indigo-700\x20pointer-events-none\x22>','random','9022615LQPpTc','สร้างคำถามแบบใช่/ไม่ใช่\x20','เกิดข้อผิดพลาดในการสร้างแบบทดสอบซ่อมเสริม','การแก้ไขแบบทดสอบจะทำให้ผลการสอบเก่าไม่สอดคล้องกับคำถามและเฉลยชุดใหม่\x20ซึ่งอาจทำให้การแสดงผลคะแนนเก่าเกิดความสับสนได้\x20คุณต้องการบันทึกการเปลี่ยนแปลงหรือไม่?','onclick','.score','ไม่สามารถเชื่อมต่อกับฐานข้อมูลได้','<p\x20class=\x22','Error\x20fetching\x20project\x20quizzes:','confirm-create-project-btn','then','save-quiz-edits-btn','Error\x20fetching\x20projects\x20for\x20move:','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้ผลลัพธ์เป็น\x20JSON\x20object\x20ที่มีโครงสร้างดังนี้:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20topic:\x20ชื่อหัวข้อของใบงาน\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20questions:\x20array\x20ของ\x20object\x20คำถาม\x20โดยแต่ละ\x20object\x20มี:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20questionText:\x20(string)\x20ตัวคำถาม\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20imageCode:\x20(string,\x20optional)\x20โค้ด\x20SVG\x20ถ้ามี\x0a\x20\x20\x20\x20','results-quiz-title','border-green-300\x20bg-green-50','closest','per-question-options','confirmation-message','<p\x20class=\x22text-gray-500\x20text-center\x22>ยังไม่มีนักเรียนในโปรเจคเพื่อวิเคราะห์รายข้อ</p>','createElement','เกิดข้อผิดพลาดในการลบโปรเจค','\x22\x20class=\x22start-presentation-list-btn\x20text-indigo-800\x20bg-indigo-100\x20hover:bg-indigo-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-chalkboard-teacher\x22></i>\x20นำเสนอ</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','ปิดใช้งาน','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20sm:text-3xl\x20lg:text-4xl\x20font-bold\x20mb-6\x20md:mb-12\x20leading-relaxed\x20text-center\x22>','topic-tab','confirm-move-quiz-btn','topic','cancel-quiz-edits-btn-footer','ย้ายแบบทดสอบสำเร็จ','prev-question-btn','สอบซ่อม','Error\x20during\x20class\x20analysis:','เกิดข้อผิดพลาดในการโหลดสถานะ','display','pinned-items','touchstart','fill_in_with_choices','loader-text','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.start-live-race-btn','.copy-quiz-id-list-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x20w-16\x22>อันดับ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ชื่อผู้ทำ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>คะแนน</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>สถานะ\x20(ผ่าน/ไม่ผ่าน)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>คะแนน\x20Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ไอคอนรางวัล</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20','presentation-explanation','คัดลอกไม่สำเร็จ','players.','จำนวนข้อ:','active','.correctStreak','circle','getElementById','choices_only','height','font-bold\x20text-red-700\x20line-through','score-distribution-chart','topic-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','bg-green-300','<i\x20class=\x22fas\x20fa-save\x22></i>\x20บันทึกการแก้ไข','style','-tab','addEventListener','loader','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','keyup','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','questions','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-h-60\x20overflow-y-auto\x20border\x20rounded-lg\x20p-2\x22>','อัปเดตสถานะสำเร็จ','timer-bar','\x22?\x20ข้อมูลคะแนนและป้ายรางวัลของนักเรียนคนนี้จะถูกลบไปด้วย','/public/data/quizzes/','nickname-input','preventDefault','result','ไม่พบตารางสำหรับ\x20Export','touches','.lastAnswerCorrect','สอบตกในครั้งแรก\x20แต่กลับมาสอบผ่านได้','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22bg-white/20\x20px-3\x20py-1\x20rounded-full\x20text-base\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ตอบแล้ว:\x20<span\x20id=\x22answer-counter\x22\x20class=\x22font-bold\x22>0/0</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22end-game-btn\x22\x20class=\x22bg-red-600\x20text-white\x20py-1\x20px-3\x20rounded-md\x20hover:bg-red-700\x20text-sm\x22>จบเกม</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-grow\x20flex\x20flex-col\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x20mb-8\x20text-center\x22>','toDataURL','file-input-area','textarea','move','-tab-content','<div\x20class=\x22mt-2\x20p-2\x20bg-green-100\x20text-sm\x22><strong\x20class=\x22text-gray-700\x22>คำตอบที่ถูกต้อง:</strong>\x20<span\x20id=\x22q-correct-','%)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-yellow-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-yellow-700\x20font-semibold\x22>คะแนนสูงสุด</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-yellow-900\x22>','firstScore','_opt','border-green-700','project-detail-view','กรุณากรอกรหัสเข้าร่วมและชื่อเล่นให้ครบถ้วน','text-input-area','เกี่ยวกับหัวข้อ\x20\x22','per-q-countdown','Original\x20quiz\x20not\x20found','</option>','export-word-btn','some','toFixed','\x22\x20class=\x22regenerate-question-btn\x20text-green-600\x20hover:text-green-800\x20p-1\x22\x20title=\x22สร้างข้อนี้ใหม่\x22><i\x20class=\x22fas\x20fa-sync-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','svg','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20นี่คือข้อมูลสรุปของนักเรียนในห้อง:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20font-semibold\x20text-blue-600\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-6\x20p-4\x20border\x20rounded-lg\x20bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22font-semibold\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','BOOLEAN','add-student-btn','ไม่มี','กรุณาป้อนหัวข้อสำหรับใบงาน','exists','คำถามถัดไป','\x22\x20class=\x22copy-quiz-id-list-btn\x20text-blue-800\x20bg-blue-100\x20hover:bg-blue-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-id-card\x22></i>\x20คัดลอก\x20ID</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','\x0a\x20\x20<span\x20class=\x22text-sm\x20font-normal\x20text-gray-500\x22>(','bg-green-500','สอบปกติ','submittedAt','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x22>คุณเข้าร่วมแล้ว!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x20mt-2\x22>ชื่อของคุณคือ:\x20<span\x20class=\x22font-bold\x22>','\x22\x20class=\x22delete-project-btn\x20text-red-500\x20hover:text-red-700\x20text-sm\x20p-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x20ลบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','student-name-selection-view','สร้างคำถามแบบเติมคำในช่องว่าง\x20','from','min','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x22>คำถามที่\x20','href','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-search\x20mr-2\x22></i>ค้นหาแบบทดสอบ','Error\x20deleting\x20quiz:','ได้คะแนนเต็มในทุกแบบทดสอบของโปรเจค','<li\x20class=\x22','ไม่พบโปรเจค','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22next-live-question-btn\x22\x20class=\x22bg-blue-500\x20hover:bg-blue-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20class=\x22w-full\x20sm:w-auto\x20flex-1\x20bg-blue-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-blue-700\x20flex\x20items-center\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','remove','matching_item','สำหรับแต่ละคำถาม\x20หากจำเป็นต้องมีรูปภาพประกอบ\x20(เช่น\x20รูปเรขาคณิต,\x20กราฟ)\x20ให้สร้างโค้ด\x20SVG\x20ที่สมบูรณ์สำหรับรูปนั้นๆ\x20แล้วใส่ไว้ใน\x20property\x20ชื่อ\x20\x22imageCode\x22.\x20ถ้าไม่จำเป็น\x20ไม่ต้องใส่\x20property\x20นี้.','modal-passing-score-input','<div\x20class=\x22mt-2\x20space-y-1\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22','next-question-btn','hover:bg-indigo-100','editable-text-','manage','\x22\x20class=\x22quiz-settings-btn\x20text-cyan-800\x20bg-cyan-100\x20hover:bg-cyan-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-cog\x22></i>\x20ตั้งค่า</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20name=\x22status-option\x22\x20value=\x22active\x22\x20id=\x22status-active\x22\x20','empty','Error\x20creating\x20project:','247pKMTNu','กรุณาวาง\x20URL\x20ของบทความก่อน','xmlns=\x27http://www.w3.org/TR/REC-html40\x27>','ข้อต่อไป','bg-purple-50','questionStatus','<i\x20class=\x22fas\x20fa-arrow-left\x20mr-2\x22></i>กลับไปหน้าจัดการโปรเจค','กรุณาเลือกสถานะ','border-4','Please\x20evaluate\x20if\x20the\x20user\x27s\x20answer\x20is\x20correct\x20based\x20on\x20the\x20ideal\x20answer.\x20The\x20context\x20is\x20a\x20simple\x20quiz,\x20so\x20be\x20lenient\x20with\x20phrasing\x20but\x20strict\x20with\x20the\x20core\x20concept.\x20User\x20Answer:\x20\x22','toLowerCase','localeCompare','\x20คนที่ส่ง\x20ตอบถูก</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-green-700\x22>ตอบถูก\x20(','Error\x20loading\x20quiz\x20for\x20student:','setAttributeNS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>เฉลยที่ถูกต้อง:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','เกิดข้อผิดพลาดในการลบนักเรียนทั้งหมด','none','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22flex-1\x22></div>','pointsLastQuestion','quiz-start-time','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22podium-step\x20text-center\x20flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-circle\x20text-6xl\x20mb-2\x20text-gray-300\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-bold\x20text-2xl\x22>','quizType','close-presentation-btn','qType','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20font-semibold\x20text-blue-600\x20mt-2\x22>+','answer','width','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','doughnut','forEach','toISOString','.move-quiz-btn','<p\x20class=\x22font-semibold\x22\x20id=\x22q-text-','bank-input-area','\x0a\x20\x20\x20\x20\x20\x20\x20\x20นักเรียนคนหนึ่งทำแบบทดสอบเรื่อง\x20\x22','questions_only','isStarred','modal-timer-mode-select','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22podium-step\x20text-center\x20flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-circle\x20text-6xl\x20mb-2\x20text-amber-800\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-bold\x20text-2xl\x22>','getContext','โดยให้\x20AI\x20วิเคราะห์หาหัวข้อหลักจากเนื้อหาที่ให้มาโดยอัตโนมัติ','admin-try-quiz-btn','create-project-btn','getScreenCTM','\x20text-lg\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','perseverance','latestScore','generated-quiz-container','position','\x22\x20value=\x22','<p\x20class=\x22text-center\x20text-red-500\x22>ไม่ได้รับข้อมูลการวิเคราะห์จาก\x20AI</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','values','<tr><td\x20colspan=\x22','admin','onload','ทำแบบทดสอบเสร็จเร็วกว่าครึ่งของเวลาที่กำหนด','<i\x20class=\x22fas\x20fa-user-shield\x20fa-lg\x22></i>','.live-answer-btn','quick_thinker','quiz-results','presentation-slide-container','ผ่านฉลุย','text/html','Failed\x20to\x20parse\x20JSON\x20from\x20AI','บันทึกการตั้งค่าแล้ว','\x22\x20class=\x22edit-quiz-btn\x20text-blue-800\x20bg-blue-100\x20hover:bg-blue-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-edit\x22></i>\x20แก้ไข</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22inline-flex\x20items-center\x20mx-1\x22\x20title=\x22','start-presentation-btn','cancel-create-project-btn','execCommand','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x22>-</td>','ทำแบบทดสอบเดียวกันครบ\x205\x20ครั้ง','กรุณาวางเนื้อหาก่อน','ai-quiz-app-aefee','input[name=\x22question_single\x22]:checked','<br>','274192258111','\x22,\x20','imageCode','<textarea\x20id=\x22per-q-textarea\x22\x20name=\x22question_single_text\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20rows=\x223\x22\x20placeholder=\x22พิมพ์คำตอบของคุณที่นี่...\x22></textarea>','student-join-game-view','toggle','options','.save-to-bank-btn','textContent','แบบทดสอบไม่มีชื่อ','delete-all-students-btn','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22copy-quiz-id-btn\x22\x20class=\x22mt-2\x20bg-green-600\x20text-white\x20py-1\x20px-3\x20rounded-md\x20hover:bg-green-700\x20text-sm\x22><i\x20class=\x22fas\x20fa-copy\x22></i>\x20คัดลอก</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22grid\x20grid-cols-1\x20lg:grid-cols-3\x20gap-3\x20mt-4\x22>\x0a\x20\x20\x20\x20<button\x20id=\x22start-live-race-generated-btn\x22\x20class=\x22w-full\x20bg-orange-500\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-orange-600\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-flag-checkered\x20mr-2\x22></i>แข่งขันสด\x0a\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22start-presentation-btn\x22\x20class=\x22w-full\x20bg-purple-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-purple-700\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-chalkboard-teacher\x20mr-2\x22></i>เริ่มโหมดนำเสนอ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22admin-try-quiz-btn\x22\x20class=\x22w-full\x20bg-teal-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-teal-700\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-vial\x20mr-2\x22></i>ทดลองทำข้อสอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ยืนยันการกระทำ','start-quiz-btn','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x22>ส่งคำตอบแล้ว!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-8\x22>รอผู้เล่นคนอื่นสักครู่...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','Copy\x20command\x20failed','dispatchEvent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','isAdaptive','analytics-summary-cards','false','questionText','\x0a\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22radio\x22\x20id=\x22q','submission','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x20bg-green-100\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check-circle\x20text-5xl\x20text-green-500\x20mb-4\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-2\x22>ผู้เข้าสอบ:\x20<span\x20class=\x22font-semibold\x20text-green-800\x22>','ชื่อเล่นนี้ถูกใช้ไปแล้ว\x20กรุณาใช้ชื่ออื่น','เกิดข้อผิดพลาดในการสร้างห้องเกม','สำหรับบางข้อ\x20หากจำเป็น\x20ให้สร้างโค้ด\x20SVG\x20ที่เกี่ยวข้องกับโจทย์ด้วย','https://corsproxy.io/?','value','student-quiz-leaderboard-table-body','normal','Error\x20duplicating\x20quiz:','link-tab','status','<span\x20class=\x22text-red-500\x22><i\x20class=\x22fas\x20fa-times-circle\x22></i>\x20ไม่ถูกต้อง</span>\x20(คำตอบที่คาดหวัง:\x20','\x20<span\x20class=\x22text-xs\x20text-gray-500\x20pointer-events-none\x20ml-2\x22>(','fullscreenchange','presentation-ai-result','project-name-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>เฉลยที่ถูกต้อง\x20(คู่ของคำถามนี้):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','สลับไปโหมดผู้ควบคุม','back-from-results-btn','reveal-answer-btn','commit','viewBox','ไม่ใช่','Error\x20displaying\x20question\x20bank:','contentEditable','analyze-strengths-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','resultsDisplay','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20border\x20rounded-lg\x20hover:bg-gray-50\x20flex\x20flex-col\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-start\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quiz-result-card\x20cursor-pointer\x20flex-grow\x22\x20data-quiz-id=\x22','worksheet-topic-input','correctAnswer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x22>','save','</body></html>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</details>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','timerMode','quiz-leaderboard-table-body','student-list','podium','user','delete','</div>','points','name_asc','<div\x20class=\x22mt-2\x20p-2\x20bg-blue-50\x20text-xs\x22><strong\x20class=\x22text-blue-700\x22>คำอธิบาย:</strong>\x20<span\x20id=\x22q-explanation-','student-project-leaderboard-tab','clientX','move-quiz-project-select','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20โปรดสร้างแบบทดสอบปรนัยชุดใหม่จำนวน\x202\x20ข้อ\x20เพื่อทดสอบความเข้าใจในหัวข้อเหล่านี้โดยเฉพาะ\x0a\x20\x20\x20\x20\x20\x20\x20\x20แต่ละข้อต้องมี\x204\x20ตัวเลือก,\x20คำตอบที่ถูกต้อง,\x20และคำอธิบายสั้นๆ\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้ผลลัพธ์เป็น\x20JSON\x20object\x20ที่มีโครงสร้างดังนี้:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20topic:\x20(string)\x20ตั้งชื่อหัวข้อว่า\x20\x22แบบทดสอบซ่อมเสริม\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20questions:\x20(array\x20of\x20objects)\x20โดยแต่ละ\x20object\x20มี:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20questionText:\x20(string)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20options:\x20(array\x20of\x204\x20strings)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20correctAnswerIndex:\x20(number)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20explanation:\x20(string)\x0a\x20\x20\x20\x20','passingScore','opacity-50','ไม่สามารถดึงข้อมูลจาก\x20URL\x20ได้\x20(Status:\x20','fixed','input[name=\x22status-option\x22]:checked','(คัดลอก)\x20','\x20Points</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-md\x22>คุณได้คะแนน\x20','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<h2\x20class=\x22text-3xl\x20font-bold\x22>หมดเวลา!</h2>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<p\x20class=\x22mt-8\x22>รอผู้ควบคุมเฉลยและไปข้อต่อไป...</p>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x20</div>','bg-red-200\x20text-red-800','\x20ครั้ง)</span></td>','ไม่พบแบบทดสอบ','currentTarget','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-8\x20text-lg\x22>ขอบคุณที่ร่วมสนุก!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20md:col-span-2\x20flex\x20flex-col\x20items-center\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22live-short-answer-input\x22\x20class=\x22w-full\x20max-w-lg\x20p-3\x20border\x20rounded-lg\x20text-gray-800\x20text-lg\x22\x20rows=\x223\x22\x20placeholder=\x22พิมพ์คำตอบของคุณ...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22live-submit-short-answer-btn\x22\x20class=\x22bg-green-500\x20hover:bg-green-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-paper-plane\x20mr-2\x22></i>ส่งคำตอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-quiz-settings-btn','countdown-display','\x22.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20คำถามควรเป็นแบบปลายเปิด,\x20เติมคำ,\x20หรือคำนวณ\x20ที่นักเรียนสามารถเขียนคำตอบได้\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20fetching\x20student\x20rankings:','_opt0\x22\x20name=\x22question','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22timer-container\x22\x20class=\x22mb-4\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x22>แบบทดสอบ:\x20','quiz-generation-area','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22create-from-bank-btn\x22\x20class=\x22w-full\x20bg-purple-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-purple-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20สร้างแบบทดสอบจากข้อที่เลือก\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','_opt1\x22>ไม่ใช่</label></div>','lobby','Invalid\x20response\x20structure\x20from\x20AI.','PERFECT_SCORE','whole_quiz','defaultNumQuestions','<p\x20class=\x22text-green-700\x22><strong>คำตอบที่ถูกต้อง:</strong>\x20','<p\x20class=\x22text-2xl\x20font-bold\x20mt-2\x20px-4\x20py-1\x20rounded-full\x20inline-block\x20','reduce','\x20Points</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x22>คิดเป็น\x20','กรุณาใส่ชื่อนักเรียน','<div\x20class=\x22p-3\x20text-gray-500\x22>ไม่พบแบบทดสอบ</div>','หมดเวลา!\x20กำลังส่งคำตอบ...','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<h2\x20class=\x22text-3xl\x20font-bold\x22>','findIndex','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังส่งคำตอบ...','far\x20fa-star','content','modal-timer-duration-input','\x27\x20class=\x22mt-1\x20h-4\x20w-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x22>','name','\x22\x20ไม่ผ่าน\x0a\x20\x20\x20\x20\x20\x20\x20\x20นี่คือคำอธิบายจากข้อที่นักเรียนตอบผิด:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','export-leaderboard-excel-btn','project-search-input','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22text-xs\x20font-medium\x20mr-2\x20px-2.5\x20py-0.5\x20rounded-full\x20','Error\x20deleting\x20project:','<span\x20class=\x22text-green-500\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i>\x20ถูกต้อง</span>','generate-from-topic-btn','class','<i\x20class=\x22fas\x20fa-pen\x22></i>','จากไฟล์ที่แนบมานี้,\x20','\x20text-lg\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22ml-1\x20text-sm\x20font-semibold\x22>','rows','.quiz-status-btn','\x22\x20class=\x22delete-student-btn\x20text-red-500\x20hover:text-red-700\x20p-1\x20text-xs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times-circle\x20pointer-events-none\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>ตัวเลือกและเฉลย:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x20mt-1\x22>','button[data-id]','.presentation-option','<div\x20class=\x22','mouseup','true_false','\x22\x20class=\x22duplicate-quiz-btn\x20text-gray-800\x20bg-gray-100\x20hover:bg-gray-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-copy\x22></i>\x20คัดลอก</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','rename-quiz-input','\x22\x20value=\x22false\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q','analytics-tab-btn','isRemedial','check-presentation-answer-btn','เกิดข้อผิดพลาดในการลบแบบทดสอบ','Error\x20processing\x20file\x20for\x20AI:','border-green-500','lastAnswerCorrect',',\x20โดยให้มีทั้งคำถามแบบปรนัย\x20(questionType:\x20\x27multiple_choice\x27)\x20และแบบเติมคำที่ให้พิมพ์ตอบเอง\x20(questionType:\x20\x27short_answer\x27)\x20คละกันไป.\x20สำหรับปรนัย\x20ให้มี\x20','select','</span></td>','ผู้ไม่ยอมแพ้','per-question-text','leaderboard-tab','</p></div>','global-quiz-search-input','ท็อปฟอร์ม','multiple_choice','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-start\x20gap-3\x20p-2\x20border-b\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20value=\x27','ARRAY','live-options-container','live-game-view','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x22>','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','application/pdf','admin-view','<p\x20class=\x22text-2xl\x22>เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลคำถาม</p>','classStrengths','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20ข้อมูลคำถามทั้งหมด:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-red-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-red-700\x20font-semibold\x22>คะแนนต่ำสุด</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-red-900\x22>','ไม่สามารถบันทึกการตั้งค่าได้','start-game-btn','.\x20ให้มี\x20','badges','defaultPassingScore','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>AI\x20กำลังตรวจ...','originalQuestionText','xmlns:w=\x27urn:schemas-microsoft-com:office:word\x27\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','type','helvetica','click','4238985jWaMSF','show_results_only','json','</span>\x20วินาที</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','สร้างแบบทดสอบปรนัย\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20id=\x22q_opt_true\x22\x20name=\x22question_single\x22\x20value=\x22true\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q_opt_true\x22>ใช่</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20id=\x22q_opt_false\x22\x20name=\x22question_single\x22\x20value=\x22false\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q_opt_false\x22>ไม่ใช่</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quiz-search-input','revealed','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20font-semibold\x22>','เกิดข้อผิดพลาดในการแสดงรายละเอียดแบบทดสอบ','startTime','add','index','NUMBER','cursor','\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22q','AIzaSyCQlVzy_LBImNp5TJNwRuepFzvxWm8AyZk','rgba(79,\x2070,\x20229,\x201)','editor-quiz-topic','abs','QUICK_THINKER','rgba(79,\x2070,\x20229,\x200.8)','modal-message','<button\x20type=\x22submit\x22\x20class=\x22w-full\x20mt-4\x20bg-purple-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-purple-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check-circle\x20mr-2\x22></i>ส่งคำตอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>','text-green-600\x20font-bold','text-green-700\x20bg-green-100','project-sort-select','\x22\x20class=\x22save-to-bank-btn\x20text-purple-600\x20hover:text-purple-800\x20p-1\x22\x20title=\x22เก็บเข้าคลังข้อสอบส่วนตัว\x22>\x0a\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-university\x22></i>\x0a</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22','>\x20<label\x20for=\x22status-active\x22>เปิดใช้งาน\x20(Active)</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20name=\x22status-option\x22\x20value=\x22inactive\x22\x20id=\x22status-inactive\x22\x20','modal-shuffle-select','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','finishReason','fill_in_the_blank','answeredCurrentQuestion','save-quiz-btn','2741','MathJax','<p\x20class=\x22text-red-500\x20text-center\x22>ขออภัย,\x20ไม่สามารถสร้างแบบทดสอบได้</p>','<p\x20class=\x22text-center\x20text-gray-500\x22>คลังข้อสอบของคุณยังว่างอยู่</p>','confirm-join-game-btn','<p>','กรุณาใส่ชื่อโปรเจค','generate-from-link-btn','PERSEVERANCE','timer-container','label[for=\x22num-questions\x22]','#ffffff','starred','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','บันทึกการแก้ไขสำเร็จ','short_answer','student-result-area','ไม่พบแบบทดสอบสำหรับรหัสนี้','Error\x20generating\x20from\x20link:','round','student-quiz-leaderboard-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20name=\x22question_single\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22\x22>--\x20เลือกคำตอบ\x20--</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','border-red-300\x20bg-red-50','</form>','\x5cdiv','<i\x20class=\x22fas\x20fa-check\x20mr-3\x22></i>','toString','create-from-bank-btn','\x20/\x20','now','รอเปิด','correctAnswerIndex','target','exitFullscreen','removeEventListener','Error\x20generating\x20quiz:','\x22>ไม่ใช่</p>','\x20คน):</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-600\x20pl-2\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-bold\x20text-green-600\x22>','สิ้นสุดการทำแบบทดสอบ\x20AI\x20กำลังตรวจคำตอบอัตนัย...','\x20ข้อ,\x20โดยให้มีทั้งคำถามแบบปรนัย\x20(questionType:\x20\x27multiple_choice\x27)\x20และแบบเติมคำที่ให้พิมพ์ตอบเอง\x20(questionType:\x20\x27short_answer\x27)\x20คละกันไป.\x20สำหรับปรนัย\x20ให้มี\x20','question','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22?\x20ผลการส่งงานทั้งหมดของแบบทดสอบนี้จะถูกลบอย่างถาวร','Error\x20saving\x20settings:','เกิดข้อผิดพลาดในการอัปเดตตารางผู้นำ','message-modal','join','<p\x20class=\x22text-xs\x20text-gray-500\x20mt-1\x22>ปิด:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-sm\x20text-gray-600\x22>','all','student-initial-view','back-to-dashboard-btn','inactive','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-grow\x20flex\x20flex-col\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x20mb-8\x20text-center\x22>','.pdf','Remedial\x20quiz\x20generation\x20failed:','mixed','\x22\x20class=\x22move-quiz-btn\x20text-purple-800\x20bg-purple-100\x20hover:bg-purple-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-project-diagram\x22></i>\x20ย้าย</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','Error\x20listening\x20for\x20projects:','<span\x20title=\x22','insertAdjacentHTML','find','กฎเหล็ก:\x20นิพจน์ทางคณิตศาสตร์ทั้งหมดต้องอยู่ในรูปแบบ\x20LaTeX\x20ที่ถูกต้อง\x20และต้องถูกห่อหุ้มด้วยเครื่องหมายดอลลาร์\x20($)\x20เพียงคู่เดียว\x20ตัวอย่างเช่น\x20\x27ผลลัพธ์ของ\x20$3^2\x20\x5ctimes\x203^4$\x20คืออะไร\x27\x20หรือ\x20\x27คำตอบคือ\x20$3^{2+4}\x20=\x203^6$\x27\x20กฎเพิ่มเติม:\x201.\x20ใช้\x20`\x5ctimes`\x20สำหรับการคูณ\x20และ\x20`\x5cdiv`\x20สำหรับการหารเสมอ\x20ห้ามใช้คำอื่น\x202.\x20ตรวจสอบให้แน่ใจว่าวงเล็บปีกกา\x20`{}`\x20ทั้งหมดมีการเปิดและปิดที่ถูกต้อง\x203.\x20ห้ามใส่เครื่องหมายดอลลาร์ซ้อนกันหรือครอบแต่ละสัญลักษณ์เด็ดขาด\x20ให้ครอบทั้งนิพจน์เท่านั้น','on_fire','สร้างแบบทดสอบ\x20','ลบแบบทดสอบสำเร็จแล้ว','removeAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-semibold\x20text-red-700\x20mb-2\x22><i\x20class=\x22fas\x20fa-exclamation-circle\x20mr-2\x22></i>จุดอ่อน\x20/\x20ความเข้าใจผิดที่พบบ่อย</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22list-disc\x20list-inside\x20space-y-1\x20bg-red-50\x20p-3\x20rounded-lg\x20text-red-800\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-delete-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20p-3\x20bg-blue-50\x20border-l-4\x20border-blue-400\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-blue-800\x22>คำอธิบาย:</strong>\x20','ไม่มีคำอธิบาย','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังโหลด...','quiz-end-time','\x5ctimes','2949384FipJbm','</li>','num-questions','specialist','perfect_score','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','กรุณาเลือกข้อสอบอย่างน้อย\x201\x20ข้อ','<div\x20class=\x22text-red-500\x20text-center\x22><p>ขออภัย,\x20การวิเคราะห์ล้มเหลว:\x20','trim','\x20ข้อ\x20','quiz-status-modal','back-to-dashboard-from-results-btn','manual_release','\x20สร้างคำถามจับคู่\x201\x20ข้อ\x20(1\x20คู่)\x20ที่อยู่ในหมวดหมู่เดียวกันกับคำถามเดิม\x20แต่ต้องแตกต่างออกไป.\x20รูปแบบคือ:\x20stem,\x20correctResponse,\x20และ\x20explanation.\x20','.edit-question-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-8\x20w-full\x20max-w-lg\x20bg-black/20\x20p-4\x20rounded-lg\x20text-left\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20mb-3\x20text-center\x22>อันดับอื่นๆ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x20text-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','settings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x20bg-indigo-100\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-award\x20text-5xl\x20text-indigo-500\x20mb-4\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-2\x22>ผู้เข้าสอบ:\x20<span\x20class=\x22font-semibold\x20text-indigo-800\x22>','label','instructions','classList','totalQuestions','manage-tab','คุณแน่ใจหรือไม่ว่าต้องการลบแบบทดสอบ\x20\x22','เกิดข้อผิดพลาดในการโหลดการตั้งค่า','fill_in_no_choices','แบบทดสอบที่ติดดาว','Error\x20toggling\x20star\x20status:','\x20ตัวเลือก.\x20','<p\x20class=\x22text-gray-500\x22>ไม่พบแบบทดสอบที่ตรงกัน</p>','open','AI\x20กำลังวิเคราะห์ไฟล์และสร้างแบบทดสอบ...','เกมสิ้นสุดลงแล้ว','innerText','explanation','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html\x20lang=\x22th\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<title>ใบงาน:\x20','</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x20pointer-events-none\x22>สร้างเมื่อ:\x20','live-submit-short-answer-btn','touchcancel','red','ส่งแล้ว','date_desc','.duplicate-quiz-btn','draggable-text','Invalid\x20response\x20structure\x20from\x20AI:','project-detail','worksheet-tab','N/A','API\x20call\x20failed\x20with\x20status:\x20','คะแนน','projectId','contents','AIzaSyBgBJ28OshxBTnqUzCKsv7nve2Xj899fwA','\x20ข้อ.\x20แต่ละข้อต้องมีคำถาม\x20(questionText\x20containing\x20\x27.....\x27),\x20คำตอบที่เหมาะสม\x20(idealAnswer),\x20และคำอธิบาย\x20(explanation).\x20','#student-quiz-leaderboard-content\x20thead','endTime','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22timer-bar-container\x22\x20class=\x22w-full\x20bg-gray-200\x20rounded-full\x20h-2.5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22timer-bar\x22\x20class=\x22bg-indigo-600\x20h-2.5\x20rounded-full\x22\x20style=\x22width:\x20100%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-center\x20text-sm\x20text-gray-600\x20mt-1\x22>เหลือเวลา\x20<span\x20id=\x22per-q-countdown\x22>','<div\x20class=\x22my-4\x20flex\x20justify-center\x22>','parse','ring-2','totalPoints','\x20<span\x20class=\x22text-2xl\x20font-normal\x20text-gray-600\x22>/\x20','</p>','text-green-600','\x22\x20value=\x22true\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q','keys','write','remedialContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-white\x20text-gray-800\x20p-6\x20md:p-12\x20rounded-2xl\x20shadow-2xl\x20w-full\x20h-full\x20max-h-[90vh]\x20overflow-y-auto\x20fade-in\x20flex\x20flex-col\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','close-game-final-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>','\x22\x20class=\x22my-4\x20flex\x20justify-center\x22>','/studentProfiles','mousemove','end-game-btn','```json','ตอบถูกทุกข้อในแบบทดสอบนี้','\x20จาก\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-green-600\x22>(','querySelector','user-id-display','modal-results-display-select','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22bg-blue-100\x20text-blue-800\x20text-xs\x20font-medium\x20mr-2\x20px-2.5\x20py-0.5\x20rounded-full\x22>ส่งแล้ว\x20(','\x22\x20class=\x22star-quiz-btn\x20text-gray-400\x20hover:text-yellow-500\x20text-lg\x20p-1\x22\x20title=\x22ติดดาว\x22>\x0a\x20\x20\x20\x20<i\x20class=\x22','both','join-live-game-btn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-sm\x20font-normal\x20px-2\x20py-1\x20rounded\x20','global-quiz-list','autoTable','คัดลอกรหัสแล้ว!','length','กรุณาเลือกโปรเจคปลายทาง','\x20class=\x22accent-green-600\x22>\x20<span>ไม่ใช่\x20/\x20ผิด</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','timer-mode-select','download','คำตอบผิด','show_results_and_answers','student-name-input','<div\x20class=\x22my-2\x20flex\x20justify-center\x22>','q-text-','Adaptive\x20flow\x20failed:','results','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-sm\x20text-gray-600\x22>','beforeend','setFont','บันทึกแบบทดสอบสำเร็จแล้ว!','btn','get','results-display-select','attempts','string','results-tab-content','copy','สลับไปโหมดนักเรียน','<option\x20value=\x22','startsWith','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-id=\x22','.quiz-result-card','save-settings-btn','typesetPromise','next-live-question-btn','quiz-leaderboard-table','admin-dashboard','ใช่','<button\x20id=\x22cancel-test-btn\x22\x20class=\x22text-sm\x20text-gray-500\x20hover:text-red-600\x20font-semibold\x20py-1\x20px-2\x20rounded-md\x20hover:bg-red-50\x22><i\x20class=\x22fas\x20fa-times-circle\x20mr-1\x22></i>\x20ยกเลิกการทดสอบ</button>','<p\x20class=\x22text-gray-400\x20text-center\x20p-2\x22>ยังไม่มีนักเรียนในโปรเจคนี้</p>','กำลังวิเคราะห์เนื้อหาและสร้างแบบทดสอบ...','จำนวนคู่:','timer-duration-input','currentQuestionIndex','Enter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>เฉลย:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-1\x20mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22><input\x20type=\x22radio\x22\x20name=\x22correct-answer-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>','</label>\x0a\x20\x20\x20\x20</div>\x0a','ผ่าน','td,\x20th','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22radio\x22\x20id=\x22q_opt','\x20<i\x20class=\x22fas\x20fa-arrow-right\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','scores','#10B981','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','timerDuration','input[type=\x22radio\x22]:checked','schedule','num-choices','ring-purple-400','\x22\x20name=\x22question_single\x22\x20value=\x22','floor','isArray','dataIndex','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-500\x22>จากเรื่อง:\x20','docs','<p><strong>คำตอบของคุณ:</strong>\x20','<li>','60033lyZyPB','quiz-schedule-start-container','removeChild','max','student-quiz-leaderboard-content','OBJECT','true','quizId','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22presentation-options\x22\x20class=\x22grid\x20grid-cols-1\x20md:grid-cols-2\x20gap-4\x20md:gap-6\x20items-stretch\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','onerror','บันทึกคำถามลงคลังข้อสอบส่วนตัวแล้ว','.badges','<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>','Error\x20fetching\x20quiz\x20settings:','ระยะเวลา\x20(วินาที):','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20font-semibold\x22>','back-to-project-btn','<i\x20class=\x22fas\x20fa-check-circle\x20mr-2\x20text-green-600\x22></i>','delete-svg-btn','disabled','.draggable-text','checked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fade-in\x20space-y-4\x20mt-4\x20border-t\x20pt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-semibold\x20text-green-700\x20mb-2\x22><i\x20class=\x22fas\x20fa-check-circle\x20mr-2\x22></i>จุดแข็งของห้องเรียน</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22list-disc\x20list-inside\x20space-y-1\x20bg-green-50\x20p-3\x20rounded-lg\x20text-green-800\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22question-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20font-semibold\x20mb-2\x22>','\x20ข้อ)</span></p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x20pointer-events-none\x22>สร้างเมื่อ:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20นักเรียนคนที่\x20','\x20ตัว\x20(options),\x20ดัชนีคำตอบที่ถูกต้อง\x20(correctAnswerIndex),\x20และคำอธิบาย\x20(explanation).\x20','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','bottom','fa-rocket\x20text-purple-500','<h1></h1>','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x22>','push','submit','indexOf','.delete-student-btn','Error\x20saving\x20quiz\x20edits:','<div><input\x20type=\x22radio\x22\x20id=\x22q','bestScore','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22radio\x22\x20name=\x22correct-answer-','update','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x22>','quiz','เกิดข้อผิดพลาดในการบันทึกคำตอบของคุณ','bank-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','map','ownerSVGElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20คุณคือนักวิเคราะห์การศึกษาผู้เชี่ยวชาญ\x20ภารกิจของคุณคือการวิเคราะห์ภาพรวมของห้องเรียนจากข้อมูลการทำแบบทดสอบ\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20แบบทดสอบเรื่อง:\x20\x22','game-pin-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>','s;\x22\x20title=\x22','2-digit','แบบทดสอบนี้ปิดใช้งานอยู่','include-images-checkbox','เกิดข้อผิดพลาดในการโหลดแบบทดสอบ','generate-from-text-btn','#per-question-options\x20textarea','live-game','project-quizzes-list','first_try_ace','<tr><td\x20colspan=\x2210\x22\x20class=\x22text-center\x20p-4\x20text-gray-500\x22>ไม่มีรายชื่อนักเรียนในโปรเจคนี้</td></tr>','mode-switcher-btn','<html\x20xmlns:o=\x27urn:schemas-microsoft-com:office:office\x27\x20','latestSubmittedAt','<textarea\x20name=\x22question','<p\x20class=\x22text-green-700\x22><strong>คำตอบที่เหมาะสม:</strong>\x20','</td>','quiz-editor-questions-container','การยืนยันตัวตนล้มเหลว','\x22\x20class=\x22admin-try-quiz-list-btn\x20text-teal-800\x20bg-teal-100\x20hover:bg-teal-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-vial\x22></i>\x20ทดลอง</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20bg-green-100\x20text-green-800\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x22>สร้างแบบทดสอบสำเร็จ!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>รหัสสำหรับทำแบบทดสอบ:\x20<strong\x20id=\x22quiz-id\x22\x20class=\x22text-lg\x20select-all\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20py-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mx-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-4\x20text-gray-600\x22>AI\x20กำลังวิเคราะห์ภาพรวม...\x20อาจใช้เวลาสักครู่</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','quiz-type-select','message','FIRST_TRY_ACE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20flex\x20flex-col\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20text-center\x22>ข้อที่\x20','artifacts/','font-bold','project-id-display','questionType','เกิดข้อผิดพลาดในการสร้างแบบทดสอบ\x20โปรดลองอีกครั้ง','\x22\x20class=\x22live-answer-btn\x20p-4\x20rounded-lg\x20text-xl\x20text-center\x20bg-white\x20text-gray-800\x20hover:bg-indigo-100\x20transition-all\x20transform\x20hover:scale-105\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','undefined','candidates','image/png','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setAttribute','students','\x22>ใช่</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x20w-16\x22>อันดับ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ชื่อผู้เล่น</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>คะแนนรวม\x20(Points)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ไอคอนรางวัลที่ได้รับ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20','touchend','_blank','</span>','fa-pen','document','jspdf','parts','input[type=\x22text\x22]','slide-counter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mx-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-4\x20text-gray-600\x22>เยี่ยมเลย!\x20AI\x20กำลังสร้างแบบทดสอบชุดใหม่เพื่อทบทวนความเข้าใจ...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','leaderboard-quiz','<div\x20id=\x22q-image-container-','3474198ruTqcw','เปลี่ยนชื่อแบบทดสอบสำเร็จ','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>AI\x20กำลังตรวจคำตอบ...','<div\x20class=\x22loader\x20mx-auto\x22></div>','bg-green-200\x20text-green-800','shuffleSetting','#student-project-leaderboard-content\x20thead','จากเนื้อหาต่อไปนี้:\x20\x22','classWeaknesses','padStart','toDate','quiz-form','text/csv;charset=utf-8;','cloneNode','originalTopic','quiz-editor-modal','.doc','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-semibold\x20text-sm\x22>','\x20แบบทดสอบ</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x20mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-id=\x22','questionDisplayedAt','innerHTML','admin-action-buttons','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-green-600\x20font-bold\x22>','AI\x20grading\x20failed:','scores-tab-content','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-bold\x20text-white\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22quiz-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quiz-results-view','ต้องมีนักเรียนส่งงานอย่างน้อย\x202\x20คนขึ้นไป\x20จึงจะสามารถวิเคราะห์ภาพรวมได้','link-topic-input','font-bold\x20text-green-700','hidden','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22admin-action-buttons\x22\x20class=\x22text-center\x20mt-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22reveal-answer-btn\x22\x20class=\x22bg-yellow-500\x20hover:bg-yellow-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20เฉลย\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ระยะเวลา\x20(นาที):','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','student-rankings-modal','modal-timer-duration-label','bg-white/30','\x22\x20class=\x22delete-quiz-btn\x20text-red-500\x20hover:text-red-700\x20text-lg\x20p-1\x20ml-auto\x22\x20title=\x22ลบแบบทดสอบ\x22><i\x20class=\x22fas\x20fa-trash-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','entries','line-through\x20text-red-700','\x20class=\x22accent-green-600\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-6\x20bg-amber-50\x20border-l-4\x20border-amber-400\x20rounded-r-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20text-amber-800\x22>ทบทวนก่อนไปต่อนะ!</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-2\x20text-gray-700\x22>','results-table-container','\x22\x20class=\x22w-full\x20p-1\x20border\x20rounded-md\x20correct-response-input\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20class=\x22start-live-race-btn\x20text-orange-800\x20bg-orange-100\x20hover:bg-orange-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-flag-checkered\x22></i>\x20แข่งขันสด</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','icon','STRING','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังบันทึก...','<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22\x20data-answer=\x22true\x22>ใช่</button>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20จากหัวข้อเหล่านี้ที่นักเรียนยังไม่เข้าใจ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-700\x20mt-1\x20pointer-events-none\x22><i\x20class=\x22fas\x20fa-file\x20mr-1\x22></i>\x20','\x22\x20class=\x22quiz-status-btn\x20text-gray-600\x20hover:text-indigo-600\x20text-lg\x20p-1\x22\x20title=\x22ตั้งค่าสถานะ\x22><i\x20class=\x22fas\x20fa-power-off\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-end\x20flex-wrap\x20gap-2\x20mt-3\x20pt-3\x20border-t\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','getBBox','/public/data/projects/','default','text-purple-600','close-student-rankings-btn','quiz-settings-modal','submission-status-chart','error','.delete-svg-btn','Error\x20adding\x20students:','next-question-timed-btn','ไม่ได้ตอบ','input','.regenerate-question-btn','\x22\x20data-topic=\x22','\x20mx-1\x20text-lg\x22></i></span>','\x20คู่\x20','application/json','.\x20แต่ละข้อต้องมีประโยคคำถามที่มีช่องว่าง\x20(questionText\x20containing\x20\x27.....\x27),\x20ตัวเลือก\x20','.\x20แต่ละข้อต้องมีคำถาม\x20(questionText),\x20คำตอบที่เหมาะสม\x20(idealAnswer),\x20และคำอธิบาย\x20(explanation).\x20','.answeredCurrentQuestion','export-leaderboard-image-btn','admin-password-modal','badgesCount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>','modal-adaptive-quiz-checkbox','results_','FileReader\x20error:','student-view','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22bg-yellow-100\x20text-yellow-800\x20text-xs\x20font-medium\x20mr-2\x20px-2.5\x20py-0.5\x20rounded-full\x22>ยังไม่ส่ง</span></td>','236hZesbg','generated-quiz-actions','confirmation-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ดูสรุปผล','</title>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<script\x20src=\x22https://cdn.tailwindcss.com\x22></script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<link\x20href=\x22https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap\x22\x20rel=\x22stylesheet\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20\x27Sarabun\x27,\x20sans-serif;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@media\x20print\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20-webkit-print-color-adjust:\x20exact;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.no-print\x20{\x20display:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.question-item\x20{\x20page-break-inside:\x20avoid;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.answer-line\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20dotted\x20black;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2080%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<body\x20class=\x22p-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1\x20class=\x22text-2xl\x20font-bold\x22>ใบงานเรื่อง:\x20','presentation-short-answer-input','replace','bg-green-100\x20text-green-800','includes','leaderboard-tab-content','getAttributeNS','กำลังสร้างแบบทดสอบจากหัวข้อ...','\x20ข้อ)</span>\x0a</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-500\x22>โปรเจค:\x20','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22text-xs\x20font-medium\x20px-2.5\x20py-0.5\x20rounded-full\x20','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','กรุณาเลือกชื่อของคุณ','#results-table','.\x20แต่ละข้อต้องมีคำถาม\x20(questionText\x20containing\x20\x27.....\x27),\x20คำตอบที่เหมาะสม\x20(idealAnswer),\x20และคำอธิบาย\x20(explanation).\x20','button[type=\x22submit\x22]','text-green-900','dataset','ไม่พบข้อมูลแบบทดสอบ','quiz-schedule-end-container','เกิดข้อผิดพลาดในการสร้างใบงาน','defaultNumChoices','bg-red-500','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-bold\x22>','Error\x20saving\x20submission:','\x22\x20name=\x22question','promptFeedback','Error\x20deleting\x20all\x20students:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20value=\x22false\x22\x20','\x22\x20class=\x22text-center\x20p-4\x20text-gray-500\x22>ยังไม่มีนักเรียนส่งแบบทดสอบนี้</td></tr>','.star-quiz-btn','toLocaleString','MathJax\x20typeset\x20error\x20(analytics):','หมดเวลาสำหรับข้อนี้!','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-bold\x20text-green-800\x20mb-2\x22>ส่งคำตอบเรียบร้อยแล้ว</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x22>ผู้ควบคุมจะแจ้งผลคะแนนให้ทราบภายหลัง</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','scheduled_pending','scheduled','จำนวนนักเรียน','เกิดข้อผิดพลาดในการอ่านไฟล์','confirm-delete-btn','flex','gamePin','querySelectorAll','bg-blue-100\x20text-blue-800','\x22>ไม่ใช่</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','bg-red-100\x20text-red-800','POST','<head><meta\x20charset=\x27utf-8\x27><title>Export\x20HTML\x20to\x20Word</title></head><body>','Error\x20fetching\x20quiz\x20status:','answers','quiz-leaderboard-table-container','stem','destroy','ขออภัย\x20เกมนี้ได้เริ่มไปแล้ว\x20ไม่สามารถเข้าร่วมได้','player-count','cancel-global-live-btn','isCorrect','focus','confirm-quiz-settings-btn','th-TH','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','student-quiz-topic','leaderboard','.\x20For\x20each\x20question,\x20specify\x20its\x20\x27questionType\x27.\x20If\x20\x27questionType\x27\x20is\x20\x27multiple_choice\x27,\x20provide\x20\x27options\x27\x20and\x20\x27correctAnswerIndex\x27.\x20If\x20\x27questionType\x27\x20is\x20\x27short_answer\x27,\x20provide\x20\x27idealAnswer\x27.','confirm-global-live-btn','1:274192258111:web:4120c9118229b5644dd48a','global-live-game-modal','text-white','leaderboard-quiz-tab-btn','score','start-remedial-quiz-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-semibold\x20text-blue-600\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20','uid','numeric','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-container\x20bg-white\x20p-4\x20rounded-lg\x20shadow\x20hover:shadow-lg\x20transition-all\x20duration-300\x20border\x20border-gray-200\x20flex\x20flex-col\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-content\x20cursor-pointer\x22\x20data-id=\x22','กำลังสร้างรูปภาพ...','createObjectURL','after','\x22?\x20ข้อมูลทั้งหมดในโปรเจคนี้\x20(รวมถึงแบบทดสอบและผลการส่งงาน)\x20จะถูกลบอย่างถาวร','Programmatic\x20checks\x20failed.\x20Deferring\x20to\x20AI\x20for\x20grading.','กำลังดึงข้อมูลจากลิงก์...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-4\x20p-4\x20border\x20rounded-lg\x20relative\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20top-2\x20right-2\x20opacity-0\x20group-hover:opacity-100\x20transition-opacity\x20flex\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22','shuffle-setting-select','712212RmiuLR','projectName','student-quiz-area','leaderboard-table-body','ตั้งเวลา\x20(เปิด)','correctResponse','ไม่ผ่าน','%\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-chevron-right\x20details-marker\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</summary>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20pt-3\x20border-t\x20text-sm\x20space-y-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>คำถาม:</strong>\x20','<p\x20class=\x22text-red-500\x20text-center\x22>ขออภัย,\x20ไม่สามารถสร้างแบบทดสอบจากลิงก์ได้</p>','สร้างโปรเจคสำเร็จ!','\x20<span\x20class=\x22text-xl\x20font-normal\x20text-gray-600\x22>/\x20','export-image-btn','<option>กำลังโหลดโปรเจค...</option>','blockReason','เกิดข้อผิดพลาดในการอัปเดตสถานะ','API\x20call\x20failed','cancel-quiz-status-btn','/public/data/liveGames','>\x20<label\x20for=\x22status-schedule\x22>ตั้งเวลาเปิด/ปิด\x20(Schedule)</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20max-w-md\x20bg-white/20\x20p-4\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-semibold\x20mb-2\x22>ผู้เล่นที่เข้าร่วม\x20(<span\x20id=\x22player-count\x22>0</span>)</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22player-list-lobby\x22\x20class=\x22flex\x20flex-wrap\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22start-game-btn\x22\x20class=\x22mt-6\x20bg-green-500\x20hover:bg-green-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x20transition-transform\x20hover:scale-105\x20disabled:bg-gray-400\x20disabled:cursor-not-allowed\x22\x20disabled>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-play\x22></i>\x20เริ่มการแข่งขัน\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','สร้างชุดคำถามจับคู่\x20','ไม่พบเนื้อหาที่เพียงพอในลิงก์ที่ให้มา','title','ไม่พบข้อมูลแบบทดสอบสำหรับทดลอง','สร้างคำถามแบบเติมคำในช่องว่าง\x201\x20ข้อ\x20','\x0a\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-1/2\x22>','กรุณาป้อนรหัสแบบทดสอบ','แก้ไขข้อนี้','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20flex\x20flex-col\x20h-full\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-4xl\x20font-bold\x20mb-8\x22>สรุปผลการแข่งขัน!\x20<i\x20class=\x22fas\x20fa-trophy\x20text-yellow-300\x22></i></h2>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-end\x20justify-center\x20gap-4\x20w-full\x20max-w-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#bank-input-area\x20input[type=\x22checkbox\x22]:checked','\x22\x20class=\x22edit-question-btn\x20text-blue-600\x20hover:text-blue-800\x20p-1\x22\x20title=\x22แก้ไขข้อนี้\x22><i\x20class=\x22fas\x20fa-pen\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22','fa-crown\x20text-yellow-500','analytics','text','timer-duration-container','admin-password-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-2xl\x20font-bold\x20mb-2\x22>เริ่มเกม:\x20','AI\x20request\x20was\x20blocked.\x20Reason:\x20','shuffle','data','open-global-live-btn','studentName','change','%</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22earned-badges-container\x22\x20class=\x22mt-4\x20flex\x20justify-center\x20gap-4\x20flex-wrap\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-xl\x20font-bold\x20mb-4\x22>ทบทวนคำตอบ</h4>\x0a\x20\x20\x20\x20','fa-fire\x20text-orange-500','ตอบถูก\x203\x20ข้อติดต่อกัน','idealAnswer'];_0x24f6=function(){return _0x418fdd;};return _0x24f6();}function showStudentLiveQuestionView(_0xced12c,_0x2f433a,_0x2cc209){const _0x458991=_0x40d1b2,_0x3e679b=_0xced12c[_0x458991(0x285)]||currentQuizData[_0x458991(0x4af)];let _0x39e2e7='';if(_0x3e679b===_0x458991(0x110)||_0x3e679b===_0x458991(0xfc)){const _0x51ac41=_0x3e679b===_0x458991(0xfc)?['ใช่','ไม่ใช่']:_0xced12c['options'];_0x39e2e7=_0x51ac41[_0x458991(0x263)]((_0x51a07e,_0x141c08)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22'+_0x141c08+_0x458991(0x287)+_0x51a07e+_0x458991(0x2cd))[_0x458991(0x17d)]('');}else{if(_0x3e679b===_0x458991(0x48c)){const _0x174b51=_0xced12c[_0x458991(0x3c7)]||[];_0x39e2e7=_0x174b51['map']((_0x2fb41f,_0x11ce3b)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22'+_0x11ce3b+'\x22\x20class=\x22live-answer-btn\x20p-4\x20rounded-lg\x20text-xl\x20text-center\x20bg-white\x20text-gray-800\x20hover:bg-indigo-100\x20transition-all\x20transform\x20hover:scale-105\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2fb41f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x458991(0x17d)]('');}else _0x3e679b===_0x458991(0x15d)&&(_0x39e2e7=_0x458991(0xca));}const _0xda207f=_0xced12c[_0x458991(0x32a)]||_0xced12c[_0x458991(0x89)],_0x429b4a=_0x458991(0x281)+(_0x2f433a+0x1)+'\x20/\x20'+_0x2cc209+_0x458991(0x184)+_0xda207f+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22live-options-container\x22\x20class=\x22w-full\x20max-w-4xl\x20grid\x20grid-cols-1\x20md:grid-cols-2\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x39e2e7+_0x458991(0x250);liveGameView[_0x458991(0x2b0)]=_0x429b4a;window[_0x458991(0x14f)]&&MathJax[_0x458991(0x210)]&&MathJax['typesetPromise']([liveGameView]);const _0x3bb5fb=document[_0x458991(0x439)](_0x458991(0x1be));_0x3bb5fb&&_0x3bb5fb['addEventListener'](_0x458991(0x128),()=>{const _0x1cfa86=_0x458991,_0x3fa884=document[_0x1cfa86(0x439)]('live-short-answer-input')['value'];handleLiveAnswer(_0x3fa884,_0xced12c);}),document[_0x458991(0x439)](_0x458991(0x113))[_0x458991(0x444)](_0x458991(0x128),_0x29929c=>{const _0x177f2b=_0x458991,_0x10df90=_0x29929c['target'][_0x177f2b(0x417)](_0x177f2b(0x4d4));if(_0x10df90){const _0x468076=parseInt(_0x10df90[_0x177f2b(0x307)][_0x177f2b(0x137)]);handleLiveAnswer(_0x468076,_0xced12c);}});}async function handleLiveAnswer(_0x4815b9,_0x3315be){const _0x44e1a4=_0x40d1b2;document['querySelectorAll']('.live-answer-btn,\x20#live-submit-short-answer-btn')['forEach'](_0xfff647=>_0xfff647['disabled']=!![]);const _0x1906f3=_0x3315be['questionType']||currentQuizData[_0x44e1a4(0x4af)];let _0x2f69af=![];if(_0x1906f3===_0x44e1a4(0x15d)){const _0x209880=(_0x4815b9||'')[_0x44e1a4(0x168)]()[_0x44e1a4(0x1a1)](),_0x1db47b=(_0x3315be['idealAnswer']||'')['toString']()['trim']();_0x2f69af=_0x209880[_0x44e1a4(0x4a2)]()===_0x1db47b[_0x44e1a4(0x4a2)]()&&_0x209880!=='';}else{if(_0x1906f3===_0x44e1a4(0x110))_0x2f69af=_0x4815b9===_0x3315be[_0x44e1a4(0x16d)];else{if(_0x1906f3===_0x44e1a4(0xfc)){const _0x46bcce=_0x3315be[_0x44e1a4(0xaa)];_0x2f69af=_0x4815b9===0x0&&_0x46bcce||_0x4815b9===0x1&&!_0x46bcce;}else{if(_0x1906f3==='matching_item'){const _0x4aff72=_0x3315be['allResponses'][_0x4815b9];_0x2f69af=_0x4aff72===_0x3315be['correctResponse'];}}}}const _0x4f4808=doc(db,_0x44e1a4(0x282)+appId+_0x44e1a4(0x35c),currentLiveGameId),_0x48cc66=await getDoc(_0x4f4808);if(!_0x48cc66['exists']())return;const _0x2b3501=_0x48cc66[_0x44e1a4(0x372)](),_0x2226fd=_0x2b3501['players'][currentStudentName];let _0x2bef2a=_0x2226fd[_0x44e1a4(0x120)]||[],_0x320bfd=_0x2226fd['correctStreak']||0x0;const _0x30004a={};let _0x24b128=0x0;if(_0x2b3501[_0x44e1a4(0x2af)]){const _0x274685=_0x2b3501[_0x44e1a4(0x2af)][_0x44e1a4(0x2a6)](),_0x5895d9=new Date()-_0x274685;if(_0x2f69af){const _0x18499b=0x3e8,_0x2e94a8=0x1f4,_0x1405a2=0x4e20;let _0x43e1bf=_0x5895d9/_0x1405a2;if(_0x43e1bf>0x1)_0x43e1bf=0x1;const _0x2d2b26=Math[_0x44e1a4(0x161)](_0x43e1bf*_0x2e94a8);_0x24b128=_0x18499b-_0x2d2b26,_0x5895d9<=0x1388&&!_0x2bef2a[_0x44e1a4(0x2fb)]('quick_thinker')&&_0x2bef2a[_0x44e1a4(0x255)](_0x44e1a4(0x4d5));}}_0x2f69af?(_0x320bfd++,_0x320bfd===0x3&&!_0x2bef2a[_0x44e1a4(0x2fb)](_0x44e1a4(0x18e))&&(_0x2bef2a[_0x44e1a4(0x255)]('on_fire'),_0x320bfd=0x0)):_0x320bfd=0x0,_0x2f69af&&(_0x30004a[_0x44e1a4(0x434)+currentStudentName+_0x44e1a4(0x40c)]=increment(_0x24b128)),_0x30004a['players.'+currentStudentName+_0x44e1a4(0x23f)]=_0x2bef2a,_0x30004a[_0x44e1a4(0x434)+currentStudentName+_0x44e1a4(0x437)]=_0x320bfd,_0x30004a[_0x44e1a4(0x434)+currentStudentName+_0x44e1a4(0x2e8)]=!![],_0x30004a[_0x44e1a4(0x434)+currentStudentName+_0x44e1a4(0x454)]=_0x2f69af,_0x30004a['players.'+currentStudentName+_0x44e1a4(0x393)]=_0x24b128,await updateDoc(_0x4f4808,_0x30004a),liveGameView[_0x44e1a4(0x2b0)]=_0x44e1a4(0x4f5);}function createQuizFromBank(){const _0x209f69=_0x40d1b2,_0x52d0c8=document['querySelectorAll'](_0x209f69(0x368));if(_0x52d0c8['length']===0x0){showMessage(_0x209f69(0x19f));return;}const _0x283bbd=[];_0x52d0c8[_0x209f69(0x4b7)](_0x359f48=>{const _0x39ea78=_0x209f69;_0x283bbd['push'](JSON['parse'](_0x359f48[_0x39ea78(0x91)]));});const _0x525c09={'topic':'แบบทดสอบจากคลังส่วนตัว','questions':_0x283bbd};displayGeneratedQuiz(_0x525c09);}function showAdminLobbyView(_0x585a64,_0x407f11){const _0x40c413=_0x40d1b2;showView(_0x40c413(0x26f));const _0x46834d=_0x40c413(0x36f)+_0x407f11+_0x40c413(0x3af)+_0x585a64+_0x40c413(0x35e);liveGameView[_0x40c413(0x2b0)]=_0x46834d,document['getElementById'](_0x40c413(0x11e))[_0x40c413(0x444)](_0x40c413(0x128),async()=>{const _0x1522c5=_0x40c413;if(!currentQuizData||!currentQuizData[_0x1522c5(0x449)]||currentQuizData[_0x1522c5(0x449)]['length']===0x0){showMessage('เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลคำถามสำหรับเกมนี้');return;}try{const _0x2e9349=doc(db,'artifacts/'+appId+_0x1522c5(0x35c),currentLiveGameId);await updateDoc(_0x2e9349,{'status':_0x1522c5(0x177),'currentQuestionIndex':0x0,'questionDisplayedAt':serverTimestamp()});const _0x51732e=currentQuizData[_0x1522c5(0x449)][0x0],_0x4e668e=currentQuizData[_0x1522c5(0x449)][_0x1522c5(0x1f3)];showAdminLiveQuestionView(_0x51732e,0x0,_0x4e668e);}catch(_0x2a6952){console[_0x1522c5(0x2db)]('Error\x20starting\x20game:',_0x2a6952),showMessage(_0x1522c5(0x3e9));}});}async function openGlobalLiveModal(){const _0x75a434=_0x40d1b2;if(allQuizzesGlobal[_0x75a434(0x1f3)]===0x0){const _0x80050c=await getDocs(collection(db,_0x75a434(0x282)+appId+_0x75a434(0x3ad)));allQuizzesGlobal=_0x80050c['docs']['map'](_0x19d4bb=>({'id':_0x19d4bb['id'],..._0x19d4bb['data']()}));}renderGlobalQuizList(''),document[_0x75a434(0x439)](_0x75a434(0x339))[_0x75a434(0x1ad)][_0x75a434(0x48b)]('hidden');}function renderGlobalQuizList(_0x537990=''){const _0x477f3b=_0x40d1b2,_0x4ca631=document[_0x477f3b(0x439)](_0x477f3b(0x1f0)),_0x4d42fc=_0x537990['toLowerCase']()[_0x477f3b(0x1a1)](),_0xfd437f=allQuizzesGlobal['map'](_0x493e2e=>({..._0x493e2e,'projectName':allProjects[_0x477f3b(0x18c)](_0x362337=>_0x362337['id']===_0x493e2e['projectId'])?.[_0x477f3b(0x34c)]||_0x493e2e['projectId']}))[_0x477f3b(0x3f2)](_0x3cdf3e=>(_0x3cdf3e[_0x477f3b(0x422)]||'')[_0x477f3b(0x4a2)]()[_0x477f3b(0x2fb)](_0x4d42fc)||(_0x3cdf3e[_0x477f3b(0x34c)]||'')[_0x477f3b(0x4a2)]()[_0x477f3b(0x2fb)](_0x4d42fc));_0x4ca631['innerHTML']=_0xfd437f['length']?_0xfd437f[_0x477f3b(0x263)](_0x174206=>_0x477f3b(0x20d)+_0x174206['id']+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20text-left\x20p-2\x20border-b\x20hover:bg-gray-50\x20flex\x20items-center\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22font-semibold\x22>\x0a\x20\x20'+(_0x174206['topic']||'(ไม่มีชื่อ)')+_0x477f3b(0x477)+(_0x174206[_0x477f3b(0x449)]?.[_0x477f3b(0x1f3)]||0x0)+_0x477f3b(0x2ff)+_0x174206[_0x477f3b(0x34c)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-play\x20text-purple-600\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20')[_0x477f3b(0x17d)](''):_0x477f3b(0xde),selectedGlobalQuizId=null,document[_0x477f3b(0x439)](_0x477f3b(0x337))[_0x477f3b(0x247)]=!![],_0x4ca631[_0x477f3b(0x321)](_0x477f3b(0xf8))['forEach'](_0xc387b0=>{const _0x23eb9f=_0x477f3b;_0xc387b0['addEventListener'](_0x23eb9f(0x128),()=>{const _0x3a8c1d=_0x23eb9f;selectedGlobalQuizId=_0xc387b0[_0x3a8c1d(0x307)]['id'],_0x4ca631['querySelectorAll'](_0x3a8c1d(0x3e6))[_0x3a8c1d(0x4b7)](_0x5ae7b1=>_0x5ae7b1[_0x3a8c1d(0x1ad)][_0x3a8c1d(0x48b)](_0x3a8c1d(0x49c),'ring-2','ring-purple-400')),_0xc387b0[_0x3a8c1d(0x1ad)][_0x3a8c1d(0x136)](_0x3a8c1d(0x49c),_0x3a8c1d(0x1d4),_0x3a8c1d(0x22b)),document['getElementById']('confirm-global-live-btn')[_0x3a8c1d(0x247)]=![];});});}function listenForLiveGameUpdates(){const _0x46c137=_0x40d1b2;if(unsubscribeLiveGameListener)unsubscribeLiveGameListener();const _0x2fc042=doc(db,_0x46c137(0x282)+appId+_0x46c137(0x35c),currentLiveGameId);unsubscribeLiveGameListener=onSnapshot(_0x2fc042,_0x55ac8d=>{const _0x42c2b9=_0x46c137;if(!_0x55ac8d[_0x42c2b9(0x474)]()){showMessage(_0x42c2b9(0x1b9)),showView(currentMode);return;}const _0x49818f=_0x55ac8d[_0x42c2b9(0x372)]();!currentQuizData&&_0x49818f[_0x42c2b9(0x23b)]&&((async()=>{const _0x28ec93=_0x42c2b9;try{const _0x1e2fd7=doc(db,_0x28ec93(0x282)+appId+_0x28ec93(0x3ad),_0x49818f[_0x28ec93(0x23b)]),_0x375152=await getDoc(_0x1e2fd7);_0x375152[_0x28ec93(0x474)]()&&(currentQuizData={'id':_0x375152['id'],..._0x375152['data']()});}catch(_0x110775){console[_0x28ec93(0x2db)]('Failed\x20to\x20fetch\x20quiz\x20for\x20admin:',_0x110775);}})());switch(_0x49818f['status']){case _0x42c2b9(0xd4):if(currentMode===_0x42c2b9(0x4d0)){const _0x42e1f6=_0x49818f[_0x42c2b9(0x396)]?Object[_0x42c2b9(0x1da)](_0x49818f['players']):[];document[_0x42c2b9(0x439)](_0x42c2b9(0x32d))['textContent']=_0x42e1f6[_0x42c2b9(0x1f3)],document[_0x42c2b9(0x439)]('player-list-lobby')[_0x42c2b9(0x2b0)]=_0x42e1f6['map'](_0x1d582f=>'<span\x20class=\x22bg-white/30\x20px-3\x20py-1\x20rounded-full\x20text-sm\x22>'+_0x1d582f+_0x42c2b9(0x292))[_0x42c2b9(0x17d)]('');const _0x7de26b=document[_0x42c2b9(0x439)](_0x42c2b9(0x11e));_0x7de26b&&(_0x7de26b['disabled']=_0x42e1f6[_0x42c2b9(0x1f3)]===0x0);}else showView(_0x42c2b9(0x26f)),liveGameView[_0x42c2b9(0x2b0)]=_0x42c2b9(0x47b)+currentStudentName+'</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-8\x22>รอผู้ควบคุมเริ่มเกมสักครู่...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';break;case _0x42c2b9(0x177):const _0x5a277d=_0x49818f[_0x42c2b9(0x21a)];if(currentQuizData&&currentQuizData['questions'][_0x5a277d]){const _0x5253ae=currentQuizData[_0x42c2b9(0x449)][_0x5a277d],_0x31560f=currentQuizData['questions'][_0x42c2b9(0x1f3)];if(currentMode===_0x42c2b9(0x4d0)){lastRenderedAdminQuestionIndex!==_0x5a277d&&(showAdminLiveQuestionView(_0x5253ae,_0x5a277d,_0x31560f),lastRenderedAdminQuestionIndex=_0x5a277d);const _0x54430e=document[_0x42c2b9(0x439)]('answer-counter');if(_0x54430e&&_0x49818f[_0x42c2b9(0x396)]){const _0x11c32e=Object[_0x42c2b9(0x1da)](_0x49818f[_0x42c2b9(0x396)])['length'],_0xf40230=Object[_0x42c2b9(0x4ce)](_0x49818f['players'])[_0x42c2b9(0x3f2)](_0x44b60b=>_0x44b60b[_0x42c2b9(0x14c)]===!![])[_0x42c2b9(0x1f3)];_0x54430e[_0x42c2b9(0x4ef)]=_0xf40230+'/'+_0x11c32e,_0x11c32e>0x0&&_0xf40230===_0x11c32e&&_0x49818f[_0x42c2b9(0x49d)]!==_0x42c2b9(0x131)&&revealAnswerForAdmin(_0x5a277d,_0x31560f);}}else{const _0x444fa7=_0x49818f[_0x42c2b9(0x396)][currentStudentName];if(_0x49818f[_0x42c2b9(0x49d)]===_0x42c2b9(0x131)){if(_0x444fa7[_0x42c2b9(0x14c)]){const _0x1e343c=_0x444fa7[_0x42c2b9(0x106)],_0x420363=_0x444fa7[_0x42c2b9(0x4ac)]||0x0,_0x3556d9=_0x1e343c?'คำตอบถูกต้อง!\x20+'+_0x420363+'\x20คะแนน':_0x42c2b9(0x1f8);liveGameView[_0x42c2b9(0x2b0)]=_0x42c2b9(0xe1)+_0x3556d9+'</h2>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<p\x20class=\x22mt-8\x22>รอผู้ควบคุมไปข้อต่อไป...</p>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x20</div>';}else liveGameView['innerHTML']=_0x42c2b9(0xc4);}else!_0x444fa7[_0x42c2b9(0x14c)]&&showStudentLiveQuestionView(_0x5253ae,_0x5a277d,_0x31560f);}}break;case _0x42c2b9(0xb2):showPodiumView(_0x49818f['players']);break;}});}async function authenticateUser(){const _0x35b381=_0x40d1b2;try{typeof __initial_auth_token!==_0x35b381(0x288)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x5901c2){console['error']('Authentication\x20failed:',_0x5901c2),showMessage(_0x35b381(0x27a));}}function showView(_0x466c09){const _0x23ded2=_0x40d1b2,_0x2431db=[_0x23ded2(0x118),_0x23ded2(0x2f0),'project-dashboard-view',_0x23ded2(0x461),_0x23ded2(0x2b7),_0x23ded2(0x114)];_0x2431db[_0x23ded2(0x4b7)](_0x3198ee=>document[_0x23ded2(0x439)](_0x3198ee)?.[_0x23ded2(0x1ad)][_0x23ded2(0x136)](_0x23ded2(0x2bb)));if(_0x466c09==='admin-dashboard')adminView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb)),projectDashboardView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb));else{if(_0x466c09===_0x23ded2(0x39a))studentView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb)),studentInitialView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb)),studentNameSelectionView[_0x23ded2(0x1ad)][_0x23ded2(0x136)](_0x23ded2(0x2bb)),studentQuizArea[_0x23ded2(0x1ad)][_0x23ded2(0x136)](_0x23ded2(0x2bb)),studentResultArea[_0x23ded2(0x1ad)][_0x23ded2(0x136)](_0x23ded2(0x2bb)),studentReadingArea[_0x23ded2(0x1ad)]['add'](_0x23ded2(0x2bb)),studentJoinGameView[_0x23ded2(0x1ad)]['add'](_0x23ded2(0x2bb));else{if(_0x466c09===_0x23ded2(0x1c6))adminView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb)),projectDetailView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb));else{if(_0x466c09===_0x23ded2(0x4d6))adminView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb)),quizResultsView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)](_0x23ded2(0x2bb));else _0x466c09===_0x23ded2(0x26f)&&liveGameView[_0x23ded2(0x1ad)][_0x23ded2(0x48b)]('hidden');}}}}function showJoinGameView(){const _0x567b4f=_0x40d1b2;studentInitialView[_0x567b4f(0x1ad)][_0x567b4f(0x136)](_0x567b4f(0x2bb)),studentJoinGameView[_0x567b4f(0x1ad)][_0x567b4f(0x48b)](_0x567b4f(0x2bb));}function setupEventListeners(){const _0x1df4f8=_0x40d1b2;document[_0x1df4f8(0x439)]('mode-switcher-btn')['addEventListener'](_0x1df4f8(0x128),handleModeSwitch),document[_0x1df4f8(0x439)](_0x1df4f8(0x182))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x4cccf6=_0x1df4f8;currentProjectId=null,currentProjectData=null;if(unsubscribeStudentsListener)unsubscribeStudentsListener();if(unsubscribeQuizzesListener)unsubscribeQuizzesListener();if(unsubscribeStudentProfilesListener)unsubscribeStudentProfilesListener();showView(_0x4cccf6(0x213));}),document[_0x1df4f8(0x439)](_0x1df4f8(0x244))['addEventListener'](_0x1df4f8(0x128),()=>{const _0x1dc052=_0x1df4f8;if(unsubscribeSubmissionsListener)unsubscribeSubmissionsListener();showView(_0x1dc052(0x1c6));}),document[_0x1df4f8(0x439)](_0x1df4f8(0x1a4))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x5b194f=_0x1df4f8;showView(_0x5b194f(0x213));}),document['getElementById']('modal-close-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>messageModal[_0x1df4f8(0x1ad)]['add'](_0x1df4f8(0x2bb))),document[_0x1df4f8(0x439)](_0x1df4f8(0x4c4))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>createProjectModal['classList'][_0x1df4f8(0x48b)](_0x1df4f8(0x2bb))),document[_0x1df4f8(0x439)](_0x1df4f8(0x4df))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>createProjectModal[_0x1df4f8(0x1ad)][_0x1df4f8(0x136)]('hidden')),document[_0x1df4f8(0x439)]('cancel-admin-login-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>adminPasswordModal['classList'][_0x1df4f8(0x136)](_0x1df4f8(0x2bb))),document[_0x1df4f8(0x439)]('confirm-admin-login-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),handleAdminLogin),document[_0x1df4f8(0x439)]('admin-password-input')['addEventListener'](_0x1df4f8(0x447),_0x42e3d2=>{const _0x3fac50=_0x1df4f8;if(_0x42e3d2['key']===_0x3fac50(0x21b))handleAdminLogin();}),document['getElementById'](_0x1df4f8(0x193))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x12ff12=_0x1df4f8;confirmationModal[_0x12ff12(0x1ad)][_0x12ff12(0x136)]('hidden'),confirmAction=null;}),document[_0x1df4f8(0x439)](_0x1df4f8(0x31e))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x4671c6=_0x1df4f8;confirmAction&&confirmAction(),confirmationModal[_0x4671c6(0x1ad)]['add'](_0x4671c6(0x2bb)),confirmAction=null;}),document[_0x1df4f8(0x439)](_0x1df4f8(0x3ab))['addEventListener']('click',()=>renameQuizModal[_0x1df4f8(0x1ad)][_0x1df4f8(0x136)]('hidden')),document[_0x1df4f8(0x439)]('confirm-rename-quiz-btn')['addEventListener']('click',confirmRenameQuiz),document['getElementById']('cancel-move-quiz-btn')['addEventListener'](_0x1df4f8(0x128),()=>moveQuizModal[_0x1df4f8(0x1ad)][_0x1df4f8(0x136)](_0x1df4f8(0x2bb))),document[_0x1df4f8(0x439)](_0x1df4f8(0x421))['addEventListener'](_0x1df4f8(0x128),confirmMoveQuiz),document[_0x1df4f8(0x439)](_0x1df4f8(0xcb))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>quizSettingsModal[_0x1df4f8(0x1ad)][_0x1df4f8(0x136)](_0x1df4f8(0x2bb))),document[_0x1df4f8(0x439)](_0x1df4f8(0x331))[_0x1df4f8(0x444)](_0x1df4f8(0x128),confirmQuizSettings),document[_0x1df4f8(0x439)](_0x1df4f8(0x35b))[_0x1df4f8(0x444)]('click',()=>quizStatusModal[_0x1df4f8(0x1ad)]['add']('hidden')),document[_0x1df4f8(0x439)]('confirm-quiz-status-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),confirmQuizStatus),document['getElementById'](_0x1df4f8(0x373))[_0x1df4f8(0x444)](_0x1df4f8(0x128),openGlobalLiveModal),document[_0x1df4f8(0x439)](_0x1df4f8(0x32e))[_0x1df4f8(0x444)]('click',()=>{const _0x2d90a5=_0x1df4f8;document[_0x2d90a5(0x439)](_0x2d90a5(0x339))[_0x2d90a5(0x1ad)][_0x2d90a5(0x136)](_0x2d90a5(0x2bb)),selectedGlobalQuizId=null;}),document[_0x1df4f8(0x439)](_0x1df4f8(0x10e))[_0x1df4f8(0x444)](_0x1df4f8(0x2e0),_0x39aaf7=>renderGlobalQuizList(_0x39aaf7['target'][_0x1df4f8(0x91)])),document[_0x1df4f8(0x439)](_0x1df4f8(0x337))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x57d624=_0x1df4f8,_0x39735a=selectedGlobalQuizId;if(!_0x39735a)return;document[_0x57d624(0x439)](_0x57d624(0x339))[_0x57d624(0x1ad)][_0x57d624(0x136)](_0x57d624(0x2bb)),handleStartLiveRace(_0x39735a);}),document[_0x1df4f8(0x439)](_0x1df4f8(0xeb))['addEventListener'](_0x1df4f8(0x2e0),renderProjects),document['getElementById']('project-sort-select')['addEventListener']('change',renderProjects),document['getElementById'](_0x1df4f8(0x130))[_0x1df4f8(0x444)](_0x1df4f8(0x2e0),renderQuizzes),manageTab['addEventListener'](_0x1df4f8(0x128),()=>switchProjectTab(_0x1df4f8(0x493))),resultsTab['addEventListener'](_0x1df4f8(0x128),()=>switchProjectTab(_0x1df4f8(0x1fe))),leaderboardTab[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>switchProjectTab(_0x1df4f8(0x335))),document['getElementById'](_0x1df4f8(0x100))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>switchQuizDetailTab('analytics')),document[_0x1df4f8(0x439)]('scores-tab-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>switchQuizDetailTab(_0x1df4f8(0x224))),document[_0x1df4f8(0x439)](_0x1df4f8(0x33b))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>switchQuizDetailTab(_0x1df4f8(0x29a))),document['getElementById']('analyze-strengths-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),handleAnalyzeClass),generateWorksheetBtn[_0x1df4f8(0x444)](_0x1df4f8(0x128),generateWorksheet);const _0x40abd4=document['getElementById'](_0x1df4f8(0x95)),_0x1cf2aa=document[_0x1df4f8(0x439)]('link-input-area');topicTab[_0x1df4f8(0x444)]('click',()=>{const _0x509a63=_0x1df4f8;topicTab[_0x509a63(0x1ad)][_0x509a63(0x136)](_0x509a63(0x436)),textTab['classList'][_0x509a63(0x48b)]('active'),fileTab[_0x509a63(0x1ad)][_0x509a63(0x48b)](_0x509a63(0x436)),worksheetTab[_0x509a63(0x1ad)][_0x509a63(0x48b)](_0x509a63(0x436));if(_0x40abd4)_0x40abd4['classList'][_0x509a63(0x48b)](_0x509a63(0x436));topicInputArea[_0x509a63(0x1ad)][_0x509a63(0x48b)]('hidden'),textInputArea['classList']['add']('hidden'),fileInputArea[_0x509a63(0x1ad)][_0x509a63(0x136)]('hidden'),worksheetInputArea['classList'][_0x509a63(0x136)](_0x509a63(0x2bb));if(_0x1cf2aa)_0x1cf2aa[_0x509a63(0x1ad)][_0x509a63(0x136)](_0x509a63(0x2bb));}),textTab[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x45442e=_0x1df4f8;textTab[_0x45442e(0x1ad)][_0x45442e(0x136)](_0x45442e(0x436)),topicTab[_0x45442e(0x1ad)][_0x45442e(0x48b)](_0x45442e(0x436)),fileTab[_0x45442e(0x1ad)][_0x45442e(0x48b)](_0x45442e(0x436)),worksheetTab['classList']['remove'](_0x45442e(0x436));if(_0x40abd4)_0x40abd4[_0x45442e(0x1ad)][_0x45442e(0x48b)](_0x45442e(0x436));textInputArea[_0x45442e(0x1ad)][_0x45442e(0x48b)]('hidden'),topicInputArea[_0x45442e(0x1ad)]['add'](_0x45442e(0x2bb)),fileInputArea[_0x45442e(0x1ad)][_0x45442e(0x136)](_0x45442e(0x2bb)),worksheetInputArea[_0x45442e(0x1ad)][_0x45442e(0x136)](_0x45442e(0x2bb));if(_0x1cf2aa)_0x1cf2aa[_0x45442e(0x1ad)][_0x45442e(0x136)](_0x45442e(0x2bb));}),fileTab[_0x1df4f8(0x444)]('click',()=>{const _0x31eba1=_0x1df4f8;fileTab['classList']['add'](_0x31eba1(0x436)),topicTab[_0x31eba1(0x1ad)][_0x31eba1(0x48b)]('active'),textTab[_0x31eba1(0x1ad)][_0x31eba1(0x48b)](_0x31eba1(0x436)),worksheetTab[_0x31eba1(0x1ad)]['remove'](_0x31eba1(0x436));if(_0x40abd4)_0x40abd4[_0x31eba1(0x1ad)][_0x31eba1(0x48b)](_0x31eba1(0x436));fileInputArea['classList'][_0x31eba1(0x48b)]('hidden'),topicInputArea[_0x31eba1(0x1ad)][_0x31eba1(0x136)]('hidden'),textInputArea['classList'][_0x31eba1(0x136)](_0x31eba1(0x2bb)),worksheetInputArea[_0x31eba1(0x1ad)][_0x31eba1(0x136)](_0x31eba1(0x2bb));if(_0x1cf2aa)_0x1cf2aa[_0x31eba1(0x1ad)][_0x31eba1(0x136)](_0x31eba1(0x2bb));}),worksheetTab[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x296d32=_0x1df4f8;worksheetTab[_0x296d32(0x1ad)]['add'](_0x296d32(0x436)),topicTab[_0x296d32(0x1ad)][_0x296d32(0x48b)](_0x296d32(0x436)),textTab[_0x296d32(0x1ad)][_0x296d32(0x48b)]('active'),fileTab[_0x296d32(0x1ad)][_0x296d32(0x48b)](_0x296d32(0x436));if(_0x40abd4)_0x40abd4[_0x296d32(0x1ad)][_0x296d32(0x48b)]('active');worksheetInputArea['classList'][_0x296d32(0x48b)](_0x296d32(0x2bb)),topicInputArea[_0x296d32(0x1ad)]['add'](_0x296d32(0x2bb)),textInputArea[_0x296d32(0x1ad)]['add']('hidden'),fileInputArea[_0x296d32(0x1ad)][_0x296d32(0x136)](_0x296d32(0x2bb));if(_0x1cf2aa)_0x1cf2aa['classList']['add'](_0x296d32(0x2bb));});const _0x429efc=document[_0x1df4f8(0x439)](_0x1df4f8(0x261)),_0x5a4d3f=document[_0x1df4f8(0x439)](_0x1df4f8(0x4bb));_0x429efc&&_0x429efc[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x58b3e7=_0x1df4f8;topicTab[_0x58b3e7(0x1ad)]['remove']('active'),textTab['classList'][_0x58b3e7(0x48b)](_0x58b3e7(0x436)),fileTab[_0x58b3e7(0x1ad)]['remove'](_0x58b3e7(0x436)),worksheetTab[_0x58b3e7(0x1ad)][_0x58b3e7(0x48b)]('active');if(_0x40abd4)_0x40abd4[_0x58b3e7(0x1ad)][_0x58b3e7(0x48b)](_0x58b3e7(0x436));_0x429efc[_0x58b3e7(0x1ad)][_0x58b3e7(0x136)](_0x58b3e7(0x436)),topicInputArea[_0x58b3e7(0x1ad)][_0x58b3e7(0x136)](_0x58b3e7(0x2bb)),textInputArea[_0x58b3e7(0x1ad)][_0x58b3e7(0x136)](_0x58b3e7(0x2bb)),fileInputArea[_0x58b3e7(0x1ad)][_0x58b3e7(0x136)](_0x58b3e7(0x2bb)),worksheetInputArea['classList']['add'](_0x58b3e7(0x2bb));if(_0x1cf2aa)_0x1cf2aa['classList'][_0x58b3e7(0x136)](_0x58b3e7(0x2bb));_0x5a4d3f[_0x58b3e7(0x1ad)][_0x58b3e7(0x48b)](_0x58b3e7(0x2bb)),displayQuestionBank();});_0x40abd4&&(_0x40abd4[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x437d4f=_0x1df4f8;topicTab['classList'][_0x437d4f(0x48b)](_0x437d4f(0x436)),textTab[_0x437d4f(0x1ad)][_0x437d4f(0x48b)](_0x437d4f(0x436)),fileTab['classList'][_0x437d4f(0x48b)](_0x437d4f(0x436)),worksheetTab[_0x437d4f(0x1ad)][_0x437d4f(0x48b)](_0x437d4f(0x436)),_0x40abd4[_0x437d4f(0x1ad)][_0x437d4f(0x136)](_0x437d4f(0x436)),topicInputArea[_0x437d4f(0x1ad)][_0x437d4f(0x136)]('hidden'),textInputArea[_0x437d4f(0x1ad)][_0x437d4f(0x136)](_0x437d4f(0x2bb)),fileInputArea[_0x437d4f(0x1ad)]['add'](_0x437d4f(0x2bb)),worksheetInputArea[_0x437d4f(0x1ad)][_0x437d4f(0x136)](_0x437d4f(0x2bb)),_0x1cf2aa['classList'][_0x437d4f(0x48b)](_0x437d4f(0x2bb));}),document[_0x1df4f8(0x439)](_0x1df4f8(0x155))['addEventListener'](_0x1df4f8(0x128),handleGenerateFromLink));loadQuizBtn[_0x1df4f8(0x444)]('click',handleLoadQuiz),startQuizBtn['addEventListener']('click',()=>{const _0x351725=_0x1df4f8,_0x32bc86=document[_0x351725(0x439)](_0x351725(0x3c8));currentStudentName=_0x32bc86[_0x351725(0x91)];if(!currentStudentName){showMessage(_0x351725(0x302));return;}studentNameSelectionView['classList'][_0x351725(0x136)]('hidden'),quizStartTime=new Date(),displayQuizForStudent(currentQuizData);}),document[_0x1df4f8(0x439)](_0x1df4f8(0x1ee))['addEventListener'](_0x1df4f8(0x128),showJoinGameView),document[_0x1df4f8(0x439)]('confirm-join-game-btn')[_0x1df4f8(0x444)]('click',handleJoinLiveGame),document[_0x1df4f8(0x439)]('back-to-student-initial-btn')['addEventListener'](_0x1df4f8(0x128),()=>showView(_0x1df4f8(0x39a)));const _0x362558=()=>{const _0x4fceab=_0x1df4f8,_0x183840=document[_0x4fceab(0x439)]('results-quiz-title')[_0x4fceab(0x4ef)][_0x4fceab(0x2f9)](/[^a-z0-9]/gi,'_')[_0x4fceab(0x4a2)]();return _0x4fceab(0x2ee)+(_0x183840||_0x4fceab(0x25f));};document[_0x1df4f8(0x439)](_0x1df4f8(0x356))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>exportTableAsImage(_0x1df4f8(0x2c8),_0x362558())),document[_0x1df4f8(0x439)]('export-pdf-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>exportTableAsPDF('results-table',_0x362558())),document[_0x1df4f8(0x439)](_0x1df4f8(0x468))['addEventListener'](_0x1df4f8(0x128),()=>exportTableAsWord(_0x1df4f8(0x2c8),_0x362558())),document[_0x1df4f8(0x439)]('export-excel-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>exportTableAsExcel('results-table',_0x362558()));const _0x365fcf=()=>{const _0x5b165e=_0x1df4f8,_0x565f2f=document[_0x5b165e(0x439)](_0x5b165e(0x415))[_0x5b165e(0x4ef)][_0x5b165e(0x2f9)](/[^a-z0-9]/gi,'_')[_0x5b165e(0x4a2)]();return _0x5b165e(0x3d5)+(_0x565f2f||'quiz');};document['getElementById'](_0x1df4f8(0x2e9))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>exportTableAsImage(_0x1df4f8(0x329),_0x365fcf())),document[_0x1df4f8(0x439)]('export-leaderboard-pdf-btn')['addEventListener']('click',()=>exportTableAsPDF(_0x1df4f8(0x212),_0x365fcf())),document[_0x1df4f8(0x439)]('export-leaderboard-word-btn')[_0x1df4f8(0x444)]('click',()=>exportTableAsWord(_0x1df4f8(0x329),_0x365fcf())),document[_0x1df4f8(0x439)](_0x1df4f8(0xea))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>exportTableAsExcel(_0x1df4f8(0x212),_0x365fcf())),projectQuizzesList[_0x1df4f8(0x444)]('click',async _0x98108=>{const _0x56d377=_0x1df4f8,_0xf4c78=_0x98108[_0x56d377(0x16e)]['closest'](_0x56d377(0x315)),_0x45793f=_0x98108[_0x56d377(0x16e)]['closest']('.delete-quiz-btn'),_0x4ac806=_0x98108[_0x56d377(0x16e)]['closest'](_0x56d377(0x430)),_0x50d11b=_0x98108[_0x56d377(0x16e)]['closest']('.start-presentation-list-btn'),_0xaeb71e=_0x98108[_0x56d377(0x16e)][_0x56d377(0x417)]('.admin-try-quiz-list-btn'),_0x4ea16f=_0x98108[_0x56d377(0x16e)][_0x56d377(0x417)]('.rename-quiz-btn'),_0x58abbf=_0x98108[_0x56d377(0x16e)][_0x56d377(0x417)](_0x56d377(0x4b9)),_0x2920cf=_0x98108[_0x56d377(0x16e)]['closest'](_0x56d377(0x3b7)),_0x4b6db2=_0x98108['target'][_0x56d377(0x417)](_0x56d377(0xf5)),_0x171235=_0x98108[_0x56d377(0x16e)]['closest'](_0x56d377(0x1c3)),_0x3868d4=_0x98108[_0x56d377(0x16e)]['closest'](_0x56d377(0x42f)),_0x3be48a=_0x98108[_0x56d377(0x16e)]['closest'](_0x56d377(0x3c5));if(_0x3be48a){const _0x4af894=_0x3be48a['dataset'][_0x56d377(0x23b)];handleOpenQuizEditor(_0x4af894);}else{if(_0xf4c78){const _0x5b356b=_0xf4c78[_0x56d377(0x307)]['quizId'];handleToggleStarQuiz(_0x5b356b);}else{if(_0x3868d4){const _0x512ba4=_0x3868d4[_0x56d377(0x307)]['quizId'];handleStartLiveRace(_0x512ba4);}else{if(_0x45793f){const _0x13aa1f=_0x45793f[_0x56d377(0x307)][_0x56d377(0x23b)],_0xab6330=_0x45793f[_0x56d377(0x307)][_0x56d377(0x422)];showConfirmation(_0x56d377(0x1b0)+_0xab6330+_0x56d377(0x179),()=>handleDeleteQuiz(_0x13aa1f));}else{if(_0x4ac806){const _0x334301=_0x4ac806[_0x56d377(0x307)][_0x56d377(0x23b)];copyTextToClipboard(_0x334301,_0x56d377(0x1f2));}else{if(_0x50d11b){const _0x3c3bae=_0x50d11b[_0x56d377(0x307)][_0x56d377(0x23b)],_0x3aeb96=doc(db,_0x56d377(0x282)+appId+'/public/data/quizzes',_0x3c3bae),_0x2a7c5a=await getDoc(_0x3aeb96);if(_0x2a7c5a[_0x56d377(0x474)]()){const _0xfd96e9=sanitizeQuizData({'id':_0x2a7c5a['id'],..._0x2a7c5a['data']()});startPresentation(_0xfd96e9);}else showMessage(_0x56d377(0x308));}else{if(_0xaeb71e){const _0x41852b=_0xaeb71e['dataset'][_0x56d377(0x23b)],_0x2ac6a4=doc(db,_0x56d377(0x282)+appId+_0x56d377(0x3ad),_0x41852b),_0x55b06a=await getDoc(_0x2ac6a4);_0x55b06a[_0x56d377(0x474)]()?(currentQuizData=sanitizeQuizData({'id':_0x55b06a['id'],..._0x55b06a[_0x56d377(0x372)]()}),startAdminTest()):showMessage(_0x56d377(0x308));}else{if(_0x4ea16f){const _0x2c5917=_0x4ea16f[_0x56d377(0x307)][_0x56d377(0x23b)],_0x4c563a=_0x4ea16f[_0x56d377(0x307)]['topic'];handleRenameQuiz(_0x2c5917,_0x4c563a);}else{if(_0x58abbf){const _0x30a82e=_0x58abbf['dataset'][_0x56d377(0x23b)];handleMoveQuiz(_0x30a82e);}else{if(_0x2920cf){const _0xf2afa3=_0x2920cf['dataset'][_0x56d377(0x23b)];handleQuizSettings(_0xf2afa3);}else{if(_0x4b6db2){const _0x3fdddf=_0x4b6db2[_0x56d377(0x307)][_0x56d377(0x23b)];handleQuizStatus(_0x3fdddf);}else{if(_0x171235){const _0x571296=_0x171235[_0x56d377(0x307)][_0x56d377(0x23b)];handleDuplicateQuiz(_0x571296);}}}}}}}}}}}}}),document[_0x1df4f8(0x439)](_0x1df4f8(0x4b0))[_0x1df4f8(0x444)](_0x1df4f8(0x128),closePresentation),document[_0x1df4f8(0x439)](_0x1df4f8(0x425))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{currentPresentationSlide>0x0&&(currentPresentationSlide--,renderPresentationSlide(currentPresentationSlide));}),document[_0x1df4f8(0x439)]('next-question-btn')[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x7966f0=_0x1df4f8;currentQuizData['questions']&&currentPresentationSlide<currentQuizData[_0x7966f0(0x449)][_0x7966f0(0x1f3)]-0x1&&(currentPresentationSlide++,renderPresentationSlide(currentPresentationSlide));}),document[_0x1df4f8(0x444)](_0x1df4f8(0x99),()=>{const _0x362535=_0x1df4f8;!document[_0x362535(0x383)]&&(presentationModal[_0x362535(0x442)][_0x362535(0x429)]='none');}),document[_0x1df4f8(0x439)](_0x1df4f8(0x4f1))[_0x1df4f8(0x444)]('click',handleDeleteAllStudents),studentList[_0x1df4f8(0x444)](_0x1df4f8(0x128),_0x47e1b4=>{const _0x54f76e=_0x1df4f8,_0x43df9a=_0x47e1b4['target'][_0x54f76e(0x417)](_0x54f76e(0x258));if(_0x43df9a){const _0x5d4389=_0x43df9a[_0x54f76e(0x307)][_0x54f76e(0x374)];handleDeleteStudent(_0x5d4389);}}),fileUploadInput[_0x1df4f8(0x444)](_0x1df4f8(0x375),handleFileUpload),document[_0x1df4f8(0x439)](_0x1df4f8(0x1f6))[_0x1df4f8(0x444)](_0x1df4f8(0x375),_0x3bc393=>{const _0x4ce1a7=_0x1df4f8,_0x36afbc=document['getElementById'](_0x4ce1a7(0x36d)),_0x5966ce=document[_0x4ce1a7(0x439)](_0x4ce1a7(0x3de)),_0x3e8b2b=document[_0x4ce1a7(0x439)](_0x4ce1a7(0x219));_0x3bc393[_0x4ce1a7(0x16e)][_0x4ce1a7(0x91)]===_0x4ce1a7(0x4a9)?_0x36afbc['classList'][_0x4ce1a7(0x136)]('hidden'):(_0x36afbc['classList']['remove'](_0x4ce1a7(0x2bb)),_0x3bc393['target']['value']==='whole_quiz'?(_0x5966ce[_0x4ce1a7(0x4ef)]=_0x4ce1a7(0x2bd),_0x3e8b2b[_0x4ce1a7(0x91)]='10'):(_0x5966ce[_0x4ce1a7(0x4ef)]=_0x4ce1a7(0x242),_0x3e8b2b['value']='30'));}),document[_0x1df4f8(0x439)]('quiz-type-select')[_0x1df4f8(0x444)]('change',_0x443b25=>{const _0x20a6b2=_0x1df4f8,_0x31b7fd=document[_0x20a6b2(0x439)](_0x20a6b2(0x3a2)),_0x1dab60=_0x443b25[_0x20a6b2(0x16e)][_0x20a6b2(0x91)],_0x9107c6=document[_0x20a6b2(0x1e8)](_0x20a6b2(0x158)),_0x11bef2=document[_0x20a6b2(0x439)]('passing-score-input'),_0x43ba16=document[_0x20a6b2(0x439)](_0x20a6b2(0x19b));_0x1dab60===_0x20a6b2(0x3cc)?_0x9107c6[_0x20a6b2(0x4ef)]=_0x20a6b2(0x218):_0x9107c6[_0x20a6b2(0x4ef)]=_0x20a6b2(0x435),_0x1dab60==='multiple_choice'||_0x1dab60===_0x20a6b2(0x42c)||_0x1dab60===_0x20a6b2(0x187)?_0x31b7fd[_0x20a6b2(0x1ad)]['remove'](_0x20a6b2(0x2bb)):_0x31b7fd['classList'][_0x20a6b2(0x136)](_0x20a6b2(0x2bb)),_0x11bef2[_0x20a6b2(0x237)]=_0x43ba16[_0x20a6b2(0x91)];}),document['getElementById'](_0x1df4f8(0x19b))['addEventListener'](_0x1df4f8(0x2e0),_0x2938ce=>{const _0x5c2b95=_0x1df4f8;document[_0x5c2b95(0x439)](_0x5c2b95(0x3e7))[_0x5c2b95(0x237)]=_0x2938ce[_0x5c2b95(0x16e)]['value'];}),document[_0x1df4f8(0x439)](_0x1df4f8(0x4bf))[_0x1df4f8(0x444)](_0x1df4f8(0x375),_0x8288e8=>{const _0x9c5a44=_0x1df4f8,_0xbc9ac9=document[_0x9c5a44(0x439)]('modal-timer-duration-container'),_0xc1abf7=document[_0x9c5a44(0x439)](_0x9c5a44(0x2c0)),_0x26b23d=document[_0x9c5a44(0x439)](_0x9c5a44(0xe6));_0x8288e8[_0x9c5a44(0x16e)]['value']==='none'?_0xbc9ac9[_0x9c5a44(0x1ad)][_0x9c5a44(0x136)](_0x9c5a44(0x2bb)):(_0xbc9ac9['classList']['remove'](_0x9c5a44(0x2bb)),_0x8288e8[_0x9c5a44(0x16e)][_0x9c5a44(0x91)]===_0x9c5a44(0xd7)?_0xc1abf7[_0x9c5a44(0x4ef)]='ระยะเวลา\x20(นาที):':_0xc1abf7['textContent']=_0x9c5a44(0x242));}),document[_0x1df4f8(0x439)]('cancel-quiz-edits-btn')['addEventListener']('click',()=>{const _0x1fc891=_0x1df4f8;document['getElementById']('quiz-editor-modal')[_0x1fc891(0x1ad)][_0x1fc891(0x136)](_0x1fc891(0x2bb));}),document['getElementById'](_0x1df4f8(0x423))[_0x1df4f8(0x444)](_0x1df4f8(0x128),()=>{const _0x42f4ce=_0x1df4f8;document['getElementById'](_0x42f4ce(0x2ab))[_0x42f4ce(0x1ad)]['add'](_0x42f4ce(0x2bb));}),document[_0x1df4f8(0x439)]('save-quiz-edits-btn')['addEventListener'](_0x1df4f8(0x128),()=>{const _0xee1870=_0x1df4f8;document[_0xee1870(0x439)]('quiz-editor-modal')[_0xee1870(0x1ad)][_0xee1870(0x136)](_0xee1870(0x2bb)),showConfirmation(_0xee1870(0x40a),handleSaveChanges);});}function handleModeSwitch(){const _0x38e6e4=_0x40d1b2,_0x253e9a=document[_0x38e6e4(0x439)]('mode-switcher-btn');currentMode===_0x38e6e4(0x39a)?(adminPasswordModal[_0x38e6e4(0x1ad)]['remove']('hidden'),document['getElementById'](_0x38e6e4(0x36e))[_0x38e6e4(0x330)]()):(currentMode='student',_0x253e9a['innerHTML']=_0x38e6e4(0x4d3),_0x253e9a[_0x38e6e4(0x361)]=_0x38e6e4(0x9d),showView(_0x38e6e4(0x39a)));}function handleAdminLogin(){const _0xd12512=_0x40d1b2,_0x43c96a=document[_0xd12512(0x439)](_0xd12512(0x36e)),_0xa6a733=document['getElementById'](_0xd12512(0x3be));if(_0x43c96a[_0xd12512(0x91)]===_0xd12512(0x14e)){adminPasswordModal[_0xd12512(0x1ad)][_0xd12512(0x136)]('hidden'),_0x43c96a[_0xd12512(0x91)]='',_0xa6a733[_0xd12512(0x1ad)][_0xd12512(0x136)](_0xd12512(0x2bb)),currentMode=_0xd12512(0x4d0);const _0x560f62=document[_0xd12512(0x439)](_0xd12512(0x273));_0x560f62['innerHTML']=_0xd12512(0x384),_0x560f62[_0xd12512(0x361)]=_0xd12512(0x20a),showView(_0xd12512(0x213));}else _0xa6a733[_0xd12512(0x1ad)]['remove']('hidden'),_0x43c96a[_0xd12512(0x91)]='';}function switchProjectTab(_0xc0867){const _0x4016ef=_0x40d1b2;[_0x4016ef(0x493),_0x4016ef(0x1fe),_0x4016ef(0x335)][_0x4016ef(0x4b7)](_0x41f1f7=>{const _0x365c45=_0x4016ef;document[_0x365c45(0x439)](_0x41f1f7+_0x365c45(0x443))['classList'][_0x365c45(0x48b)](_0x365c45(0x436)),document[_0x365c45(0x439)](_0x41f1f7+_0x365c45(0x45b))['classList'][_0x365c45(0x136)](_0x365c45(0x2bb));}),document[_0x4016ef(0x439)](_0xc0867+_0x4016ef(0x443))[_0x4016ef(0x1ad)][_0x4016ef(0x136)](_0x4016ef(0x436)),document['getElementById'](_0xc0867+_0x4016ef(0x45b))[_0x4016ef(0x1ad)][_0x4016ef(0x48b)](_0x4016ef(0x2bb));}function switchQuizDetailTab(_0x576b8a){const _0x4dc676=_0x40d1b2,_0x47e4a0={'analytics':{'btn':_0x4dc676(0x100),'content':_0x4dc676(0x38f)},'scores':{'btn':'scores-tab-btn','content':_0x4dc676(0x2b4)},'leaderboard-quiz':{'btn':'leaderboard-quiz-tab-btn','content':'leaderboard-quiz-tab-content'}};for(const _0x46ced9 in _0x47e4a0){document[_0x4dc676(0x439)](_0x47e4a0[_0x46ced9][_0x4dc676(0x203)])[_0x4dc676(0x1ad)][_0x4dc676(0x48b)](_0x4dc676(0x436)),document[_0x4dc676(0x439)](_0x47e4a0[_0x46ced9]['content'])[_0x4dc676(0x1ad)][_0x4dc676(0x136)](_0x4dc676(0x2bb));}document[_0x4dc676(0x439)](_0x47e4a0[_0x576b8a]['btn'])[_0x4dc676(0x1ad)][_0x4dc676(0x136)](_0x4dc676(0x436)),document[_0x4dc676(0x439)](_0x47e4a0[_0x576b8a][_0x4dc676(0xe5)])['classList'][_0x4dc676(0x48b)](_0x4dc676(0x2bb));}function showMessage(_0x5d1ebb){const _0x5642d7=_0x40d1b2;modalMessage[_0x5642d7(0x4ef)]=_0x5d1ebb,messageModal[_0x5642d7(0x1ad)][_0x5642d7(0x48b)]('hidden');}function showConfirmation(_0x560a43,_0x3979c3){const _0x520bc4=_0x40d1b2;document[_0x520bc4(0x439)](_0x520bc4(0x419))['textContent']=_0x560a43,document[_0x520bc4(0x439)]('confirmation-modal')[_0x520bc4(0x1e8)]('h3')[_0x520bc4(0x4ef)]=_0x520bc4(0x4f3),confirmAction=_0x3979c3,confirmationModal[_0x520bc4(0x1ad)][_0x520bc4(0x48b)](_0x520bc4(0x2bb));}function listenForProjects(){const _0x5dd5bb=_0x40d1b2,_0x3f9086=collection(db,_0x5dd5bb(0x282)+appId+_0x5dd5bb(0x381));unsubscribeProjectsListener=onSnapshot(_0x3f9086,_0x2b9160=>{const _0x2a8c5d=_0x5dd5bb;allProjects=_0x2b9160[_0x2a8c5d(0x231)][_0x2a8c5d(0x263)](_0x3a18b6=>({'id':_0x3a18b6['id'],..._0x3a18b6[_0x2a8c5d(0x372)]()})),renderProjects();},_0x4fddcb=>{const _0xb6b86f=_0x5dd5bb;console[_0xb6b86f(0x2db)](_0xb6b86f(0x189),_0x4fddcb),showMessage(_0xb6b86f(0x3cb));});}async function renderProjects(){const _0x311a66=_0x40d1b2,_0x2f393d=document['getElementById']('project-search-input')[_0x311a66(0x91)][_0x311a66(0x4a2)](),_0x474334=document['getElementById'](_0x311a66(0x145))[_0x311a66(0x91)];let _0x3ba185=allProjects[_0x311a66(0x3f2)](_0x580d15=>_0x580d15['projectName']['toLowerCase']()['includes'](_0x2f393d));_0x3ba185[_0x311a66(0x3dc)]((_0x4cbc22,_0x49bde4)=>{const _0x570054=_0x311a66;switch(_0x474334){case _0x570054(0xb7):return _0x4cbc22[_0x570054(0x34c)][_0x570054(0x4a3)](_0x49bde4['projectName'],'th');case _0x570054(0x3ef):return _0x49bde4['projectName'][_0x570054(0x4a3)](_0x4cbc22[_0x570054(0x34c)],'th');case'date_asc':return new Date(_0x4cbc22[_0x570054(0x3ba)])-new Date(_0x49bde4[_0x570054(0x3ba)]);case _0x570054(0x1c2):default:return new Date(_0x49bde4['createdAt'])-new Date(_0x4cbc22[_0x570054(0x3ba)]);}});const _0x15d3ed={};await Promise[_0x311a66(0x180)](_0x3ba185[_0x311a66(0x263)](async _0x22d841=>{const _0x33f881=_0x311a66,_0x2e6d91=query(collection(db,_0x33f881(0x282)+appId+_0x33f881(0x3ad)),where(_0x33f881(0x1cb),'==',_0x22d841['id'])),_0x24235a=await getDocs(_0x2e6d91);_0x15d3ed[_0x22d841['id']]=_0x24235a[_0x33f881(0x3d3)];}));let _0x3a6f27='';starredQuizzes[_0x311a66(0x1f3)]>0x0&&(_0x3a6f27+=_0x311a66(0x3fd)+starredQuizzes['length']+_0x311a66(0x3db)),_0x3ba185[_0x311a66(0x4b7)](_0xa6399f=>{const _0xe5a58b=_0x311a66,_0x34f304=_0x15d3ed[_0xa6399f['id']]??0x0;_0x3a6f27+=_0xe5a58b(0x342)+_0xa6399f['id']+_0xe5a58b(0x3e0)+_0xa6399f[_0xe5a58b(0x34c)]+_0xe5a58b(0x1bd)+new Date(_0xa6399f[_0xe5a58b(0x3ba)])['toLocaleDateString']('th-TH')+_0xe5a58b(0x2d2)+_0x34f304+_0xe5a58b(0x2ae)+_0xa6399f['id']+_0xe5a58b(0x385)+_0xa6399f['projectName']+_0xe5a58b(0x47c);}),projectList['innerHTML']=_0x3a6f27,noProjectsMsg[_0x311a66(0x1ad)][_0x311a66(0x4ec)]('hidden',_0x3a6f27[_0x311a66(0x1f3)]>0x0);}document[_0x40d1b2(0x439)](_0x40d1b2(0x410))[_0x40d1b2(0x444)](_0x40d1b2(0x128),async()=>{const _0x477513=_0x40d1b2,_0x14decd=document[_0x477513(0x439)](_0x477513(0x9b)),_0xda68ea=_0x14decd[_0x477513(0x91)][_0x477513(0x1a1)]();if(!_0xda68ea){showMessage(_0x477513(0x154));return;}try{const _0x42bef2=doc(collection(db,_0x477513(0x282)+appId+_0x477513(0x381)));await setDoc(_0x42bef2,{'projectName':_0xda68ea,'students':[],'settings':{'resultsDisplay':_0x477513(0x1f9),'shuffleSetting':_0x477513(0x4a9),'defaultNumQuestions':0x5,'defaultNumChoices':0x4,'defaultPassingScore':0x3,'timerMode':'none','timerDuration':0xa},'createdBy':userId,'createdAt':new Date()['toISOString']()}),_0x14decd['value']='',createProjectModal[_0x477513(0x1ad)][_0x477513(0x136)]('hidden'),showMessage(_0x477513(0x354));}catch(_0x4a5428){console['error'](_0x477513(0x497),_0x4a5428),showMessage('ไม่สามารถสร้างโปรเจคได้');}}),projectList['addEventListener'](_0x40d1b2(0x128),async _0x5af601=>{const _0x3c6ced=_0x40d1b2,_0x249636=_0x5af601['target'][_0x3c6ced(0x417)]('.project-card-content'),_0x345109=_0x5af601[_0x3c6ced(0x16e)][_0x3c6ced(0x417)](_0x3c6ced(0x39c));if(_0x249636){const _0xa922f=_0x249636['dataset']['id'];_0xa922f==='starred-project'?showStarredProjectView():(currentProjectId=_0xa922f,await loadProjectDetails(currentProjectId),showView(_0x3c6ced(0x1c6)));}else{if(_0x345109){const _0x40d151=_0x345109[_0x3c6ced(0x307)]['id'],_0x6780e5=_0x345109[_0x3c6ced(0x307)][_0x3c6ced(0xe8)];showConfirmation('คุณแน่ใจหรือไม่ว่าต้องการลบโปรเจค\x20\x22'+_0x6780e5+_0x3c6ced(0x346),()=>handleDeleteProject(_0x40d151));}}});function showStarredProjectView(){const _0x35fa7a=_0x40d1b2;currentProjectId='starred',currentProjectData=null,projectTitle[_0x35fa7a(0x4ef)]=_0x35fa7a(0x1b3),projectIdDisplay[_0x35fa7a(0x4ef)]=_0x35fa7a(0x42a),showView(_0x35fa7a(0x1c6)),manageTab[_0x35fa7a(0x1ad)][_0x35fa7a(0x136)](_0x35fa7a(0x2bb)),leaderboardTab[_0x35fa7a(0x1ad)][_0x35fa7a(0x136)](_0x35fa7a(0x2bb)),switchProjectTab(_0x35fa7a(0x1fe)),renderQuizzes();}async function loadProjectDetails(_0x285d21){const _0x414232=_0x40d1b2,_0xf070e7=doc(db,_0x414232(0x282)+appId+'/public/data/projects',_0x285d21),_0x4ad033=await getDoc(_0xf070e7);if(_0x4ad033['exists']()){manageTab[_0x414232(0x1ad)][_0x414232(0x48b)](_0x414232(0x2bb)),leaderboardTab[_0x414232(0x1ad)]['remove']('hidden'),currentProjectData=_0x4ad033[_0x414232(0x372)](),projectTitle[_0x414232(0x4ef)]=currentProjectData['projectName'],projectIdDisplay[_0x414232(0x4ef)]=_0x285d21;const _0x150cd9=currentProjectData[_0x414232(0x1a9)]||{};document[_0x414232(0x439)](_0x414232(0x19b))['value']=_0x150cd9[_0x414232(0xd8)]||0x5,document[_0x414232(0x439)](_0x414232(0x22a))[_0x414232(0x91)]=_0x150cd9[_0x414232(0x30b)]||0x4,document[_0x414232(0x439)](_0x414232(0x3e7))[_0x414232(0x91)]=_0x150cd9[_0x414232(0x121)]||Math[_0x414232(0x22d)]((_0x150cd9[_0x414232(0xd8)]||0x5)/0x2),document[_0x414232(0x439)]('passing-score-input')['max']=_0x150cd9[_0x414232(0xd8)]||0x5,document[_0x414232(0x439)](_0x414232(0x205))[_0x414232(0x91)]=_0x150cd9[_0x414232(0xa7)]||_0x414232(0x1f9),document[_0x414232(0x439)](_0x414232(0x34a))[_0x414232(0x91)]=_0x150cd9[_0x414232(0x2a1)]||_0x414232(0x4a9);const _0x23a638=_0x150cd9[_0x414232(0xaf)]||_0x414232(0x4a9),_0x27c820=_0x150cd9[_0x414232(0x227)]||0xa,_0x2e4052=document[_0x414232(0x439)](_0x414232(0x1f6)),_0x58edda=document[_0x414232(0x439)](_0x414232(0x36d)),_0x2def5e=document[_0x414232(0x439)](_0x414232(0x219));_0x2e4052[_0x414232(0x91)]=_0x23a638,_0x2def5e[_0x414232(0x91)]=_0x27c820;_0x23a638===_0x414232(0x4a9)?_0x58edda[_0x414232(0x1ad)][_0x414232(0x136)]('hidden'):_0x58edda[_0x414232(0x1ad)][_0x414232(0x48b)]('hidden');_0x2e4052['dispatchEvent'](new Event(_0x414232(0x375)));if(unsubscribeStudentsListener)unsubscribeStudentsListener();if(unsubscribeQuizzesListener)unsubscribeQuizzesListener();if(unsubscribeStudentProfilesListener)unsubscribeStudentProfilesListener();listenForStudents(_0x285d21),listenForProjectQuizzes(_0x285d21),listenForStudentProfiles(_0x285d21);}else showMessage(_0x414232(0x488)),showView('admin-dashboard');}async function handleDeleteProject(_0x10f163){const _0x16ab74=_0x40d1b2;try{const _0x4b2884=writeBatch(db),_0x2d853f=collection(db,_0x16ab74(0x282)+appId+_0x16ab74(0x3ad)),_0x3445d0=query(_0x2d853f,where('projectId','==',_0x10f163)),_0x3515bd=await getDocs(_0x3445d0);for(const _0x3a76ab of _0x3515bd[_0x16ab74(0x231)]){const _0x5143e4=collection(db,_0x16ab74(0x282)+appId+_0x16ab74(0x44e)+_0x3a76ab['id']+_0x16ab74(0x3eb)),_0x4e4adc=await getDocs(_0x5143e4);_0x4e4adc[_0x16ab74(0x4b7)](_0x5d68ba=>{const _0x2f55d7=_0x16ab74;_0x4b2884[_0x2f55d7(0xb4)](_0x5d68ba[_0x2f55d7(0x391)]);}),_0x4b2884['delete'](_0x3a76ab['ref']);}const _0x3fa6a6=collection(db,_0x16ab74(0x282)+appId+_0x16ab74(0x2d5)+_0x10f163+'/studentProfiles'),_0x1e212a=await getDocs(_0x3fa6a6);_0x1e212a['forEach'](_0x4f0f0a=>{const _0x3a7a6f=_0x16ab74;_0x4b2884[_0x3a7a6f(0xb4)](_0x4f0f0a[_0x3a7a6f(0x391)]);});const _0x42f89b=doc(db,_0x16ab74(0x282)+appId+'/public/data/projects',_0x10f163);_0x4b2884[_0x16ab74(0xb4)](_0x42f89b),await _0x4b2884[_0x16ab74(0xa0)](),showMessage(_0x16ab74(0x37c)),showView(_0x16ab74(0x213));}catch(_0x22a7b3){console[_0x16ab74(0x2db)](_0x16ab74(0xed),_0x22a7b3),showMessage(_0x16ab74(0x41c));}}document[_0x40d1b2(0x439)](_0x40d1b2(0x20f))[_0x40d1b2(0x444)](_0x40d1b2(0x128),async()=>{const _0x4e7d76=_0x40d1b2;if(!currentProjectId)return;const _0x63a8d4={'defaultNumQuestions':parseInt(document[_0x4e7d76(0x439)]('num-questions')[_0x4e7d76(0x91)]),'defaultNumChoices':parseInt(document[_0x4e7d76(0x439)]('num-choices')[_0x4e7d76(0x91)]),'defaultPassingScore':parseInt(document[_0x4e7d76(0x439)]('passing-score-input')[_0x4e7d76(0x91)]),'resultsDisplay':document['getElementById'](_0x4e7d76(0x205))['value'],'shuffleSetting':document['getElementById']('shuffle-setting-select')['value'],'timerMode':document['getElementById'](_0x4e7d76(0x1f6))[_0x4e7d76(0x91)],'timerDuration':parseInt(document[_0x4e7d76(0x439)](_0x4e7d76(0x219))['value'])};try{const _0x1d3423=doc(db,_0x4e7d76(0x282)+appId+_0x4e7d76(0x381),currentProjectId);await updateDoc(_0x1d3423,{'settings':_0x63a8d4}),showMessage(_0x4e7d76(0x4db));}catch(_0x535344){console['error'](_0x4e7d76(0x17a),_0x535344),showMessage(_0x4e7d76(0x11d));}});function listenForStudents(_0x264a1b){const _0x263924=_0x40d1b2,_0xd727ca=doc(db,_0x263924(0x282)+appId+_0x263924(0x381),_0x264a1b);unsubscribeStudentsListener=onSnapshot(_0xd727ca,_0x356dd6=>{const _0x3ffedd=_0x263924;if(_0x356dd6[_0x3ffedd(0x474)]()){const _0x1cad9d=_0x356dd6['data']();currentProjectData=_0x1cad9d,renderStudentList(_0x1cad9d[_0x3ffedd(0x28d)]||[]);}});}function renderStudentList(_0x5d0788){const _0x4749d3=_0x40d1b2,_0xe270c5=document[_0x4749d3(0x439)](_0x4749d3(0x4f1));_0x5d0788['length']===0x0?(studentList['innerHTML']=_0x4749d3(0x216),_0xe270c5[_0x4749d3(0x1ad)]['add'](_0x4749d3(0x2bb))):(studentList[_0x4749d3(0x2b0)]=_0x5d0788['map'](_0x5650b8=>_0x4749d3(0x401)+_0x5650b8+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-student-name=\x22'+_0x5650b8+_0x4749d3(0xf6))[_0x4749d3(0x17d)](''),_0xe270c5[_0x4749d3(0x1ad)][_0x4749d3(0x48b)]('hidden'));}document[_0x40d1b2(0x439)](_0x40d1b2(0x471))[_0x40d1b2(0x444)](_0x40d1b2(0x128),async()=>{const _0x1f9947=_0x40d1b2;if(!currentProjectId)return;const _0x43769e=document['getElementById'](_0x1f9947(0x1fa)),_0x45cd12=_0x43769e[_0x1f9947(0x91)][_0x1f9947(0x1a1)]();if(!_0x45cd12){showMessage(_0x1f9947(0xdd));return;}const _0x4a56d0=_0x45cd12['split']('\x0a')[_0x1f9947(0x263)](_0x39706f=>_0x39706f[_0x1f9947(0x1a1)]())[_0x1f9947(0x3f2)](_0x502517=>_0x502517);if(_0x4a56d0['length']===0x0)return;try{const _0x49d577=doc(db,_0x1f9947(0x282)+appId+'/public/data/projects',currentProjectId),_0x29842c=await getDoc(_0x49d577);if(_0x29842c[_0x1f9947(0x474)]()){const _0x881947=_0x29842c[_0x1f9947(0x372)]()[_0x1f9947(0x28d)]||[],_0x2e423a=[...new Set([..._0x881947,..._0x4a56d0])];await updateDoc(_0x49d577,{'students':_0x2e423a}),_0x43769e[_0x1f9947(0x91)]='';}}catch(_0x1820cc){console[_0x1f9947(0x2db)](_0x1f9947(0x2dd),_0x1820cc),showMessage('ไม่สามารถเพิ่มนักเรียนได้');}});function handleDeleteStudent(_0x1b1451){const _0x3372a3=_0x40d1b2;showConfirmation('คุณแน่ใจหรือไม่ว่าต้องการลบนักเรียนชื่อ\x20\x22'+_0x1b1451+_0x3372a3(0x44d),async()=>{const _0x330b70=_0x3372a3;if(!currentProjectId||!currentProjectData)return;const _0x2ad833=currentProjectData['students']['filter'](_0x5a6fb7=>_0x5a6fb7!==_0x1b1451);try{const _0xc03cfe=doc(db,_0x330b70(0x282)+appId+'/public/data/projects',currentProjectId),_0x4521a0=doc(db,_0x330b70(0x282)+appId+_0x330b70(0x2d5)+currentProjectId+_0x330b70(0x1e1),_0x1b1451),_0x3ba580=writeBatch(db);_0x3ba580['update'](_0xc03cfe,{'students':_0x2ad833}),_0x3ba580[_0x330b70(0xb4)](_0x4521a0),await _0x3ba580[_0x330b70(0xa0)]();}catch(_0x543253){console[_0x330b70(0x2db)](_0x330b70(0x3b1),_0x543253),showMessage('เกิดข้อผิดพลาดในการลบนักเรียน');}});}function handleDeleteAllStudents(){showConfirmation('คุณแน่ใจหรือไม่ว่าต้องการลบนักเรียนทั้งหมดในโปรเจคนี้?\x20การกระทำนี้ไม่สามารถย้อนกลับได้',async()=>{const _0x172913=_0x3671;if(!currentProjectId)return;try{const _0x48d427=doc(db,_0x172913(0x282)+appId+_0x172913(0x381),currentProjectId),_0x407ea0=collection(db,'artifacts/'+appId+_0x172913(0x2d5)+currentProjectId+_0x172913(0x1e1)),_0x1844fc=await getDocs(_0x407ea0),_0x430b2b=writeBatch(db);_0x430b2b[_0x172913(0x25d)](_0x48d427,{'students':[]}),_0x1844fc[_0x172913(0x4b7)](_0x4460a8=>_0x430b2b['delete'](_0x4460a8['ref'])),await _0x430b2b[_0x172913(0xa0)]();}catch(_0x4f755f){console[_0x172913(0x2db)](_0x172913(0x311),_0x4f755f),showMessage(_0x172913(0x4a8));}});}async function handleFileUpload(_0x24be8d){const _0x2132a6=_0x40d1b2,_0x18e9c9=_0x24be8d['target']['files'][0x0];if(!_0x18e9c9)return;if(_0x18e9c9['type']!==_0x2132a6(0x117)&&!_0x18e9c9[_0x2132a6(0xe8)]['endsWith']('.docx')){showMessage('รูปแบบไฟล์ไม่รองรับ\x20กรุณาเลือก\x20PDF\x20หรือ\x20.docx'),_0x24be8d[_0x2132a6(0x16e)][_0x2132a6(0x91)]='';return;}const _0x20ad5d=document['getElementById'](_0x2132a6(0x445)),_0x27b962=document[_0x2132a6(0x439)](_0x2132a6(0x42d)),_0x50885b=document[_0x2132a6(0x439)](_0x2132a6(0x4c9));document[_0x2132a6(0x439)](_0x2132a6(0xd1))['classList'][_0x2132a6(0x48b)]('hidden'),_0x50885b[_0x2132a6(0x2b0)]='',_0x20ad5d[_0x2132a6(0x1ad)][_0x2132a6(0x48b)]('hidden'),_0x27b962['textContent']='กำลังอ่านและเตรียมไฟล์...';const _0x225eef=new FileReader();_0x225eef['readAsDataURL'](_0x18e9c9),_0x225eef[_0x2132a6(0x4d1)]=async()=>{const _0x1dde59=_0x2132a6;try{const _0x32838e=_0x225eef[_0x1dde59(0x451)][_0x1dde59(0x3b6)](',')[0x1],_0x59c52b=_0x18e9c9['type'];await generateQuizFromFile(_0x59c52b,_0x32838e);}catch(_0x1db83f){console[_0x1dde59(0x2db)](_0x1dde59(0x104),_0x1db83f),showMessage('เกิดข้อผิดพลาดในการเตรียมไฟล์:\x20'+_0x1db83f[_0x1dde59(0x27f)]),_0x20ad5d[_0x1dde59(0x1ad)][_0x1dde59(0x136)](_0x1dde59(0x2bb));}finally{_0x24be8d[_0x1dde59(0x16e)][_0x1dde59(0x91)]='';}},_0x225eef[_0x2132a6(0x23d)]=_0x46c143=>{const _0x47e7e1=_0x2132a6;console[_0x47e7e1(0x2db)](_0x47e7e1(0x2ef),_0x46c143),showMessage(_0x47e7e1(0x31d)),_0x20ad5d[_0x47e7e1(0x1ad)]['add'](_0x47e7e1(0x2bb));};}function sanitizeQuizData(_0x8cab43){const _0xa76ca3=_0x40d1b2;if(!_0x8cab43||!_0x8cab43[_0xa76ca3(0x449)])return _0x8cab43;const _0x251d4c={'imes':_0xa76ca3(0x198),'div':_0xa76ca3(0x166)},_0x4c92cf=_0xbb2254=>{const _0x5b12a1=_0xa76ca3;if(typeof _0xbb2254!==_0x5b12a1(0x207))return _0xbb2254;let _0x25b654=_0xbb2254;for(const [_0x1e7f0f,_0x739081]of Object[_0x5b12a1(0x2c4)](_0x251d4c)){const _0x54a519=new RegExp('\x5cb'+_0x1e7f0f+'\x5cb','g');_0x25b654=_0x25b654['replace'](_0x54a519,_0x739081);}return _0x25b654;};return _0x8cab43[_0xa76ca3(0x422)]&&(_0x8cab43[_0xa76ca3(0x422)]=_0x4c92cf(_0x8cab43[_0xa76ca3(0x422)])),_0x8cab43['questions'][_0xa76ca3(0x4b7)](_0x536d81=>{const _0x5926cb=_0xa76ca3;_0x536d81[_0x5926cb(0x89)]=_0x4c92cf(_0x536d81[_0x5926cb(0x89)]),_0x536d81[_0x5926cb(0x4ed)]&&(_0x536d81[_0x5926cb(0x4ed)]=_0x536d81[_0x5926cb(0x4ed)][_0x5926cb(0x263)](_0x4c92cf)),_0x536d81[_0x5926cb(0x1bb)]&&(_0x536d81[_0x5926cb(0x1bb)]=_0x4c92cf(_0x536d81['explanation'])),_0x536d81[_0x5926cb(0x32a)]&&(_0x536d81[_0x5926cb(0x32a)]=_0x4c92cf(_0x536d81['stem'])),_0x536d81[_0x5926cb(0x350)]&&(_0x536d81[_0x5926cb(0x350)]=_0x4c92cf(_0x536d81[_0x5926cb(0x350)])),_0x536d81[_0x5926cb(0x3c7)]&&(_0x536d81[_0x5926cb(0x3c7)]=_0x536d81[_0x5926cb(0x3c7)]['map'](_0x4c92cf));}),_0x8cab43;}const mathPromptInstruction=_0x40d1b2(0x18d);async function handleGenerateFromLink(){const _0x2b19ac=_0x40d1b2,_0x33f7ab=document[_0x2b19ac(0x439)]('link-url-input'),_0x27976b=document[_0x2b19ac(0x439)](_0x2b19ac(0x2b9)),_0x46b642=_0x33f7ab[_0x2b19ac(0x91)][_0x2b19ac(0x1a1)](),_0x5703dc=_0x27976b['value']['trim']();if(!_0x46b642){showMessage(_0x2b19ac(0x499));return;}const _0x3e3fde=document[_0x2b19ac(0x439)]('loader'),_0x121b6e=document[_0x2b19ac(0x439)]('loader-text'),_0x1c0d11=document[_0x2b19ac(0x439)](_0x2b19ac(0x4c9)),_0x576ff8=document[_0x2b19ac(0x439)](_0x2b19ac(0x155));document['getElementById'](_0x2b19ac(0xd1))[_0x2b19ac(0x1ad)][_0x2b19ac(0x48b)](_0x2b19ac(0x2bb)),_0x1c0d11[_0x2b19ac(0x2b0)]='',_0x3e3fde['classList'][_0x2b19ac(0x48b)](_0x2b19ac(0x2bb)),_0x121b6e[_0x2b19ac(0x4ef)]=_0x2b19ac(0x348),_0x576ff8['disabled']=!![];try{const _0x2fb8d5=_0x2b19ac(0x90)+encodeURIComponent(_0x46b642),_0x1a83c4=await fetch(_0x2fb8d5);if(!_0x1a83c4['ok'])throw new Error(_0x2b19ac(0xbf)+_0x1a83c4[_0x2b19ac(0x96)]+')');const _0x1e2999=await _0x1a83c4[_0x2b19ac(0x36c)](),_0x5611f5=extractTextFromHtml(_0x1e2999);if(!_0x5611f5||_0x5611f5[_0x2b19ac(0x1f3)]<0x64)throw new Error(_0x2b19ac(0x360));await generateQuiz(_0x5703dc,_0x5611f5);}catch(_0x380bb1){console[_0x2b19ac(0x2db)](_0x2b19ac(0x160),_0x380bb1),showMessage('เกิดข้อผิดพลาด:\x20'+_0x380bb1['message']),_0x1c0d11[_0x2b19ac(0x2b0)]=_0x2b19ac(0x353);}finally{_0x3e3fde[_0x2b19ac(0x1ad)][_0x2b19ac(0x136)](_0x2b19ac(0x2bb)),_0x576ff8[_0x2b19ac(0x247)]=![];}}function extractTextFromHtml(_0x46b054){const _0x3a659d=_0x40d1b2,_0x150eca=new DOMParser()['parseFromString'](_0x46b054,_0x3a659d(0x4d9));return _0x150eca['querySelectorAll']('script,\x20style,\x20nav,\x20footer,\x20header,\x20aside')[_0x3a659d(0x4b7)](_0x28df34=>_0x28df34['remove']()),_0x150eca['body'][_0x3a659d(0x4ef)]||'';}document[_0x40d1b2(0x439)]('generate-from-topic-btn')[_0x40d1b2(0x444)]('click',()=>{const _0x36250f=_0x40d1b2,_0xb8c168=document['getElementById'](_0x36250f(0x43e))[_0x36250f(0x91)][_0x36250f(0x1a1)]();if(!_0xb8c168){showMessage(_0x36250f(0x39b));return;}generateQuiz(_0xb8c168,null);}),document[_0x40d1b2(0x439)](_0x40d1b2(0x26d))[_0x40d1b2(0x444)](_0x40d1b2(0x128),()=>{const _0x5653dc=_0x40d1b2,_0x44803a=document[_0x5653dc(0x439)]('text-content-input')[_0x5653dc(0x91)][_0x5653dc(0x1a1)]();if(!_0x44803a){showMessage(_0x5653dc(0x4e3));return;}generateQuiz(null,_0x44803a);});async function generateQuiz(_0x31b488,_0x3dc64a,_0x57d593=null){const _0x55e6d9=_0x40d1b2,_0xac3034=document[_0x55e6d9(0x439)](_0x55e6d9(0x26b))[_0x55e6d9(0x249)],_0x4f6493=document['getElementById'](_0x55e6d9(0x27e))[_0x55e6d9(0x91)],_0x3071a9=document[_0x55e6d9(0x439)](_0x55e6d9(0x19b))[_0x55e6d9(0x91)],_0x2ae27f=document[_0x55e6d9(0x439)](_0x55e6d9(0x22a))[_0x55e6d9(0x91)];let _0x585cc1='',_0x384f15='',_0x1263c6,_0x15fe26=_0x55e6d9(0x464)+_0x31b488+'\x22';if(!_0x31b488&&_0x3dc64a)_0x15fe26=_0x55e6d9(0x4c2);else!_0x31b488&&!_0x3dc64a&&(_0x15fe26=_0x55e6d9(0x400));const _0x4613f1={'type':_0x55e6d9(0x239),'properties':{'questionText':{'type':_0x55e6d9(0x2cc)},'options':{'type':'ARRAY','items':{'type':'STRING'}},'correctAnswerIndex':{'type':_0x55e6d9(0x138)},'explanation':{'type':_0x55e6d9(0x2cc)},'imageCode':{'type':_0x55e6d9(0x2cc)}},'required':[_0x55e6d9(0x89),_0x55e6d9(0x4ed),_0x55e6d9(0x16d),_0x55e6d9(0x1bb)]},_0x51a833={'type':_0x55e6d9(0x239),'properties':{'questionText':{'type':_0x55e6d9(0x2cc)},'idealAnswer':{'type':_0x55e6d9(0x2cc)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x55e6d9(0x2cc)}},'required':[_0x55e6d9(0x89),_0x55e6d9(0x379),_0x55e6d9(0x1bb)]},_0x398317={'type':_0x55e6d9(0x239),'properties':{'questionText':{'type':_0x55e6d9(0x2cc)},'questionType':{'type':_0x55e6d9(0x2cc),'enum':[_0x55e6d9(0x110),_0x55e6d9(0x15d)]},'options':{'type':'ARRAY','items':{'type':_0x55e6d9(0x2cc)}},'correctAnswerIndex':{'type':_0x55e6d9(0x138)},'idealAnswer':{'type':_0x55e6d9(0x2cc)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x55e6d9(0x2cc)}},'required':[_0x55e6d9(0x89),'questionType',_0x55e6d9(0x1bb)]},_0x2ff69c={'type':_0x55e6d9(0x239),'properties':{'questionText':{'type':_0x55e6d9(0x2cc)},'correctAnswer':{'type':_0x55e6d9(0x470)},'explanation':{'type':'STRING'},'imageCode':{'type':'STRING'}},'required':[_0x55e6d9(0x89),_0x55e6d9(0xaa),'explanation']},_0x483bb3={'type':_0x55e6d9(0x239),'properties':{'questionType':{'type':_0x55e6d9(0x2cc),'enum':[_0x55e6d9(0x48c)]},'stem':{'type':_0x55e6d9(0x2cc)},'correctResponse':{'type':_0x55e6d9(0x2cc)},'allResponses':{'type':_0x55e6d9(0x112),'items':{'type':_0x55e6d9(0x2cc)}},'explanation':{'type':_0x55e6d9(0x2cc)},'imageCode':{'type':'STRING'}},'required':['questionType','stem',_0x55e6d9(0x350),_0x55e6d9(0x3c7),'explanation']};let _0x4c88db;if(_0x57d593!==null){const _0x532122=currentQuizData[_0x55e6d9(0x449)][_0x57d593][_0x55e6d9(0x285)],_0x30bf80=_0xac3034?'สำหรับคำถามนี้\x20หากจำเป็นต้องมีรูปภาพประกอบ\x20(เช่น\x20รูปเรขาคณิต)\x20ให้สร้างโค้ด\x20SVG\x20ที่สมบูรณ์สำหรับรูปนั้นๆ\x20แล้วใส่ไว้ใน\x20property\x20ชื่อ\x20\x22imageCode\x22.':'';if(_0x532122===_0x55e6d9(0x110))_0x585cc1='สร้างแบบทดสอบปรนัย\x201\x20ข้อ\x20'+_0x15fe26+_0x55e6d9(0x11f)+_0x2ae27f+_0x55e6d9(0x3e3)+_0x30bf80+'\x20'+mathPromptInstruction,_0x1263c6=_0x4613f1;else _0x532122===_0x55e6d9(0x48c)?(_0x585cc1='จากหัวข้อ\x20'+_0x15fe26+_0x55e6d9(0x1a6)+_0x30bf80+'\x20'+mathPromptInstruction,_0x1263c6={'type':'OBJECT','properties':{'questionType':{'type':_0x55e6d9(0x2cc),'enum':[_0x55e6d9(0x48c)]},'stem':{'type':_0x55e6d9(0x2cc)},'correctResponse':{'type':_0x55e6d9(0x2cc)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x55e6d9(0x2cc)}},'required':[_0x55e6d9(0x285),_0x55e6d9(0x32a),_0x55e6d9(0x350),_0x55e6d9(0x1bb)]}):(_0x585cc1=_0x55e6d9(0x363)+_0x15fe26+_0x55e6d9(0x2e7)+_0x30bf80+'\x20'+mathPromptInstruction,_0x1263c6=_0x51a833);_0x4c88db=_0x1263c6;}else{const _0x3ec084=_0xac3034?_0x55e6d9(0x48d):'';switch(_0x4f6493){case _0x55e6d9(0x110):_0x585cc1=_0x55e6d9(0x12e)+_0x3071a9+'\x20ข้อ\x20'+_0x15fe26+_0x55e6d9(0x3bd)+_0x2ae27f+_0x55e6d9(0x3e3)+_0x3ec084+'\x20'+mathPromptInstruction,_0x1263c6=_0x4613f1;break;case _0x55e6d9(0x42c):_0x585cc1=_0x55e6d9(0x47e)+_0x3071a9+_0x55e6d9(0x1a2)+_0x15fe26+_0x55e6d9(0x2e6)+_0x2ae27f+_0x55e6d9(0x24e)+_0x3ec084+'\x20'+mathPromptInstruction,_0x1263c6=_0x4613f1;break;case _0x55e6d9(0x1b2):_0x585cc1=_0x55e6d9(0x47e)+_0x3071a9+_0x55e6d9(0x1a2)+_0x15fe26+_0x55e6d9(0x304)+_0x3ec084+'\x20'+mathPromptInstruction,_0x1263c6=_0x51a833;break;case _0x55e6d9(0x187):_0x585cc1=_0x55e6d9(0x18f)+_0x3071a9+_0x55e6d9(0x1a2)+_0x15fe26+_0x55e6d9(0x107)+_0x2ae27f+_0x55e6d9(0x1b5)+_0x3ec084+'\x20'+mathPromptInstruction+_0x55e6d9(0x336),_0x1263c6=_0x398317;break;case _0x55e6d9(0xfc):_0x585cc1=_0x55e6d9(0x408)+_0x3071a9+_0x55e6d9(0x1a2)+_0x15fe26+'.\x20แต่ละข้อต้องมีคำถาม\x20(questionText),\x20คำตอบที่ถูกต้อง\x20(correctAnswer\x20เป็น\x20true\x20หรือ\x20false),\x20และคำอธิบาย\x20(explanation).\x20'+_0x3ec084+'\x20'+mathPromptInstruction,_0x1263c6=_0x2ff69c;break;case _0x55e6d9(0x3cc):_0x585cc1='สร้างชุดคำถามจับคู่\x20'+_0x3071a9+_0x55e6d9(0x2e4)+_0x15fe26+_0x55e6d9(0x3d0)+_0x3071a9+_0x55e6d9(0x397)+_0x3ec084+'\x20'+mathPromptInstruction,_0x1263c6=_0x483bb3;break;}_0x4c88db={'type':_0x55e6d9(0x239),'properties':{'topic':{'type':_0x55e6d9(0x2cc)},'questions':{'type':_0x55e6d9(0x112),'items':_0x1263c6}},'required':[_0x55e6d9(0x422),_0x55e6d9(0x449)]};}return _0x3dc64a?(_0x585cc1=_0x55e6d9(0x2a3)+_0x3dc64a+_0x55e6d9(0x4e8)+_0x585cc1,_0x384f15=_0x55e6d9(0x217)):_0x384f15=_0x55e6d9(0x2fe),handleApiCall(_0x585cc1,_0x384f15,_0x4c88db,_0x57d593);}async function generateQuizFromFile(_0x269f89,_0x168d5e){const _0x29bdd1=_0x40d1b2,_0x233904=document[_0x29bdd1(0x439)](_0x29bdd1(0x27e))[_0x29bdd1(0x91)],_0x3d21e1=document[_0x29bdd1(0x439)](_0x29bdd1(0x19b))[_0x29bdd1(0x91)],_0x605d2=document[_0x29bdd1(0x439)](_0x29bdd1(0x22a))['value'],_0x24fab2=document[_0x29bdd1(0x439)](_0x29bdd1(0x26b))['checked'];let _0x3cab14='',_0x269d98;const _0x3040b6=_0x24fab2?_0x29bdd1(0x48d):'';switch(_0x233904){case'multiple_choice':_0x3cab14=_0x29bdd1(0x12e)+_0x3d21e1+_0x29bdd1(0x3a8)+_0x605d2+_0x29bdd1(0x3e3)+_0x3040b6+'\x20'+mathPromptInstruction,_0x269d98={'type':_0x29bdd1(0x239),'properties':{'questionText':{'type':_0x29bdd1(0x2cc)},'options':{'type':_0x29bdd1(0x112),'items':{'type':_0x29bdd1(0x2cc)}},'correctAnswerIndex':{'type':'NUMBER'},'explanation':{'type':'STRING'},'imageCode':{'type':_0x29bdd1(0x2cc)}},'required':[_0x29bdd1(0x89),'options','correctAnswerIndex','explanation']};break;case _0x29bdd1(0x42c):_0x3cab14='สร้างคำถามแบบเติมคำในช่องว่าง\x20'+_0x3d21e1+_0x29bdd1(0x3a7)+_0x605d2+_0x29bdd1(0x24e)+_0x3040b6+'\x20'+mathPromptInstruction,_0x269d98={'type':_0x29bdd1(0x239),'properties':{'questionText':{'type':_0x29bdd1(0x2cc)},'options':{'type':_0x29bdd1(0x112),'items':{'type':_0x29bdd1(0x2cc)}},'correctAnswerIndex':{'type':_0x29bdd1(0x138)},'explanation':{'type':_0x29bdd1(0x2cc)},'imageCode':{'type':'STRING'}},'required':[_0x29bdd1(0x89),'options','correctAnswerIndex',_0x29bdd1(0x1bb)]};break;case'fill_in_no_choices':_0x3cab14=_0x29bdd1(0x47e)+_0x3d21e1+_0x29bdd1(0x1ce)+_0x3040b6+'\x20'+mathPromptInstruction,_0x269d98={'type':_0x29bdd1(0x239),'properties':{'questionText':{'type':_0x29bdd1(0x2cc)},'idealAnswer':{'type':_0x29bdd1(0x2cc)},'explanation':{'type':_0x29bdd1(0x2cc)},'imageCode':{'type':_0x29bdd1(0x2cc)}},'required':['questionText',_0x29bdd1(0x379),_0x29bdd1(0x1bb)]};break;case _0x29bdd1(0x187):_0x3cab14=_0x29bdd1(0x18f)+_0x3d21e1+_0x29bdd1(0x176)+_0x605d2+_0x29bdd1(0x1b5)+_0x3040b6+'\x20'+mathPromptInstruction+_0x29bdd1(0x336),_0x269d98={'type':_0x29bdd1(0x239),'properties':{'questionText':{'type':'STRING'},'questionType':{'type':'STRING','enum':[_0x29bdd1(0x110),_0x29bdd1(0x15d)]},'options':{'type':_0x29bdd1(0x112),'items':{'type':_0x29bdd1(0x2cc)}},'correctAnswerIndex':{'type':'NUMBER'},'idealAnswer':{'type':_0x29bdd1(0x2cc)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x29bdd1(0x2cc)}},'required':['questionText',_0x29bdd1(0x285),_0x29bdd1(0x1bb)]};break;case _0x29bdd1(0xfc):_0x3cab14='สร้างคำถามแบบใช่/ไม่ใช่\x20'+_0x3d21e1+'\x20ข้อ.\x20แต่ละข้อต้องมีคำถาม\x20(questionText),\x20คำตอบที่ถูกต้อง\x20(correctAnswer\x20เป็น\x20true\x20หรือ\x20false),\x20และคำอธิบาย\x20(explanation).\x20'+_0x3040b6+'\x20'+mathPromptInstruction,_0x269d98={'type':'OBJECT','properties':{'questionText':{'type':_0x29bdd1(0x2cc)},'correctAnswer':{'type':_0x29bdd1(0x470)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x29bdd1(0x2cc)}},'required':[_0x29bdd1(0x89),'correctAnswer',_0x29bdd1(0x1bb)]};break;case _0x29bdd1(0x3cc):_0x3cab14=_0x29bdd1(0x35f)+_0x3d21e1+_0x29bdd1(0x3f5)+_0x3d21e1+_0x29bdd1(0x397)+_0x3040b6+'\x20'+mathPromptInstruction,_0x269d98={'type':_0x29bdd1(0x239),'properties':{'questionType':{'type':_0x29bdd1(0x2cc),'enum':['matching_item']},'stem':{'type':_0x29bdd1(0x2cc)},'correctResponse':{'type':_0x29bdd1(0x2cc)},'allResponses':{'type':'ARRAY','items':{'type':_0x29bdd1(0x2cc)}},'explanation':{'type':_0x29bdd1(0x2cc)},'imageCode':{'type':_0x29bdd1(0x2cc)}},'required':[_0x29bdd1(0x285),_0x29bdd1(0x32a),_0x29bdd1(0x350),_0x29bdd1(0x3c7),_0x29bdd1(0x1bb)]};break;}const _0x58b3f9={'type':'OBJECT','properties':{'topic':{'type':_0x29bdd1(0x2cc)},'questions':{'type':_0x29bdd1(0x112),'items':_0x269d98}},'required':['topic',_0x29bdd1(0x449)]},_0x5214cc=_0x29bdd1(0xf2)+_0x3cab14,_0x4111c7={'contents':[{'parts':[{'text':_0x5214cc},{'inlineData':{'mimeType':_0x269f89,'data':_0x168d5e}}]}],'generationConfig':{'responseMimeType':'application/json','responseSchema':_0x58b3f9}};return handleApiCall(_0x4111c7[_0x29bdd1(0x1cc)][0x0][_0x29bdd1(0x296)],_0x29bdd1(0x1b8),_0x58b3f9);}async function handleApiCall(_0x5556c3,_0x5a20d4,_0x288882,_0x1ee814=null){const _0x2619bd=_0x40d1b2,_0x3be508=document['getElementById'](_0x2619bd(0xd1)),_0x45a676=document[_0x2619bd(0x439)](_0x2619bd(0x445)),_0x34f939=document[_0x2619bd(0x439)]('loader-text'),_0x45a51d=document[_0x2619bd(0x439)]('generated-quiz-container');_0x3be508[_0x2619bd(0x1ad)][_0x2619bd(0x48b)](_0x2619bd(0x2bb));_0x1ee814===null&&(_0x45a51d['innerHTML']='');_0x45a676[_0x2619bd(0x1ad)][_0x2619bd(0x48b)](_0x2619bd(0x2bb)),_0x34f939[_0x2619bd(0x4ef)]=_0x5a20d4,document[_0x2619bd(0x439)](_0x2619bd(0xef))[_0x2619bd(0x247)]=!![],document['getElementById'](_0x2619bd(0x26d))['disabled']=!![],document['getElementById'](_0x2619bd(0x155))[_0x2619bd(0x247)]=!![];try{const _0x3c6a0f={'responseMimeType':'application/json','responseSchema':_0x288882},_0x14e2ea=Array[_0x2619bd(0x22e)](_0x5556c3)?_0x5556c3:[{'text':_0x5556c3}],_0x530dfe={'contents':[{'role':_0x2619bd(0xb3),'parts':_0x14e2ea}],'generationConfig':_0x3c6a0f},_0x31d57a=_0x2619bd(0x1cd),_0x22a262='https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key='+_0x31d57a,_0x487f53=await fetch(_0x22a262,{'method':_0x2619bd(0x325),'headers':{'Content-Type':_0x2619bd(0x2e5)},'body':JSON[_0x2619bd(0x38e)](_0x530dfe)});if(!_0x487f53['ok'])throw new Error(_0x2619bd(0x1c9)+_0x487f53[_0x2619bd(0x96)]);const _0x370b01=await _0x487f53[_0x2619bd(0x12b)]();if(_0x370b01[_0x2619bd(0x289)]?.[0x0]?.[_0x2619bd(0xe5)]?.[_0x2619bd(0x296)]?.[0x0]){let _0x1ba6bc=_0x370b01['candidates'][0x0][_0x2619bd(0xe5)]['parts'][0x0][_0x2619bd(0x36c)],_0x3dfb59;try{if(_0x1ba6bc[_0x2619bd(0x20c)](_0x2619bd(0x1e4)))_0x1ba6bc=_0x1ba6bc[_0x2619bd(0x3c0)](0x7,_0x1ba6bc[_0x2619bd(0x1f3)]-0x3)[_0x2619bd(0x1a1)]();else _0x1ba6bc[_0x2619bd(0x20c)]('```')&&(_0x1ba6bc=_0x1ba6bc[_0x2619bd(0x3c0)](0x3,_0x1ba6bc['length']-0x3)[_0x2619bd(0x1a1)]());_0x3dfb59=JSON[_0x2619bd(0x1d3)](_0x1ba6bc);}catch(_0x27e0c5){console[_0x2619bd(0x2db)](_0x2619bd(0x4da),_0x27e0c5,_0x1ba6bc);throw new Error(_0x2619bd(0xd5));}if(_0x1ee814!==null){if(_0x3dfb59[_0x2619bd(0x285)]===_0x2619bd(0x48c)){const _0x2e1ca0=currentQuizData[_0x2619bd(0x449)][_0x2619bd(0x263)](_0x429582=>_0x429582[_0x2619bd(0x350)]);_0x3dfb59[_0x2619bd(0x3c7)]=_0x2e1ca0;const _0x551882=currentQuizData['questions'][_0x1ee814][_0x2619bd(0x350)],_0x3c4ab6=_0x2e1ca0[_0x2619bd(0x257)](_0x551882);_0x3c4ab6>-0x1&&(_0x2e1ca0[_0x3c4ab6]=_0x3dfb59[_0x2619bd(0x350)]),currentQuizData[_0x2619bd(0x449)]['forEach'](_0x35517f=>{const _0x1fb503=_0x2619bd;if(_0x35517f['questionType']===_0x1fb503(0x48c))_0x35517f['allResponses']=_0x2e1ca0;});}currentQuizData[_0x2619bd(0x449)][_0x1ee814]=_0x3dfb59,displayGeneratedQuiz(currentQuizData);}else{currentQuizData=sanitizeQuizData(_0x3dfb59);const _0x4f7dd5=document['getElementById'](_0x2619bd(0x27e))[_0x2619bd(0x91)];currentQuizData[_0x2619bd(0x4af)]=_0x4f7dd5,currentQuizData[_0x2619bd(0x449)]&&currentQuizData[_0x2619bd(0x449)][_0x2619bd(0x4b7)](_0x47a69b=>{const _0x4fb3fb=_0x2619bd;if(!_0x47a69b[_0x4fb3fb(0x285)]){if(_0x4f7dd5===_0x4fb3fb(0x42c))_0x47a69b[_0x4fb3fb(0x285)]=_0x4fb3fb(0x110);else _0x4f7dd5===_0x4fb3fb(0x1b2)?_0x47a69b[_0x4fb3fb(0x285)]=_0x4fb3fb(0x15d):_0x47a69b[_0x4fb3fb(0x285)]=_0x4f7dd5;}}),displayGeneratedQuiz(currentQuizData);}}else{console[_0x2619bd(0x2db)](_0x2619bd(0x1c5),JSON[_0x2619bd(0x38e)](_0x370b01));throw new Error(_0x2619bd(0xd5));}}catch(_0x51ad7a){console['error'](_0x2619bd(0x171),_0x51ad7a),showMessage(_0x2619bd(0x286)),_0x1ee814===null&&(_0x45a51d[_0x2619bd(0x2b0)]=_0x2619bd(0x150));}finally{_0x45a676['classList'][_0x2619bd(0x136)](_0x2619bd(0x2bb)),document[_0x2619bd(0x439)](_0x2619bd(0xef))[_0x2619bd(0x247)]=![],document[_0x2619bd(0x439)](_0x2619bd(0x26d))['disabled']=![],document[_0x2619bd(0x439)](_0x2619bd(0x155))[_0x2619bd(0x247)]=![];}}function displayGeneratedQuiz(_0x277f76){const _0xf99e4a=_0x40d1b2,_0x342e3a=document['getElementById'](_0xf99e4a(0x4c9));let _0x2b80cc='<h3\x20class=\x22text-xl\x20font-bold\x20mb-3\x22\x20contenteditable=\x22true\x22\x20id=\x22editable-quiz-topic\x22>'+_0x277f76[_0xf99e4a(0x422)]+'</h3>';_0x277f76['questions'][_0xf99e4a(0x4b7)]((_0x190c97,_0x41f268)=>{const _0x21c20b=_0xf99e4a,_0x3c128c=_0x190c97[_0x21c20b(0x285)]||_0x277f76[_0x21c20b(0x4af)];_0x2b80cc+=_0x21c20b(0x349)+_0x41f268+_0x21c20b(0x146)+_0x41f268+_0x21c20b(0x369)+_0x41f268+_0x21c20b(0x46b);switch(_0x3c128c){case _0x21c20b(0x48c):_0x2b80cc+='<p\x20class=\x22font-semibold\x22\x20id=\x22q-text-'+_0x41f268+'\x22>'+(_0x41f268+0x1)+'.\x20'+_0x190c97[_0x21c20b(0x32a)]+_0x21c20b(0x1d7);_0x190c97[_0x21c20b(0x4e9)]&&(_0x2b80cc+=_0x21c20b(0x29b)+_0x41f268+_0x21c20b(0x1e0)+_0x190c97['imageCode']+'</div>');_0x2b80cc+=_0x21c20b(0x45c)+_0x41f268+'\x22>'+_0x190c97['correctResponse']+_0x21c20b(0x38d),_0x2b80cc+='<div\x20class=\x22mt-2\x20p-2\x20bg-blue-50\x20text-xs\x22><strong\x20class=\x22text-blue-700\x22>คำอธิบาย:</strong>\x20<span\x20id=\x22q-explanation-'+_0x41f268+'\x22>'+_0x190c97[_0x21c20b(0x1bb)]+'</span></div>';break;case _0x21c20b(0x15d):_0x2b80cc+=_0x21c20b(0x4ba)+_0x41f268+'\x22>'+(_0x41f268+0x1)+'.\x20'+_0x190c97[_0x21c20b(0x89)]+_0x21c20b(0x1d7);_0x190c97['imageCode']&&(_0x2b80cc+='<div\x20id=\x22q-image-container-'+_0x41f268+_0x21c20b(0x1e0)+_0x190c97[_0x21c20b(0x4e9)]+_0x21c20b(0xb5));_0x2b80cc+='<div\x20class=\x22mt-2\x20p-2\x20bg-gray-100\x20text-sm\x22><strong\x20class=\x22text-gray-700\x22>คำตอบที่คาดหวัง:</strong>\x20<span\x20id=\x22q-ideal-'+_0x41f268+'\x22>'+_0x190c97[_0x21c20b(0x379)]+_0x21c20b(0x38d),_0x2b80cc+=_0x21c20b(0xb8)+_0x41f268+'\x22>'+_0x190c97[_0x21c20b(0x1bb)]+_0x21c20b(0x38d);break;case'true_false':_0x2b80cc+='<p\x20class=\x22font-semibold\x22\x20id=\x22q-text-'+_0x41f268+'\x22>'+(_0x41f268+0x1)+'.\x20'+_0x190c97['questionText']+_0x21c20b(0x1d7);_0x190c97[_0x21c20b(0x4e9)]&&(_0x2b80cc+='<div\x20id=\x22q-image-container-'+_0x41f268+_0x21c20b(0x1e0)+_0x190c97[_0x21c20b(0x4e9)]+_0x21c20b(0xb5));_0x2b80cc+=_0x21c20b(0x48f)+(_0x190c97[_0x21c20b(0xaa)]===!![]?'text-green-600\x20font-bold':'')+'\x22>ใช่</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22'+(_0x190c97[_0x21c20b(0xaa)]===![]?_0x21c20b(0x143):'')+_0x21c20b(0x323),_0x2b80cc+=_0x21c20b(0xb8)+_0x41f268+'\x22>'+_0x190c97['explanation']+_0x21c20b(0x38d);break;case'fill_in_the_blank':case _0x21c20b(0x110):default:_0x2b80cc+='<p\x20class=\x22font-semibold\x22\x20id=\x22q-text-'+_0x41f268+'\x22>'+(_0x41f268+0x1)+'.\x20'+_0x190c97[_0x21c20b(0x89)]+_0x21c20b(0x1d7);_0x190c97[_0x21c20b(0x4e9)]&&(_0x2b80cc+=_0x21c20b(0x29b)+_0x41f268+_0x21c20b(0x1e0)+_0x190c97[_0x21c20b(0x4e9)]+_0x21c20b(0xb5));_0x2b80cc+='<ul\x20class=\x22list-disc\x20list-inside\x20mt-2\x20space-y-1\x20text-sm\x22\x20id=\x22q-options-'+_0x41f268+_0x21c20b(0x2ce)+_0x190c97[_0x21c20b(0x4ed)][_0x21c20b(0x263)]((_0x1c5f71,_0x1543a9)=>_0x21c20b(0x487)+(_0x1543a9===_0x190c97['correctAnswerIndex']?_0x21c20b(0x143):'')+'\x22>'+_0x1c5f71+'</li>')[_0x21c20b(0x17d)]('')+_0x21c20b(0x2ec),_0x2b80cc+='<div\x20class=\x22mt-2\x20p-2\x20bg-blue-50\x20text-xs\x22><strong\x20class=\x22text-blue-700\x22>คำอธิบาย:</strong>\x20<span\x20id=\x22q-explanation-'+_0x41f268+'\x22>'+_0x190c97['explanation']+_0x21c20b(0x38d);break;}_0x2b80cc+=_0x21c20b(0xb5);}),_0x2b80cc+=_0xf99e4a(0x3bc),_0x342e3a[_0xf99e4a(0x2b0)]=_0x2b80cc,document['querySelectorAll'](_0xf99e4a(0x1a7))[_0xf99e4a(0x4b7)](_0x371dd5=>_0x371dd5['addEventListener'](_0xf99e4a(0x128),handleEditQuestion)),document[_0xf99e4a(0x321)](_0xf99e4a(0x2e1))[_0xf99e4a(0x4b7)](_0x21dc78=>_0x21dc78['addEventListener']('click',handleRegenerateQuestion)),document['querySelectorAll'](_0xf99e4a(0x4ee))[_0xf99e4a(0x4b7)](_0x600b1f=>_0x600b1f[_0xf99e4a(0x444)]('click',handleSaveToBank)),document[_0xf99e4a(0x439)](_0xf99e4a(0x14d))['addEventListener'](_0xf99e4a(0x128),saveQuiz);if(window[_0xf99e4a(0x14f)])window[_0xf99e4a(0x14f)]['typesetPromise']([_0x342e3a]);}function handleRegenerateQuestion(_0x5853e6){const _0x1eee2c=_0x40d1b2,_0x1de17c=_0x5853e6['currentTarget'][_0x1eee2c(0x307)][_0x1eee2c(0x137)],_0x54f4a6=currentQuizData[_0x1eee2c(0x422)];showMessage('กำลังสร้างคำถามข้อ\x20'+(parseInt(_0x1de17c)+0x1)+'\x20ใหม่...'),generateQuiz(_0x54f4a6,null,parseInt(_0x1de17c));}function getPointerPosition(_0x530b31,_0x52eb2e){const _0x5a29a7=_0x40d1b2,_0x34daf9=_0x530b31[_0x5a29a7(0x4c5)]();let _0xc3bee,_0x35fa23;return _0x52eb2e[_0x5a29a7(0x453)]&&_0x52eb2e[_0x5a29a7(0x453)][_0x5a29a7(0x1f3)]>0x0?(_0xc3bee=_0x52eb2e[_0x5a29a7(0x453)][0x0][_0x5a29a7(0xba)],_0x35fa23=_0x52eb2e['touches'][0x0][_0x5a29a7(0x3ec)]):(_0xc3bee=_0x52eb2e[_0x5a29a7(0xba)],_0x35fa23=_0x52eb2e[_0x5a29a7(0x3ec)]),{'x':(_0xc3bee-_0x34daf9['e'])/_0x34daf9['a'],'y':(_0x35fa23-_0x34daf9['f'])/_0x34daf9['d']};}function startDrag(_0x449a0e){const _0x48e4f0=_0x40d1b2;_0x449a0e[_0x48e4f0(0x126)]==='touchstart'&&_0x449a0e[_0x48e4f0(0x450)]();const _0x201491=_0x449a0e[_0x48e4f0(0x16e)][_0x48e4f0(0x417)]('.draggable-text');if(_0x201491){draggedSvgElement=_0x201491;const _0x29f0be=draggedSvgElement[_0x48e4f0(0x264)],_0x3c5a68=getPointerPosition(_0x29f0be,_0x449a0e);svgOffset['x']=_0x3c5a68['x']-parseFloat(draggedSvgElement[_0x48e4f0(0x2fd)](null,'x')),svgOffset['y']=_0x3c5a68['y']-parseFloat(draggedSvgElement['getAttributeNS'](null,'y'));}}function drag(_0xf6301a){const _0x1141a9=_0x40d1b2;if(draggedSvgElement){_0xf6301a['preventDefault']();const _0x3df758=draggedSvgElement[_0x1141a9(0x264)],_0x295300=getPointerPosition(_0x3df758,_0xf6301a),_0x20375d=_0x3df758[_0x1141a9(0xa1)]['baseVal'];let _0xa9f36a=_0x295300['x']-svgOffset['x'],_0x5e2536=_0x295300['y']-svgOffset['y'];const _0x5a6f45=draggedSvgElement[_0x1141a9(0x2d4)]();_0xa9f36a=Math[_0x1141a9(0x237)](_0x20375d['x'],Math[_0x1141a9(0x480)](_0xa9f36a,_0x20375d['x']+_0x20375d[_0x1141a9(0x4b4)]-_0x5a6f45[_0x1141a9(0x4b4)])),_0x5e2536=Math[_0x1141a9(0x237)](_0x20375d['y'],Math['min'](_0x5e2536,_0x20375d['y']+_0x20375d[_0x1141a9(0x43b)]-_0x5a6f45['height'])),draggedSvgElement[_0x1141a9(0x4a6)](null,'x',_0xa9f36a),draggedSvgElement[_0x1141a9(0x4a6)](null,'y',_0x5e2536);}}function endDrag(_0x1883b5){draggedSvgElement=null;}function handleSvgEditClick(_0x4c692b){const _0x104d89=_0x40d1b2;if(_0x4c692b[_0x104d89(0x16e)]['classList']['contains'](_0x104d89(0x246))){const _0x29f668=_0x4c692b['target'][_0x104d89(0x307)]['targetId'],_0x16d317=_0x4c692b[_0x104d89(0xc8)],_0x865977=_0x16d317[_0x104d89(0x1e8)]('#'+_0x29f668);_0x865977&&_0x865977['remove'](),_0x4c692b[_0x104d89(0x16e)]['remove']();}}function handleEditQuestion(_0x40854a){const _0x3aa47b=_0x40d1b2,_0x36a1c8=_0x40854a[_0x3aa47b(0xc8)],_0x1ab554=_0x36a1c8[_0x3aa47b(0x307)]['index'],_0x145eac=currentQuizData[_0x3aa47b(0x449)][_0x1ab554],_0xa4d041=document[_0x3aa47b(0x439)](_0x3aa47b(0x1fc)+_0x1ab554),_0xbc7135=document['getElementById'](_0x3aa47b(0x392)+_0x1ab554),_0x68ad15=document[_0x3aa47b(0x439)](_0x3aa47b(0x3f3)+_0x1ab554);if(_0x36a1c8[_0x3aa47b(0x2b0)][_0x3aa47b(0x2fb)](_0x3aa47b(0x293))){_0x36a1c8[_0x3aa47b(0x2b0)]='<i\x20class=\x22fas\x20fa-save\x22></i>',_0x36a1c8[_0x3aa47b(0x361)]=_0x3aa47b(0x3f8);if(_0xa4d041)_0xa4d041['contentEditable']=!![];if(_0xbc7135)_0xbc7135[_0x3aa47b(0xa4)]=!![];if(_0x68ad15){const _0x39a181=_0x68ad15['querySelector'](_0x3aa47b(0x46c));if(_0x39a181){const _0x4e6081=_0x39a181[_0x3aa47b(0x321)](_0x3aa47b(0x36c));_0x4e6081[_0x3aa47b(0x4b7)]((_0x159efe,_0x3a2384)=>{const _0x4d1141=_0x3aa47b,_0x2df077=_0x4d1141(0x492)+_0x1ab554+'-'+_0x3a2384;_0x159efe['id']=_0x2df077,_0x159efe[_0x4d1141(0x1ad)][_0x4d1141(0x136)](_0x4d1141(0x1c4)),_0x159efe['style'][_0x4d1141(0x139)]=_0x4d1141(0x45a);const _0x44079c=document[_0x4d1141(0x3e4)](_0x4d1141(0x3fe),_0x4d1141(0x438)),_0x2883c4=_0x159efe[_0x4d1141(0x2d4)]();_0x44079c['setAttribute']('cx',String(_0x2883c4['x']+_0x2883c4['width']+0x5)),_0x44079c['setAttribute']('cy',String(_0x2883c4['y']+_0x2883c4[_0x4d1141(0x43b)]/0x2-0x5)),_0x44079c[_0x4d1141(0x28c)]('r','5'),_0x44079c['setAttribute'](_0x4d1141(0x3e1),_0x4d1141(0x1c0)),_0x44079c['setAttribute'](_0x4d1141(0xf0),_0x4d1141(0x246)),_0x44079c[_0x4d1141(0x307)]['targetId']=_0x2df077,_0x159efe[_0x4d1141(0x345)](_0x44079c);}),_0x39a181[_0x3aa47b(0x444)](_0x3aa47b(0x3c2),startDrag),_0x39a181[_0x3aa47b(0x444)](_0x3aa47b(0x1e2),drag),_0x39a181[_0x3aa47b(0x444)](_0x3aa47b(0xfb),endDrag),_0x39a181[_0x3aa47b(0x444)]('mouseleave',endDrag),_0x39a181['addEventListener'](_0x3aa47b(0x42b),startDrag,{'passive':![]}),_0x39a181['addEventListener'](_0x3aa47b(0x3c9),drag,{'passive':![]}),_0x39a181['addEventListener'](_0x3aa47b(0x290),endDrag),_0x39a181[_0x3aa47b(0x444)](_0x3aa47b(0x1bf),endDrag),_0x39a181[_0x3aa47b(0x444)](_0x3aa47b(0x128),handleSvgEditClick);}}if(_0xa4d041)_0xa4d041[_0x3aa47b(0x330)]();}else{_0x36a1c8[_0x3aa47b(0x2b0)]=_0x3aa47b(0xf1),_0x36a1c8['title']=_0x3aa47b(0x366);if(_0xa4d041){_0xa4d041['contentEditable']=![];const _0x4cfe0b=_0x145eac[_0x3aa47b(0x285)]||currentQuizData[_0x3aa47b(0x4af)];_0x4cfe0b===_0x3aa47b(0x48c)?_0x145eac[_0x3aa47b(0x32a)]=_0xa4d041[_0x3aa47b(0x1ba)]['substring'](_0xa4d041['innerText']['indexOf']('.')+0x2)['trim']():_0x145eac['questionText']=_0xa4d041[_0x3aa47b(0x1ba)][_0x3aa47b(0x3c0)](_0xa4d041[_0x3aa47b(0x1ba)]['indexOf']('.')+0x2)['trim']();}_0xbc7135&&(_0xbc7135[_0x3aa47b(0xa4)]=![],_0x145eac[_0x3aa47b(0x1bb)]=_0xbc7135[_0x3aa47b(0x1ba)]);if(_0x68ad15){const _0x29c06e=_0x68ad15[_0x3aa47b(0x1e8)](_0x3aa47b(0x46c));if(_0x29c06e){const _0x51eb91=_0x29c06e[_0x3aa47b(0x2a9)](!![]);_0x51eb91[_0x3aa47b(0x321)](_0x3aa47b(0x2dc))['forEach'](_0x4cf095=>_0x4cf095[_0x3aa47b(0x48b)]()),_0x51eb91[_0x3aa47b(0x321)]('.draggable-text')[_0x3aa47b(0x4b7)](_0x2e5c23=>{const _0x455cff=_0x3aa47b;_0x2e5c23['classList']['remove']('draggable-text'),_0x2e5c23[_0x455cff(0x442)][_0x455cff(0x139)]=_0x455cff(0x2d6),_0x2e5c23[_0x455cff(0x191)]('id');}),_0x145eac[_0x3aa47b(0x4e9)]=_0x51eb91[_0x3aa47b(0x3c6)],_0x29c06e[_0x3aa47b(0x170)]('mousedown',startDrag),_0x29c06e[_0x3aa47b(0x170)]('mousemove',drag),_0x29c06e[_0x3aa47b(0x170)](_0x3aa47b(0xfb),endDrag),_0x29c06e[_0x3aa47b(0x170)](_0x3aa47b(0x394),endDrag),_0x29c06e[_0x3aa47b(0x170)](_0x3aa47b(0x42b),startDrag),_0x29c06e[_0x3aa47b(0x170)](_0x3aa47b(0x3c9),drag),_0x29c06e['removeEventListener'](_0x3aa47b(0x290),endDrag),_0x29c06e[_0x3aa47b(0x170)](_0x3aa47b(0x1bf),endDrag),_0x29c06e[_0x3aa47b(0x170)](_0x3aa47b(0x128),handleSvgEditClick),_0x29c06e[_0x3aa47b(0x321)](_0x3aa47b(0x2dc))['forEach'](_0xe3d068=>_0xe3d068[_0x3aa47b(0x48b)]()),_0x29c06e['querySelectorAll'](_0x3aa47b(0x248))[_0x3aa47b(0x4b7)](_0x27f6e0=>{const _0x2a3e07=_0x3aa47b;_0x27f6e0[_0x2a3e07(0x1ad)][_0x2a3e07(0x48b)]('draggable-text'),_0x27f6e0['style'][_0x2a3e07(0x139)]=_0x2a3e07(0x2d6);});}}}}let currentEditingQuizData=null;async function handleOpenQuizEditor(_0xb91d8f){const _0x3a9ccd=_0x40d1b2,_0x20945e=document[_0x3a9ccd(0x439)](_0x3a9ccd(0x2ab)),_0x3105b3=document[_0x3a9ccd(0x439)](_0x3a9ccd(0x279));_0x3105b3[_0x3a9ccd(0x2b0)]=_0x3a9ccd(0x29f),_0x20945e[_0x3a9ccd(0x1ad)][_0x3a9ccd(0x48b)](_0x3a9ccd(0x2bb));try{const _0x51bfb6=doc(db,'artifacts/'+appId+_0x3a9ccd(0x3ad),_0xb91d8f),_0x39386d=await getDoc(_0x51bfb6);if(!_0x39386d[_0x3a9ccd(0x474)]())throw new Error(_0x3a9ccd(0xc7));currentEditingQuizData={'id':_0xb91d8f,..._0x39386d[_0x3a9ccd(0x372)]()},renderQuizEditor(currentEditingQuizData);}catch(_0x134ebd){console[_0x3a9ccd(0x2db)]('Error\x20opening\x20quiz\x20editor:',_0x134ebd),showMessage('เกิดข้อผิดพลาดในการโหลดข้อมูลแบบทดสอบ'),_0x20945e['classList'][_0x3a9ccd(0x136)](_0x3a9ccd(0x2bb));}}function renderQuizEditor(_0x35ad6d){const _0x5c823e=_0x40d1b2;document[_0x5c823e(0x439)](_0x5c823e(0x13d))[_0x5c823e(0x91)]=_0x35ad6d[_0x5c823e(0x422)];const _0x25eef0=document['getElementById'](_0x5c823e(0x279));let _0x236985=_0x35ad6d[_0x5c823e(0x449)]['map']((_0x1804d0,_0x43eca8)=>{const _0x226f25=_0x5c823e;let _0x78d5b6='';const _0x5e5ac6=_0x1804d0[_0x226f25(0x285)]||_0x35ad6d[_0x226f25(0x4af)];switch(_0x5e5ac6){case'multiple_choice':const _0x22da83=(_0x1804d0[_0x226f25(0x4ed)]||[])[_0x226f25(0x263)]((_0x2fb850,_0x1ef988)=>_0x226f25(0x25c)+_0x43eca8+_0x226f25(0x4cb)+_0x1ef988+'\x22\x20'+(_0x1ef988===_0x1804d0[_0x226f25(0x16d)]?_0x226f25(0x249):'')+_0x226f25(0x2c6)+_0x2fb850+'\x22\x20class=\x22w-full\x20p-1\x20border\x20rounded-md\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')['join']('');_0x78d5b6=_0x226f25(0xf7)+_0x22da83+_0x226f25(0x446);break;case _0x226f25(0x15d):_0x78d5b6=_0x226f25(0x4a7)+(_0x1804d0[_0x226f25(0x379)]||'')+'\x22\x20class=\x22w-full\x20p-1\x20border\x20rounded-md\x20ideal-answer-input\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';break;case _0x226f25(0xfc):_0x78d5b6=_0x226f25(0x21c)+_0x43eca8+'\x22\x20value=\x22true\x22\x20'+(_0x1804d0[_0x226f25(0xaa)]===!![]?_0x226f25(0x249):'')+_0x226f25(0x403)+_0x43eca8+_0x226f25(0x313)+(_0x1804d0[_0x226f25(0xaa)]===![]?_0x226f25(0x249):'')+_0x226f25(0x1f5);break;case _0x226f25(0x48c):_0x78d5b6=_0x226f25(0x9c)+(_0x1804d0[_0x226f25(0x350)]||'')+_0x226f25(0x2c9);break;}const _0x26bd0c=_0x1804d0['questionText']||_0x1804d0[_0x226f25(0x32a)]||'';return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20border\x20rounded-lg\x20bg-gray-50\x20question-editor-item\x22\x20data-q-type=\x22'+_0x5e5ac6+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-700\x20mb-1\x22>คำถามข้อที่\x20'+(_0x43eca8+0x1)+'\x20('+_0x5e5ac6+'):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20rows=\x222\x22>'+_0x26bd0c+_0x226f25(0x25e)+_0x78d5b6+_0x226f25(0x2be);})['join']('');_0x25eef0['innerHTML']=_0x236985;}async function handleSaveChanges(){const _0x29ec4a=_0x40d1b2,_0x2073df=document[_0x29ec4a(0x439)](_0x29ec4a(0x412));_0x2073df['disabled']=!![],_0x2073df[_0x29ec4a(0x2b0)]=_0x29ec4a(0x2cf);try{const _0x2b04c0=document['getElementById'](_0x29ec4a(0x13d))[_0x29ec4a(0x91)],_0x143b1d=document[_0x29ec4a(0x321)]('.question-editor-item');let _0x4ff782=[];const _0x4ab8b2=Array[_0x29ec4a(0x47f)](_0x143b1d)[_0x29ec4a(0x263)]((_0x331817,_0x93aa97)=>{const _0x50bbef=_0x29ec4a,_0x374e61=_0x331817[_0x50bbef(0x307)][_0x50bbef(0x4b1)],_0xac1c5d=_0x331817[_0x50bbef(0x1e8)](_0x50bbef(0x459))[_0x50bbef(0x91)];let _0x3b433e={'questionType':_0x374e61};const _0x5187b1=currentEditingQuizData['questions'][_0x93aa97];switch(_0x374e61){case _0x50bbef(0x110):_0x3b433e[_0x50bbef(0x89)]=_0xac1c5d;const _0xc6d946=_0x331817[_0x50bbef(0x321)](_0x50bbef(0x297));_0x3b433e['options']=Array['from'](_0xc6d946)[_0x50bbef(0x263)](_0x2a7ba0=>_0x2a7ba0[_0x50bbef(0x91)]);const _0x644a0d=_0x331817['querySelector'](_0x50bbef(0x228));_0x3b433e[_0x50bbef(0x16d)]=_0x644a0d?parseInt(_0x644a0d[_0x50bbef(0x91)]):0x0;break;case _0x50bbef(0x15d):_0x3b433e[_0x50bbef(0x89)]=_0xac1c5d,_0x3b433e['idealAnswer']=_0x331817['querySelector']('.ideal-answer-input')[_0x50bbef(0x91)];break;case _0x50bbef(0xfc):_0x3b433e['questionText']=_0xac1c5d;const _0x1ab9f7=_0x331817[_0x50bbef(0x1e8)](_0x50bbef(0x228));_0x3b433e['correctAnswer']=_0x1ab9f7?_0x1ab9f7[_0x50bbef(0x91)]===_0x50bbef(0x23a):!![];break;case'matching_item':_0x3b433e['stem']=_0xac1c5d;const _0x861555=_0x331817[_0x50bbef(0x1e8)]('.correct-response-input');_0x3b433e[_0x50bbef(0x350)]=_0x861555?_0x861555[_0x50bbef(0x91)]:'',_0x4ff782['push'](_0x3b433e['correctResponse']);break;default:_0x3b433e[_0x50bbef(0x89)]=_0xac1c5d;break;}return{..._0x5187b1,..._0x3b433e};});_0x4ff782['length']>0x0&&_0x4ab8b2['forEach'](_0x5b8ae8=>{const _0x3f02bb=_0x29ec4a;_0x5b8ae8['questionType']===_0x3f02bb(0x48c)&&(_0x5b8ae8[_0x3f02bb(0x3c7)]=_0x4ff782);});const _0x4ae47e=doc(db,_0x29ec4a(0x282)+appId+_0x29ec4a(0x3ad),currentEditingQuizData['id']);await updateDoc(_0x4ae47e,{'topic':_0x2b04c0,'questions':_0x4ab8b2}),showMessage(_0x29ec4a(0x15c)),document['getElementById'](_0x29ec4a(0x2ab))['classList'][_0x29ec4a(0x136)](_0x29ec4a(0x2bb));}catch(_0xb7c4){console[_0x29ec4a(0x2db)](_0x29ec4a(0x259),_0xb7c4),showMessage(_0x29ec4a(0x38c));}finally{_0x2073df[_0x29ec4a(0x247)]=![],_0x2073df[_0x29ec4a(0x2b0)]=_0x29ec4a(0x441);}}async function saveQuiz(){const _0x208ed5=_0x40d1b2;if(!currentQuizData||!currentQuizData[_0x208ed5(0x449)]||!userId||!currentProjectId){showMessage('ข้อมูลไม่ครบถ้วน\x20ไม่สามารถบันทึกได้');return;}const _0x4e2f16=document[_0x208ed5(0x439)]('save-quiz-btn');_0x4e2f16[_0x208ed5(0x247)]=!![],_0x4e2f16[_0x208ed5(0x2b0)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังบันทึก...',currentQuizData[_0x208ed5(0x422)]=document[_0x208ed5(0x439)]('editable-quiz-topic')[_0x208ed5(0x1ba)];try{const _0x42bfc6={'resultsDisplay':document[_0x208ed5(0x439)]('results-display-select')['value'],'shuffle':document['getElementById']('shuffle-setting-select')[_0x208ed5(0x91)],'timerMode':document[_0x208ed5(0x439)](_0x208ed5(0x1f6))['value'],'timerDuration':parseInt(document['getElementById']('timer-duration-input')[_0x208ed5(0x91)])||0xa,'passingScore':parseInt(document['getElementById'](_0x208ed5(0x3e7))[_0x208ed5(0x91)])||0x0,'passingScore':parseInt(document[_0x208ed5(0x439)](_0x208ed5(0x3e7))[_0x208ed5(0x91)])||0x0,'isAdaptive':document[_0x208ed5(0x439)]('adaptive-quiz-checkbox')['checked']},_0x5813f7=(currentQuizData[_0x208ed5(0x449)]||[])['map'](_0x35fabf=>{const _0x3afad5=_0x208ed5,_0x1e38b1=document[_0x3afad5(0x439)](_0x3afad5(0x27e))['value'],_0x3767c3={'questionText':_0x35fabf[_0x3afad5(0x89)]||'','explanation':_0x35fabf[_0x3afad5(0x1bb)]||_0x3afad5(0x195),'questionType':_0x35fabf[_0x3afad5(0x285)]||_0x1e38b1,'imageCode':_0x35fabf[_0x3afad5(0x4e9)]||null};return(_0x3767c3[_0x3afad5(0x285)]===_0x3afad5(0x110)||_0x3767c3['questionType']==='fill_in_with_choices'||_0x3767c3[_0x3afad5(0x285)]==='mixed'&&_0x35fabf['options'])&&(_0x3767c3[_0x3afad5(0x4ed)]=_0x35fabf[_0x3afad5(0x4ed)]||[],_0x3767c3[_0x3afad5(0x16d)]=_0x35fabf[_0x3afad5(0x16d)]!==undefined?_0x35fabf[_0x3afad5(0x16d)]:0x0),(_0x3767c3[_0x3afad5(0x285)]===_0x3afad5(0x15d)||_0x3767c3[_0x3afad5(0x285)]==='fill_in_no_choices'||_0x3767c3[_0x3afad5(0x285)]===_0x3afad5(0x187)&&_0x35fabf[_0x3afad5(0x379)])&&(_0x3767c3[_0x3afad5(0x379)]=_0x35fabf[_0x3afad5(0x379)]||''),_0x3767c3['questionType']===_0x3afad5(0xfc)&&(_0x3767c3[_0x3afad5(0xaa)]=_0x35fabf[_0x3afad5(0xaa)]===!![]),_0x3767c3[_0x3afad5(0x285)]===_0x3afad5(0x48c)&&(_0x3767c3['stem']=_0x35fabf[_0x3afad5(0x32a)]||'',_0x3767c3[_0x3afad5(0x350)]=_0x35fabf[_0x3afad5(0x350)]||'',_0x3767c3[_0x3afad5(0x3c7)]=_0x35fabf[_0x3afad5(0x3c7)]||[]),_0x3767c3;}),_0x1512a6={'topic':currentQuizData['topic']||_0x208ed5(0x4f0),'quizType':currentQuizData[_0x208ed5(0x4af)]||_0x208ed5(0x110),'questions':_0x5813f7,'projectId':currentProjectId,'createdBy':userId,'createdAt':new Date()[_0x208ed5(0x4b8)](),'status':_0x208ed5(0x436),'settings':_0x42bfc6};let _0x79c020;while(!![]){_0x79c020=Math[_0x208ed5(0x22d)](0x3e8+Math[_0x208ed5(0x406)]()*0x2328)[_0x208ed5(0x168)]();const _0x4ca7c6=await getDoc(doc(db,'artifacts/'+appId+_0x208ed5(0x3ad),_0x79c020));if(!_0x4ca7c6[_0x208ed5(0x474)]())break;}await setDoc(doc(db,'artifacts/'+appId+_0x208ed5(0x3ad),_0x79c020),_0x1512a6),currentQuizData[_0x208ed5(0x1a9)]=_0x42bfc6,currentQuizData['id']=_0x79c020;const _0xfd6fab=document[_0x208ed5(0x439)](_0x208ed5(0x2f3));_0xfd6fab[_0x208ed5(0x2b0)]=_0x208ed5(0x27c)+_0x79c020+_0x208ed5(0x4f2),document[_0x208ed5(0x439)]('copy-quiz-id-btn')['addEventListener'](_0x208ed5(0x128),()=>copyTextToClipboard(_0x79c020,_0x208ed5(0x1f2))),document[_0x208ed5(0x439)]('start-live-race-generated-btn')[_0x208ed5(0x444)]('click',()=>handleStartLiveRace(_0x79c020)),document[_0x208ed5(0x439)](_0x208ed5(0x4de))[_0x208ed5(0x444)](_0x208ed5(0x128),()=>startPresentation(currentQuizData)),document['getElementById'](_0x208ed5(0x4c3))['addEventListener'](_0x208ed5(0x128),startAdminTest),showMessage(_0x208ed5(0x202));}catch(_0x10318a){console['error']('Error\x20saving\x20quiz:',_0x10318a),showMessage('เกิดข้อผิดพลาดในการบันทึกแบบทดสอบ'),_0x4e2f16[_0x208ed5(0x247)]=![],_0x4e2f16[_0x208ed5(0x2b0)]='<i\x20class=\x22fas\x20fa-save\x20mr-2\x22></i>บันทึกและสร้างรหัส';}}function copyTextToClipboard(_0x962c5c,_0x1be745){const _0x26fcb2=_0x40d1b2,_0x8564f1=document['createElement'](_0x26fcb2(0x459));_0x8564f1['value']=_0x962c5c,_0x8564f1[_0x26fcb2(0x442)][_0x26fcb2(0x4ca)]=_0x26fcb2(0xc0),_0x8564f1[_0x26fcb2(0x442)]['opacity']='0',document[_0x26fcb2(0x3b5)][_0x26fcb2(0x380)](_0x8564f1),_0x8564f1[_0x26fcb2(0x330)](),_0x8564f1[_0x26fcb2(0x108)]();try{const _0x2b0388=document[_0x26fcb2(0x4e0)](_0x26fcb2(0x209));showMessage(_0x2b0388?_0x1be745:_0x26fcb2(0x433));}catch(_0x5d6952){showMessage('คัดลอกไม่สำเร็จ'),console['error'](_0x26fcb2(0x4f6),_0x5d6952);}document[_0x26fcb2(0x3b5)][_0x26fcb2(0x236)](_0x8564f1);}function listenForProjectQuizzes(_0x29a8e3){const _0x2d27f8=_0x40d1b2,_0x5a990a=collection(db,_0x2d27f8(0x282)+appId+_0x2d27f8(0x3ad)),_0x200531=query(_0x5a990a,where(_0x2d27f8(0x1cb),'==',_0x29a8e3));unsubscribeQuizzesListener=onSnapshot(_0x200531,async _0x22aea7=>{const _0x33079c=_0x2d27f8;allQuizzes=_0x22aea7[_0x33079c(0x231)][_0x33079c(0x263)](_0x25a018=>({'id':_0x25a018['id'],..._0x25a018[_0x33079c(0x372)]()})),renderQuizzes();},_0x4f4938=>{const _0x25989e=_0x2d27f8;console[_0x25989e(0x2db)](_0x25989e(0x40f),_0x4f4938),document[_0x25989e(0x439)](_0x25989e(0x270))[_0x25989e(0x2b0)]='<p\x20class=\x22text-red-500\x22>เกิดข้อผิดพลาดในการโหลดแบบทดสอบ</p>';});}async function renderQuizzes(){const _0x24a5fd=_0x40d1b2,_0x480034=document[_0x24a5fd(0x439)]('project-quizzes-list'),_0x26379f=document[_0x24a5fd(0x439)]('quiz-search-input')['value'][_0x24a5fd(0x4a2)]();let _0x2ac278;currentProjectId===_0x24a5fd(0x15a)?_0x2ac278=starredQuizzes:_0x2ac278=allQuizzes;let _0x1195ea=_0x2ac278[_0x24a5fd(0x3f2)](_0x2e1544=>_0x2e1544[_0x24a5fd(0x422)][_0x24a5fd(0x4a2)]()['includes'](_0x26379f));_0x1195ea['sort']((_0x1eabd0,_0x22fc26)=>new Date(_0x22fc26['createdAt'])-new Date(_0x1eabd0['createdAt']));if(_0x1195ea[_0x24a5fd(0x1f3)]===0x0){_0x480034[_0x24a5fd(0x2b0)]=_0x24a5fd(0x1b6);return;}const _0x40404d={},_0x1f3d72=_0x1195ea[_0x24a5fd(0x263)](async _0x5152aa=>{const _0x4d0c42=_0x24a5fd,_0x2a4050=collection(db,_0x4d0c42(0x282)+appId+_0x4d0c42(0x44e)+_0x5152aa['id']+_0x4d0c42(0x3eb)),_0x4679cf=await getDocs(_0x2a4050);_0x40404d[_0x5152aa['id']]=_0x4679cf[_0x4d0c42(0x3d3)];});await Promise['all'](_0x1f3d72);let _0x33af3d='';_0x1195ea[_0x24a5fd(0x4b7)](_0x277e44=>{const _0x59073d=_0x24a5fd,_0x24a4b9=_0x40404d[_0x277e44['id']]||0x0,_0x2db0f7=_0x277e44[_0x59073d(0x96)]||_0x59073d(0x436),_0x4b4911=_0x277e44[_0x59073d(0x1a9)]?.['timerMode']||'none';let _0x13bbb3='',_0xa88018='';const _0x3c5e3d=new Date();let _0x499115=_0x2db0f7;if(_0x2db0f7==='scheduled'){const _0x4c3452=_0x277e44[_0x59073d(0x135)]?new Date(_0x277e44['startTime']):null,_0x2cae01=_0x277e44['endTime']?new Date(_0x277e44[_0x59073d(0x1d0)]):null;if(_0x2cae01&&_0x3c5e3d>_0x2cae01)_0x499115=_0x59073d(0x183);else _0x4c3452&&_0x3c5e3d<_0x4c3452?_0x499115=_0x59073d(0x31a):_0x499115=_0x59073d(0x436);}switch(_0x499115){case _0x59073d(0x183):_0x13bbb3=_0x59073d(0x41e),_0xa88018=_0x59073d(0x388);break;case _0x59073d(0x31a):_0x13bbb3=_0x59073d(0x16c),_0xa88018='text-blue-700\x20bg-blue-100';break;case _0x59073d(0x436):_0x13bbb3=_0x4b4911!==_0x59073d(0x4a9)?'เปิด\x20(จับเวลา)':'เปิดใช้งาน',_0xa88018=_0x59073d(0x144);break;default:_0x13bbb3=_0x59073d(0x34f),_0xa88018='text-green-700\x20bg-green-100';}let _0x13a7a8='';const _0x55da01={'day':_0x59073d(0x269),'month':'2-digit','year':_0x59073d(0x341),'hour':_0x59073d(0x269),'minute':_0x59073d(0x269),'hour12':![]};_0x2db0f7==='scheduled'&&(_0x277e44['startTime']&&(_0x13a7a8+='<p\x20class=\x22text-xs\x20text-gray-500\x20mt-1\x22>เปิด:\x20'+new Date(_0x277e44[_0x59073d(0x135)])[_0x59073d(0x316)]('th-TH',_0x55da01)+_0x59073d(0x1d7)),_0x277e44[_0x59073d(0x1d0)]&&(_0x13a7a8+=_0x59073d(0x17e)+new Date(_0x277e44['endTime'])[_0x59073d(0x316)]('th-TH',_0x55da01)+_0x59073d(0x1d7))),_0x33af3d+=_0x59073d(0xa8)+_0x277e44['id']+_0x59073d(0x405)+_0x277e44[_0x59073d(0x422)]+_0x59073d(0x98)+_0x277e44['questions'][_0x59073d(0x1f3)]+_0x59073d(0x24c)+new Date(_0x277e44['createdAt'])['toLocaleString'](_0x59073d(0x332))+_0x59073d(0x2ad)+_0x24a4b9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-gray-600\x22>\x20คนส่ง</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x13a7a8+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20font-semibold\x20px-2\x20py-1\x20rounded-full\x20'+_0xa88018+'\x22>'+_0x13bbb3+_0x59073d(0x333)+_0x277e44['id']+_0x59073d(0x2d3)+_0x277e44['id']+_0x59073d(0x1ec)+(_0x277e44[_0x59073d(0x4be)]?_0x59073d(0x3e5):_0x59073d(0xe4))+'\x22></i>\x0a</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22'+_0x277e44['id']+_0x59073d(0x2ca)+_0x277e44['id']+'\x22\x20data-topic=\x22'+_0x277e44[_0x59073d(0x422)]+'\x22\x20class=\x22rename-quiz-btn\x20text-yellow-800\x20bg-yellow-100\x20hover:bg-yellow-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-edit\x22></i>\x20แก้ไขชื่อ</button>\x0a\x09\x09\x09\x09\x09\x09\x09\x20<button\x20data-quiz-id=\x22'+_0x277e44['id']+_0x59073d(0x4dc)+_0x277e44['id']+_0x59073d(0x494)+_0x277e44['id']+_0x59073d(0xfd)+_0x277e44['id']+_0x59073d(0x188)+_0x277e44['id']+_0x59073d(0x476)+_0x277e44['id']+_0x59073d(0x41d)+_0x277e44['id']+_0x59073d(0x27b)+_0x277e44['id']+_0x59073d(0x2e2)+_0x277e44[_0x59073d(0x422)]+_0x59073d(0x2c2);}),_0x480034[_0x24a5fd(0x2b0)]=_0x33af3d,document[_0x24a5fd(0x321)](_0x24a5fd(0x20e))['forEach'](_0x50713d=>{const _0x221504=_0x24a5fd;_0x50713d[_0x221504(0x444)](_0x221504(0x128),()=>{const _0x5a112d=_0x221504,_0xb90db5=_0x50713d[_0x5a112d(0x307)][_0x5a112d(0x23b)];showQuizDetailView(_0xb90db5);});});}async function handleDuplicateQuiz(_0x4d2452){const _0x43b1b6=_0x40d1b2;try{const _0x3921f9=doc(db,_0x43b1b6(0x282)+appId+'/public/data/quizzes',_0x4d2452),_0x454672=await getDoc(_0x3921f9);if(_0x454672[_0x43b1b6(0x474)]()){const _0x518fcb=_0x454672[_0x43b1b6(0x372)](),_0x23ebdc={..._0x518fcb,'topic':_0x43b1b6(0xc2)+_0x518fcb[_0x43b1b6(0x422)],'createdAt':new Date()[_0x43b1b6(0x4b8)]()};await addDoc(collection(db,_0x43b1b6(0x282)+appId+_0x43b1b6(0x3ad)),_0x23ebdc),showMessage(_0x43b1b6(0x3aa));}else throw new Error(_0x43b1b6(0x466));}catch(_0x261a4b){console['error'](_0x43b1b6(0x94),_0x261a4b),showMessage('เกิดข้อผิดพลาดในการคัดลอกแบบทดสอบ');}}async function handleDeleteQuiz(_0x2dfa68,_0x5775b1=!![]){const _0x4ffefb=_0x40d1b2;try{const _0x5f2da9=writeBatch(db),_0x145eae=collection(db,'artifacts/'+appId+_0x4ffefb(0x44e)+_0x2dfa68+_0x4ffefb(0x3eb)),_0x441b2b=await getDocs(_0x145eae);_0x441b2b[_0x4ffefb(0x4b7)](_0x5c20f4=>{const _0x3b5cc6=_0x4ffefb;_0x5f2da9[_0x3b5cc6(0xb4)](doc(_0x145eae,_0x5c20f4['id']));});const _0x200cf8=doc(db,'artifacts/'+appId+_0x4ffefb(0x3ad),_0x2dfa68);_0x5f2da9[_0x4ffefb(0xb4)](_0x200cf8),await _0x5f2da9[_0x4ffefb(0xa0)](),_0x5775b1&&showMessage(_0x4ffefb(0x190));}catch(_0x504082){console['error'](_0x4ffefb(0x485),_0x504082),_0x5775b1&&showMessage(_0x4ffefb(0x103));}}async function showQuizDetailView(_0x7c4d45){const _0x41db46=_0x40d1b2;if(unsubscribeSubmissionsListener)unsubscribeSubmissionsListener();switchQuizDetailTab(_0x41db46(0x36b));try{const _0xa668f3=doc(db,_0x41db46(0x282)+appId+'/public/data/quizzes',_0x7c4d45),_0x2caceb=await getDoc(_0xa668f3);if(!_0x2caceb[_0x41db46(0x474)]()){showMessage('ไม่พบข้อมูลแบบทดสอบ');return;}const _0x56df06={'id':_0x2caceb['id'],..._0x2caceb[_0x41db46(0x372)]()};currentQuizData=_0x56df06;const _0x132f9b=doc(db,_0x41db46(0x282)+appId+_0x41db46(0x381),_0x56df06[_0x41db46(0x1cb)]),_0x2296cb=await getDoc(_0x132f9b);_0x2296cb[_0x41db46(0x474)]()?(currentProjectData=_0x2296cb[_0x41db46(0x372)](),currentProjectId=_0x56df06[_0x41db46(0x1cb)]):(currentProjectData={'students':[]},currentProjectId=_0x56df06[_0x41db46(0x1cb)]);document[_0x41db46(0x439)](_0x41db46(0x415))['textContent']=_0x56df06[_0x41db46(0x422)],document[_0x41db46(0x439)]('results-quiz-id-display')[_0x41db46(0x4ef)]=_0x7c4d45;const _0x2ab911=collection(db,_0x41db46(0x282)+appId+_0x41db46(0x3ad),_0x7c4d45,'submissions');unsubscribeSubmissionsListener=onSnapshot(_0x2ab911,_0x4766b7=>{const _0x4238f7=_0x41db46,_0x440cbe=_0x4766b7[_0x4238f7(0x231)]['map'](_0x271eba=>({'id':_0x271eba['id'],..._0x271eba[_0x4238f7(0x372)]()}));renderAnalytics(_0x56df06,_0x440cbe),renderQuizResultsTable(currentProjectData[_0x4238f7(0x28d)],_0x440cbe,_0x56df06),renderQuizLeaderboard(_0x440cbe,_0x56df06,_0x4238f7(0xb0));}),showView(_0x41db46(0x4d6));}catch(_0x429be8){console[_0x41db46(0x2db)]('Error\x20showing\x20quiz\x20detail\x20view:',_0x429be8),showMessage(_0x41db46(0x134));}}function renderQuizResultsTable(_0x171cc1,_0x43ce74,_0x5b40d7){const _0x465e10=_0x40d1b2,_0x33d52d=_0x43ce74[_0x465e10(0xdb)]((_0x1d3a14,_0x519116)=>{const _0x1c0d4d=_0x465e10;return _0x1d3a14[_0x519116[_0x1c0d4d(0x374)]]=_0x519116,_0x1d3a14;},{}),_0x85b875=document['getElementById']('quiz-results-table-body');if(!_0x171cc1||_0x171cc1['length']===0x0){_0x85b875[_0x465e10(0x2b0)]=_0x465e10(0x272);return;}const _0x396abf=_0x5b40d7[_0x465e10(0x101)]===!![],_0x3fa4aa=_0x5b40d7[_0x465e10(0x1a9)]?.[_0x465e10(0xbd)]??-0x1;let _0x5babf4='';_0x171cc1[_0x465e10(0x4b7)](_0x44d436=>{const _0x4bf87c=_0x465e10,_0x31466f=_0x33d52d[_0x44d436];let _0x31906d=_0x4bf87c(0x240),_0x4005de=_0x4bf87c(0x300)+(_0x396abf?'bg-amber-100\x20text-amber-800':_0x4bf87c(0x322))+'\x22>'+(_0x396abf?_0x4bf87c(0x426):_0x4bf87c(0x479))+_0x4bf87c(0x109);if(_0x31466f){let _0x16e99d;_0x396abf?_0x16e99d=_0x31466f[_0x4bf87c(0x25b)]===_0x31466f[_0x4bf87c(0x1ae)]:_0x16e99d=_0x3fa4aa!==-0x1&&_0x31466f[_0x4bf87c(0x25b)]>=_0x3fa4aa;if(_0x396abf||_0x3fa4aa!==-0x1){const _0x3edd8a=_0x16e99d?_0x4bf87c(0x2fa):_0x4bf87c(0x324),_0xb3c624=_0x16e99d?_0x4bf87c(0x220):'ไม่ผ่าน';_0x31906d=_0x4bf87c(0xec)+_0x3edd8a+'\x22>'+_0xb3c624+_0x4bf87c(0x109);}const _0x4a506e=_0x4bf87c(0x1eb)+(_0x31466f[_0x4bf87c(0x206)]?.['length']||0x1)+_0x4bf87c(0xc6);_0x5babf4+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>'+_0x44d436+_0x4bf87c(0x2b2)+_0x31466f[_0x4bf87c(0x25b)]+_0x4bf87c(0x16a)+_0x31466f[_0x4bf87c(0x1ae)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x31906d+_0x4bf87c(0x21d)+_0x4005de+_0x4bf87c(0x243)+_0x31466f[_0x4bf87c(0x45e)]+_0x4bf87c(0x16a)+_0x31466f[_0x4bf87c(0x1ae)]+_0x4bf87c(0x133)+_0x31466f[_0x4bf87c(0x4c8)]+_0x4bf87c(0x46e)+(_0x31466f[_0x4bf87c(0xb6)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4a506e+_0x4bf87c(0x17f)+new Date(_0x31466f['latestSubmittedAt'])[_0x4bf87c(0x316)](_0x4bf87c(0x332))+_0x4bf87c(0x85);}else{const _0x815e92=_0x4bf87c(0x2f1);_0x5babf4+=_0x4bf87c(0x267)+_0x44d436+_0x4bf87c(0x132)+_0x4005de+_0x4bf87c(0x4cd)+_0x815e92+_0x4bf87c(0x28b);}}),_0x85b875[_0x465e10(0x2b0)]=_0x5babf4;}function handleRenameQuiz(_0x3fdcc4,_0x315e96){const _0x45f49b=_0x40d1b2;actionTargetId=_0x3fdcc4,document[_0x45f49b(0x439)]('rename-quiz-input')[_0x45f49b(0x91)]=_0x315e96,renameQuizModal[_0x45f49b(0x1ad)][_0x45f49b(0x48b)](_0x45f49b(0x2bb));}async function confirmRenameQuiz(){const _0x14696d=_0x40d1b2,_0x56ec4d=document[_0x14696d(0x439)](_0x14696d(0xfe))[_0x14696d(0x91)]['trim']();if(!_0x56ec4d){showMessage(_0x14696d(0x37d));return;}if(!actionTargetId)return;const _0x4f870f=doc(db,_0x14696d(0x282)+appId+_0x14696d(0x3ad),actionTargetId);try{await updateDoc(_0x4f870f,{'topic':_0x56ec4d}),showMessage(_0x14696d(0x29d)),renameQuizModal[_0x14696d(0x1ad)][_0x14696d(0x136)](_0x14696d(0x2bb)),actionTargetId=null;}catch(_0x1a6000){console[_0x14696d(0x2db)]('Error\x20renaming\x20quiz:',_0x1a6000),showMessage('เกิดข้อผิดพลาดในการเปลี่ยนชื่อ');}}async function handleMoveQuiz(_0x278986){const _0xd3b098=_0x40d1b2;actionTargetId=_0x278986;const _0x2b9882=document[_0xd3b098(0x439)](_0xd3b098(0xbb));_0x2b9882[_0xd3b098(0x2b0)]=_0xd3b098(0x357),moveQuizModal[_0xd3b098(0x1ad)][_0xd3b098(0x48b)](_0xd3b098(0x2bb));try{const _0x3b8ec0=collection(db,_0xd3b098(0x282)+appId+_0xd3b098(0x381)),_0x15a10f=await getDocs(_0x3b8ec0),_0x2ef751=_0x15a10f[_0xd3b098(0x231)][_0xd3b098(0x263)](_0x3cd9cf=>({'id':_0x3cd9cf['id'],..._0x3cd9cf[_0xd3b098(0x372)]()})),_0x120b72=_0x2ef751['filter'](_0x168ebc=>_0x168ebc['id']!==currentProjectId);if(_0x120b72[_0xd3b098(0x1f3)]===0x0){_0x2b9882[_0xd3b098(0x2b0)]='<option\x20value=\x22\x22>ไม่มีโปรเจคอื่นให้ย้ายไป</option>',document[_0xd3b098(0x439)]('confirm-move-quiz-btn')[_0xd3b098(0x247)]=!![];return;}_0x2b9882[_0xd3b098(0x2b0)]=_0x120b72[_0xd3b098(0x263)](_0x3d1876=>_0xd3b098(0x20b)+_0x3d1876['id']+'\x22>'+_0x3d1876['projectName']+'</option>')[_0xd3b098(0x17d)](''),document[_0xd3b098(0x439)](_0xd3b098(0x421))[_0xd3b098(0x247)]=![];}catch(_0x30bdbe){console[_0xd3b098(0x2db)](_0xd3b098(0x413),_0x30bdbe),showMessage('ไม่สามารถโหลดรายการโปรเจคได้'),moveQuizModal[_0xd3b098(0x1ad)][_0xd3b098(0x136)](_0xd3b098(0x2bb));}}async function confirmMoveQuiz(){const _0x198ba1=_0x40d1b2,_0x22f6f8=document['getElementById'](_0x198ba1(0xbb))[_0x198ba1(0x91)];if(!_0x22f6f8){showMessage(_0x198ba1(0x1f4));return;}if(!actionTargetId)return;const _0x51f1fb=doc(db,_0x198ba1(0x282)+appId+_0x198ba1(0x3ad),actionTargetId);try{await updateDoc(_0x51f1fb,{'projectId':_0x22f6f8}),showMessage(_0x198ba1(0x424)),moveQuizModal[_0x198ba1(0x1ad)][_0x198ba1(0x136)](_0x198ba1(0x2bb)),actionTargetId=null;}catch(_0x5688d7){console['error'](_0x198ba1(0x3ce),_0x5688d7),showMessage(_0x198ba1(0x3a1));}}async function handleQuizSettings(_0xb469e4){const _0x31e035=_0x40d1b2;actionTargetId=_0xb469e4;const _0x3f4df5=doc(db,_0x31e035(0x282)+appId+_0x31e035(0x3ad),_0xb469e4);try{const _0x3bd9a8=await getDoc(_0x3f4df5);if(_0x3bd9a8[_0x31e035(0x474)]()){const _0x3d2510=_0x3bd9a8['data'](),_0x2c87d9=_0x3d2510['settings']||{},_0x4b9081=_0x3d2510[_0x31e035(0x449)]['length'];document[_0x31e035(0x439)](_0x31e035(0x148))[_0x31e035(0x91)]=_0x2c87d9[_0x31e035(0x371)]||_0x31e035(0x4a9),document[_0x31e035(0x439)](_0x31e035(0x1ea))['value']=_0x2c87d9[_0x31e035(0xa7)]||_0x31e035(0x1f9),document[_0x31e035(0x439)](_0x31e035(0x4bf))[_0x31e035(0x91)]=_0x2c87d9[_0x31e035(0xaf)]||_0x31e035(0x4a9),document[_0x31e035(0x439)](_0x31e035(0xe6))[_0x31e035(0x91)]=_0x2c87d9[_0x31e035(0x227)]||0xa,document[_0x31e035(0x439)](_0x31e035(0x48e))[_0x31e035(0x91)]=_0x2c87d9[_0x31e035(0xbd)]||Math[_0x31e035(0x22d)](_0x4b9081/0x2),document[_0x31e035(0x439)](_0x31e035(0x48e))[_0x31e035(0x237)]=_0x4b9081,document[_0x31e035(0x439)](_0x31e035(0x2ed))[_0x31e035(0x249)]=_0x2c87d9['isAdaptive']||![],document['getElementById'](_0x31e035(0x4bf))[_0x31e035(0x4f7)](new Event(_0x31e035(0x375))),quizSettingsModal['classList']['remove'](_0x31e035(0x2bb));}else showMessage(_0x31e035(0x308));}catch(_0x4e058a){console[_0x31e035(0x2db)](_0x31e035(0x241),_0x4e058a),showMessage(_0x31e035(0x1b1));}}async function confirmQuizSettings(){const _0x1fcc73=_0x40d1b2;if(!actionTargetId)return;const _0x529c1a=doc(db,'artifacts/'+appId+_0x1fcc73(0x3ad),actionTargetId),_0x454037={'shuffle':document[_0x1fcc73(0x439)](_0x1fcc73(0x148))['value'],'resultsDisplay':document[_0x1fcc73(0x439)](_0x1fcc73(0x1ea))['value'],'timerMode':document['getElementById'](_0x1fcc73(0x4bf))[_0x1fcc73(0x91)],'timerDuration':parseInt(document[_0x1fcc73(0x439)](_0x1fcc73(0xe6))[_0x1fcc73(0x91)])||0xa,'passingScore':parseInt(document[_0x1fcc73(0x439)](_0x1fcc73(0x48e))['value'])||0x0,'passingScore':parseInt(document[_0x1fcc73(0x439)](_0x1fcc73(0x48e))[_0x1fcc73(0x91)])||0x0,'isAdaptive':document[_0x1fcc73(0x439)]('modal-adaptive-quiz-checkbox')[_0x1fcc73(0x249)]};try{await updateDoc(_0x529c1a,{'settings':_0x454037}),showMessage('บันทึกการตั้งค่าสำเร็จ'),quizSettingsModal['classList'][_0x1fcc73(0x136)](_0x1fcc73(0x2bb)),actionTargetId=null;}catch(_0x5b2d4f){console[_0x1fcc73(0x2db)]('Error\x20updating\x20quiz\x20settings:',_0x5b2d4f),showMessage(_0x1fcc73(0x38c));}}async function handleQuizStatus(_0x314da6){const _0x2c39e8=_0x40d1b2;actionTargetId=_0x314da6;const _0x39694a=doc(db,_0x2c39e8(0x282)+appId+'/public/data/quizzes',_0x314da6);try{const _0x2e03df=await getDoc(_0x39694a);if(_0x2e03df[_0x2c39e8(0x474)]()){const _0x18f7c5=_0x2e03df['data'](),_0x39da17=_0x18f7c5[_0x2c39e8(0x96)]||_0x2c39e8(0x436),_0x22d50e=document['getElementById']('quiz-status-options'),_0xaf53d5=document[_0x2c39e8(0x439)](_0x2c39e8(0x235)),_0x463948=document[_0x2c39e8(0x439)](_0x2c39e8(0x309));let _0x5a8fa5=_0x2c39e8(0x495)+(_0x39da17==='active'?_0x2c39e8(0x249):'')+_0x2c39e8(0x147)+(_0x39da17==='inactive'?_0x2c39e8(0x249):'')+'>\x20<label\x20for=\x22status-inactive\x22>ปิดใช้งาน\x20(Inactive)</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20name=\x22status-option\x22\x20value=\x22schedule\x22\x20id=\x22status-schedule\x22\x20'+(_0x39da17==='scheduled'?_0x2c39e8(0x249):'')+_0x2c39e8(0x35d);_0x22d50e['innerHTML']=_0x5a8fa5;const _0x1576f5=_0x39da17==='scheduled';_0xaf53d5[_0x2c39e8(0x1ad)]['toggle'](_0x2c39e8(0x2bb),!_0x1576f5),_0x463948[_0x2c39e8(0x1ad)][_0x2c39e8(0x4ec)]('hidden',!_0x1576f5),document[_0x2c39e8(0x439)](_0x2c39e8(0x4ad))['value']=_0x18f7c5[_0x2c39e8(0x135)]?_0x18f7c5[_0x2c39e8(0x135)]['substring'](0x0,0x10):'',document[_0x2c39e8(0x439)](_0x2c39e8(0x197))[_0x2c39e8(0x91)]=_0x18f7c5[_0x2c39e8(0x1d0)]?_0x18f7c5[_0x2c39e8(0x1d0)][_0x2c39e8(0x3c0)](0x0,0x10):'',_0x22d50e[_0x2c39e8(0x321)](_0x2c39e8(0x3dd))[_0x2c39e8(0x4b7)](_0x284be9=>{const _0xa75910=_0x2c39e8;_0x284be9[_0xa75910(0x444)](_0xa75910(0x375),_0x85555=>{const _0x2801f9=_0xa75910,_0x1c0857=_0x85555['target'][_0x2801f9(0x91)]===_0x2801f9(0x229);_0xaf53d5[_0x2801f9(0x1ad)]['toggle'](_0x2801f9(0x2bb),!_0x1c0857),_0x463948[_0x2801f9(0x1ad)][_0x2801f9(0x4ec)](_0x2801f9(0x2bb),!_0x1c0857);});}),quizStatusModal[_0x2c39e8(0x1ad)][_0x2c39e8(0x48b)]('hidden');}}catch(_0x52a2ba){console[_0x2c39e8(0x2db)](_0x2c39e8(0x327),_0x52a2ba),showMessage(_0x2c39e8(0x428));}}async function confirmQuizStatus(){const _0x14a438=_0x40d1b2;if(!actionTargetId)return;const _0x95bfe9=doc(db,_0x14a438(0x282)+appId+'/public/data/quizzes',actionTargetId),_0x2e3a35=document[_0x14a438(0x1e8)](_0x14a438(0xc1));if(!_0x2e3a35){showMessage(_0x14a438(0x49f));return;}const _0x431ae2=_0x2e3a35[_0x14a438(0x91)];let _0x45c6bb={};if(_0x431ae2===_0x14a438(0x436)||_0x431ae2===_0x14a438(0x183))_0x45c6bb={'status':_0x431ae2,'startTime':null,'endTime':null};else{if(_0x431ae2==='schedule'){const _0x218695=document[_0x14a438(0x439)](_0x14a438(0x4ad))[_0x14a438(0x91)],_0x1a520b=document[_0x14a438(0x439)](_0x14a438(0x197))['value'];if(!_0x218695&&!_0x1a520b){showMessage('กรุณาเลือกเวลาเปิด\x20หรือ\x20เวลาปิด\x20อย่างน้อยหนึ่งอย่าง');return;}_0x45c6bb={'status':_0x14a438(0x31b),'startTime':_0x218695?new Date(_0x218695)[_0x14a438(0x4b8)]():null,'endTime':_0x1a520b?new Date(_0x1a520b)[_0x14a438(0x4b8)]():null};}}try{await updateDoc(_0x95bfe9,_0x45c6bb),showMessage(_0x14a438(0x44b)),quizStatusModal[_0x14a438(0x1ad)]['add'](_0x14a438(0x2bb)),actionTargetId=null;}catch(_0x423e43){console[_0x14a438(0x2db)](_0x14a438(0x3bb),_0x423e43),showMessage(_0x14a438(0x359));}}function listenForStudentProfiles(_0x1a4087){const _0x510f36=_0x40d1b2,_0x50a80c=collection(db,'artifacts/'+appId+_0x510f36(0x2d5)+_0x1a4087+_0x510f36(0x1e1));unsubscribeStudentProfilesListener=onSnapshot(_0x50a80c,_0x4cecbf=>{const _0x3b141d=_0x510f36,_0x35c912=_0x4cecbf['docs'][_0x3b141d(0x263)](_0x596f0d=>_0x596f0d[_0x3b141d(0x372)]());renderLeaderboard(_0x35c912,_0x3b141d(0x34e));},_0x17ccab=>{const _0x12f5eb=_0x510f36;console['error']('Error\x20listening\x20for\x20student\x20profiles:',_0x17ccab),document['getElementById'](_0x12f5eb(0x34e))['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>เกิดข้อผิดพลาดในการโหลดข้อมูลผู้นำ</td></tr>';});}function renderLeaderboard(_0x16051d,_0x1c338d){const _0x276089=_0x40d1b2,_0x4d41e1=document['getElementById'](_0x1c338d);if(!_0x16051d||_0x16051d[_0x276089(0x1f3)]===0x0){_0x4d41e1['innerHTML']=_0x276089(0x3ae);return;}_0x16051d[_0x276089(0x3dc)]((_0x2710dd,_0x3b34fc)=>{const _0x201231=_0x276089,_0x525bb8=(_0x3b34fc[_0x201231(0x1d5)]||0x0)-(_0x2710dd[_0x201231(0x1d5)]||0x0);if(_0x525bb8!==0x0)return _0x525bb8;const _0x5366f9=(_0x3b34fc[_0x201231(0x2eb)]?.['specialist']||0x0)-(_0x2710dd['badgesCount']?.[_0x201231(0x19c)]||0x0);if(_0x5366f9!==0x0)return _0x5366f9;const _0x567532=(_0x3b34fc['badgesCount']?.[_0x201231(0x271)]||0x0)-(_0x2710dd[_0x201231(0x2eb)]?.[_0x201231(0x271)]||0x0);if(_0x567532!==0x0)return _0x567532;const _0x3945eb=(_0x3b34fc[_0x201231(0x2eb)]?.[_0x201231(0x19d)]||0x0)-(_0x2710dd['badgesCount']?.[_0x201231(0x19d)]||0x0);if(_0x3945eb!==0x0)return _0x3945eb;const _0x3aad17=(_0x3b34fc[_0x201231(0x2eb)]?.['quick_thinker']||0x0)-(_0x2710dd[_0x201231(0x2eb)]?.[_0x201231(0x4d5)]||0x0);if(_0x3aad17!==0x0)return _0x3aad17;return _0x2710dd[_0x201231(0x374)][_0x201231(0x4a3)](_0x3b34fc[_0x201231(0x374)],'th');});let _0xe5ca='';_0x16051d[_0x276089(0x4b7)]((_0x39a0de,_0x265eec)=>{const _0x1b1e77=_0x276089,_0x2584c8=_0x265eec+0x1,_0x13d9f1=_0x39a0de[_0x1b1e77(0x2eb)]||{};let _0x399cf6='';const _0x329c6a=[_0x1b1e77(0x19c),_0x1b1e77(0x19d),_0x1b1e77(0x271),_0x1b1e77(0x4d5)];_0x329c6a[_0x1b1e77(0x4b7)](_0x950ca2=>{const _0x1d3087=_0x1b1e77;if(_0x13d9f1[_0x950ca2]>0x0){const _0x2ef51f=Object[_0x1d3087(0x4ce)](BADGES)[_0x1d3087(0x18c)](_0x9a8a4c=>_0x9a8a4c['id']===_0x950ca2);_0x2ef51f&&(_0x950ca2===_0x1d3087(0x19c)?_0x399cf6+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22inline-flex\x20items-center\x20mx-1\x22\x20title=\x22'+_0x2ef51f[_0x1d3087(0xe8)]+_0x1d3087(0x12d)+_0x2ef51f['icon']+_0x1d3087(0x4c6):_0x399cf6+=_0x1d3087(0x4dd)+_0x2ef51f[_0x1d3087(0xe8)]+'\x20('+_0x13d9f1[_0x950ca2]+'\x20ครั้ง)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+_0x2ef51f[_0x1d3087(0x2cb)]+_0x1d3087(0xf3)+_0x13d9f1[_0x950ca2]+_0x1d3087(0x4b5));}}),_0xe5ca+=_0x1b1e77(0x30d)+_0x2584c8+_0x1b1e77(0x1df)+_0x39a0de[_0x1b1e77(0x374)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-semibold\x20text-indigo-600\x22>'+(_0x39a0de['totalPoints']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>'+(_0x399cf6||'-')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x4d41e1['innerHTML']=_0xe5ca;}function renderQuizLeaderboard(_0x9c191d,_0x87b8c0,_0x19f217){const _0x702cb9=_0x40d1b2,_0x51624a=document[_0x702cb9(0x439)](_0x19f217),_0x307d15=_0x19f217===_0x702cb9(0x92),_0x3cda86=_0x87b8c0['questions'][_0x702cb9(0x1f3)];if(!_0x9c191d||_0x9c191d['length']===0x0){_0x51624a['innerHTML']=_0x702cb9(0x4cf)+(_0x307d15?0x6:0x8)+_0x702cb9(0x314);return;}_0x9c191d[_0x702cb9(0x3dc)]((_0x145b4b,_0x6e86cd)=>{const _0x4a9a23=_0x702cb9;if(_0x6e86cd[_0x4a9a23(0x25b)]!==_0x145b4b[_0x4a9a23(0x25b)])return _0x6e86cd[_0x4a9a23(0x25b)]-_0x145b4b[_0x4a9a23(0x25b)];return new Date(_0x145b4b['latestSubmittedAt'])-new Date(_0x6e86cd[_0x4a9a23(0x275)]);});const _0x5e66c7=_0x87b8c0[_0x702cb9(0x101)]===!![],_0x101e89=_0x87b8c0[_0x702cb9(0x1a9)]?.[_0x702cb9(0xbd)]??-0x1;let _0x5126a6='';_0x9c191d['forEach']((_0x1ce6f3,_0x19a0e1)=>{const _0x33ab18=_0x702cb9,_0x4aa65b=_0x19a0e1+0x1;let _0xfdb18=_0x33ab18(0x4e1);if(_0x5e66c7||_0x101e89!==-0x1){let _0x2fb20d;_0x5e66c7?_0x2fb20d=_0x1ce6f3[_0x33ab18(0x25b)]===_0x3cda86:_0x2fb20d=_0x1ce6f3[_0x33ab18(0x25b)]>=_0x101e89;const _0x4f372f=_0x2fb20d?_0x33ab18(0x2fa):_0x33ab18(0x324),_0x4a26d0=_0x2fb20d?_0x33ab18(0x220):'ไม่ผ่าน';_0xfdb18=_0x33ab18(0x3b4)+_0x4f372f+'\x22>'+_0x4a26d0+_0x33ab18(0x109);}const _0x1e057f=_0x1ce6f3[_0x33ab18(0x206)][_0x1ce6f3[_0x33ab18(0x206)][_0x33ab18(0x1f3)]-0x1],_0x2aa126=(_0x1e057f[_0x33ab18(0x120)]||[])['map'](_0x113714=>{const _0xb4c914=_0x33ab18,_0x2a9d1c=Object[_0xb4c914(0x4ce)](BADGES)[_0xb4c914(0x18c)](_0x21ab8f=>_0x21ab8f['id']===_0x113714);return _0x2a9d1c?_0xb4c914(0x18a)+_0x2a9d1c['name']+_0xb4c914(0x3e8)+_0x2a9d1c[_0xb4c914(0x2cb)]+_0xb4c914(0x2e3):'';})[_0x33ab18(0x17d)]('');_0x5126a6+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-bold\x22>'+_0x4aa65b+_0x33ab18(0x1df)+_0x1ce6f3[_0x33ab18(0x374)]+_0x33ab18(0x174)+_0x1ce6f3[_0x33ab18(0x25b)]+'\x20/\x20'+_0x3cda86+_0x33ab18(0x19e)+_0xfdb18+_0x33ab18(0x33e)+(_0x1ce6f3[_0x33ab18(0xb6)]||0x0)+_0x33ab18(0x19e)+(_0x307d15?'':_0x33ab18(0x254)+(_0x1ce6f3[_0x33ab18(0x206)]?.[_0x33ab18(0x1f3)]||0x1)+_0x33ab18(0x278))+_0x33ab18(0x42e)+(_0x307d15?'':_0x33ab18(0x1ff)+new Date(_0x1ce6f3[_0x33ab18(0x275)])[_0x33ab18(0x316)](_0x33ab18(0x332))+_0x33ab18(0x278))+_0x33ab18(0x21e)+(_0x2aa126||'-')+_0x33ab18(0x398);}),_0x51624a[_0x702cb9(0x2b0)]=_0x5126a6;}async function handleLoadQuiz(){const _0x36ea43=_0x40d1b2,_0x4be5d1=document[_0x36ea43(0x439)]('quiz-id-input'),_0x1341e1=_0x4be5d1['value']['trim']();if(!_0x1341e1){showMessage(_0x36ea43(0x365));return;}loadQuizBtn[_0x36ea43(0x247)]=!![],loadQuizBtn['innerHTML']=_0x36ea43(0x196);try{const _0x230dd4=doc(db,_0x36ea43(0x282)+appId+_0x36ea43(0x3ad),_0x1341e1),_0x51a930=await getDoc(_0x230dd4);if(!_0x51a930['exists']()){showMessage(_0x36ea43(0x15f));return;}currentQuizData=sanitizeQuizData({'id':_0x51a930['id'],..._0x51a930[_0x36ea43(0x372)]()});const _0xc2c960=currentQuizData[_0x36ea43(0x96)]||_0x36ea43(0x436),_0x1fbe70=new Date();if(_0xc2c960===_0x36ea43(0x183)){showMessage(_0x36ea43(0x26a));return;}if(_0xc2c960==='scheduled'){const _0x3b5a1c=currentQuizData[_0x36ea43(0x135)]?new Date(currentQuizData[_0x36ea43(0x135)]):null,_0x117cb5=currentQuizData['endTime']?new Date(currentQuizData[_0x36ea43(0x1d0)]):null;if(_0x3b5a1c&&_0x1fbe70<_0x3b5a1c){showMessage(_0x36ea43(0x3f7)+_0x3b5a1c[_0x36ea43(0x316)]('th-TH',{'hour12':![]}));return;}if(_0x117cb5&&_0x1fbe70>_0x117cb5){showMessage('แบบทดสอบนี้หมดเวลาแล้ว');return;}}const _0x5ee5d8=currentQuizData['projectId'];currentProjectId=_0x5ee5d8;const _0x25ab8b=doc(db,'artifacts/'+appId+_0x36ea43(0x381),_0x5ee5d8),_0x55a6aa=await getDoc(_0x25ab8b);if(!_0x55a6aa[_0x36ea43(0x474)]()){showMessage('เกิดข้อผิดพลาด:\x20ไม่พบโปรเจคที่เกี่ยวข้องกับแบบทดสอบนี้');return;}const _0x7eefb8=_0x55a6aa[_0x36ea43(0x372)]();currentStudentProjectData=_0x7eefb8,displayStudentNameSelector(_0x7eefb8[_0x36ea43(0x28d)],currentQuizData['topic']);}catch(_0x49892d){console['error'](_0x36ea43(0x4a5),_0x49892d),showMessage(_0x36ea43(0x26c));}finally{loadQuizBtn[_0x36ea43(0x247)]=![],loadQuizBtn['innerHTML']=_0x36ea43(0x484);}}async function handleJoinLiveGame(){const _0x3d757c=_0x40d1b2,_0x107596=document[_0x3d757c(0x439)](_0x3d757c(0x266)),_0x483a2a=document[_0x3d757c(0x439)](_0x3d757c(0x44f)),_0x53409f=document[_0x3d757c(0x439)](_0x3d757c(0x152)),_0x2cd69e=_0x107596[_0x3d757c(0x91)]['trim'](),_0x52851e=_0x483a2a['value'][_0x3d757c(0x1a1)]();if(!_0x2cd69e||!_0x52851e){showMessage(_0x3d757c(0x462));return;}_0x53409f[_0x3d757c(0x247)]=!![],_0x53409f[_0x3d757c(0x2b0)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังเข้าร่วม...';try{const _0x5e36c1=collection(db,_0x3d757c(0x282)+appId+'/public/data/liveGames'),_0x71380e=query(_0x5e36c1,where(_0x3d757c(0x320),'==',_0x2cd69e)),_0x269764=await getDocs(_0x71380e);if(_0x269764[_0x3d757c(0x496)]){showMessage('ไม่พบเกมด้วยรหัสนี้\x20กรุณาตรวจสอบอีกครั้ง');return;}const _0x4dc1e2=_0x269764[_0x3d757c(0x231)][0x0],_0x3e5bf0=_0x4dc1e2['data']();if(_0x3e5bf0[_0x3d757c(0x96)]!==_0x3d757c(0xd4)){showMessage(_0x3d757c(0x32c));return;}currentLiveGameId=_0x4dc1e2['id'];const _0x382938=_0x3e5bf0[_0x3d757c(0x23b)],_0x2bb5cb=doc(db,'artifacts/'+appId+'/public/data/quizzes',_0x382938),_0x9a94e8=await getDoc(_0x2bb5cb);if(!_0x9a94e8['exists']()){showMessage('เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลแบบทดสอบของเกมนี้');return;}currentQuizData=sanitizeQuizData({'id':_0x9a94e8['id'],..._0x9a94e8[_0x3d757c(0x372)]()});if(_0x3e5bf0[_0x3d757c(0x396)]&&_0x3e5bf0[_0x3d757c(0x396)][_0x52851e]){showMessage(_0x3d757c(0x8d));return;}const _0x28d8f9={};_0x28d8f9['players.'+_0x52851e]={'score':0x0,'answered':![],'badges':[],'correctStreak':0x0},await updateDoc(doc(db,_0x3d757c(0x282)+appId+_0x3d757c(0x35c),currentLiveGameId),_0x28d8f9),currentStudentName=_0x52851e,listenForLiveGameUpdates();}catch(_0x1ccbfe){console[_0x3d757c(0x2db)](_0x3d757c(0x3d1),_0x1ccbfe),showMessage('เกิดข้อผิดพลาดในการเข้าร่วมเกม');}finally{_0x53409f[_0x3d757c(0x247)]=![],_0x53409f[_0x3d757c(0x2b0)]='<i\x20class=\x22fas\x20fa-sign-in-alt\x20mr-2\x22></i>เข้าร่วม';}}function displayStudentNameSelector(_0x3b542f,_0x13b4a2){const _0x405e5a=_0x40d1b2,_0x28037d=document[_0x405e5a(0x439)]('student-name-select');document[_0x405e5a(0x439)](_0x405e5a(0x334))['textContent']='แบบทดสอบ:\x20'+_0x13b4a2,!_0x3b542f||_0x3b542f[_0x405e5a(0x1f3)]===0x0?(_0x28037d[_0x405e5a(0x2b0)]='<option\x20value=\x22\x22>ไม่พบรายชื่อนักเรียนในโปรเจคนี้</option>',startQuizBtn[_0x405e5a(0x247)]=!![]):(_0x28037d['innerHTML']='<option\x20value=\x22\x22>--\x20กรุณาเลือกชื่อ\x20--</option>',_0x3b542f[_0x405e5a(0x4b7)](_0x5dd364=>{const _0x362f71=_0x405e5a,_0x9a5b71=document[_0x362f71(0x41b)](_0x362f71(0x3ed));_0x9a5b71[_0x362f71(0x91)]=_0x5dd364,_0x9a5b71[_0x362f71(0x4ef)]=_0x5dd364,_0x28037d[_0x362f71(0x380)](_0x9a5b71);}),startQuizBtn['disabled']=![]),studentInitialView[_0x405e5a(0x1ad)]['add']('hidden'),studentNameSelectionView[_0x405e5a(0x1ad)][_0x405e5a(0x48b)](_0x405e5a(0x2bb));}function shuffleArray(_0x26e5b8){const _0x48557f=_0x40d1b2;for(let _0x1dce6f=_0x26e5b8[_0x48557f(0x1f3)]-0x1;_0x1dce6f>0x0;_0x1dce6f--){const _0x2db708=Math[_0x48557f(0x22d)](Math[_0x48557f(0x406)]()*(_0x1dce6f+0x1));[_0x26e5b8[_0x1dce6f],_0x26e5b8[_0x2db708]]=[_0x26e5b8[_0x2db708],_0x26e5b8[_0x1dce6f]];}}function getShuffledQuiz(_0x597ef9){const _0x119c91=_0x40d1b2;let _0x2fd3f5=JSON[_0x119c91(0x1d3)](JSON[_0x119c91(0x38e)](_0x597ef9));const _0x52f5b4=_0x2fd3f5['settings']?.[_0x119c91(0x371)]||_0x119c91(0x4a9);if(_0x52f5b4===_0x119c91(0x4a9))return _0x2fd3f5;return(_0x52f5b4===_0x119c91(0x4bd)||_0x52f5b4===_0x119c91(0x1ed))&&shuffleArray(_0x2fd3f5[_0x119c91(0x449)]),(_0x52f5b4===_0x119c91(0x43a)||_0x52f5b4==='both')&&_0x2fd3f5['questions'][_0x119c91(0x4b7)](_0x2a2ab7=>{const _0x47d864=_0x119c91,_0x10a5f9=_0x2a2ab7['questionType']||_0x2fd3f5[_0x47d864(0x4af)];if(_0x2a2ab7[_0x47d864(0x4ed)]){let _0x9209b0=_0x2a2ab7[_0x47d864(0x4ed)]['map']((_0x2a5344,_0x467f1a)=>({'text':_0x2a5344,'isCorrect':_0x467f1a===_0x2a2ab7['correctAnswerIndex']}));shuffleArray(_0x9209b0),_0x2a2ab7['options']=_0x9209b0[_0x47d864(0x263)](_0x553e43=>_0x553e43['text']),_0x2a2ab7[_0x47d864(0x16d)]=_0x9209b0[_0x47d864(0xe2)](_0x5f1b58=>_0x5f1b58[_0x47d864(0x32f)]);}_0x10a5f9==='matching_item'&&_0x2a2ab7[_0x47d864(0x3c7)]&&shuffleArray(_0x2a2ab7[_0x47d864(0x3c7)]);}),_0x2fd3f5;}function displayQuizForStudent(_0xc3b995){const _0x4f29c1=_0x40d1b2;studentQuizArea['classList']['remove'](_0x4f29c1(0x2bb)),currentDisplayedQuiz=getShuffledQuiz(_0xc3b995);const _0x4df112=currentDisplayedQuiz[_0x4f29c1(0x1a9)]?.[_0x4f29c1(0xaf)]||'none';if(_0x4df112===_0x4f29c1(0xd7))renderFullQuizForm(),startWholeQuizTimer(currentDisplayedQuiz[_0x4f29c1(0x1a9)][_0x4f29c1(0x227)]);else _0x4df112==='per_question'?(currentQuestionIndex=0x0,studentAnswersPerQuestion=[],renderPerQuestionView()):renderFullQuizForm();}function renderFullQuizForm(){const _0x467705=_0x40d1b2;let _0x589b8a=_0x467705(0xd0)+currentDisplayedQuiz[_0x467705(0x422)]+_0x467705(0x301)+(currentMode==='admin-testing'?'<button\x20id=\x22cancel-test-btn\x22\x20class=\x22text-sm\x20text-gray-500\x20hover:text-red-600\x20font-semibold\x20py-1\x20px-2\x20rounded-md\x20hover:bg-red-50\x22><i\x20class=\x22fas\x20fa-times-circle\x20mr-1\x22></i>\x20ยกเลิกการทดสอบ</button>':'')+_0x467705(0x2b6);currentDisplayedQuiz[_0x467705(0x449)][_0x467705(0x4b7)]((_0x48856f,_0x5a740f)=>{const _0x15b228=_0x467705,_0x91af85=_0x48856f['questionType']||currentDisplayedQuiz[_0x15b228(0x4af)];_0x589b8a+=_0x15b228(0x46f);_0x91af85===_0x15b228(0x48c)?_0x589b8a+=_0x15b228(0x364)+(_0x5a740f+0x1)+'.\x20'+_0x48856f['stem']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-1/2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20name=\x22question'+_0x5a740f+'\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22\x22>--\x20เลือกคำตอบ\x20--</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x48856f[_0x15b228(0x3c7)][_0x15b228(0x263)](_0x79302c=>_0x15b228(0x20b)+_0x79302c+'\x22>'+_0x79302c+_0x15b228(0x467))[_0x15b228(0x17d)]('')+_0x15b228(0x38b):(_0x589b8a+=_0x15b228(0x153)+(_0x5a740f+0x1)+'.\x20'+(_0x48856f[_0x15b228(0x1ac)]||_0x48856f[_0x15b228(0x89)])+_0x15b228(0x1d7),_0x48856f['imageCode']&&(_0x589b8a+='<div\x20class=\x22my-4\x20flex\x20justify-center\x22>'+_0x48856f[_0x15b228(0x4e9)]+'</div>'));_0x589b8a+='</div><div\x20class=\x22space-y-2\x22>';switch(_0x91af85){case _0x15b228(0x15d):_0x589b8a+=_0x15b228(0x276)+_0x5a740f+_0x15b228(0x3c3);break;case'true_false':_0x589b8a+=_0x15b228(0x25a)+_0x5a740f+_0x15b228(0xcf)+_0x5a740f+_0x15b228(0x1d9)+_0x5a740f+'_opt0\x22>ใช่</label></div>',_0x589b8a+='<div><input\x20type=\x22radio\x22\x20id=\x22q'+_0x5a740f+'_opt1\x22\x20name=\x22question'+_0x5a740f+_0x15b228(0xff)+_0x5a740f+_0x15b228(0xd3);break;case _0x15b228(0x48c):break;case _0x15b228(0x14b):case'multiple_choice':default:_0x589b8a+=_0x48856f[_0x15b228(0x4ed)][_0x15b228(0x263)]((_0x2b6109,_0x46d73a)=>_0x15b228(0x8a)+_0x5a740f+_0x15b228(0x45f)+_0x46d73a+_0x15b228(0x30f)+_0x5a740f+_0x15b228(0x4cb)+_0x46d73a+_0x15b228(0x13a)+_0x5a740f+'_opt'+_0x46d73a+'\x22>'+_0x2b6109+_0x15b228(0x21f))[_0x15b228(0x17d)]('');break;}_0x589b8a+=_0x15b228(0x3f4);}),_0x589b8a+=_0x467705(0x142),_0x589b8a+=_0x467705(0x165),studentQuizArea[_0x467705(0x2b0)]=_0x589b8a;if(currentMode===_0x467705(0x3ee)){const _0x20f391=document[_0x467705(0x439)]('cancel-test-btn');if(_0x20f391)_0x20f391['addEventListener']('click',cancelAdminTest);}document[_0x467705(0x439)](_0x467705(0x2a7))[_0x467705(0x444)](_0x467705(0x256),handleSubmitQuiz);if(window[_0x467705(0x14f)])window[_0x467705(0x14f)][_0x467705(0x210)]([studentQuizArea]);}async function handleSubmitQuiz(_0x12b25a){const _0x36e6e7=_0x40d1b2;if(_0x12b25a)_0x12b25a[_0x36e6e7(0x450)]();if(quizTimerInterval)clearInterval(quizTimerInterval);const _0x2e2f4c=document['getElementById']('quiz-form');if(!_0x2e2f4c)return;const _0xd087b1=_0x2e2f4c[_0x36e6e7(0x1e8)](_0x36e6e7(0x305)),_0x21796f=currentDisplayedQuiz[_0x36e6e7(0x449)][_0x36e6e7(0x469)](_0x57b2ac=>_0x57b2ac[_0x36e6e7(0x285)]===_0x36e6e7(0x15d));_0xd087b1&&(_0xd087b1[_0x36e6e7(0x247)]=!![],_0x21796f?_0xd087b1[_0x36e6e7(0x2b0)]=_0x36e6e7(0x29e):_0xd087b1['innerHTML']=_0x36e6e7(0xe3));const _0x3ed06c=new FormData(_0x2e2f4c),_0x2840a6=currentDisplayedQuiz['questions'][_0x36e6e7(0x263)]((_0x3a25f3,_0x44a23c)=>{const _0x285e42=_0x36e6e7,_0x13d9bf=_0x3a25f3[_0x285e42(0x285)]||currentDisplayedQuiz['quizType'],_0x574c1b=_0x3ed06c[_0x285e42(0x204)](_0x285e42(0x177)+_0x44a23c);if(_0x574c1b!==null&&_0x574c1b!==undefined){if(_0x13d9bf===_0x285e42(0x110)||_0x13d9bf===_0x285e42(0x14b))return parseInt(_0x574c1b);return _0x574c1b;}return null;}),_0x425ef7=currentQuizData['id'],_0xcd7b7a=doc(db,_0x36e6e7(0x282)+appId+_0x36e6e7(0x44e)+_0x425ef7+_0x36e6e7(0x3eb),currentStudentName),_0x36ba9e=await getDoc(_0xcd7b7a),_0x4bde7d=_0x36ba9e[_0x36e6e7(0x474)]()?_0x36ba9e['data']():{},_0x33cd4f=_0x4bde7d[_0x36e6e7(0x206)]||[];await processAndSubmitAnswers(_0x2840a6,_0x33cd4f);}async function gradeShortAnswerWithAI(_0x3a6b15,_0x70b7e2){const _0x3efb7f=_0x40d1b2;if(!_0x3a6b15||!_0x70b7e2)return![];try{const _0x5742c8=_0x3efb7f(0x4a1)+_0x3a6b15+_0x3efb7f(0x3a5)+_0x70b7e2+'\x22.\x20Respond\x20with\x20only\x20\x22true\x22\x20or\x20\x22false\x22.',_0x4db178={'contents':[{'role':'user','parts':[{'text':_0x5742c8}]}]},_0x3533da=_0x3efb7f(0x1cd),_0x5a9469=_0x3efb7f(0x24f)+_0x3533da,_0x53602a=await fetch(_0x5a9469,{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON[_0x3efb7f(0x38e)](_0x4db178)});if(!_0x53602a['ok'])throw new Error(_0x3efb7f(0x35a));const _0x537719=await _0x53602a['json'](),_0xc83284=_0x537719['candidates'][0x0][_0x3efb7f(0xe5)]['parts'][0x0][_0x3efb7f(0x36c)][_0x3efb7f(0x1a1)]()[_0x3efb7f(0x4a2)]();return _0xc83284==='true';}catch(_0x43da14){return console[_0x3efb7f(0x2db)](_0x3efb7f(0x2b3),_0x43da14),![];}}async function processAndSubmitAnswers(_0x33d5c1,_0x41e487){const _0x41c110=_0x40d1b2;let _0x56d219=0x0,_0xbccca2=0x0,_0x40f86f=[];const _0x52526c=[],_0x5c1fc1=currentDisplayedQuiz[_0x41c110(0x449)]['length'];let _0xbac81a=0x0;const _0x130bd2=currentDisplayedQuiz[_0x41c110(0x449)];for(let _0x5ccc60=0x0;_0x5ccc60<_0x130bd2[_0x41c110(0x1f3)];_0x5ccc60++){const _0x1699e3=_0x130bd2[_0x5ccc60],_0x3ea782=_0x33d5c1[_0x5ccc60],_0x48f64e=_0x1699e3[_0x41c110(0x285)]||currentDisplayedQuiz[_0x41c110(0x4af)];let _0x3e9a83=![];if(_0x3ea782!==null&&_0x3ea782!=='')switch(_0x48f64e){case _0x41c110(0x48c):_0x3e9a83=_0x3ea782===_0x1699e3['correctResponse'];break;case _0x41c110(0xfc):const _0x3a72bc=_0x3ea782===!![]||_0x3ea782===_0x41c110(0x23a);_0x3e9a83=_0x3a72bc===_0x1699e3[_0x41c110(0xaa)];break;case _0x41c110(0x14b):case'multiple_choice':default:_0x3e9a83=Number(_0x3ea782)===_0x1699e3[_0x41c110(0x16d)];break;case'short_answer':_0x3e9a83=await gradeShortAnswer(_0x3ea782,_0x1699e3);break;}_0x3e9a83?(_0x56d219++,_0xbac81a++,_0xbac81a===0x3&&(_0x40f86f[_0x41c110(0x255)](BADGES['ON_FIRE']['id']),_0xbac81a=0x0)):_0xbac81a=0x0,_0x52526c[_0x41c110(0x255)]({'answer':_0x3ea782,'isCorrect':_0x3e9a83,'originalQuestionText':_0x1699e3[_0x41c110(0x32a)]||_0x1699e3[_0x41c110(0x89)]});}_0xbccca2=_0x56d219*0xa;_0x56d219===_0x5c1fc1&&_0x5c1fc1>0x0&&!currentDisplayedQuiz[_0x41c110(0x101)]&&(_0xbccca2+=0x32,_0x40f86f['push'](BADGES[_0x41c110(0xd6)]['id']));const _0xed1ee5=currentDisplayedQuiz[_0x41c110(0x1a9)]?.['passingScore']??Math[_0x41c110(0x22d)](_0x5c1fc1/0x2),_0x5569b3=currentDisplayedQuiz[_0x41c110(0x1a9)]?.[_0x41c110(0xaf)];if(_0x5569b3==='whole_quiz'&&quizStartTime){const _0x1f3a46=(new Date()-quizStartTime)/0x3e8,_0x4e5613=currentDisplayedQuiz[_0x41c110(0x1a9)][_0x41c110(0x227)]*0x3c;_0x56d219>=_0xed1ee5&&_0x1f3a46<_0x4e5613/0x2&&(_0xbccca2+=0x14,_0x40f86f[_0x41c110(0x255)](BADGES[_0x41c110(0x13f)]['id']));}_0x41e487['length']===0x0&&_0x56d219===_0x5c1fc1&&_0x5c1fc1>0x0&&_0x40f86f[_0x41c110(0x255)](BADGES[_0x41c110(0x280)]['id']);if(_0x41e487['length']>0x0){const _0x1e4c20=_0x41e487[0x0][_0x41c110(0x33c)];if(_0x1e4c20<_0xed1ee5&&_0x56d219>=_0xed1ee5){const _0x38be7a=_0x41e487[_0x41c110(0x469)](_0x55288f=>(_0x55288f['badges']||[])['includes'](BADGES['COMEBACK_KING']['id']));!_0x38be7a&&_0x40f86f[_0x41c110(0x255)](BADGES[_0x41c110(0x3bf)]['id']);}}_0x41e487[_0x41c110(0x1f3)]===0x4&&_0x40f86f[_0x41c110(0x255)](BADGES[_0x41c110(0x156)]['id']);const _0x176060=currentDisplayedQuiz[_0x41c110(0x1a9)][_0x41c110(0xa7)];if(currentMode===_0x41c110(0x3ee)){handleResultDisplay(_0x176060,_0x56d219,_0xbccca2,_0x40f86f,_0x52526c,_0x5c1fc1);return;}const _0x32094c=currentQuizData['id'],_0x314e81=doc(db,_0x41c110(0x282)+appId+_0x41c110(0x44e)+_0x32094c+_0x41c110(0x3eb),currentStudentName);try{const _0x4da08f=[..._0x41e487],_0x32fad9={'score':_0x56d219,'points':_0xbccca2,'badges':_0x40f86f,'submittedAt':new Date()[_0x41c110(0x4b8)](),'answers':_0x52526c};_0x4da08f[_0x41c110(0x255)](_0x32fad9);const _0x17e6fc=_0x4da08f[0x0][_0x41c110(0x33c)],_0x512405=Math[_0x41c110(0x237)](..._0x4da08f[_0x41c110(0x263)](_0xb94f05=>_0xb94f05['score'])),_0x4251a6=_0x56d219,_0xd0c986=_0x32fad9[_0x41c110(0x47a)];await setDoc(_0x314e81,{'studentName':currentStudentName,'totalQuestions':_0x5c1fc1,'attempts':_0x4da08f,'firstScore':_0x17e6fc,'bestScore':_0x512405,'latestScore':_0x4251a6,'points':_0xbccca2,'latestSubmittedAt':_0xd0c986}),await updateStudentProfile(currentQuizData[_0x41c110(0x1cb)],currentStudentName),handleResultDisplay(_0x176060,_0x56d219,_0xbccca2,_0x40f86f,_0x52526c,_0x5c1fc1);}catch(_0x261371){console['error'](_0x41c110(0x30e),_0x261371),showMessage(_0x41c110(0x260));}}async function updateStudentProfile(_0x1a996e,_0x429b79){const _0x354bee=_0x40d1b2,_0x3c532d=doc(db,_0x354bee(0x282)+appId+'/public/data/projects/'+_0x1a996e+_0x354bee(0x1e1),_0x429b79);try{const _0x698101=query(collection(db,_0x354bee(0x282)+appId+_0x354bee(0x3ad)),where(_0x354bee(0x1cb),'==',_0x1a996e)),_0x3ba6bf=await getDocs(_0x698101),_0x431629=new Map(_0x3ba6bf['docs'][_0x354bee(0x263)](_0x52e4b8=>[_0x52e4b8['id'],_0x52e4b8['data']()])),_0x405766=Array['from'](_0x431629[_0x354bee(0x1da)]());await runTransaction(db,async _0x10cee2=>{const _0x108d62=_0x354bee;let _0x37b162=0x0;const _0xa0b2d0={};let _0xdbfab5=!![],_0x4e0734=0x0,_0x12edeb=0x0;for(const _0x3b93ae of _0x405766){const _0x38beea=_0x431629['get'](_0x3b93ae),_0x3e7337=doc(db,_0x108d62(0x282)+appId+_0x108d62(0x44e)+_0x3b93ae+'/submissions',_0x429b79),_0x316992=await _0x10cee2[_0x108d62(0x204)](_0x3e7337);if(_0x316992[_0x108d62(0x474)]()){const _0x2ae720=_0x316992[_0x108d62(0x372)](),_0x1b4483=_0x2ae720['attempts']||[];if(_0x1b4483[_0x108d62(0x1f3)]>0x0){const _0x3ea57f=_0x1b4483['reduce']((_0x4a354b,_0x50ffe8)=>{const _0x246f63=_0x108d62;if(_0x50ffe8['score']>_0x4a354b['score'])return _0x50ffe8;if(_0x50ffe8['score']===_0x4a354b[_0x246f63(0x33c)])return(_0x50ffe8['points']||0x0)>(_0x4a354b[_0x246f63(0xb6)]||0x0)?_0x50ffe8:_0x4a354b;return _0x4a354b;},{'score':-0x1,'points':-0x1});_0x3ea57f['score']>-0x1&&(_0x37b162+=_0x3ea57f[_0x108d62(0xb6)]||0x0,(_0x3ea57f[_0x108d62(0x120)]||[])['forEach'](_0x413313=>{_0xa0b2d0[_0x413313]=(_0xa0b2d0[_0x413313]||0x0)+0x1;}));}}if(_0x38beea['topic']!=='แบบทดสอบซ่อมเสริม'){_0x12edeb++;if(_0x316992['exists']()){_0x4e0734++;const _0x494c1f=_0x316992[_0x108d62(0x372)]();_0x494c1f[_0x108d62(0x25b)]!==_0x494c1f[_0x108d62(0x1ae)]&&(_0xdbfab5=![]);}else _0xdbfab5=![];}}_0x12edeb>0x0&&_0x4e0734===_0x12edeb&&_0xdbfab5?_0xa0b2d0[_0x108d62(0x19c)]=0x1:_0xa0b2d0['specialist']=0x0,_0x10cee2['set'](_0x3c532d,{'studentName':_0x429b79,'totalPoints':_0x37b162,'unlockedBadges':Object[_0x108d62(0x1da)](_0xa0b2d0)['filter'](_0x5bfe38=>_0xa0b2d0[_0x5bfe38]>0x0),'badgesCount':_0xa0b2d0},{'merge':!![]});});}catch(_0x36bce2){console[_0x354bee(0x2db)]('Leaderboard\x20update\x20transaction\x20failed:\x20',_0x36bce2),showMessage(_0x354bee(0x17b));}}function startAdminTest(){const _0x8fefcf=_0x40d1b2;if(!currentQuizData){showMessage(_0x8fefcf(0x362));return;}let _0x2024ea=JSON[_0x8fefcf(0x1d3)](JSON[_0x8fefcf(0x38e)](currentQuizData));currentMode=_0x8fefcf(0x3ee),currentStudentName='ผู้ควบคุม\x20(ทดสอบ)',adminView['classList'][_0x8fefcf(0x136)]('hidden'),studentView[_0x8fefcf(0x1ad)][_0x8fefcf(0x48b)](_0x8fefcf(0x2bb)),studentInitialView[_0x8fefcf(0x1ad)][_0x8fefcf(0x136)](_0x8fefcf(0x2bb)),studentNameSelectionView[_0x8fefcf(0x1ad)]['add']('hidden'),studentResultArea[_0x8fefcf(0x1ad)][_0x8fefcf(0x136)](_0x8fefcf(0x2bb)),studentQuizArea[_0x8fefcf(0x1ad)][_0x8fefcf(0x48b)](_0x8fefcf(0x2bb)),quizStartTime=new Date(),displayQuizForStudent(_0x2024ea);}function handleResultDisplay(_0x1b31ca,_0x50ab6c,_0x209a71,_0x2440c9,_0x73ea8c,_0x259da8){const _0x2352a8=_0x40d1b2,_0x140deb=currentDisplayedQuiz[_0x2352a8(0x1a9)]?.['passingScore']??Math['floor'](_0x259da8/0x2),_0x2b3815=currentDisplayedQuiz[_0x2352a8(0x1a9)]?.[_0x2352a8(0x86)]??![];if(_0x2b3815&&_0x50ab6c<_0x140deb){startAdaptiveFlow(_0x73ea8c,_0x50ab6c,_0x259da8);return;}switch(_0x1b31ca){case'show_results_and_answers':displayResultsWithAnswers(_0x50ab6c,_0x209a71,_0x2440c9,_0x73ea8c,_0x259da8);break;case _0x2352a8(0x12a):displayResultsScoreOnly(_0x50ab6c,_0x209a71,_0x2440c9,_0x259da8);break;case _0x2352a8(0x1a5):default:displaySubmissionConfirmation();break;}}async function startAdaptiveFlow(_0x45dc61,_0xcfe71c,_0x4701c5){const _0x14d9a4=_0x40d1b2,_0x230883=_0x45dc61[_0x14d9a4(0x263)]((_0x3a2457,_0x9fa6f)=>({..._0x3a2457,'originalQuestion':currentDisplayedQuiz[_0x14d9a4(0x449)][_0x9fa6f]}))[_0x14d9a4(0x3f2)](_0x21f6df=>!_0x21f6df[_0x14d9a4(0x32f)]&&_0x21f6df[_0x14d9a4(0x3fc)][_0x14d9a4(0x1bb)])[_0x14d9a4(0x263)](_0x41dc22=>'-\x20'+_0x41dc22[_0x14d9a4(0x3fc)][_0x14d9a4(0x1bb)])[_0x14d9a4(0x17d)]('\x0a');if(!_0x230883){displayResultsScoreOnly(_0xcfe71c,0x0,[],_0x4701c5);return;}studentQuizArea[_0x14d9a4(0x1ad)]['add'](_0x14d9a4(0x2bb)),studentReadingArea[_0x14d9a4(0x1ad)][_0x14d9a4(0x48b)](_0x14d9a4(0x2bb)),studentReadingArea[_0x14d9a4(0x2b0)]=_0x14d9a4(0x3fa);const _0x2a07e7=_0x14d9a4(0x4bc)+currentDisplayedQuiz[_0x14d9a4(0x422)]+_0x14d9a4(0xe9)+_0x230883+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20จากข้อมูลข้างต้น\x20โปรดสรุปเนื้อหาสำคัญเพื่อสอนซ่อมเสริมนักเรียนคนนี้\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้อธิบายด้วยภาษาที่เข้าใจง่าย\x20เป็นกันเอง\x20เหมือนติวเตอร์ใจดี\x0a\x20\x20\x20\x20\x20\x20\x20\x20สรุปมาเป็นย่อหน้าเดียวหรือสองย่อหน้าสั้นๆ\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้ผลลัพธ์เป็น\x20JSON\x20object\x20ที่มี\x20key\x20ชื่อ\x20\x22remedialContent\x22\x20เท่านั้น\x0a\x20\x20\x20\x20',_0x58ea58={'type':'OBJECT','properties':{'remedialContent':{'type':'STRING'}},'required':[_0x14d9a4(0x1dc)]};try{const _0x3e873c=await callAnalysisApi(_0x2a07e7,_0x58ea58),_0x4dcb6b=_0x3e873c[_0x14d9a4(0x1dc)];studentReadingArea[_0x14d9a4(0x2b0)]=_0x14d9a4(0x2c7)+_0x4dcb6b[_0x14d9a4(0x2f9)](/\n/g,_0x14d9a4(0x4e6))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22start-remedial-quiz-btn\x22\x20class=\x22mt-4\x20bg-indigo-600\x20text-white\x20py-2\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-indigo-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20เข้าใจแล้ว\x20ลองอีกครั้ง!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x14d9a4(0x439)](_0x14d9a4(0x33d))[_0x14d9a4(0x444)](_0x14d9a4(0x128),()=>generateRemedialQuiz(_0x230883));}catch(_0x9b1c27){console[_0x14d9a4(0x2db)](_0x14d9a4(0x1fd),_0x9b1c27),showMessage('เกิดข้อผิดพลาดในการสร้างเนื้อหาทบทวน'),displayResultsScoreOnly(_0xcfe71c,0x0,[],_0x4701c5);}}async function generateRemedialQuiz(_0x2b3fa2){const _0x1e9bda=_0x40d1b2;studentReadingArea[_0x1e9bda(0x2b0)]=_0x1e9bda(0x299);const _0x420f72=_0x1e9bda(0x2d1)+_0x2b3fa2+_0x1e9bda(0xbc),_0x27c42b={'type':'OBJECT','properties':{'questionText':{'type':_0x1e9bda(0x2cc)},'options':{'type':'ARRAY','items':{'type':_0x1e9bda(0x2cc)}},'correctAnswerIndex':{'type':'NUMBER'},'explanation':{'type':_0x1e9bda(0x2cc)}},'required':[_0x1e9bda(0x89),_0x1e9bda(0x4ed),_0x1e9bda(0x16d),'explanation']},_0x7fa2ee={'type':_0x1e9bda(0x239),'properties':{'topic':{'type':_0x1e9bda(0x2cc)},'questions':{'type':_0x1e9bda(0x112),'items':_0x27c42b}},'required':[_0x1e9bda(0x422),_0x1e9bda(0x449)]};try{const _0x15a408=await callAnalysisApi(_0x420f72,_0x7fa2ee);_0x15a408[_0x1e9bda(0x101)]=!![],studentReadingArea[_0x1e9bda(0x1ad)][_0x1e9bda(0x136)](_0x1e9bda(0x2bb));const _0x41f5d2={...currentDisplayedQuiz[_0x1e9bda(0x1a9)],'isAdaptive':![],'resultsDisplay':_0x1e9bda(0x1f9)};_0x15a408[_0x1e9bda(0x1a9)]=_0x41f5d2,displayQuizForStudent(_0x15a408);}catch(_0x2603c3){console['error'](_0x1e9bda(0x186),_0x2603c3),showMessage(_0x1e9bda(0x409)),showView(_0x1e9bda(0x39a));}}function cancelAdminTest(){const _0x1db13d=_0x40d1b2;if(quizTimerInterval)clearInterval(quizTimerInterval);if(perQuestionTimerInterval)clearInterval(perQuestionTimerInterval);currentMode='admin',studentView['classList']['add']('hidden'),adminView[_0x1db13d(0x1ad)][_0x1db13d(0x48b)](_0x1db13d(0x2bb)),showView('project-detail');}function setupResultScreenBackButton(){const _0x330f44=_0x40d1b2,_0x116d98=_0x330f44(0x9e),_0x16ec3a=currentMode===_0x330f44(0x3ee),_0x27d79a=_0x16ec3a?_0x330f44(0x49e):'<i\x20class=\x22fas\x20fa-home\x20mr-2\x22></i>กลับไปหน้าแรก',_0x58c927='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-6\x20pt-6\x20border-t\x20flex\x20flex-col\x20sm:flex-row\x20items-center\x20justify-center\x20gap-4\x20w-full\x20max-w-md\x20mx-auto\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22view-rankings-btn\x22\x20class=\x22w-full\x20sm:w-auto\x20flex-1\x20bg-yellow-500\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-yellow-600\x20flex\x20items-center\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trophy\x22></i>ดูอันดับ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22'+_0x116d98+_0x330f44(0x48a)+_0x27d79a+_0x330f44(0x125);studentResultArea[_0x330f44(0x18b)](_0x330f44(0x200),_0x58c927),studentResultArea[_0x330f44(0x1e8)]('#view-rankings-btn')['addEventListener'](_0x330f44(0x128),handleShowStudentRankings),document[_0x330f44(0x439)](_0x116d98)['addEventListener'](_0x330f44(0x128),()=>{const _0x224749=_0x330f44;_0x16ec3a?(currentMode=_0x224749(0x4d0),studentView[_0x224749(0x1ad)][_0x224749(0x136)](_0x224749(0x2bb)),adminView[_0x224749(0x1ad)][_0x224749(0x48b)](_0x224749(0x2bb)),showView(_0x224749(0x1c6))):(showView('student'),document['getElementById']('quiz-id-input')['value']='');});}function displayResultsWithAnswers(_0xf1de2,_0x143848,_0x4c7f37,_0x366987,_0x5d20a6){const _0x1ee2bc=_0x40d1b2,_0x49af13=_0x5d20a6>0x0?_0xf1de2/_0x5d20a6*0x64:0x0,_0x39251d=currentDisplayedQuiz[_0x1ee2bc(0x1a9)]?.['passingScore']??-0x1,_0xf8830b=currentDisplayedQuiz['isRemedial']===!![];let _0xe18e6e='';if(_0xf8830b||_0x39251d!==-0x1){let _0x129b49=_0xf8830b?_0xf1de2===_0x5d20a6:_0xf1de2>=_0x39251d;const _0x27e484=_0x129b49?_0x1ee2bc(0x2fa):_0x1ee2bc(0x324),_0x5bbe2c=_0x129b49?'ผ่าน':'ไม่ผ่าน';_0xe18e6e=_0x1ee2bc(0xda)+_0x27e484+'\x22>'+_0x5bbe2c+_0x1ee2bc(0x1d7);}let _0x1d85da='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-6\x20bg-indigo-100\x20rounded-lg\x20mb-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-2\x22>ผู้เข้าสอบ:\x20<span\x20class=\x22font-semibold\x20text-indigo-800\x22>'+currentStudentName+'</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-bold\x20text-purple-700\x20mb-2\x22>ผลการทดสอบ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-4xl\x20font-bold\x20my-2\x22>'+_0xf1de2+_0x1ee2bc(0x355)+_0x5d20a6+_0x1ee2bc(0xe0)+_0xe18e6e+_0x1ee2bc(0x4b2)+_0x143848+_0x1ee2bc(0xc3)+_0x49af13[_0x1ee2bc(0x46a)](0x0)+_0x1ee2bc(0x376);currentDisplayedQuiz[_0x1ee2bc(0x449)][_0x1ee2bc(0x4b7)]((_0x5b9338,_0x134b82)=>{const _0x2f31f0=_0x1ee2bc,_0x2ffb99=_0x366987[_0x134b82],_0x5c58cc=_0x2ffb99['answer'],_0x4b4230=_0x2ffb99[_0x2f31f0(0x32f)],_0x285bde=_0x5b9338['questionType']||currentDisplayedQuiz['quizType'];_0x1d85da+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-4\x20p-4\x20border\x20rounded-lg\x20'+(_0x4b4230?_0x2f31f0(0x416):_0x2f31f0(0x164))+_0x2f31f0(0x115)+(_0x134b82+0x1)+'.\x20'+(_0x5b9338[_0x2f31f0(0x32a)]||_0x5b9338['questionText'])+_0x2f31f0(0x3e2);switch(_0x285bde){case _0x2f31f0(0x48c):const _0x3e052f=_0x5c58cc||_0x2f31f0(0x2df),_0x496fbb=_0x5b9338[_0x2f31f0(0x350)];_0x1d85da+=_0x2f31f0(0x404)+(!_0x4b4230?_0x2f31f0(0x2c5):'')+'\x22>'+_0x3e052f+'</span></p>';!_0x4b4230&&(_0x1d85da+=_0x2f31f0(0xd9)+_0x496fbb+_0x2f31f0(0x1d7));break;case _0x2f31f0(0x15d):_0x1d85da+=_0x2f31f0(0x232)+(_0x5c58cc||_0x2f31f0(0x2df))+_0x2f31f0(0x1d7),_0x1d85da+=_0x2f31f0(0x277)+_0x5b9338[_0x2f31f0(0x379)]+_0x2f31f0(0x1d7);break;case'true_false':_0x1d85da+=_0x2f31f0(0x40e)+(_0x5b9338[_0x2f31f0(0xaa)]===!![]?_0x2f31f0(0x2ba):'')+'\x20'+(_0x5c58cc==='true'&&!_0x4b4230?_0x2f31f0(0x2c5):'')+_0x2f31f0(0x28e),_0x1d85da+=_0x2f31f0(0x40e)+(_0x5b9338[_0x2f31f0(0xaa)]===![]?_0x2f31f0(0x2ba):'')+'\x20'+(_0x5c58cc===_0x2f31f0(0x88)&&!_0x4b4230?_0x2f31f0(0x2c5):'')+_0x2f31f0(0x172);break;case'fill_in_the_blank':case _0x2f31f0(0x110):default:_0x1d85da+=_0x5b9338[_0x2f31f0(0x4ed)][_0x2f31f0(0x263)]((_0x316e3d,_0x3124a9)=>{const _0x2ab5ae=_0x2f31f0;let _0x5127fd='',_0x571a7e='';if(_0x3124a9===_0x5b9338[_0x2ab5ae(0x16d)])_0x5127fd=_0x2ab5ae(0x2ba),_0x571a7e=_0x2ab5ae(0x245);else _0x3124a9===_0x5c58cc&&(_0x5127fd=_0x2ab5ae(0x43c),_0x571a7e='<i\x20class=\x22fas\x20fa-times-circle\x20mr-2\x20text-red-600\x22></i>');return _0x2ab5ae(0xfa)+_0x5127fd+'\x22>'+_0x571a7e+_0x316e3d+'</div>';})['join']('');break;}_0x1d85da+=_0x2f31f0(0x194)+(_0x5b9338[_0x2f31f0(0x1bb)]||_0x2f31f0(0x195))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),studentResultArea[_0x1ee2bc(0x2b0)]=_0x1d85da,renderEarnedBadges(_0x4c7f37,'earned-badges-container'),studentResultArea[_0x1ee2bc(0x1ad)][_0x1ee2bc(0x48b)](_0x1ee2bc(0x2bb)),studentQuizArea[_0x1ee2bc(0x1ad)][_0x1ee2bc(0x136)](_0x1ee2bc(0x2bb)),setupResultScreenBackButton();if(window[_0x1ee2bc(0x14f)])window[_0x1ee2bc(0x14f)][_0x1ee2bc(0x210)]([studentResultArea]);}function displayResultsScoreOnly(_0x36e70b,_0x1b052a,_0x1b00c1,_0x1ebabb){const _0x2355a2=_0x40d1b2,_0x5c1f22=_0x1ebabb>0x0?_0x36e70b/_0x1ebabb*0x64:0x0,_0x2a41db=currentDisplayedQuiz[_0x2355a2(0x1a9)]?.['passingScore']??-0x1,_0x486f83=currentDisplayedQuiz['isRemedial']===!![];let _0xe8499c='';if(_0x486f83||_0x2a41db!==-0x1){let _0x3b066e;_0x486f83?_0x3b066e=_0x36e70b===_0x1ebabb:_0x3b066e=_0x36e70b>=_0x2a41db;const _0x1c717b=_0x3b066e?_0x2355a2(0x2fa):'bg-red-100\x20text-red-800',_0x36e18a=_0x3b066e?_0x2355a2(0x220):_0x2355a2(0x351);_0xe8499c=_0x2355a2(0xda)+_0x1c717b+'\x22>'+_0x36e18a+_0x2355a2(0x1d7);}let _0x134355=_0x2355a2(0x1aa)+currentStudentName+'</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-bold\x20text-indigo-800\x20mb-2\x22>ส่งคำตอบเรียบร้อยแล้ว</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-700\x20mb-2\x22>นี่คือคะแนนของคุณ:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-5xl\x20font-bold\x20my-2\x22>'+_0x36e70b+_0x2355a2(0x1d6)+_0x1ebabb+_0x2355a2(0xe0)+_0xe8499c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20font-semibold\x20text-blue-600\x20mt-2\x22>+'+_0x1b052a+_0x2355a2(0xdc)+_0x5c1f22['toFixed'](0x0)+'%</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22earned-badges-container\x22\x20class=\x22mt-4\x20flex\x20justify-center\x20gap-4\x20flex-wrap\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';studentResultArea[_0x2355a2(0x2b0)]=_0x134355,renderEarnedBadges(_0x1b00c1,'earned-badges-container'),studentResultArea[_0x2355a2(0x1ad)][_0x2355a2(0x48b)](_0x2355a2(0x2bb)),studentQuizArea[_0x2355a2(0x1ad)][_0x2355a2(0x136)](_0x2355a2(0x2bb)),setupResultScreenBackButton();}function displaySubmissionConfirmation(){const _0x1cc4d7=_0x40d1b2;let _0x21120d=_0x1cc4d7(0x8c)+currentStudentName+_0x1cc4d7(0x319);studentResultArea[_0x1cc4d7(0x2b0)]=_0x21120d,studentResultArea[_0x1cc4d7(0x1ad)][_0x1cc4d7(0x48b)](_0x1cc4d7(0x2bb)),studentQuizArea[_0x1cc4d7(0x1ad)]['add']('hidden'),setupResultScreenBackButton();}function renderEarnedBadges(_0x45e2d0,_0x17fd73){const _0x86fe82=_0x40d1b2,_0x191bf1=document[_0x86fe82(0x439)](_0x17fd73);if(!_0x191bf1||!_0x45e2d0||_0x45e2d0[_0x86fe82(0x1f3)]===0x0)return;let _0x73160='';_0x45e2d0[_0x86fe82(0x4b7)]((_0x402cf0,_0x399b9f)=>{const _0x27aff5=_0x86fe82,_0x105daf=Object['values'](BADGES)['find'](_0x3ca270=>_0x3ca270['id']===_0x402cf0);_0x105daf&&(_0x73160+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22badge-icon\x20text-center\x20p-2\x20bg-white\x20rounded-lg\x20shadow\x22\x20style=\x22animation-delay:\x20'+_0x399b9f*0.2+_0x27aff5(0x268)+_0x105daf[_0x27aff5(0x395)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+_0x105daf['icon']+'\x20text-3xl\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20font-semibold\x20mt-1\x22>'+_0x105daf[_0x27aff5(0xe8)]+_0x27aff5(0x2c3));}),_0x191bf1[_0x86fe82(0x2b0)]=_0x73160;}function startPresentation(_0x87bec){const _0x348c86=_0x40d1b2;currentQuizData=getShuffledQuiz(_0x87bec),currentPresentationSlide=0x0,presentationModal['style'][_0x348c86(0x429)]=_0x348c86(0x31f),renderPresentationSlide(currentPresentationSlide);}function closePresentation(){const _0x13932e=_0x40d1b2;document['fullscreenElement']&&document[_0x13932e(0x16f)](),presentationModal[_0x13932e(0x442)]['display']=_0x13932e(0x4a9);}function renderPresentationSlide(_0x2acfc6){const _0x27239d=_0x40d1b2,_0x3cc3fd=document[_0x27239d(0x439)](_0x27239d(0x4d7));if(!currentQuizData||!currentQuizData[_0x27239d(0x449)]||!currentQuizData['questions'][_0x2acfc6]){_0x3cc3fd[_0x27239d(0x2b0)]=_0x27239d(0x119);return;}const _0x4dab2f=currentQuizData['questions'][_0x2acfc6],_0x16bde0=_0x4dab2f['questionType']||currentQuizData[_0x27239d(0x4af)];_0x3cc3fd[_0x27239d(0x2b0)]='';let _0x5ba00b=_0x27239d(0x1dd)+(_0x4dab2f['imageCode']?_0x27239d(0x1d2)+_0x4dab2f[_0x27239d(0x4e9)]+'</div>':'')+_0x27239d(0x41f)+(_0x2acfc6+0x1)+'.\x20'+(_0x4dab2f[_0x27239d(0x32a)]||_0x4dab2f[_0x27239d(0x89)])+_0x27239d(0x23c);switch(_0x16bde0){case _0x27239d(0x48c):_0x5ba00b+=_0x4dab2f['allResponses'][_0x27239d(0x263)](_0x306b0e=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x306b0e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x27239d(0x17d)]('');break;case'true_false':_0x5ba00b+=_0x27239d(0x2d0),_0x5ba00b+='<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22\x20data-answer=\x22false\x22>ไม่ใช่</button>';break;case'fill_in_no_choices':case'short_answer':_0x5ba00b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20md:col-span-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22presentation-short-answer-input\x22\x20class=\x22w-full\x20p-4\x20text-2xl\x20border-2\x20border-gray-300\x20rounded-lg\x20bg-white\x20text-gray-800\x22\x20rows=\x222\x22\x20placeholder=\x22พิมพ์คำตอบที่นี่...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22check-presentation-answer-btn\x22\x20class=\x22mt-4\x20bg-blue-600\x20text-white\x20py-3\x20px-6\x20rounded-lg\x20text-xl\x20hover:bg-blue-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20ตรวจคำตอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22presentation-ai-result\x22\x20class=\x22hidden\x20mt-4\x20text-2xl\x20font-bold\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';break;case _0x27239d(0x14b):case _0x27239d(0x110):default:_0x5ba00b+=_0x4dab2f[_0x27239d(0x4ed)][_0x27239d(0x263)]((_0x487a1f,_0x291945)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22\x20data-index=\x22'+_0x291945+_0x27239d(0x15b)+_0x487a1f+_0x27239d(0x43f))['join']('');break;}_0x5ba00b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22presentation-explanation\x22\x20class=\x22hidden\x20mt-8\x20p-4\x20bg-blue-50\x20text-blue-800\x20rounded-lg\x20text-left\x20text-lg\x20md:text-xl\x20max-w-4xl\x20mx-auto\x20leading-relaxed\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22font-bold\x22>คำอธิบาย:</strong>\x20'+(_0x4dab2f[_0x27239d(0x1bb)]||_0x27239d(0x195))+_0x27239d(0x262),_0x3cc3fd[_0x27239d(0x2b0)]=_0x5ba00b;if(window['MathJax'])window['MathJax']['typesetPromise']([_0x3cc3fd]);document[_0x27239d(0x321)](_0x27239d(0xf9))['forEach'](_0x8f884b=>{const _0x43ba2e=_0x27239d;_0x8f884b['addEventListener'](_0x43ba2e(0x128),_0x318841=>revealAnswerForPresentation(_0x2acfc6,_0x318841[_0x43ba2e(0xc8)]));});const _0x5266a9=document[_0x27239d(0x439)]('check-presentation-answer-btn');_0x5266a9&&_0x5266a9['addEventListener'](_0x27239d(0x128),()=>checkShortAnswerForPresentation(_0x2acfc6)),document[_0x27239d(0x439)](_0x27239d(0x298))['textContent']='ข้อที่\x20'+(_0x2acfc6+0x1)+_0x27239d(0x16a)+currentQuizData[_0x27239d(0x449)][_0x27239d(0x1f3)],document['getElementById'](_0x27239d(0x425))[_0x27239d(0x247)]=_0x2acfc6===0x0,document[_0x27239d(0x439)](_0x27239d(0x490))[_0x27239d(0x247)]=_0x2acfc6===currentQuizData['questions'][_0x27239d(0x1f3)]-0x1;}async function checkShortAnswerForPresentation(_0x4fbe5b){const _0x49c8c7=_0x40d1b2,_0xe7de31=currentQuizData['questions'][_0x4fbe5b],_0x2a0bea=document[_0x49c8c7(0x439)](_0x49c8c7(0x2f8)),_0x486e22=document[_0x49c8c7(0x439)](_0x49c8c7(0x102)),_0x3c420f=document['getElementById'](_0x49c8c7(0x9a)),_0x280dcd=document[_0x49c8c7(0x439)](_0x49c8c7(0x432));if(!_0x2a0bea||!_0x486e22||!_0x3c420f||!_0x280dcd)return;const _0xc1d44=_0x2a0bea[_0x49c8c7(0x91)][_0x49c8c7(0x1a1)]();if(_0xc1d44==='')return;_0x486e22[_0x49c8c7(0x247)]=!![],_0x486e22[_0x49c8c7(0x2b0)]=_0x49c8c7(0x122),_0x2a0bea[_0x49c8c7(0x247)]=!![];const _0x4e9001=await gradeShortAnswerWithAI(_0xc1d44,_0xe7de31[_0x49c8c7(0x379)]);_0x4e9001?_0x3c420f['innerHTML']=_0x49c8c7(0xee):_0x3c420f[_0x49c8c7(0x2b0)]=_0x49c8c7(0x97)+_0xe7de31['idealAnswer']+')',_0x3c420f['classList'][_0x49c8c7(0x48b)](_0x49c8c7(0x2bb)),_0x280dcd[_0x49c8c7(0x1ad)][_0x49c8c7(0x48b)](_0x49c8c7(0x2bb)),_0x486e22[_0x49c8c7(0x1ad)][_0x49c8c7(0x136)](_0x49c8c7(0x2bb));}function revealAnswerForPresentation(_0x57c2d5,_0x573b4e){const _0x17a3b1=_0x40d1b2,_0x3a5366=currentQuizData[_0x17a3b1(0x449)][_0x57c2d5],_0x4b1096=_0x3a5366['questionType']||currentQuizData[_0x17a3b1(0x4af)];document[_0x17a3b1(0x321)](_0x17a3b1(0xf9))[_0x17a3b1(0x4b7)](_0x5cc270=>{const _0x123b0e=_0x17a3b1;_0x5cc270['disabled']=!![],_0x5cc270[_0x123b0e(0x1ad)][_0x123b0e(0x48b)](_0x123b0e(0x491));let _0x3aeedd=![];if(_0x4b1096===_0x123b0e(0x110)||_0x4b1096===_0x123b0e(0x14b)){const _0x3da75b=parseInt(_0x5cc270['dataset'][_0x123b0e(0x137)]);_0x3aeedd=_0x3da75b===_0x3a5366['correctAnswerIndex'];}else{if(_0x4b1096===_0x123b0e(0xfc)){const _0x3a8f35=_0x5cc270[_0x123b0e(0x307)][_0x123b0e(0x4b3)]==='true';_0x3aeedd=_0x3a8f35===_0x3a5366[_0x123b0e(0xaa)];}else _0x4b1096==='matching_item'&&(_0x3aeedd=_0x5cc270[_0x123b0e(0x4ef)][_0x123b0e(0x1a1)]()===_0x3a5366[_0x123b0e(0x350)]);}_0x3aeedd?_0x5cc270[_0x123b0e(0x1ad)][_0x123b0e(0x136)](_0x123b0e(0x478),_0x123b0e(0x33a),_0x123b0e(0x460)):_0x5cc270[_0x123b0e(0x1ad)]['add'](_0x123b0e(0xbe));}),_0x573b4e[_0x17a3b1(0x1ad)][_0x17a3b1(0x48b)](_0x17a3b1(0xbe));let _0x1edc38=![];if(_0x4b1096==='multiple_choice')_0x1edc38=parseInt(_0x573b4e['dataset']['index'])===_0x3a5366[_0x17a3b1(0x16d)];else{if(_0x4b1096===_0x17a3b1(0xfc))_0x1edc38=_0x573b4e[_0x17a3b1(0x307)][_0x17a3b1(0x4b3)]===_0x17a3b1(0x23a)===_0x3a5366[_0x17a3b1(0xaa)];else _0x4b1096===_0x17a3b1(0x48c)&&(_0x1edc38=_0x573b4e[_0x17a3b1(0x4ef)][_0x17a3b1(0x1a1)]()===_0x3a5366[_0x17a3b1(0x350)]);}!_0x1edc38&&_0x573b4e[_0x17a3b1(0x1ad)][_0x17a3b1(0x136)](_0x17a3b1(0x30c),_0x17a3b1(0x33a),'border-red-700'),document[_0x17a3b1(0x439)](_0x17a3b1(0x432))[_0x17a3b1(0x1ad)]['remove'](_0x17a3b1(0x2bb));}function startWholeQuizTimer(_0x58759f){const _0x2f3075=_0x40d1b2,_0x27885d=document[_0x2f3075(0x439)](_0x2f3075(0x157));if(!_0x27885d)return;const _0x49c778=Date[_0x2f3075(0x16b)]()+_0x58759f*0x3c*0x3e8;_0x27885d[_0x2f3075(0x2b0)]=_0x2f3075(0x390);const _0x3c216b=document[_0x2f3075(0x439)](_0x2f3075(0xcc));quizTimerInterval=setInterval(()=>{const _0x5f1abf=_0x2f3075,_0x37c3a5=_0x49c778-Date[_0x5f1abf(0x16b)]();if(_0x37c3a5<=0x0)clearInterval(quizTimerInterval),_0x3c216b[_0x5f1abf(0x4ef)]='00:00',showMessage(_0x5f1abf(0xdf)),handleSubmitQuiz(null);else{const _0x1749c9=Math['floor'](_0x37c3a5/0x3e8/0x3c%0x3c)[_0x5f1abf(0x168)]()['padStart'](0x2,'0'),_0x603b81=Math[_0x5f1abf(0x22d)](_0x37c3a5/0x3e8%0x3c)[_0x5f1abf(0x168)]()[_0x5f1abf(0x2a5)](0x2,'0');_0x3c216b[_0x5f1abf(0x4ef)]=_0x1749c9+':'+_0x603b81;}},0x3e8);}function renderPerQuestionView(){const _0x238414=_0x40d1b2;if(perQuestionTimerInterval)clearInterval(perQuestionTimerInterval);const _0x44ba04=currentDisplayedQuiz['questions'][currentQuestionIndex],_0x4799e7=_0x44ba04['questionType']||currentDisplayedQuiz[_0x238414(0x4af)];let _0x494218=_0x238414(0x481)+(currentQuestionIndex+0x1)+_0x238414(0x1e6)+currentDisplayedQuiz[_0x238414(0x449)][_0x238414(0x1f3)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(currentMode===_0x238414(0x3ee)?_0x238414(0x215):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20mb-2\x20text-center\x22>แบบทดสอบ:\x20'+currentDisplayedQuiz[_0x238414(0x422)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22per-question-timer-container\x22\x20class=\x22mb-4\x22></div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-6\x20p-4\x20border\x20rounded-lg\x20bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22font-semibold\x20mb-3\x22\x20id=\x22per-question-text\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x22\x20id=\x22per-question-options\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22next-question-timed-btn\x22\x20class=\x22w-full\x20mt-4\x20bg-indigo-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-indigo-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-arrow-right\x20mr-2\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(currentQuestionIndex===currentDisplayedQuiz[_0x238414(0x449)][_0x238414(0x1f3)]-0x1?'ส่งคำตอบ':_0x238414(0x475))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';studentQuizArea[_0x238414(0x2b0)]=_0x494218;let _0x371d67='',_0x362f6d='';switch(_0x4799e7){case _0x238414(0x48c):_0x371d67=currentQuestionIndex+0x1+'.\x20'+_0x44ba04[_0x238414(0x32a)],_0x362f6d=_0x238414(0x163)+_0x44ba04[_0x238414(0x3c7)][_0x238414(0x263)](_0x3b706d=>_0x238414(0x20b)+_0x3b706d+'\x22>'+_0x3b706d+_0x238414(0x467))[_0x238414(0x17d)]('')+_0x238414(0x448);break;case _0x238414(0xfc):_0x371d67=currentQuestionIndex+0x1+'.\x20'+_0x44ba04[_0x238414(0x89)],_0x362f6d=_0x238414(0x12f);break;case _0x238414(0x15d):case _0x238414(0x1b2):_0x371d67=currentQuestionIndex+0x1+'.\x20'+_0x44ba04[_0x238414(0x89)],_0x362f6d=_0x238414(0x4ea);break;case _0x238414(0x110):case _0x238414(0x42c):default:_0x371d67=currentQuestionIndex+0x1+'.\x20'+_0x44ba04[_0x238414(0x89)],_0x362f6d=_0x44ba04['options'][_0x238414(0x263)]((_0x4c2f18,_0xb12af2)=>_0x238414(0x222)+_0xb12af2+_0x238414(0x22c)+_0xb12af2+_0x238414(0x3f6)+_0xb12af2+'\x22>'+_0x4c2f18+_0x238414(0x116))[_0x238414(0x17d)]('');break;}_0x44ba04[_0x238414(0x4e9)]&&(_0x371d67+='<div\x20class=\x22my-4\x20flex\x20justify-center\x22>'+_0x44ba04['imageCode']+_0x238414(0xb5));document['getElementById'](_0x238414(0x10b))[_0x238414(0x2b0)]=_0x371d67,document[_0x238414(0x439)](_0x238414(0x418))[_0x238414(0x2b0)]=_0x362f6d;if(currentMode===_0x238414(0x3ee)){const _0x43044d=document[_0x238414(0x439)]('cancel-test-btn');if(_0x43044d)_0x43044d[_0x238414(0x444)](_0x238414(0x128),cancelAdminTest);}document[_0x238414(0x439)](_0x238414(0x2de))[_0x238414(0x444)](_0x238414(0x128),()=>handleNextQuestionInTimedMode(![]));if(window[_0x238414(0x14f)])window[_0x238414(0x14f)][_0x238414(0x210)]([studentQuizArea]);startPerQuestionTimer();}function startPerQuestionTimer(){const _0x3e8ad3=_0x40d1b2,_0x270c71=currentDisplayedQuiz[_0x3e8ad3(0x1a9)][_0x3e8ad3(0x227)],_0x4c9d4e=document[_0x3e8ad3(0x439)]('per-question-timer-container');if(!_0x4c9d4e)return;let _0x3224bd=_0x270c71;_0x4c9d4e[_0x3e8ad3(0x2b0)]=_0x3e8ad3(0x1d1)+_0x3224bd+_0x3e8ad3(0x12c);const _0x525dd9=document['getElementById'](_0x3e8ad3(0x44c)),_0x3a479d=document[_0x3e8ad3(0x439)](_0x3e8ad3(0x465));perQuestionTimerInterval=setInterval(()=>{const _0x45ea19=_0x3e8ad3;_0x3224bd--;const _0x3a592b=_0x3224bd/_0x270c71*0x64;_0x525dd9['style'][_0x45ea19(0x4b4)]=_0x3a592b+'%',_0x3a479d[_0x45ea19(0x4ef)]=_0x3224bd,_0x3224bd<=0x0&&(clearInterval(perQuestionTimerInterval),showMessage(_0x45ea19(0x318)),handleNextQuestionInTimedMode(!![]));},0x3e8);}function handleNextQuestionInTimedMode(_0x5e0b6d=![]){const _0x33df7e=_0x40d1b2;if(perQuestionTimerInterval)clearInterval(perQuestionTimerInterval);let _0x3f3921=null;if(!_0x5e0b6d){const _0x40851d=currentDisplayedQuiz['questions'][currentQuestionIndex],_0x1c7dae=_0x40851d[_0x33df7e(0x285)]||currentDisplayedQuiz[_0x33df7e(0x4af)];if(_0x1c7dae===_0x33df7e(0x15d)||_0x1c7dae===_0x33df7e(0x1b2)){const _0x4475d0=document[_0x33df7e(0x1e8)](_0x33df7e(0x26e));_0x3f3921=_0x4475d0?_0x4475d0[_0x33df7e(0x91)][_0x33df7e(0x1a1)]():'';}else{if(_0x1c7dae===_0x33df7e(0x48c)){const _0x5b7b8e=document[_0x33df7e(0x1e8)]('#per-question-options\x20select');_0x3f3921=_0x5b7b8e?_0x5b7b8e[_0x33df7e(0x91)]:'';}else{const _0x25a76c=document['querySelector'](_0x33df7e(0x4e5));if(_0x25a76c){const _0x437ec7=_0x25a76c['value'];_0x3f3921=!isNaN(parseInt(_0x437ec7,0xa))&&_0x437ec7[_0x33df7e(0x1a1)]()!==''?parseInt(_0x437ec7,0xa):_0x437ec7;}}}}studentAnswersPerQuestion[_0x33df7e(0x255)](_0x3f3921),currentQuestionIndex++,currentQuestionIndex>=currentDisplayedQuiz[_0x33df7e(0x449)]['length']?finalizePerQuestionQuiz():renderPerQuestionView();}async function finalizePerQuestionQuiz(){const _0x4e0b12=_0x40d1b2,_0x341483=currentDisplayedQuiz['questions']['some'](_0x4f0b0c=>_0x4f0b0c['questionType']===_0x4e0b12(0x15d));_0x341483?showMessage(_0x4e0b12(0x175)):showMessage(_0x4e0b12(0x3d6));const _0x13ea4d=currentQuizData['id'],_0xeee3d4=doc(db,_0x4e0b12(0x282)+appId+_0x4e0b12(0x44e)+_0x13ea4d+_0x4e0b12(0x3eb),currentStudentName),_0x346ad5=await getDoc(_0xeee3d4),_0x278c8d=_0x346ad5['exists']()?_0x346ad5[_0x4e0b12(0x372)]():{},_0x238671=_0x278c8d[_0x4e0b12(0x206)]||[];await processAndSubmitAnswers(studentAnswersPerQuestion,_0x238671);}function getResultsFilename(){const _0x337f4e=_0x40d1b2,_0x28fd3a=document[_0x337f4e(0x439)]('results-quiz-title')[_0x337f4e(0x4ef)][_0x337f4e(0x2f9)](/[^a-z0-9]/gi,'_')[_0x337f4e(0x4a2)]();return _0x337f4e(0x2ee)+(_0x28fd3a||_0x337f4e(0x25f));}function exportResultsAsImage(){const _0x27a5a9=_0x40d1b2,_0x249031=document[_0x27a5a9(0x439)]('results-table-container');showMessage(_0x27a5a9(0x343)),html2canvas(_0x249031)[_0x27a5a9(0x411)](_0x3665a0=>{const _0x3b26da=_0x27a5a9,_0xe36cd7=document[_0x3b26da(0x41b)]('a');_0xe36cd7[_0x3b26da(0x1f7)]=getResultsFilename()+'.png',_0xe36cd7[_0x3b26da(0x482)]=_0x3665a0[_0x3b26da(0x457)](_0x3b26da(0x28a)),_0xe36cd7['click'](),messageModal[_0x3b26da(0x1ad)][_0x3b26da(0x136)](_0x3b26da(0x2bb));});}function exportResultsAsPDF(){const _0x16a9d0=_0x40d1b2,{jsPDF:_0x1b8175}=window[_0x16a9d0(0x295)],_0x41f4d6=new _0x1b8175();_0x41f4d6[_0x16a9d0(0x201)](_0x16a9d0(0x127),_0x16a9d0(0x93)),_0x41f4d6[_0x16a9d0(0x1f1)]({'html':_0x16a9d0(0x303)}),_0x41f4d6[_0x16a9d0(0xac)](getResultsFilename()+_0x16a9d0(0x185));}function exportResultsAsWord(){const _0x525793=_0x40d1b2,_0x27adea=_0x525793(0x274)+_0x525793(0x124)+_0x525793(0x49a)+'<head><meta\x20charset=\x27utf-8\x27><title>Export\x20HTML\x20to\x20Word</title></head><body>',_0x3f8283='</body></html>',_0x3b9b55=_0x27adea+document[_0x525793(0x439)](_0x525793(0x2c8))['innerHTML']+_0x3f8283,_0x551105=_0x525793(0x3a3)+encodeURIComponent(_0x3b9b55),_0xf78a17=document[_0x525793(0x41b)]('a');document[_0x525793(0x3b5)][_0x525793(0x380)](_0xf78a17),_0xf78a17[_0x525793(0x482)]=_0x551105,_0xf78a17[_0x525793(0x1f7)]=getResultsFilename()+_0x525793(0x2ac),_0xf78a17[_0x525793(0x128)](),document[_0x525793(0x3b5)][_0x525793(0x236)](_0xf78a17);}function exportResultsAsExcel(){const _0x585102=_0x40d1b2,_0x2db162=document[_0x585102(0x439)](_0x585102(0x37b));let _0x5783cd=[];for(let _0x3a341c=0x0;_0x3a341c<_0x2db162[_0x585102(0xf4)][_0x585102(0x1f3)];_0x3a341c++){let _0x356135=[],_0x190ab8=_0x2db162[_0x585102(0xf4)][_0x3a341c]['querySelectorAll'](_0x585102(0x221));for(let _0x5cca39=0x0;_0x5cca39<_0x190ab8[_0x585102(0x1f3)];_0x5cca39++){_0x356135[_0x585102(0x255)]('\x22'+_0x190ab8[_0x5cca39]['innerText']['replace'](/"/g,'\x22\x22')+'\x22');}_0x5783cd[_0x585102(0x255)](_0x356135[_0x585102(0x17d)](','));}const _0x122786=new Blob([new Uint8Array([0xef,0xbb,0xbf]),_0x5783cd[_0x585102(0x17d)]('\x0a')],{'type':_0x585102(0x2a8)}),_0x55fd86=document[_0x585102(0x41b)]('a');_0x55fd86[_0x585102(0x482)]=URL[_0x585102(0x344)](_0x122786),_0x55fd86[_0x585102(0x1f7)]=getResultsFilename()+_0x585102(0x37e),_0x55fd86[_0x585102(0x128)]();}function exportTableAsImage(_0x29b1dc,_0x267c12){const _0x4c329e=_0x40d1b2,_0x5e7af6=document['getElementById'](_0x29b1dc);if(!_0x5e7af6){showMessage(_0x4c329e(0x452));return;}showMessage('กำลังสร้างรูปภาพ...'),html2canvas(_0x5e7af6)[_0x4c329e(0x411)](_0x490002=>{const _0x119074=_0x4c329e,_0x584ac5=document[_0x119074(0x41b)]('a');_0x584ac5[_0x119074(0x1f7)]=_0x267c12+'.png',_0x584ac5[_0x119074(0x482)]=_0x490002[_0x119074(0x457)](_0x119074(0x28a)),_0x584ac5[_0x119074(0x128)](),messageModal[_0x119074(0x1ad)][_0x119074(0x136)]('hidden');});}function exportTableAsPDF(_0xcda890,_0x5369ad){const _0x20354b=_0x40d1b2,{jsPDF:_0x2168b1}=window[_0x20354b(0x295)],_0x20913d=new _0x2168b1();_0x20913d[_0x20354b(0x201)](_0x20354b(0x127),_0x20354b(0x93)),_0x20913d[_0x20354b(0x1f1)]({'html':'#'+_0xcda890}),_0x20913d[_0x20354b(0xac)](_0x5369ad+_0x20354b(0x185));}function exportTableAsWord(_0x294f1c,_0x2056e1){const _0x3a8b32=_0x40d1b2,_0x3a813c=document['getElementById'](_0x294f1c);if(!_0x3a813c){showMessage(_0x3a8b32(0x452));return;}const _0x43dc44=_0x3a8b32(0x274)+_0x3a8b32(0x124)+_0x3a8b32(0x49a)+_0x3a8b32(0x326),_0x5654d8=_0x3a8b32(0xad),_0x257ec4=_0x43dc44+_0x3a813c[_0x3a8b32(0x2b0)]+_0x5654d8,_0x28041e=_0x3a8b32(0x3a3)+encodeURIComponent(_0x257ec4),_0x36a89e=document[_0x3a8b32(0x41b)]('a');document[_0x3a8b32(0x3b5)][_0x3a8b32(0x380)](_0x36a89e),_0x36a89e['href']=_0x28041e,_0x36a89e[_0x3a8b32(0x1f7)]=_0x2056e1+_0x3a8b32(0x2ac),_0x36a89e[_0x3a8b32(0x128)](),document[_0x3a8b32(0x3b5)][_0x3a8b32(0x236)](_0x36a89e);}function exportTableAsExcel(_0x1f4bbd,_0x559fce){const _0xe57892=_0x40d1b2,_0x31272c=document[_0xe57892(0x439)](_0x1f4bbd);if(!_0x31272c){showMessage(_0xe57892(0x452));return;}let _0x40b99b=[];for(let _0x2cc8dd=0x0;_0x2cc8dd<_0x31272c[_0xe57892(0xf4)][_0xe57892(0x1f3)];_0x2cc8dd++){let _0x5288e0=[],_0x270f33=_0x31272c[_0xe57892(0xf4)][_0x2cc8dd][_0xe57892(0x321)](_0xe57892(0x221));for(let _0x328b02=0x0;_0x328b02<_0x270f33[_0xe57892(0x1f3)];_0x328b02++){_0x5288e0[_0xe57892(0x255)]('\x22'+_0x270f33[_0x328b02]['innerText'][_0xe57892(0x2f9)](/"/g,'\x22\x22')+'\x22');}_0x40b99b[_0xe57892(0x255)](_0x5288e0[_0xe57892(0x17d)](','));}const _0x3a4e9f=new Blob([new Uint8Array([0xef,0xbb,0xbf]),_0x40b99b[_0xe57892(0x17d)]('\x0a')],{'type':_0xe57892(0x2a8)}),_0x4f8689=document[_0xe57892(0x41b)]('a');_0x4f8689[_0xe57892(0x482)]=URL[_0xe57892(0x344)](_0x3a4e9f),_0x4f8689[_0xe57892(0x1f7)]=_0x559fce+_0xe57892(0x37e),_0x4f8689[_0xe57892(0x128)]();}function renderAnalytics(_0x2a1d51,_0x5d3b8c){const _0x26aa52=_0x40d1b2,_0x2c7572=currentProjectData[_0x26aa52(0x28d)][_0x26aa52(0x1f3)],_0x202f3d=_0x5d3b8c[_0x26aa52(0x1f3)],_0x2d64d4=_0x2c7572-_0x202f3d,_0x324898=_0x2c7572>0x0?_0x202f3d/_0x2c7572*0x64:0x0,_0x5e6f1e=_0x5d3b8c[_0x26aa52(0x263)](_0x5c52b4=>_0x5c52b4[_0x26aa52(0x4c8)]),_0x4d2ac1=_0x5e6f1e[_0x26aa52(0x1f3)]>0x0?_0x5e6f1e[_0x26aa52(0xdb)]((_0x41a4ea,_0x47fa4c)=>_0x41a4ea+_0x47fa4c,0x0)/_0x5e6f1e[_0x26aa52(0x1f3)]:0x0,_0x1ee6ec=_0x2a1d51['questions'][_0x26aa52(0x1f3)],_0x51e7ac=_0x1ee6ec>0x0?_0x4d2ac1/_0x1ee6ec*0x64:0x0,_0x4b73bf=document[_0x26aa52(0x439)](_0x26aa52(0x87));_0x4b73bf[_0x26aa52(0x2b0)]=_0x26aa52(0x3fb)+_0x324898[_0x26aa52(0x46a)](0x0)+'%</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-blue-600\x22>('+_0x202f3d+'/'+_0x2c7572+'\x20คน)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-green-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-green-700\x20font-semibold\x22>คะแนนเฉลี่ย</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-green-900\x22>'+_0x4d2ac1[_0x26aa52(0x46a)](0x2)+_0x26aa52(0x1e7)+_0x51e7ac[_0x26aa52(0x46a)](0x0)+_0x26aa52(0x45d)+(_0x5e6f1e[_0x26aa52(0x1f3)]>0x0?Math[_0x26aa52(0x237)](..._0x5e6f1e):_0x26aa52(0x1c8))+_0x26aa52(0x11c)+(_0x5e6f1e['length']>0x0?Math[_0x26aa52(0x480)](..._0x5e6f1e):_0x26aa52(0x1c8))+_0x26aa52(0x226);const _0x3dad79=currentProjectData['students']||[];renderSubmissionChart(_0x202f3d,_0x2d64d4,_0x5d3b8c,_0x3dad79),renderScoreDistributionChart(_0x5d3b8c,_0x1ee6ec),renderQuestionAnalytics(_0x2a1d51,_0x5d3b8c,_0x3dad79);}function renderSubmissionChart(_0x2fe8c4,_0x491c8f,_0x3fe6a8,_0x21af04){const _0x493072=_0x40d1b2,_0x17a0c9=document[_0x493072(0x439)](_0x493072(0x2da))[_0x493072(0x4c1)]('2d'),_0x25967e=_0x3fe6a8[_0x493072(0x263)](_0x4a3039=>_0x4a3039[_0x493072(0x374)]),_0xeccf28=_0x21af04[_0x493072(0x3f2)](_0x30e417=>!_0x25967e['includes'](_0x30e417));chartInstances[_0x493072(0x8b)]&&chartInstances[_0x493072(0x8b)][_0x493072(0x32b)](),chartInstances[_0x493072(0x8b)]=new Chart(_0x17a0c9,{'type':_0x493072(0x4b6),'data':{'labels':[_0x493072(0x1c1),'ยังไม่ส่ง'],'datasets':[{'data':[_0x2fe8c4,_0x491c8f],'backgroundColor':[_0x493072(0x225),'#F59E0B'],'borderColor':[_0x493072(0x159),_0x493072(0x159)],'borderWidth':0x2}]},'options':{'responsive':!![],'plugins':{'legend':{'position':_0x493072(0x251)},'tooltip':{'callbacks':{'label':function(_0x29e14c){const _0x35440e=_0x493072;let _0x4ac371=_0x29e14c[_0x35440e(0x1ab)]||'';return _0x4ac371&&(_0x4ac371+=':\x20'),_0x4ac371+=_0x29e14c[_0x35440e(0x38a)],_0x4ac371;},'afterLabel':function(_0x1b2374){const _0x182a0b=_0x493072;let _0xa00627;return _0x1b2374[_0x182a0b(0x22f)]===0x0?_0xa00627=_0x25967e:_0xa00627=_0xeccf28,_0xa00627[_0x182a0b(0x1f3)]>0x0?_0xa00627[_0x182a0b(0x17d)]('\x0a'):_0x182a0b(0x472);}}}}}});}function renderScoreDistributionChart(_0x37fa43,_0x14b42b){const _0x102f70=_0x40d1b2,_0x3ecdce=document[_0x102f70(0x439)](_0x102f70(0x43d))[_0x102f70(0x4c1)]('2d'),_0x2905b2={};for(let _0x550eb4=0x0;_0x550eb4<=_0x14b42b;_0x550eb4++){_0x2905b2[_0x550eb4]=0x0;}_0x37fa43[_0x102f70(0x4b7)](_0x569221=>{const _0x3d0568=_0x102f70;_0x2905b2[_0x569221[_0x3d0568(0x4c8)]]!==undefined&&_0x2905b2[_0x569221[_0x3d0568(0x4c8)]]++;}),chartInstances['score']&&chartInstances[_0x102f70(0x33c)]['destroy'](),chartInstances['score']=new Chart(_0x3ecdce,{'type':_0x102f70(0x3c4),'data':{'labels':Object[_0x102f70(0x1da)](_0x2905b2),'datasets':[{'label':_0x102f70(0x31c),'data':Object[_0x102f70(0x4ce)](_0x2905b2),'backgroundColor':_0x102f70(0x140),'borderColor':_0x102f70(0x13c),'borderWidth':0x1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'ticks':{'stepSize':0x1}},'x':{'title':{'display':!![],'text':_0x102f70(0x1ca)}}},'plugins':{'legend':{'display':![]},'tooltip':{'callbacks':{'afterLabel':function(_0x467e96){const _0x53b85d=_0x102f70,_0x2ab40f=_0x467e96[_0x53b85d(0x1ab)],_0x21585a=_0x37fa43[_0x53b85d(0x3f2)](_0x4dc5a2=>_0x4dc5a2[_0x53b85d(0x4c8)]==_0x2ab40f)[_0x53b85d(0x263)](_0x4e2bf9=>_0x4e2bf9[_0x53b85d(0x374)]);return _0x21585a[_0x53b85d(0x1f3)]>0x0?_0x21585a[_0x53b85d(0x17d)]('\x0a'):'';}}}}}});}function renderQuestionAnalytics(_0xb99a0f,_0x48b744,_0x3210cc){const _0xcf19c3=_0x40d1b2,_0x3a315c=document[_0xcf19c3(0x439)]('question-analytics-container');if(_0x3210cc['length']===0x0){_0x3a315c[_0xcf19c3(0x2b0)]=_0xcf19c3(0x41a);return;}let _0xdb7d72='';const _0x1815ab=_0x48b744[_0xcf19c3(0x263)](_0x42baed=>_0x42baed[_0xcf19c3(0x374)]);_0xb99a0f[_0xcf19c3(0x449)]['forEach']((_0x5cf231,_0x1ccfe3)=>{const _0xf369c9=_0xcf19c3;let _0x42afde=0x0;const _0x3e5005=[],_0x1e6ff3=[],_0x41e477=_0x5cf231[_0xf369c9(0x32a)]||_0x5cf231['questionText']||_0x5cf231[_0xf369c9(0x1ac)];_0x48b744['forEach'](_0x56eb2d=>{const _0x4d2d71=_0xf369c9,_0x25d6e9=_0x56eb2d[_0x4d2d71(0x206)][_0x56eb2d[_0x4d2d71(0x206)][_0x4d2d71(0x1f3)]-0x1];if(_0x25d6e9&&_0x25d6e9[_0x4d2d71(0x328)]){const _0x31f0df=_0x25d6e9['answers'][_0x4d2d71(0x18c)](_0x198691=>_0x198691[_0x4d2d71(0x123)]===_0x41e477);_0x31f0df&&(_0x31f0df[_0x4d2d71(0x32f)]?(_0x42afde++,_0x3e5005['push'](_0x56eb2d['studentName'])):_0x1e6ff3[_0x4d2d71(0x255)](_0x56eb2d[_0x4d2d71(0x374)]));}});const _0x42c279=_0x3210cc[_0xf369c9(0x3f2)](_0x2013a8=>!_0x1815ab['includes'](_0x2013a8)),_0x5a35d3=_0x48b744[_0xf369c9(0x1f3)]>0x0?_0x42afde/_0x48b744[_0xf369c9(0x1f3)]*0x64:0x0;_0xdb7d72+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<details\x20class=\x22bg-gray-50\x20p-3\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<summary\x20class=\x22flex\x20justify-between\x20items-center\x20cursor-pointer\x20font-semibold\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22w-3/4\x20truncate\x22>ข้อ\x20'+(_0x1ccfe3+0x1)+':\x20'+_0x41e477+_0xf369c9(0x1ef)+(_0x5a35d3>=0x46?_0xf369c9(0x2a0):_0x5a35d3>=0x28?_0xf369c9(0x3cd):_0xf369c9(0xc5))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ตอบถูก\x20'+_0x5a35d3['toFixed'](0x0)+_0xf369c9(0x352)+_0x41e477+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>สถิติ:</strong>\x20นักเรียน\x20'+_0x42afde+_0xf369c9(0x1e6)+_0x48b744[_0xf369c9(0x1f3)]+_0xf369c9(0x4a4)+_0x3e5005[_0xf369c9(0x1f3)]+_0xf369c9(0x173)+(_0x3e5005[_0xf369c9(0x1f3)]>0x0?_0x3e5005[_0xf369c9(0x17d)](',\x20'):_0xf369c9(0x472))+_0xf369c9(0x386)+_0x1e6ff3['length']+_0xf369c9(0x173)+(_0x1e6ff3['length']>0x0?_0x1e6ff3[_0xf369c9(0x17d)](',\x20'):_0xf369c9(0x472))+_0xf369c9(0x37f)+_0x42c279[_0xf369c9(0x1f3)]+_0xf369c9(0x173)+(_0x42c279['length']>0x0?_0x42c279[_0xf369c9(0x17d)](',\x20'):_0xf369c9(0x472))+_0xf369c9(0xae);}),_0x3a315c[_0xcf19c3(0x2b0)]=_0xdb7d72;try{window[_0xcf19c3(0x14f)]&&MathJax[_0xcf19c3(0x210)]&&MathJax[_0xcf19c3(0x210)]([_0x3a315c]);}catch(_0x2d31b8){console[_0xcf19c3(0x2db)](_0xcf19c3(0x317),_0x2d31b8);}}async function handleAnalyzeClass(){const _0x5df64e=_0x40d1b2;if(!currentQuizData||!currentQuizData['id']){showMessage('เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลแบบทดสอบปัจจุบัน');return;}const _0x45d146=collection(db,_0x5df64e(0x282)+appId+'/public/data/quizzes/'+currentQuizData['id']+'/submissions'),_0x2b6464=await getDocs(_0x45d146),_0x2f1343=_0x2b6464['docs'][_0x5df64e(0x263)](_0x5ed549=>_0x5ed549[_0x5df64e(0x372)]());if(_0x2f1343[_0x5df64e(0x1f3)]<0x2){showMessage(_0x5df64e(0x2b8));return;}const _0xeccc0b=document[_0x5df64e(0x439)](_0x5df64e(0x399));_0xeccc0b['innerHTML']=_0x5df64e(0x27d),document['getElementById'](_0x5df64e(0xa5))[_0x5df64e(0x247)]=!![];const _0x2caf68=_0x2f1343[_0x5df64e(0x263)]((_0xdb82dd,_0x4a7be4)=>{const _0x5585f8=_0x5df64e,_0x4436c1=_0xdb82dd['attempts'][_0xdb82dd[_0x5585f8(0x206)][_0x5585f8(0x1f3)]-0x1];if(!_0x4436c1)return'';return _0x5585f8(0x24d)+(_0x4a7be4+0x1)+'\x20('+_0xdb82dd[_0x5585f8(0x374)]+'):\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20คะแนน:\x20'+_0x4436c1[_0x5585f8(0x33c)]+'/'+_0xdb82dd['totalQuestions']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20คำตอบรายข้อ:\x20'+JSON[_0x5585f8(0x38e)](_0x4436c1[_0x5585f8(0x328)])+_0x5585f8(0x4aa);})[_0x5df64e(0x17d)]('\x0a---\x0a'),_0x12fd97=_0x5df64e(0x265)+currentQuizData[_0x5df64e(0x422)]+_0x5df64e(0x11b)+JSON[_0x5df64e(0x38e)](currentQuizData['questions'])+_0x5df64e(0x46d)+_0x2caf68+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20จากข้อมูลทั้งหมด\x20โปรดวิเคราะห์และสรุปผลออกมาเป็น\x20JSON\x20object\x20ที่มีโครงสร้างดังนี้เท่านั้น:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20classStrengths:\x20จุดแข็งโดยรวมของห้องเรียนนี้\x20หรือคอนเซ็ปต์ที่นักเรียนส่วนใหญ่เข้าใจตรงกัน\x20(array\x20ของ\x20string)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20classWeaknesses:\x20จุดอ่อนโดยรวม\x20หรือความเข้าใจผิดที่พบบ่อยที่สุด\x20(array\x20ของ\x20string)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20teacherSuggestions:\x20ข้อเสนอแนะเชิงปฏิบัติ\x202-3\x20ข้อสำหรับครู\x20เพื่อนำไปพัฒนาการสอนในครั้งต่อไป\x20(array\x20ของ\x20string)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ตอบเป็นภาษาไทยทั้งหมด\x0a\x20\x20\x20\x20',_0x2d68d1={'type':'OBJECT','properties':{'classStrengths':{'type':'ARRAY','items':{'type':_0x5df64e(0x2cc)}},'classWeaknesses':{'type':'ARRAY','items':{'type':_0x5df64e(0x2cc)}},'teacherSuggestions':{'type':_0x5df64e(0x112),'items':{'type':'STRING'}}},'required':[_0x5df64e(0x11a),_0x5df64e(0x2a4),_0x5df64e(0x382)]};try{const _0x15573f=await callAnalysisApi(_0x12fd97,_0x2d68d1);displayClassAnalysis(_0x15573f);}catch(_0x16a54e){console[_0x5df64e(0x2db)](_0x5df64e(0x427),_0x16a54e),_0xeccc0b[_0x5df64e(0x2b0)]=_0x5df64e(0x1a0)+_0x16a54e['message']+_0x5df64e(0x10d);}finally{document[_0x5df64e(0x439)](_0x5df64e(0xa5))[_0x5df64e(0x247)]=![];}}function displayClassAnalysis(_0x2bb0e5){const _0x22ea46=_0x40d1b2,_0x13c406=document[_0x22ea46(0x439)](_0x22ea46(0x399));if(!_0x2bb0e5){_0x13c406[_0x22ea46(0x2b0)]=_0x22ea46(0x4cc);return;}_0x13c406['innerHTML']=_0x22ea46(0x24a)+_0x2bb0e5[_0x22ea46(0x11a)][_0x22ea46(0x263)](_0x397798=>'<li>'+_0x397798+_0x22ea46(0x19a))[_0x22ea46(0x17d)]('')+_0x22ea46(0x192)+_0x2bb0e5[_0x22ea46(0x2a4)][_0x22ea46(0x263)](_0x14b5c7=>_0x22ea46(0x233)+_0x14b5c7+_0x22ea46(0x19a))[_0x22ea46(0x17d)]('')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-semibold\x20text-blue-700\x20mb-2\x22><i\x20class=\x22fas\x20fa-chalkboard-teacher\x20mr-2\x22></i>ข้อเสนอแนะสำหรับครู</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22list-disc\x20list-inside\x20space-y-1\x20bg-blue-50\x20p-3\x20rounded-lg\x20text-blue-800\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2bb0e5['teacherSuggestions'][_0x22ea46(0x263)](_0x192977=>'<li>'+_0x192977+_0x22ea46(0x19a))[_0x22ea46(0x17d)]('')+_0x22ea46(0xa6);}function formatAndPrintWorksheet(_0x3a323d,_0x2c648e){const _0x271c4d=_0x40d1b2,_0x4326e5=_0x271c4d(0x1bc)+_0x3a323d['topic']+_0x271c4d(0x2f7)+_0x3a323d[_0x271c4d(0x422)]+_0x271c4d(0x3f1)+_0x3a323d[_0x271c4d(0x449)]['map']((_0x42a6bd,_0x486695)=>_0x271c4d(0x24b)+(_0x486695+0x1)+'.\x20'+_0x42a6bd[_0x271c4d(0x89)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x42a6bd['imageCode']?_0x271c4d(0x1fb)+_0x42a6bd[_0x271c4d(0x4e9)]+_0x271c4d(0xb5):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>ตอบ:</strong>\x20<span\x20class=\x22answer-line\x22></span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')['join']('')+_0x271c4d(0x33f);_0x2c648e[_0x271c4d(0x294)][_0x271c4d(0x1db)](_0x4326e5),_0x2c648e[_0x271c4d(0x294)]['close'](),_0x2c648e[_0x271c4d(0x4d1)]=function(){_0x2c648e['print']();};}async function generateWorksheet(){const _0x4f7308=_0x40d1b2,_0x12515d=document[_0x4f7308(0x439)](_0x4f7308(0xa9))[_0x4f7308(0x91)][_0x4f7308(0x1a1)]();if(!_0x12515d){showMessage(_0x4f7308(0x473));return;}const _0x2a3f97=window[_0x4f7308(0x1b7)]('',_0x4f7308(0x291));_0x2a3f97[_0x4f7308(0x294)][_0x4f7308(0x1db)](_0x4f7308(0x253));const _0x513c11=parseInt(document[_0x4f7308(0x439)](_0x4f7308(0x19b))[_0x4f7308(0x91)]),_0x86055d=document[_0x4f7308(0x439)]('include-images-checkbox')[_0x4f7308(0x249)],_0x3a223b=_0x86055d?_0x4f7308(0x8f):'',_0xc9ee15='\x0a\x20\x20\x20\x20\x20\x20\x20\x20สร้างชุดคำถามสำหรับใบงานที่พิมพ์ได้\x20จำนวน\x20'+_0x513c11+'\x20ข้อ\x20เกี่ยวกับหัวข้อ\x20\x22'+_0x12515d+_0x4f7308(0xcd)+_0x3a223b+_0x4f7308(0x414),_0x5508cf={'type':_0x4f7308(0x239),'properties':{'topic':{'type':'STRING'},'questions':{'type':_0x4f7308(0x112),'items':{'type':_0x4f7308(0x239),'properties':{'questionText':{'type':'STRING'},'imageCode':{'type':_0x4f7308(0x2cc)}},'required':['questionText']}}},'required':[_0x4f7308(0x422),'questions']};document[_0x4f7308(0x439)](_0x4f7308(0x42d))[_0x4f7308(0x4ef)]=_0x4f7308(0x3f9),document['getElementById'](_0x4f7308(0x445))[_0x4f7308(0x1ad)]['remove']('hidden'),document['getElementById'](_0x4f7308(0xd1))['classList'][_0x4f7308(0x48b)](_0x4f7308(0x2bb)),generateWorksheetBtn['disabled']=!![];try{const _0x1823ed=await callAnalysisApi(_0xc9ee15,_0x5508cf);formatAndPrintWorksheet(_0x1823ed,_0x2a3f97);}catch(_0x407947){console[_0x4f7308(0x2db)]('Error\x20generating\x20worksheet:',_0x407947);if(_0x2a3f97)_0x2a3f97['close']();showMessage(_0x4f7308(0x30a));}finally{document[_0x4f7308(0x439)]('loader')[_0x4f7308(0x1ad)][_0x4f7308(0x136)]('hidden'),document['getElementById'](_0x4f7308(0xd1))[_0x4f7308(0x1ad)][_0x4f7308(0x136)](_0x4f7308(0x2bb)),generateWorksheetBtn[_0x4f7308(0x247)]=![];}}async function callAnalysisApi(_0x12e7a0,_0x14569b){const _0x23a939=_0x40d1b2,_0x3eac08={'contents':[{'role':'user','parts':[{'text':_0x12e7a0}]}],'generationConfig':{'responseMimeType':_0x23a939(0x2e5),'responseSchema':_0x14569b}},_0x54b874=_0x23a939(0x1cd),_0x1fbbff=_0x23a939(0x24f)+_0x54b874,_0x5436f0=await fetch(_0x1fbbff,{'method':_0x23a939(0x325),'headers':{'Content-Type':'application/json'},'body':JSON['stringify'](_0x3eac08)});if(!_0x5436f0['ok'])throw new Error('API\x20call\x20failed\x20with\x20status:\x20'+_0x5436f0['status']);const _0x58a4b9=await _0x5436f0[_0x23a939(0x12b)]();if(_0x58a4b9[_0x23a939(0x289)]?.[0x0]?.[_0x23a939(0xe5)]?.['parts']?.[0x0])return JSON[_0x23a939(0x1d3)](_0x58a4b9[_0x23a939(0x289)][0x0]['content'][_0x23a939(0x296)][0x0][_0x23a939(0x36c)]);else{let _0x3d9000=_0x23a939(0xd5);if(_0x58a4b9[_0x23a939(0x310)]?.[_0x23a939(0x358)])_0x3d9000=_0x23a939(0x370)+_0x58a4b9[_0x23a939(0x310)][_0x23a939(0x358)]+'.';else _0x58a4b9[_0x23a939(0x289)]?.[0x0]?.[_0x23a939(0x14a)]&&_0x58a4b9[_0x23a939(0x289)][0x0][_0x23a939(0x14a)]!=='STOP'&&(_0x3d9000='AI\x20generation\x20finished\x20with\x20an\x20issue.\x20Reason:\x20'+_0x58a4b9[_0x23a939(0x289)][0x0][_0x23a939(0x14a)]+'.');console[_0x23a939(0x2db)](_0x3d9000,JSON[_0x23a939(0x38e)](_0x58a4b9));throw new Error(_0x3d9000);}}initialize();
