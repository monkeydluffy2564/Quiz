const _0xf78338=_0x44e3;(function(_0x3814fe,_0x311bd5){const _0x29362b=_0x44e3,_0x1bed68=_0x3814fe();while(!![]){try{const _0x6ed0c7=parseInt(_0x29362b(0x107))/0x1+parseInt(_0x29362b(0x1cb))/0x2+parseInt(_0x29362b(0x241))/0x3+parseInt(_0x29362b(0x22e))/0x4*(parseInt(_0x29362b(0xbc))/0x5)+-parseInt(_0x29362b(0x28b))/0x6*(-parseInt(_0x29362b(0x2f6))/0x7)+-parseInt(_0x29362b(0x452))/0x8+-parseInt(_0x29362b(0x377))/0x9*(-parseInt(_0x29362b(0x1e2))/0xa);if(_0x6ed0c7===_0x311bd5)break;else _0x1bed68['push'](_0x1bed68['shift']());}catch(_0x5d756e){_0x1bed68['push'](_0x1bed68['shift']());}}}(_0x4783,0x626f4));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,addDoc,updateDoc,collection,query,where,getDocs,onSnapshot,deleteDoc,writeBatch,runTransaction,serverTimestamp,increment}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';let db,auth,userId,currentMode=_0xf78338(0x4a0),currentProjectId=null,currentProjectData=null,currentQuizData=null,currentDisplayedQuiz=null,currentStudentName=null,currentStudentProjectData=null,currentPresentationSlide=0x0,allProjects=[],allQuizzesGlobal=[],selectedGlobalQuizId=null,allQuizzes=[],starredQuizzes=[],chartInstances={},unsubscribeProjectsListener=null,unsubscribeStudentsListener=null,unsubscribeQuizzesListener=null,unsubscribeSubmissionsListener=null,unsubscribeStudentProfilesListener=null,confirmAction=null,actionTargetId=null,draggedSvgElement=null,svgOffset={'x':0x0,'y':0x0},quizTimerInterval=null,perQuestionTimerInterval=null,quizStartTime=null,currentQuestionIndex=0x0,studentAnswersPerQuestion=[],currentLiveGameId=null,currentLiveGamePin=null,unsubscribeLiveGameListener=null,lastRenderedAdminQuestionIndex=-0x1;const BADGES={'PERFECT_SCORE':{'id':_0xf78338(0x1b1),'name':'คะแนนเต็ม','description':_0xf78338(0x407),'icon':_0xf78338(0xf9)},'QUICK_THINKER':{'id':_0xf78338(0x133),'name':_0xf78338(0x183),'description':_0xf78338(0x472),'icon':_0xf78338(0x2d9)},'ON_FIRE':{'id':_0xf78338(0x3b4),'name':_0xf78338(0x33a),'description':_0xf78338(0x2ae),'icon':_0xf78338(0x1f6)},'FIRST_TRY_ACE':{'id':'first_try_ace','name':_0xf78338(0x3db),'description':_0xf78338(0x140),'icon':_0xf78338(0x507)},'COMEBACK_KING':{'id':_0xf78338(0x142),'name':'ราชาคัมแบ็ก','description':'สอบตกในครั้งแรก\x20แต่กลับมาสอบผ่านได้','icon':_0xf78338(0x436)},'SPECIALIST':{'id':'specialist','name':'ผู้เชี่ยวชาญ','description':'ได้คะแนนเต็มในทุกแบบทดสอบของโปรเจค','icon':_0xf78338(0x3f1)},'PERSEVERANCE':{'id':_0xf78338(0x3c9),'name':_0xf78338(0x3b7),'description':'ทำแบบทดสอบเดียวกันครบ\x205\x20ครั้ง','icon':_0xf78338(0x3f2)}},firebaseConfig={'apiKey':'AIzaSyCQlVzy_LBImNp5TJNwRuepFzvxWm8AyZk','authDomain':_0xf78338(0xf7),'projectId':_0xf78338(0xb8),'storageBucket':'ai-quiz-app-aefee.appspot.com','messagingSenderId':_0xf78338(0x1b0),'appId':_0xf78338(0x360),'measurementId':_0xf78338(0x4d9)},appId=typeof __app_id!=='undefined'?__app_id:'ai-quiz-generator-v3',adminView=document[_0xf78338(0x349)](_0xf78338(0x4d1)),studentView=document['getElementById'](_0xf78338(0x109)),projectDashboardView=document[_0xf78338(0x349)](_0xf78338(0x39d)),projectDetailView=document[_0xf78338(0x349)](_0xf78338(0x141)),quizResultsView=document[_0xf78338(0x349)]('quiz-results-view'),projectList=document[_0xf78338(0x349)](_0xf78338(0x16d)),noProjectsMsg=document[_0xf78338(0x349)](_0xf78338(0x39a)),projectTitle=document[_0xf78338(0x349)]('project-title'),projectIdDisplay=document[_0xf78338(0x349)]('project-id-display'),studentList=document[_0xf78338(0x349)](_0xf78338(0x174)),messageModal=document[_0xf78338(0x349)]('message-modal'),modalMessage=document[_0xf78338(0x349)](_0xf78338(0x34e)),createProjectModal=document[_0xf78338(0x349)](_0xf78338(0x11b)),adminPasswordModal=document[_0xf78338(0x349)](_0xf78338(0x3ed)),confirmationModal=document[_0xf78338(0x349)](_0xf78338(0x47f)),userIdDisplay=document[_0xf78338(0x349)](_0xf78338(0x1db)),topicTab=document[_0xf78338(0x349)](_0xf78338(0x3ba)),textTab=document[_0xf78338(0x349)]('text-tab'),topicInputArea=document[_0xf78338(0x349)](_0xf78338(0x321)),textInputArea=document[_0xf78338(0x349)](_0xf78338(0x2a0)),manageTab=document['getElementById'](_0xf78338(0x205)),resultsTab=document[_0xf78338(0x349)](_0xf78338(0x38a)),leaderboardTab=document[_0xf78338(0x349)](_0xf78338(0x2a3)),manageTabContent=document[_0xf78338(0x349)]('manage-tab-content'),resultsTabContent=document[_0xf78338(0x349)](_0xf78338(0x16a)),leaderboardTabContent=document[_0xf78338(0x349)](_0xf78338(0xfb)),projectQuizzesList=document[_0xf78338(0x349)](_0xf78338(0x398)),fileTab=document[_0xf78338(0x349)](_0xf78338(0x2fc)),fileInputArea=document[_0xf78338(0x349)](_0xf78338(0x420)),fileUploadInput=document['getElementById'](_0xf78338(0x17f)),worksheetTab=document['getElementById']('worksheet-tab'),worksheetInputArea=document[_0xf78338(0x349)](_0xf78338(0x26a)),generateWorksheetBtn=document[_0xf78338(0x349)](_0xf78338(0x173)),studentInitialView=document[_0xf78338(0x349)]('student-initial-view'),studentNameSelectionView=document[_0xf78338(0x349)](_0xf78338(0x12f)),studentQuizArea=document['getElementById'](_0xf78338(0x34c)),studentResultArea=document[_0xf78338(0x349)](_0xf78338(0x2bd)),studentReadingArea=document[_0xf78338(0x349)](_0xf78338(0x45b)),loadQuizBtn=document['getElementById'](_0xf78338(0xd3)),startQuizBtn=document[_0xf78338(0x349)]('start-quiz-btn'),studentJoinGameView=document[_0xf78338(0x349)](_0xf78338(0x336)),presentationModal=document[_0xf78338(0x349)](_0xf78338(0x4b8)),renameQuizModal=document[_0xf78338(0x349)](_0xf78338(0x33d)),moveQuizModal=document[_0xf78338(0x349)](_0xf78338(0x416)),quizSettingsModal=document[_0xf78338(0x349)](_0xf78338(0x346)),quizStatusModal=document[_0xf78338(0x349)](_0xf78338(0x46d)),liveGameView=document[_0xf78338(0x349)](_0xf78338(0x4d2));async function initialize(){const _0x449986=_0xf78338;try{const _0x1a9e41=initializeApp(firebaseConfig);db=getFirestore(_0x1a9e41),auth=getAuth(_0x1a9e41),setupAuthListener(),setupEventListeners(),showView(_0x449986(0x4a0));}catch(_0xf1d551){console[_0x449986(0x266)](_0x449986(0x3cf),_0xf1d551),showMessage(_0x449986(0x18e));}}function compareNumericalAnswers(_0x1cba93,_0x4dd6ef){const _0x55703b=_0xf78338,_0x416477=String(_0x1cba93)[_0x55703b(0x2c2)](',','.')[_0x55703b(0x2c2)](/[^\d.-]/g,'')[_0x55703b(0x197)](),_0x2d41fe=String(_0x4dd6ef)[_0x55703b(0x2c2)](',','.')[_0x55703b(0x2c2)](/[^\d.-]/g,'')[_0x55703b(0x197)]();if(_0x416477===''||_0x2d41fe==='')return![];const _0x352eb3=parseFloat(_0x416477),_0xe06d41=parseFloat(_0x2d41fe);if(isNaN(_0x352eb3)||isNaN(_0xe06d41))return![];return Math[_0x55703b(0xf0)](_0x352eb3-_0xe06d41)<0.001;}async function gradeShortAnswer(_0x387e6d,_0x2a03e7){const _0x3d4718=_0xf78338,_0x43613f=_0x2a03e7['idealAnswer'];if(String(_0x387e6d)['trim']()[_0x3d4718(0x171)]()===String(_0x43613f)[_0x3d4718(0x197)]()[_0x3d4718(0x171)]())return!![];if(compareNumericalAnswers(_0x387e6d,_0x43613f))return!![];return console[_0x3d4718(0x512)](_0x3d4718(0x22f)),await gradeShortAnswerWithAI(_0x387e6d,_0x43613f);}async function revealAnswerForAdmin(_0x89b410,_0x3c7081){const _0x56a572=_0xf78338;if(document[_0x56a572(0x349)](_0x56a572(0x410)))return;const _0x47fd56=doc(db,_0x56a572(0x1b9)+appId+_0x56a572(0x4bb),currentLiveGameId);await updateDoc(_0x47fd56,{'questionStatus':_0x56a572(0x28a)});const _0x3b2517=liveGameView[_0x56a572(0x2c3)](_0x56a572(0x367));_0x3b2517&&(_0x3b2517[_0x56a572(0x388)][_0x56a572(0x2f8)](_0x56a572(0x263)),_0x3b2517[_0x56a572(0x388)]['add'](_0x56a572(0x435),_0x56a572(0x495),'font-bold','border-4',_0x56a572(0x278)),_0x3b2517[_0x56a572(0x3f5)]=_0x56a572(0xf5)+_0x3b2517['innerHTML']);const _0xeff550=document['getElementById'](_0x56a572(0x1d5));_0xeff550&&(_0xeff550[_0x56a572(0x3f5)]=_0x56a572(0x3ad)+(_0x89b410+0x1===_0x3c7081?_0x56a572(0x4cf):_0x56a572(0x4fa))+_0x56a572(0x41c),document[_0x56a572(0x349)](_0x56a572(0x410))['addEventListener'](_0x56a572(0x151),async()=>{const _0x2ba482=_0x56a572,_0x3be5b5=doc(db,_0x2ba482(0x1b9)+appId+_0x2ba482(0x4bb),currentLiveGameId),_0x184e8d=await getDoc(_0x3be5b5);if(!_0x184e8d[_0x2ba482(0x3f4)]())return;const _0x3d1e7a=_0x184e8d[_0x2ba482(0x4e3)](),_0x50d4d0={};if(_0x3d1e7a['players'])for(const _0x192495 in _0x3d1e7a[_0x2ba482(0xf8)]){_0x50d4d0[_0x2ba482(0x176)+_0x192495+'.answeredCurrentQuestion']=![];}const _0x2816b5=_0x89b410+0x1;_0x2816b5<_0x3c7081?(_0x50d4d0['currentQuestionIndex']=_0x2816b5,_0x50d4d0['questionDisplayedAt']=serverTimestamp(),_0x50d4d0[_0x2ba482(0x20d)]=_0x2ba482(0x401),await updateDoc(_0x3be5b5,_0x50d4d0)):await updateDoc(_0x3be5b5,{'status':_0x2ba482(0x301)});}));}function setupAuthListener(){onAuthStateChanged(auth,async _0xfff744=>{const _0x28acb1=_0x44e3;if(_0xfff744){userId=_0xfff744[_0x28acb1(0xe0)],userIdDisplay['textContent']=userId;if(unsubscribeProjectsListener)unsubscribeProjectsListener();listenForProjects(),listenForStarredQuizzes();}else await authenticateUser();});}function showPodiumView(_0x336835){const _0x196095=_0xf78338,_0x90f142=Object['entries'](_0x336835)[_0x196095(0xfa)](([_0x4c0f71,_0x1fbb49])=>({'name':_0x4c0f71,'score':_0x1fbb49['score']||0x0,'badges':_0x1fbb49['badges']||[]}));_0x90f142['sort']((_0x4ed234,_0x3c4be6)=>{const _0x57b9c6=_0x196095,_0xa6bf26=_0x3c4be6[_0x57b9c6(0x51d)]-_0x4ed234['score'];if(_0xa6bf26!==0x0)return _0xa6bf26;return(_0x3c4be6[_0x57b9c6(0x4b0)][_0x57b9c6(0x145)]||0x0)-(_0x4ed234[_0x57b9c6(0x4b0)][_0x57b9c6(0x145)]||0x0);});const _0xa5591f=_0x45d009=>{const _0x4ae545=_0x196095;if(!_0x45d009||_0x45d009[_0x4ae545(0x145)]===0x0)return'';const _0x3e914b={'quick_thinker':'⚡️','on_fire':'🔥'};return'<div\x20class=\x22flex\x20justify-center\x20gap-2\x20my-1\x20text-2xl\x22>'+_0x45d009[_0x4ae545(0xfa)](_0x2254a2=>_0x3e914b[_0x2254a2]||'')['join']('')+_0x4ae545(0x2ad);},_0x25a90d=_0x90f142[_0x196095(0x186)](0x3),_0x28bf1f=_0x25a90d[_0x196095(0x145)]>0x0?_0x196095(0x27a)+_0x25a90d[_0x196095(0xfa)]((_0x55386c,_0x5beaa2)=>_0x196095(0xce)+(_0x5beaa2+0x4)+_0x196095(0x26c)+_0x55386c[_0x196095(0x30a)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-bold\x20text-white\x22>'+_0x55386c['score']+'\x20คะแนน</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x196095(0x396)]('')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'',_0x357d19='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20flex\x20flex-col\x20h-full\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-4xl\x20font-bold\x20mb-8\x22>สรุปผลการแข่งขัน!\x20<i\x20class=\x22fas\x20fa-trophy\x20text-yellow-300\x22></i></h2>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-end\x20justify-center\x20gap-4\x20w-full\x20max-w-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x90f142[0x1]?_0x196095(0x399)+_0x90f142[0x1][_0x196095(0x30a)]+_0x196095(0x473)+_0xa5591f(_0x90f142[0x1][_0x196095(0x4b0)])+_0x196095(0xae)+_0x90f142[0x1][_0x196095(0x51d)]+_0x196095(0x14a):'<div\x20class=\x22flex-1\x22></div>')+_0x196095(0x2ce)+(_0x90f142[0x0]?_0x196095(0x149)+_0x90f142[0x0]['name']+_0x196095(0x473)+_0xa5591f(_0x90f142[0x0][_0x196095(0x4b0)])+_0x196095(0x34d)+_0x90f142[0x0]['score']+'\x20คะแนน</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-yellow-500\x20text-yellow-900\x20font-bold\x20p-4\x20rounded-t-lg\x20mt-2\x20h-48\x20flex\x20items-center\x20justify-center\x20text-6xl\x22>1</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'<div\x20class=\x22flex-1\x22></div>')+_0x196095(0x2ce)+(_0x90f142[0x2]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22podium-step\x20text-center\x20flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-circle\x20text-6xl\x20mb-2\x20text-amber-800\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-bold\x20text-2xl\x22>'+_0x90f142[0x2]['name']+_0x196095(0x473)+_0xa5591f(_0x90f142[0x2][_0x196095(0x4b0)])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x22>'+_0x90f142[0x2][_0x196095(0x51d)]+'\x20คะแนน</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-amber-700\x20text-amber-100\x20font-bold\x20p-4\x20rounded-t-lg\x20mt-2\x20h-24\x20flex\x20items-center\x20justify-center\x20text-4xl\x22>3</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x196095(0x167))+_0x196095(0x1a7)+_0x28bf1f+_0x196095(0x1fd)+(currentMode==='admin'?_0x196095(0x2fa):'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-8\x20text-lg\x22>ขอบคุณที่ร่วมสนุก!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+_0x196095(0x35d);liveGameView[_0x196095(0x3f5)]=_0x357d19,currentMode===_0x196095(0x348)&&document[_0x196095(0x349)](_0x196095(0x283))['addEventListener']('click',async()=>{const _0x1b81a8=_0x196095,_0x42118a=doc(db,_0x1b81a8(0x1b9)+appId+_0x1b81a8(0x4bb),currentLiveGameId);await deleteDoc(_0x42118a),showView(_0x1b81a8(0x3eb));});}async function handleStartLiveRace(_0x207cbf){const _0x455dce=_0xf78338;let _0xf74f2=allQuizzes['find'](_0x56a577=>_0x56a577['id']===_0x207cbf);if(!_0xf74f2){const _0x4d71ad=doc(db,_0x455dce(0x1b9)+appId+_0x455dce(0x181),_0x207cbf),_0x4c731d=await getDoc(_0x4d71ad);if(!_0x4c731d[_0x455dce(0x3f4)]()){showMessage(_0x455dce(0x3d1));return;}_0xf74f2={'id':_0x4c731d['id'],..._0x4c731d[_0x455dce(0x4e3)]()};}currentQuizData=getShuffledQuiz(_0xf74f2);const _0x300a2c=_0xf74f2[_0x455dce(0x2aa)]||currentProjectId||null,_0x59396f=Math[_0x455dce(0xdc)](0xa+Math[_0x455dce(0x2d5)]()*0x5a)['toString']();currentLiveGamePin=_0x59396f;try{const _0x31db6d=await addDoc(collection(db,_0x455dce(0x1b9)+appId+'/public/data/liveGames'),{'quizId':_0x207cbf,'projectId':_0x300a2c,'status':_0x455dce(0x340),'currentQuestionIndex':-0x1,'players':{},'gamePin':_0x59396f,'createdAt':serverTimestamp()});currentLiveGameId=_0x31db6d['id'],showAdminLobbyView(_0x59396f,_0xf74f2[_0x455dce(0x306)]),listenForLiveGameUpdates();}catch(_0x1d7ec4){console['error'](_0x455dce(0x479),_0x1d7ec4),showMessage('เกิดข้อผิดพลาดในการสร้างห้องเกม');}}async function handleShowStudentRankings(){const _0x2f6056=_0xf78338,_0xb52f8e=document[_0x2f6056(0x2c3)](_0x2f6056(0x40c));_0xb52f8e&&(_0xb52f8e[_0x2f6056(0x3f5)]=_0x2f6056(0x1d2));const _0x1422a7=document[_0x2f6056(0x2c3)](_0x2f6056(0x1ed));_0x1422a7&&(_0x1422a7[_0x2f6056(0x3f5)]=_0x2f6056(0x264));const _0x4ce507=document['getElementById']('student-rankings-modal');_0x4ce507[_0x2f6056(0x388)]['remove'](_0x2f6056(0x451)),document['getElementById'](_0x2f6056(0x37f))['onclick']=()=>_0x4ce507[_0x2f6056(0x388)]['add'](_0x2f6056(0x451));const _0xb755b3=document[_0x2f6056(0x349)](_0x2f6056(0x22b)),_0x24928c=document[_0x2f6056(0x349)](_0x2f6056(0x11f)),_0x4d5066=document[_0x2f6056(0x349)](_0x2f6056(0x16f)),_0x183b7c=document[_0x2f6056(0x349)](_0x2f6056(0x152));_0xb755b3[_0x2f6056(0xfe)]=()=>{const _0x2d269e=_0x2f6056;_0xb755b3['classList']['add'](_0x2d269e(0x34b)),_0x24928c[_0x2d269e(0x388)][_0x2d269e(0x2f8)]('active'),_0x4d5066[_0x2d269e(0x388)][_0x2d269e(0x2f8)](_0x2d269e(0x451)),_0x183b7c[_0x2d269e(0x388)][_0x2d269e(0x240)]('hidden');},_0x24928c[_0x2f6056(0xfe)]=()=>{const _0x598fc3=_0x2f6056;_0x24928c[_0x598fc3(0x388)][_0x598fc3(0x240)](_0x598fc3(0x34b)),_0xb755b3[_0x598fc3(0x388)][_0x598fc3(0x2f8)](_0x598fc3(0x34b)),_0x183b7c[_0x598fc3(0x388)][_0x598fc3(0x2f8)]('hidden'),_0x4d5066[_0x598fc3(0x388)][_0x598fc3(0x240)]('hidden');};try{const _0x42fafe=collection(db,_0x2f6056(0x1b9)+appId+'/public/data/quizzes/'+currentQuizData['id']+'/submissions'),_0x1dd8a7=await getDocs(_0x42fafe),_0x3d6967=_0x1dd8a7['docs'][_0x2f6056(0xfa)](_0x4ca7d5=>_0x4ca7d5[_0x2f6056(0x4e3)]());renderQuizLeaderboard(_0x3d6967,currentQuizData,'student-quiz-leaderboard-table-body');const _0x1546be=collection(db,_0x2f6056(0x1b9)+appId+'/public/data/projects/'+currentQuizData[_0x2f6056(0x2aa)]+_0x2f6056(0x39e)),_0x3423e4=await getDocs(_0x1546be),_0x4ff080=_0x3423e4['docs'][_0x2f6056(0xfa)](_0x14ecb5=>_0x14ecb5[_0x2f6056(0x4e3)]());renderLeaderboard(_0x4ff080,'student-project-leaderboard-table-body');}catch(_0x584880){console[_0x2f6056(0x266)](_0x2f6056(0x25c),_0x584880),showMessage(_0x2f6056(0x35f));}}async function handleSaveToBank(_0x32342f){const _0x5fbf33=_0xf78338,_0x1f2543=_0x32342f[_0x5fbf33(0x38f)],_0xb65236=_0x1f2543[_0x5fbf33(0x441)][_0x5fbf33(0x4b5)],_0x28f34c=currentQuizData[_0x5fbf33(0x47e)][_0xb65236];if(!userId){showMessage(_0x5fbf33(0x125));return;}try{const _0x4c1342={..._0x28f34c,'originalTopic':currentQuizData[_0x5fbf33(0x306)],'savedAt':serverTimestamp()},_0x20c351=collection(db,'artifacts/'+appId+_0x5fbf33(0x1e5)+userId+'/questionBank');await addDoc(_0x20c351,_0x4c1342),showMessage(_0x5fbf33(0x2b4)),_0x1f2543[_0x5fbf33(0x388)][_0x5fbf33(0x2f8)](_0x5fbf33(0x282)),_0x1f2543[_0x5fbf33(0x388)][_0x5fbf33(0x240)]('text-green-600'),_0x1f2543['disabled']=!![];}catch(_0x1720dc){console[_0x5fbf33(0x266)]('Error\x20saving\x20to\x20question\x20bank:',_0x1720dc),showMessage(_0x5fbf33(0x1d6));}}function listenForStarredQuizzes(){const _0x3cff25=_0xf78338;if(!userId)return;const _0x1c12a6=collection(db,_0x3cff25(0x1b9)+appId+'/public/data/quizzes'),_0x12613e=query(_0x1c12a6,where('isStarred','==',!![]));onSnapshot(_0x12613e,_0x22b0ce=>{const _0x598900=_0x3cff25;starredQuizzes=_0x22b0ce[_0x598900(0x431)]['map'](_0x193cf7=>({'id':_0x193cf7['id'],..._0x193cf7[_0x598900(0x4e3)]()})),renderProjects();},_0x4e106d=>{const _0x5344df=_0x3cff25;console[_0x5344df(0x266)](_0x5344df(0x489),_0x4e106d);});}async function handleToggleStarQuiz(_0x4ace4e){const _0x821f18=_0xf78338,_0x378533=doc(db,_0x821f18(0x1b9)+appId+_0x821f18(0x181),_0x4ace4e);try{const _0x265b33=await getDoc(_0x378533);if(_0x265b33['exists']()){const _0x4d55ae=_0x265b33[_0x821f18(0x4e3)]()[_0x821f18(0x49d)]||![];await updateDoc(_0x378533,{'isStarred':!_0x4d55ae});}}catch(_0x363e6c){console[_0x821f18(0x266)](_0x821f18(0x1d0),_0x363e6c),showMessage('เกิดข้อผิดพลาดในการติดดาว');}}async function displayQuestionBank(){const _0x29df5b=_0xf78338,_0x397675=document[_0x29df5b(0x349)](_0x29df5b(0x38d));_0x397675[_0x29df5b(0x3f5)]=_0x29df5b(0x1ea);try{const _0x2c704c=collection(db,_0x29df5b(0x1b9)+appId+_0x29df5b(0x1e5)+userId+_0x29df5b(0x295)),_0x2133ac=query(_0x2c704c),_0x45e6e9=await getDocs(_0x2133ac);if(_0x45e6e9['empty']){_0x397675[_0x29df5b(0x3f5)]='<p\x20class=\x22text-center\x20text-gray-500\x22>คลังข้อสอบของคุณยังว่างอยู่</p>';return;}let _0x3ebc35=_0x45e6e9[_0x29df5b(0x431)][_0x29df5b(0xfa)](_0x1544c3=>{const _0x3fe3e5=_0x29df5b,_0x1a3625=_0x1544c3[_0x3fe3e5(0x4e3)](),_0x4d7faa=_0x1544c3['id'];return _0x3fe3e5(0x311)+JSON[_0x3fe3e5(0x2c8)](_0x1a3625)+'\x27\x20class=\x22mt-1\x20h-4\x20w-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x22>'+(_0x1a3625[_0x3fe3e5(0x28f)]||_0x1a3625[_0x3fe3e5(0x1e4)])+_0x3fe3e5(0x281)+_0x1a3625[_0x3fe3e5(0x4e4)]+_0x3fe3e5(0x3c0);})[_0x29df5b(0x396)]('');_0x397675[_0x29df5b(0x3f5)]=_0x29df5b(0x1a0)+_0x3ebc35+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22create-from-bank-btn\x22\x20class=\x22w-full\x20bg-purple-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-purple-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20สร้างแบบทดสอบจากข้อที่เลือก\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x29df5b(0x349)](_0x29df5b(0x328))[_0x29df5b(0x200)](_0x29df5b(0x151),createQuizFromBank);}catch(_0x5f3a24){console[_0x29df5b(0x266)](_0x29df5b(0xd9),_0x5f3a24),_0x397675[_0x29df5b(0x3f5)]=_0x29df5b(0x26b);}}function showAdminLiveQuestionView(_0x37741f,_0x5c8535,_0x1d96f7){const _0x583395=_0xf78338,_0xfb4e01=_0x37741f[_0x583395(0x172)]||currentQuizData[_0x583395(0x475)];let _0x4682f7='';if(_0xfb4e01===_0x583395(0x19f)||_0xfb4e01===_0x583395(0x309)){const _0x2b10e6=_0xfb4e01===_0x583395(0x309)?[_0x583395(0x163),_0x583395(0x450)]:_0x37741f[_0x583395(0x304)],_0x267b3c=_0xfb4e01===_0x583395(0x309)?_0x37741f[_0x583395(0x43b)]?0x0:0x1:_0x37741f['correctAnswerIndex'];_0x4682f7=_0x2b10e6[_0x583395(0xfa)]((_0x5d4100,_0x30cc62)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20rounded-lg\x20text-xl\x20flex\x20items-center\x20justify-center\x20text-center\x20bg-white/30\x22\x20data-is-correct=\x22'+(_0x30cc62===_0x267b3c)+_0x583395(0x272)+_0x5d4100+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x583395(0x396)]('');}else{if(_0xfb4e01===_0x583395(0x444)){const _0x4715dc=_0x37741f[_0x583395(0x268)]||[];_0x4682f7=_0x4715dc[_0x583395(0xfa)](_0x2cc997=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20rounded-lg\x20text-xl\x20flex\x20items-center\x20justify-center\x20text-center\x20bg-white/30\x22\x20data-is-correct=\x22'+(_0x2cc997===_0x37741f[_0x583395(0x42f)])+_0x583395(0x272)+_0x2cc997+_0x583395(0x206))[_0x583395(0x396)]('');}}const _0x554fde=_0x37741f[_0x583395(0x1e4)]||_0x37741f[_0x583395(0x28f)],_0x59c889=_0x583395(0x3a8)+(_0x5c8535+0x1)+_0x583395(0x42c)+_0x1d96f7+_0x583395(0x51c)+_0x554fde+_0x583395(0x1d4)+_0x4682f7+_0x583395(0x2fd);liveGameView[_0x583395(0x3f5)]=_0x59c889;window[_0x583395(0x2f0)]&&MathJax[_0x583395(0x158)]&&MathJax['typesetPromise']([liveGameView]);const _0x1971b6=document['getElementById'](_0x583395(0x1d5));document[_0x583395(0x349)]('reveal-answer-btn')[_0x583395(0x200)](_0x583395(0x151),async()=>{const _0xb0cad6=_0x583395,_0x50da51=doc(db,'artifacts/'+appId+_0xb0cad6(0x4bb),currentLiveGameId);await updateDoc(_0x50da51,{'questionStatus':_0xb0cad6(0x28a)});const _0x400c0c=liveGameView[_0xb0cad6(0x2c3)](_0xb0cad6(0x367));_0x400c0c&&(_0x400c0c[_0xb0cad6(0x388)][_0xb0cad6(0x2f8)](_0xb0cad6(0x263)),_0x400c0c['classList'][_0xb0cad6(0x240)](_0xb0cad6(0x435),_0xb0cad6(0x495),_0xb0cad6(0x13b),_0xb0cad6(0x249),_0xb0cad6(0x278)),_0x400c0c[_0xb0cad6(0x3f5)]=_0xb0cad6(0xf5)+_0x400c0c[_0xb0cad6(0x3f5)]),_0x1971b6[_0xb0cad6(0x3f5)]=_0xb0cad6(0x3ad)+(_0x5c8535+0x1===_0x1d96f7?_0xb0cad6(0x4cf):_0xb0cad6(0x4fa))+_0xb0cad6(0x41c),document[_0xb0cad6(0x349)](_0xb0cad6(0x410))[_0xb0cad6(0x200)](_0xb0cad6(0x151),async()=>{const _0xc7c508=_0xb0cad6,_0x511434=doc(db,_0xc7c508(0x1b9)+appId+_0xc7c508(0x4bb),currentLiveGameId),_0x54e4dc=await getDoc(_0x511434);if(!_0x54e4dc[_0xc7c508(0x3f4)]())return;const _0x194cd0=_0x54e4dc[_0xc7c508(0x4e3)](),_0x423502={};if(_0x194cd0[_0xc7c508(0xf8)])for(const _0x1a1ab4 in _0x194cd0[_0xc7c508(0xf8)]){_0x423502[_0xc7c508(0x176)+_0x1a1ab4+'.answeredCurrentQuestion']=![];}const _0x58f5c0=_0x5c8535+0x1;_0x58f5c0<_0x1d96f7?(_0x423502[_0xc7c508(0x2be)]=_0x58f5c0,_0x423502['questionDisplayedAt']=serverTimestamp(),_0x423502[_0xc7c508(0x20d)]='answering',await updateDoc(_0x511434,_0x423502)):await updateDoc(_0x511434,{'status':_0xc7c508(0x301)});});}),document[_0x583395(0x349)](_0x583395(0x13d))[_0x583395(0x200)](_0x583395(0x151),async()=>{const _0x3b9416=_0x583395,_0x243bc3=doc(db,'artifacts/'+appId+_0x3b9416(0x4bb),currentLiveGameId);await deleteDoc(_0x243bc3),showView(_0x3b9416(0x3eb));});}function showStudentLiveQuestionView(_0x1b4b9c,_0x479021,_0xf2f844){const _0x581307=_0xf78338,_0xe48343=_0x1b4b9c['questionType']||currentQuizData[_0x581307(0x475)];let _0x49ab6b='';if(_0xe48343===_0x581307(0x19f)||_0xe48343===_0x581307(0x309)){const _0x561053=_0xe48343==='true_false'?[_0x581307(0x163),_0x581307(0x450)]:_0x1b4b9c['options'];_0x49ab6b=_0x561053[_0x581307(0xfa)]((_0x4eac9e,_0x4a63a1)=>_0x581307(0x1bb)+_0x4a63a1+_0x581307(0x516)+_0x4eac9e+_0x581307(0x421))[_0x581307(0x396)]('');}else{if(_0xe48343==='matching_item'){const _0x369b43=_0x1b4b9c[_0x581307(0x268)]||[];_0x49ab6b=_0x369b43['map']((_0x3d2c08,_0x525f79)=>_0x581307(0x1bb)+_0x525f79+'\x22\x20class=\x22live-answer-btn\x20p-4\x20rounded-lg\x20text-xl\x20text-center\x20bg-white\x20text-gray-800\x20hover:bg-indigo-100\x20transition-all\x20transform\x20hover:scale-105\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3d2c08+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x581307(0x396)]('');}else _0xe48343===_0x581307(0x499)&&(_0x49ab6b=_0x581307(0xd1));}const _0x426a79=_0x1b4b9c['stem']||_0x1b4b9c[_0x581307(0x28f)],_0x5d94d4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20flex\x20flex-col\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20text-center\x22>ข้อที่\x20'+(_0x479021+0x1)+'\x20/\x20'+_0xf2f844+_0x581307(0x3a4)+_0x426a79+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22live-options-container\x22\x20class=\x22w-full\x20max-w-4xl\x20grid\x20grid-cols-1\x20md:grid-cols-2\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49ab6b+_0x581307(0x43c);liveGameView[_0x581307(0x3f5)]=_0x5d94d4;window[_0x581307(0x2f0)]&&MathJax[_0x581307(0x158)]&&MathJax['typesetPromise']([liveGameView]);const _0x21f67a=document[_0x581307(0x349)](_0x581307(0x411));_0x21f67a&&_0x21f67a[_0x581307(0x200)](_0x581307(0x151),()=>{const _0x36ce8d=document['getElementById']('live-short-answer-input')['value'];handleLiveAnswer(_0x36ce8d,_0x1b4b9c);}),document[_0x581307(0x349)](_0x581307(0x332))[_0x581307(0x200)](_0x581307(0x151),_0x554236=>{const _0x27e88e=_0x581307,_0x158f74=_0x554236[_0x27e88e(0x3e2)][_0x27e88e(0x32e)]('.live-answer-btn');if(_0x158f74){const _0x15c8ec=parseInt(_0x158f74[_0x27e88e(0x441)]['index']);handleLiveAnswer(_0x15c8ec,_0x1b4b9c);}});}async function handleLiveAnswer(_0x49c5e8,_0x22ef36){const _0x381413=_0xf78338;document[_0x381413(0xb3)](_0x381413(0x28c))[_0x381413(0xff)](_0x2c3e6a=>_0x2c3e6a[_0x381413(0x372)]=!![]);const _0x4adfe9=_0x22ef36[_0x381413(0x172)]||currentQuizData['quizType'];let _0x3aded9=![];if(_0x4adfe9==='short_answer'){const _0x179405=(_0x49c5e8||'')[_0x381413(0x199)]()[_0x381413(0x197)](),_0x28f054=(_0x22ef36[_0x381413(0x38e)]||'')[_0x381413(0x199)]()[_0x381413(0x197)]();_0x3aded9=_0x179405[_0x381413(0x171)]()===_0x28f054['toLowerCase']()&&_0x179405!=='';}else{if(_0x4adfe9===_0x381413(0x19f))_0x3aded9=_0x49c5e8===_0x22ef36[_0x381413(0x1c0)];else{if(_0x4adfe9===_0x381413(0x309)){const _0x4aa9a4=_0x22ef36[_0x381413(0x43b)];_0x3aded9=_0x49c5e8===0x0&&_0x4aa9a4||_0x49c5e8===0x1&&!_0x4aa9a4;}else{if(_0x4adfe9===_0x381413(0x444)){const _0x47ee87=_0x22ef36[_0x381413(0x268)][_0x49c5e8];_0x3aded9=_0x47ee87===_0x22ef36[_0x381413(0x42f)];}}}}const _0x57e6bf=doc(db,_0x381413(0x1b9)+appId+_0x381413(0x4bb),currentLiveGameId),_0x1ee230=await getDoc(_0x57e6bf);if(!_0x1ee230[_0x381413(0x3f4)]())return;const _0x4c672a=_0x1ee230['data'](),_0x39dfcb=_0x4c672a['players'][currentStudentName];let _0x391c25=_0x39dfcb[_0x381413(0x4b0)]||[],_0x77a54b=_0x39dfcb[_0x381413(0x32f)]||0x0;const _0x57b14c={};let _0x228a2a=0x0;if(_0x4c672a['questionDisplayedAt']){const _0x257ac7=_0x4c672a['questionDisplayedAt']['toDate'](),_0x492abb=new Date()-_0x257ac7;if(_0x3aded9){const _0x5cbb6b=0x3e8,_0x435380=0x1f4,_0x169671=0x4e20;let _0x382a0f=_0x492abb/_0x169671;if(_0x382a0f>0x1)_0x382a0f=0x1;const _0x2c7bd0=Math[_0x381413(0x494)](_0x382a0f*_0x435380);_0x228a2a=_0x5cbb6b-_0x2c7bd0,_0x492abb<=0x1388&&!_0x391c25[_0x381413(0x2c9)](_0x381413(0x133))&&_0x391c25[_0x381413(0x2f5)]('quick_thinker');}}_0x3aded9?(_0x77a54b++,_0x77a54b===0x3&&!_0x391c25[_0x381413(0x2c9)](_0x381413(0x3b4))&&(_0x391c25['push'](_0x381413(0x3b4)),_0x77a54b=0x0)):_0x77a54b=0x0,_0x3aded9&&(_0x57b14c[_0x381413(0x176)+currentStudentName+_0x381413(0x22d)]=increment(_0x228a2a)),_0x57b14c[_0x381413(0x176)+currentStudentName+_0x381413(0x189)]=_0x391c25,_0x57b14c[_0x381413(0x176)+currentStudentName+_0x381413(0x27e)]=_0x77a54b,_0x57b14c[_0x381413(0x176)+currentStudentName+_0x381413(0x3d3)]=!![],_0x57b14c[_0x381413(0x176)+currentStudentName+_0x381413(0xef)]=_0x3aded9,_0x57b14c[_0x381413(0x176)+currentStudentName+_0x381413(0x38c)]=_0x228a2a,await updateDoc(_0x57e6bf,_0x57b14c),liveGameView[_0x381413(0x3f5)]=_0x381413(0x1c9);}function createQuizFromBank(){const _0x50f7c1=_0xf78338,_0xbb98eb=document[_0x50f7c1(0xb3)](_0x50f7c1(0x2d3));if(_0xbb98eb[_0x50f7c1(0x145)]===0x0){showMessage(_0x50f7c1(0x30e));return;}const _0x48f6f8=[];_0xbb98eb[_0x50f7c1(0xff)](_0x437e9b=>{const _0x4ae7ce=_0x50f7c1;_0x48f6f8[_0x4ae7ce(0x2f5)](JSON[_0x4ae7ce(0x3dd)](_0x437e9b['value']));});const _0x4f9055={'topic':_0x50f7c1(0xe8),'questions':_0x48f6f8};displayGeneratedQuiz(_0x4f9055);}function showAdminLobbyView(_0x80192a,_0x16a152){const _0x40c65f=_0xf78338;showView('live-game');const _0x3aadeb=_0x40c65f(0x355)+_0x16a152+_0x40c65f(0xee)+_0x80192a+_0x40c65f(0x17d);liveGameView[_0x40c65f(0x3f5)]=_0x3aadeb,document['getElementById'](_0x40c65f(0x51a))[_0x40c65f(0x200)](_0x40c65f(0x151),async()=>{const _0x568a63=_0x40c65f;if(!currentQuizData||!currentQuizData[_0x568a63(0x47e)]||currentQuizData[_0x568a63(0x47e)][_0x568a63(0x145)]===0x0){showMessage('เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลคำถามสำหรับเกมนี้');return;}try{const _0xa99f=doc(db,'artifacts/'+appId+_0x568a63(0x4bb),currentLiveGameId);await updateDoc(_0xa99f,{'status':_0x568a63(0x1a3),'currentQuestionIndex':0x0,'questionDisplayedAt':serverTimestamp()});const _0x27310e=currentQuizData['questions'][0x0],_0x1afaf9=currentQuizData['questions']['length'];showAdminLiveQuestionView(_0x27310e,0x0,_0x1afaf9);}catch(_0x293b50){console[_0x568a63(0x266)](_0x568a63(0x117),_0x293b50),showMessage(_0x568a63(0x1c4));}});}async function openGlobalLiveModal(){const _0x53a714=_0xf78338;if(allQuizzesGlobal['length']===0x0){const _0x775a07=await getDocs(collection(db,_0x53a714(0x1b9)+appId+_0x53a714(0x181)));allQuizzesGlobal=_0x775a07[_0x53a714(0x431)][_0x53a714(0xfa)](_0x35ec3b=>({'id':_0x35ec3b['id'],..._0x35ec3b[_0x53a714(0x4e3)]()}));}renderGlobalQuizList(''),document[_0x53a714(0x349)]('global-live-game-modal')[_0x53a714(0x388)][_0x53a714(0x2f8)](_0x53a714(0x451));}function renderGlobalQuizList(_0x15edd9=''){const _0x4b6aca=_0xf78338,_0xe1a468=document[_0x4b6aca(0x349)](_0x4b6aca(0x101)),_0x44ef14=_0x15edd9['toLowerCase']()[_0x4b6aca(0x197)](),_0x4bea63=allQuizzesGlobal[_0x4b6aca(0xfa)](_0x3ba109=>({..._0x3ba109,'projectName':allProjects[_0x4b6aca(0x2e5)](_0x5ab84a=>_0x5ab84a['id']===_0x3ba109['projectId'])?.['projectName']||_0x3ba109[_0x4b6aca(0x2aa)]}))['filter'](_0x93db36=>(_0x93db36[_0x4b6aca(0x306)]||'')[_0x4b6aca(0x171)]()['includes'](_0x44ef14)||(_0x93db36[_0x4b6aca(0x3d6)]||'')[_0x4b6aca(0x171)]()[_0x4b6aca(0x2c9)](_0x44ef14));_0xe1a468[_0x4b6aca(0x3f5)]=_0x4bea63['length']?_0x4bea63['map'](_0x4ea106=>_0x4b6aca(0xec)+_0x4ea106['id']+_0x4b6aca(0x37b)+(_0x4ea106['topic']||_0x4b6aca(0x4a7))+_0x4b6aca(0x449)+(_0x4ea106[_0x4b6aca(0x47e)]?.[_0x4b6aca(0x145)]||0x0)+_0x4b6aca(0xb7)+_0x4ea106[_0x4b6aca(0x3d6)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-play\x20text-purple-600\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20')['join'](''):_0x4b6aca(0x1d1),selectedGlobalQuizId=null,document['getElementById'](_0x4b6aca(0x4c6))[_0x4b6aca(0x372)]=!![],_0xe1a468['querySelectorAll']('button[data-id]')[_0x4b6aca(0xff)](_0x44b058=>{const _0x115851=_0x4b6aca;_0x44b058[_0x115851(0x200)]('click',()=>{const _0x1a317b=_0x115851;selectedGlobalQuizId=_0x44b058[_0x1a317b(0x441)]['id'],_0xe1a468[_0x1a317b(0xb3)](_0x1a317b(0x2c4))[_0x1a317b(0xff)](_0x2f97c2=>_0x2f97c2[_0x1a317b(0x388)]['remove'](_0x1a317b(0x4be),'ring-2',_0x1a317b(0x476))),_0x44b058[_0x1a317b(0x388)][_0x1a317b(0x240)](_0x1a317b(0x4be),_0x1a317b(0x409),_0x1a317b(0x476)),document[_0x1a317b(0x349)](_0x1a317b(0x4c6))[_0x1a317b(0x372)]=![];});});}function listenForLiveGameUpdates(){const _0x17ca0b=_0xf78338;if(unsubscribeLiveGameListener)unsubscribeLiveGameListener();const _0x4bcaf1=doc(db,_0x17ca0b(0x1b9)+appId+'/public/data/liveGames',currentLiveGameId);unsubscribeLiveGameListener=onSnapshot(_0x4bcaf1,_0x507365=>{const _0x3b2a56=_0x17ca0b;if(!_0x507365[_0x3b2a56(0x3f4)]()){showMessage('เกมสิ้นสุดลงแล้ว'),showView(currentMode);return;}const _0x43d9d7=_0x507365[_0x3b2a56(0x4e3)]();!currentQuizData&&_0x43d9d7[_0x3b2a56(0x4d5)]&&((async()=>{const _0x41d021=_0x3b2a56;try{const _0xa7b122=doc(db,_0x41d021(0x1b9)+appId+_0x41d021(0x181),_0x43d9d7[_0x41d021(0x4d5)]),_0x210182=await getDoc(_0xa7b122);_0x210182[_0x41d021(0x3f4)]()&&(currentQuizData={'id':_0x210182['id'],..._0x210182[_0x41d021(0x4e3)]()});}catch(_0x2e869d){console['error'](_0x41d021(0x15e),_0x2e869d);}})());switch(_0x43d9d7[_0x3b2a56(0xde)]){case _0x3b2a56(0x340):if(currentMode==='admin'){const _0x34b107=_0x43d9d7[_0x3b2a56(0xf8)]?Object[_0x3b2a56(0x1de)](_0x43d9d7[_0x3b2a56(0xf8)]):[];document['getElementById'](_0x3b2a56(0xea))[_0x3b2a56(0x271)]=_0x34b107['length'],document[_0x3b2a56(0x349)]('player-list-lobby')[_0x3b2a56(0x3f5)]=_0x34b107[_0x3b2a56(0xfa)](_0x58c373=>_0x3b2a56(0x130)+_0x58c373+_0x3b2a56(0x4ba))['join']('');const _0x5e7eed=document[_0x3b2a56(0x349)](_0x3b2a56(0x51a));_0x5e7eed&&(_0x5e7eed[_0x3b2a56(0x372)]=_0x34b107[_0x3b2a56(0x145)]===0x0);}else showView(_0x3b2a56(0x2dc)),liveGameView[_0x3b2a56(0x3f5)]=_0x3b2a56(0x36a)+currentStudentName+_0x3b2a56(0x234);break;case _0x3b2a56(0x1a3):const _0x356eb9=_0x43d9d7['currentQuestionIndex'];if(currentQuizData&&currentQuizData[_0x3b2a56(0x47e)][_0x356eb9]){const _0x54703c=currentQuizData[_0x3b2a56(0x47e)][_0x356eb9],_0x398d99=currentQuizData[_0x3b2a56(0x47e)]['length'];if(currentMode===_0x3b2a56(0x348)){lastRenderedAdminQuestionIndex!==_0x356eb9&&(showAdminLiveQuestionView(_0x54703c,_0x356eb9,_0x398d99),lastRenderedAdminQuestionIndex=_0x356eb9);const _0x5b18c7=document[_0x3b2a56(0x349)]('answer-counter');if(_0x5b18c7&&_0x43d9d7[_0x3b2a56(0xf8)]){const _0xb47afc=Object[_0x3b2a56(0x1de)](_0x43d9d7[_0x3b2a56(0xf8)])[_0x3b2a56(0x145)],_0x572ded=Object[_0x3b2a56(0x4a4)](_0x43d9d7['players'])[_0x3b2a56(0x1f4)](_0x3a3731=>_0x3a3731[_0x3b2a56(0x2a6)]===!![])[_0x3b2a56(0x145)];_0x5b18c7[_0x3b2a56(0x271)]=_0x572ded+'/'+_0xb47afc,_0xb47afc>0x0&&_0x572ded===_0xb47afc&&_0x43d9d7[_0x3b2a56(0x20d)]!==_0x3b2a56(0x28a)&&revealAnswerForAdmin(_0x356eb9,_0x398d99);}}else{const _0x4bc7c5=_0x43d9d7['players'][currentStudentName];if(_0x43d9d7['questionStatus']===_0x3b2a56(0x28a)){if(_0x4bc7c5[_0x3b2a56(0x2a6)]){const _0x689cac=_0x4bc7c5[_0x3b2a56(0x2b2)],_0x5d76f3=_0x4bc7c5[_0x3b2a56(0x357)]||0x0,_0x11e20e=_0x689cac?'คำตอบถูกต้อง!\x20+'+_0x5d76f3+'\x20คะแนน':_0x3b2a56(0x13e);liveGameView[_0x3b2a56(0x3f5)]=_0x3b2a56(0x46f)+_0x11e20e+_0x3b2a56(0x1a9);}else liveGameView['innerHTML']=_0x3b2a56(0xb1);}else!_0x4bc7c5[_0x3b2a56(0x2a6)]&&showStudentLiveQuestionView(_0x54703c,_0x356eb9,_0x398d99);}}break;case _0x3b2a56(0x301):showPodiumView(_0x43d9d7[_0x3b2a56(0xf8)]);break;}});}async function authenticateUser(){const _0x6cde11=_0xf78338;try{typeof __initial_auth_token!==_0x6cde11(0x350)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x48dda5){console[_0x6cde11(0x266)](_0x6cde11(0x40f),_0x48dda5),showMessage(_0x6cde11(0x32d));}}function showView(_0x1271e2){const _0x270e95=_0xf78338,_0x7a1cdf=[_0x270e95(0x4d1),_0x270e95(0x109),'project-dashboard-view',_0x270e95(0x141),_0x270e95(0x3ff),_0x270e95(0x4d2)];_0x7a1cdf[_0x270e95(0xff)](_0x2f3d54=>document['getElementById'](_0x2f3d54)?.[_0x270e95(0x388)][_0x270e95(0x240)](_0x270e95(0x451)));if(_0x1271e2===_0x270e95(0x3eb))adminView['classList'][_0x270e95(0x2f8)](_0x270e95(0x451)),projectDashboardView[_0x270e95(0x388)][_0x270e95(0x2f8)](_0x270e95(0x451));else{if(_0x1271e2===_0x270e95(0x4a0))studentView[_0x270e95(0x388)][_0x270e95(0x2f8)]('hidden'),studentInitialView[_0x270e95(0x388)]['remove']('hidden'),studentNameSelectionView[_0x270e95(0x388)][_0x270e95(0x240)](_0x270e95(0x451)),studentQuizArea[_0x270e95(0x388)][_0x270e95(0x240)](_0x270e95(0x451)),studentResultArea['classList']['add'](_0x270e95(0x451)),studentReadingArea[_0x270e95(0x388)][_0x270e95(0x240)](_0x270e95(0x451)),studentJoinGameView[_0x270e95(0x388)][_0x270e95(0x240)](_0x270e95(0x451));else{if(_0x1271e2===_0x270e95(0x19e))adminView[_0x270e95(0x388)][_0x270e95(0x2f8)](_0x270e95(0x451)),projectDetailView[_0x270e95(0x388)][_0x270e95(0x2f8)](_0x270e95(0x451));else{if(_0x1271e2===_0x270e95(0x4e6))adminView['classList']['remove'](_0x270e95(0x451)),quizResultsView['classList'][_0x270e95(0x2f8)](_0x270e95(0x451));else _0x1271e2===_0x270e95(0x2dc)&&liveGameView[_0x270e95(0x388)][_0x270e95(0x2f8)](_0x270e95(0x451));}}}}function showJoinGameView(){const _0x2e93a4=_0xf78338;studentInitialView['classList'][_0x2e93a4(0x240)](_0x2e93a4(0x451)),studentJoinGameView[_0x2e93a4(0x388)]['remove'](_0x2e93a4(0x451));}function setupEventListeners(){const _0x8cc7ce=_0xf78338;document[_0x8cc7ce(0x349)](_0x8cc7ce(0x378))['addEventListener'](_0x8cc7ce(0x151),handleModeSwitch),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x4ef))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x11129f=_0x8cc7ce;currentProjectId=null,currentProjectData=null;if(unsubscribeStudentsListener)unsubscribeStudentsListener();if(unsubscribeQuizzesListener)unsubscribeQuizzesListener();if(unsubscribeStudentProfilesListener)unsubscribeStudentProfilesListener();showView(_0x11129f(0x3eb));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x48c))['addEventListener']('click',()=>{const _0xc9bb3=_0x8cc7ce;if(unsubscribeSubmissionsListener)unsubscribeSubmissionsListener();showView(_0xc9bb3(0x19e));}),document[_0x8cc7ce(0x349)]('back-to-dashboard-from-results-btn')[_0x8cc7ce(0x200)]('click',()=>{const _0x31f758=_0x8cc7ce;showView(_0x31f758(0x3eb));}),document[_0x8cc7ce(0x349)]('modal-close-btn')[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>messageModal['classList']['add']('hidden')),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x210))['addEventListener'](_0x8cc7ce(0x151),()=>createProjectModal[_0x8cc7ce(0x388)][_0x8cc7ce(0x2f8)](_0x8cc7ce(0x451))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x29e))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>createProjectModal[_0x8cc7ce(0x388)]['add'](_0x8cc7ce(0x451))),document['getElementById'](_0x8cc7ce(0x24a))['addEventListener']('click',()=>adminPasswordModal[_0x8cc7ce(0x388)][_0x8cc7ce(0x240)](_0x8cc7ce(0x451))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x4ec))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),handleAdminLogin),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x36c))[_0x8cc7ce(0x200)](_0x8cc7ce(0x1f0),_0x4eccf0=>{const _0x1fea2e=_0x8cc7ce;if(_0x4eccf0['key']===_0x1fea2e(0x25e))handleAdminLogin();}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x35b))['addEventListener']('click',()=>{const _0x3fd92b=_0x8cc7ce;confirmationModal[_0x3fd92b(0x388)]['add'](_0x3fd92b(0x451)),confirmAction=null;}),document[_0x8cc7ce(0x349)]('confirm-delete-btn')[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x17923a=_0x8cc7ce;confirmAction&&confirmAction(),confirmationModal['classList'][_0x17923a(0x240)](_0x17923a(0x451)),confirmAction=null;}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x192))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>renameQuizModal[_0x8cc7ce(0x388)]['add'](_0x8cc7ce(0x451))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x361))[_0x8cc7ce(0x200)]('click',confirmRenameQuiz),document[_0x8cc7ce(0x349)]('cancel-move-quiz-btn')[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>moveQuizModal['classList'][_0x8cc7ce(0x240)](_0x8cc7ce(0x451))),document['getElementById'](_0x8cc7ce(0x49e))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),confirmMoveQuiz),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x10b))[_0x8cc7ce(0x200)]('click',()=>quizSettingsModal[_0x8cc7ce(0x388)][_0x8cc7ce(0x240)]('hidden')),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x250))['addEventListener'](_0x8cc7ce(0x151),confirmQuizSettings),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x443))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>quizStatusModal[_0x8cc7ce(0x388)][_0x8cc7ce(0x240)](_0x8cc7ce(0x451))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x128))[_0x8cc7ce(0x200)]('click',confirmQuizStatus),document[_0x8cc7ce(0x349)]('open-global-live-btn')[_0x8cc7ce(0x200)]('click',openGlobalLiveModal),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x50b))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0xdcc4e6=_0x8cc7ce;document['getElementById'](_0xdcc4e6(0x289))[_0xdcc4e6(0x388)][_0xdcc4e6(0x240)](_0xdcc4e6(0x451)),selectedGlobalQuizId=null;}),document['getElementById'](_0x8cc7ce(0x13c))[_0x8cc7ce(0x200)](_0x8cc7ce(0x18a),_0x25463c=>renderGlobalQuizList(_0x25463c['target'][_0x8cc7ce(0x429)])),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x4c6))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x3ed57f=_0x8cc7ce,_0x3d7899=selectedGlobalQuizId;if(!_0x3d7899)return;document['getElementById'](_0x3ed57f(0x289))[_0x3ed57f(0x388)]['add'](_0x3ed57f(0x451)),handleStartLiveRace(_0x3d7899);}),document['getElementById'](_0x8cc7ce(0x51b))[_0x8cc7ce(0x200)](_0x8cc7ce(0x18a),renderProjects),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x23c))['addEventListener']('change',renderProjects),document['getElementById'](_0x8cc7ce(0x1aa))['addEventListener'](_0x8cc7ce(0x18a),renderQuizzes),manageTab['addEventListener'](_0x8cc7ce(0x151),()=>switchProjectTab('manage')),resultsTab[_0x8cc7ce(0x200)]('click',()=>switchProjectTab('results')),leaderboardTab[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>switchProjectTab(_0x8cc7ce(0x280))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x31f))[_0x8cc7ce(0x200)]('click',()=>switchQuizDetailTab(_0x8cc7ce(0x2b3))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x3ee))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>switchQuizDetailTab(_0x8cc7ce(0x120))),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x370))['addEventListener'](_0x8cc7ce(0x151),()=>switchQuizDetailTab(_0x8cc7ce(0x184))),document[_0x8cc7ce(0x349)]('analyze-strengths-btn')['addEventListener']('click',handleAnalyzeClass),generateWorksheetBtn[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),generateWorksheet);const _0x4ce31a=document[_0x8cc7ce(0x349)](_0x8cc7ce(0x384)),_0x1eb325=document[_0x8cc7ce(0x349)](_0x8cc7ce(0x317));topicTab['addEventListener']('click',()=>{const _0x4aa66c=_0x8cc7ce;topicTab['classList']['add']('active'),textTab[_0x4aa66c(0x388)][_0x4aa66c(0x2f8)](_0x4aa66c(0x34b)),fileTab[_0x4aa66c(0x388)][_0x4aa66c(0x2f8)](_0x4aa66c(0x34b)),worksheetTab[_0x4aa66c(0x388)]['remove'](_0x4aa66c(0x34b));if(_0x4ce31a)_0x4ce31a[_0x4aa66c(0x388)][_0x4aa66c(0x2f8)](_0x4aa66c(0x34b));topicInputArea[_0x4aa66c(0x388)][_0x4aa66c(0x2f8)]('hidden'),textInputArea['classList'][_0x4aa66c(0x240)](_0x4aa66c(0x451)),fileInputArea[_0x4aa66c(0x388)][_0x4aa66c(0x240)](_0x4aa66c(0x451)),worksheetInputArea[_0x4aa66c(0x388)]['add'](_0x4aa66c(0x451));if(_0x1eb325)_0x1eb325[_0x4aa66c(0x388)][_0x4aa66c(0x240)](_0x4aa66c(0x451));}),textTab[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x492bc7=_0x8cc7ce;textTab[_0x492bc7(0x388)][_0x492bc7(0x240)]('active'),topicTab['classList'][_0x492bc7(0x2f8)](_0x492bc7(0x34b)),fileTab['classList'][_0x492bc7(0x2f8)](_0x492bc7(0x34b)),worksheetTab['classList'][_0x492bc7(0x2f8)](_0x492bc7(0x34b));if(_0x4ce31a)_0x4ce31a[_0x492bc7(0x388)][_0x492bc7(0x2f8)](_0x492bc7(0x34b));textInputArea[_0x492bc7(0x388)]['remove'](_0x492bc7(0x451)),topicInputArea[_0x492bc7(0x388)][_0x492bc7(0x240)](_0x492bc7(0x451)),fileInputArea['classList']['add'](_0x492bc7(0x451)),worksheetInputArea[_0x492bc7(0x388)][_0x492bc7(0x240)](_0x492bc7(0x451));if(_0x1eb325)_0x1eb325[_0x492bc7(0x388)][_0x492bc7(0x240)](_0x492bc7(0x451));}),fileTab[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x479094=_0x8cc7ce;fileTab[_0x479094(0x388)]['add'](_0x479094(0x34b)),topicTab['classList'][_0x479094(0x2f8)]('active'),textTab[_0x479094(0x388)]['remove'](_0x479094(0x34b)),worksheetTab['classList'][_0x479094(0x2f8)](_0x479094(0x34b));if(_0x4ce31a)_0x4ce31a[_0x479094(0x388)]['remove'](_0x479094(0x34b));fileInputArea[_0x479094(0x388)][_0x479094(0x2f8)]('hidden'),topicInputArea[_0x479094(0x388)][_0x479094(0x240)]('hidden'),textInputArea[_0x479094(0x388)][_0x479094(0x240)](_0x479094(0x451)),worksheetInputArea[_0x479094(0x388)][_0x479094(0x240)](_0x479094(0x451));if(_0x1eb325)_0x1eb325[_0x479094(0x388)][_0x479094(0x240)](_0x479094(0x451));}),worksheetTab['addEventListener'](_0x8cc7ce(0x151),()=>{const _0x3202a4=_0x8cc7ce;worksheetTab['classList'][_0x3202a4(0x240)](_0x3202a4(0x34b)),topicTab[_0x3202a4(0x388)][_0x3202a4(0x2f8)](_0x3202a4(0x34b)),textTab['classList'][_0x3202a4(0x2f8)](_0x3202a4(0x34b)),fileTab[_0x3202a4(0x388)]['remove'](_0x3202a4(0x34b));if(_0x4ce31a)_0x4ce31a[_0x3202a4(0x388)][_0x3202a4(0x2f8)]('active');worksheetInputArea[_0x3202a4(0x388)]['remove'](_0x3202a4(0x451)),topicInputArea[_0x3202a4(0x388)][_0x3202a4(0x240)](_0x3202a4(0x451)),textInputArea[_0x3202a4(0x388)][_0x3202a4(0x240)](_0x3202a4(0x451)),fileInputArea[_0x3202a4(0x388)][_0x3202a4(0x240)](_0x3202a4(0x451));if(_0x1eb325)_0x1eb325['classList'][_0x3202a4(0x240)]('hidden');});const _0x1d43f8=document[_0x8cc7ce(0x349)](_0x8cc7ce(0x3f3)),_0x405338=document[_0x8cc7ce(0x349)](_0x8cc7ce(0x38d));_0x1d43f8&&_0x1d43f8[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x58f2bd=_0x8cc7ce;topicTab[_0x58f2bd(0x388)][_0x58f2bd(0x2f8)](_0x58f2bd(0x34b)),textTab['classList'][_0x58f2bd(0x2f8)](_0x58f2bd(0x34b)),fileTab[_0x58f2bd(0x388)]['remove'](_0x58f2bd(0x34b)),worksheetTab[_0x58f2bd(0x388)][_0x58f2bd(0x2f8)](_0x58f2bd(0x34b));if(_0x4ce31a)_0x4ce31a[_0x58f2bd(0x388)][_0x58f2bd(0x2f8)](_0x58f2bd(0x34b));_0x1d43f8[_0x58f2bd(0x388)][_0x58f2bd(0x240)](_0x58f2bd(0x34b)),topicInputArea[_0x58f2bd(0x388)][_0x58f2bd(0x240)]('hidden'),textInputArea[_0x58f2bd(0x388)][_0x58f2bd(0x240)]('hidden'),fileInputArea['classList'][_0x58f2bd(0x240)](_0x58f2bd(0x451)),worksheetInputArea['classList'][_0x58f2bd(0x240)]('hidden');if(_0x1eb325)_0x1eb325[_0x58f2bd(0x388)]['add'](_0x58f2bd(0x451));_0x405338['classList'][_0x58f2bd(0x2f8)](_0x58f2bd(0x451)),displayQuestionBank();});_0x4ce31a&&(_0x4ce31a[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x5edf04=_0x8cc7ce;topicTab[_0x5edf04(0x388)]['remove'](_0x5edf04(0x34b)),textTab[_0x5edf04(0x388)]['remove'](_0x5edf04(0x34b)),fileTab[_0x5edf04(0x388)][_0x5edf04(0x2f8)]('active'),worksheetTab[_0x5edf04(0x388)]['remove'](_0x5edf04(0x34b)),_0x4ce31a['classList'][_0x5edf04(0x240)]('active'),topicInputArea[_0x5edf04(0x388)][_0x5edf04(0x240)](_0x5edf04(0x451)),textInputArea[_0x5edf04(0x388)]['add'](_0x5edf04(0x451)),fileInputArea[_0x5edf04(0x388)][_0x5edf04(0x240)](_0x5edf04(0x451)),worksheetInputArea['classList'][_0x5edf04(0x240)](_0x5edf04(0x451)),_0x1eb325[_0x5edf04(0x388)]['remove'](_0x5edf04(0x451));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x257))[_0x8cc7ce(0x200)]('click',handleGenerateFromLink));loadQuizBtn[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),handleLoadQuiz),startQuizBtn[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x99152a=_0x8cc7ce,_0x540f9d=document[_0x99152a(0x349)](_0x99152a(0x406));currentStudentName=_0x540f9d['value'];if(!currentStudentName){showMessage('กรุณาเลือกชื่อของคุณ');return;}studentNameSelectionView[_0x99152a(0x388)][_0x99152a(0x240)](_0x99152a(0x451)),quizStartTime=new Date(),displayQuizForStudent(currentQuizData);}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x228))[_0x8cc7ce(0x200)]('click',showJoinGameView),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x387))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),handleJoinLiveGame),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x1b4))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>showView(_0x8cc7ce(0x4a0)));const _0x2564ae=()=>{const _0x321b4f=_0x8cc7ce,_0x32cbb9=document[_0x321b4f(0x349)](_0x321b4f(0x226))[_0x321b4f(0x271)]['replace'](/[^a-z0-9]/gi,'_')[_0x321b4f(0x171)]();return _0x321b4f(0x322)+(_0x32cbb9||_0x321b4f(0x447));};document[_0x8cc7ce(0x349)](_0x8cc7ce(0x316))['addEventListener']('click',()=>exportTableAsImage(_0x8cc7ce(0x4e2),_0x2564ae())),document['getElementById']('export-pdf-btn')[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>exportTableAsPDF(_0x8cc7ce(0x426),_0x2564ae())),document['getElementById'](_0x8cc7ce(0x3e1))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>exportTableAsWord(_0x8cc7ce(0x4e2),_0x2564ae())),document['getElementById'](_0x8cc7ce(0x1fa))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>exportTableAsExcel('results-table',_0x2564ae()));const _0x39aea9=()=>{const _0x5e5dab=_0x8cc7ce,_0x24af67=document[_0x5e5dab(0x349)](_0x5e5dab(0x226))[_0x5e5dab(0x271)]['replace'](/[^a-z0-9]/gi,'_')['toLowerCase']();return _0x5e5dab(0x50d)+(_0x24af67||'quiz');};document['getElementById'](_0x8cc7ce(0x47a))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>exportTableAsImage(_0x8cc7ce(0x3fa),_0x39aea9())),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x32c))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>exportTableAsPDF(_0x8cc7ce(0x155),_0x39aea9())),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x3bd))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>exportTableAsWord(_0x8cc7ce(0x3fa),_0x39aea9())),document['getElementById'](_0x8cc7ce(0x40a))[_0x8cc7ce(0x200)]('click',()=>exportTableAsExcel(_0x8cc7ce(0x155),_0x39aea9())),projectQuizzesList[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),async _0x375ce0=>{const _0x1f7df1=_0x8cc7ce,_0x4e1d96=_0x375ce0[_0x1f7df1(0x3e2)][_0x1f7df1(0x32e)](_0x1f7df1(0x219)),_0x2972f7=_0x375ce0['target'][_0x1f7df1(0x32e)]('.delete-quiz-btn'),_0x224ad0=_0x375ce0[_0x1f7df1(0x3e2)][_0x1f7df1(0x32e)](_0x1f7df1(0x461)),_0x469c5d=_0x375ce0[_0x1f7df1(0x3e2)][_0x1f7df1(0x32e)]('.start-presentation-list-btn'),_0x2c6eb8=_0x375ce0[_0x1f7df1(0x3e2)]['closest']('.admin-try-quiz-list-btn'),_0x5d12d0=_0x375ce0[_0x1f7df1(0x3e2)]['closest'](_0x1f7df1(0x255)),_0x2abff3=_0x375ce0[_0x1f7df1(0x3e2)]['closest'](_0x1f7df1(0x323)),_0x344f13=_0x375ce0[_0x1f7df1(0x3e2)][_0x1f7df1(0x32e)](_0x1f7df1(0x4f5)),_0x11d9dd=_0x375ce0['target'][_0x1f7df1(0x32e)](_0x1f7df1(0x3ce)),_0x12854c=_0x375ce0['target']['closest'](_0x1f7df1(0xc4)),_0x3ba9b8=_0x375ce0[_0x1f7df1(0x3e2)][_0x1f7df1(0x32e)](_0x1f7df1(0x4d8)),_0x319063=_0x375ce0[_0x1f7df1(0x3e2)][_0x1f7df1(0x32e)](_0x1f7df1(0x2e1));if(_0x319063){const _0x1080c8=_0x319063[_0x1f7df1(0x441)]['quizId'];handleOpenQuizEditor(_0x1080c8);}else{if(_0x4e1d96){const _0x58b4b6=_0x4e1d96[_0x1f7df1(0x441)]['quizId'];handleToggleStarQuiz(_0x58b4b6);}else{if(_0x3ba9b8){const _0x537650=_0x3ba9b8[_0x1f7df1(0x441)][_0x1f7df1(0x4d5)];handleStartLiveRace(_0x537650);}else{if(_0x2972f7){const _0x33196c=_0x2972f7['dataset'][_0x1f7df1(0x4d5)],_0x166c4a=_0x2972f7['dataset'][_0x1f7df1(0x306)];showConfirmation(_0x1f7df1(0x185)+_0x166c4a+'\x22?\x20ผลการส่งงานทั้งหมดของแบบทดสอบนี้จะถูกลบอย่างถาวร',()=>handleDeleteQuiz(_0x33196c));}else{if(_0x224ad0){const _0x3b5a99=_0x224ad0[_0x1f7df1(0x441)]['quizId'];copyTextToClipboard(_0x3b5a99,_0x1f7df1(0x45d));}else{if(_0x469c5d){const _0x3f04e7=_0x469c5d[_0x1f7df1(0x441)][_0x1f7df1(0x4d5)],_0x30c5e4=doc(db,_0x1f7df1(0x1b9)+appId+_0x1f7df1(0x181),_0x3f04e7),_0x1a36bb=await getDoc(_0x30c5e4);if(_0x1a36bb[_0x1f7df1(0x3f4)]()){const _0x33f0c7=sanitizeQuizData({'id':_0x1a36bb['id'],..._0x1a36bb[_0x1f7df1(0x4e3)]()});startPresentation(_0x33f0c7);}else showMessage(_0x1f7df1(0x3d1));}else{if(_0x2c6eb8){const _0x5348a6=_0x2c6eb8[_0x1f7df1(0x441)]['quizId'],_0x4172f8=doc(db,_0x1f7df1(0x1b9)+appId+_0x1f7df1(0x181),_0x5348a6),_0x1538d2=await getDoc(_0x4172f8);_0x1538d2[_0x1f7df1(0x3f4)]()?(currentQuizData=sanitizeQuizData({'id':_0x1538d2['id'],..._0x1538d2['data']()}),startAdminTest()):showMessage(_0x1f7df1(0x3d1));}else{if(_0x5d12d0){const _0x4599f4=_0x5d12d0[_0x1f7df1(0x441)]['quizId'],_0x530fd9=_0x5d12d0[_0x1f7df1(0x441)][_0x1f7df1(0x306)];handleRenameQuiz(_0x4599f4,_0x530fd9);}else{if(_0x2abff3){const _0x5ae347=_0x2abff3[_0x1f7df1(0x441)]['quizId'];handleMoveQuiz(_0x5ae347);}else{if(_0x344f13){const _0x28a451=_0x344f13[_0x1f7df1(0x441)][_0x1f7df1(0x4d5)];handleQuizSettings(_0x28a451);}else{if(_0x11d9dd){const _0x429a06=_0x11d9dd['dataset'][_0x1f7df1(0x4d5)];handleQuizStatus(_0x429a06);}else{if(_0x12854c){const _0x1bbd65=_0x12854c[_0x1f7df1(0x441)][_0x1f7df1(0x4d5)];handleDuplicateQuiz(_0x1bbd65);}}}}}}}}}}}}}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x43a))[_0x8cc7ce(0x200)]('click',closePresentation),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x1d7))[_0x8cc7ce(0x200)]('click',()=>{currentPresentationSlide>0x0&&(currentPresentationSlide--,renderPresentationSlide(currentPresentationSlide));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x381))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x515f06=_0x8cc7ce;currentQuizData['questions']&&currentPresentationSlide<currentQuizData[_0x515f06(0x47e)][_0x515f06(0x145)]-0x1&&(currentPresentationSlide++,renderPresentationSlide(currentPresentationSlide));}),document[_0x8cc7ce(0x200)](_0x8cc7ce(0x338),()=>{const _0x3a2b39=_0x8cc7ce;!document[_0x3a2b39(0x2b7)]&&(presentationModal['style'][_0x3a2b39(0x229)]=_0x3a2b39(0x1e8));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x22c))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),handleDeleteAllStudents),studentList[_0x8cc7ce(0x200)]('click',_0x14c49c=>{const _0x43aa71=_0x8cc7ce,_0x34fd47=_0x14c49c[_0x43aa71(0x3e2)]['closest'](_0x43aa71(0x261));if(_0x34fd47){const _0x2ed5dc=_0x34fd47[_0x43aa71(0x441)]['studentName'];handleDeleteStudent(_0x2ed5dc);}}),fileUploadInput[_0x8cc7ce(0x200)]('change',handleFileUpload),document[_0x8cc7ce(0x349)]('timer-mode-select')[_0x8cc7ce(0x200)]('change',_0x52bfd2=>{const _0x292c7f=_0x8cc7ce,_0x58d34b=document[_0x292c7f(0x349)]('timer-duration-container'),_0x20bccc=document[_0x292c7f(0x349)](_0x292c7f(0x4e9)),_0x7e16a8=document['getElementById'](_0x292c7f(0x4bd));_0x52bfd2['target'][_0x292c7f(0x429)]===_0x292c7f(0x1e8)?_0x58d34b[_0x292c7f(0x388)]['add'](_0x292c7f(0x451)):(_0x58d34b['classList'][_0x292c7f(0x2f8)](_0x292c7f(0x451)),_0x52bfd2[_0x292c7f(0x3e2)][_0x292c7f(0x429)]===_0x292c7f(0x2d0)?(_0x20bccc[_0x292c7f(0x271)]=_0x292c7f(0x517),_0x7e16a8[_0x292c7f(0x429)]='10'):(_0x20bccc[_0x292c7f(0x271)]=_0x292c7f(0xc9),_0x7e16a8[_0x292c7f(0x429)]='30'));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x4ac))['addEventListener'](_0x8cc7ce(0xcb),_0x560c14=>{const _0x356cb7=_0x8cc7ce,_0x54122f=document[_0x356cb7(0x349)]('num-choices-container'),_0x293879=_0x560c14['target'][_0x356cb7(0x429)],_0xbb0ab0=document[_0x356cb7(0x2c3)]('label[for=\x22num-questions\x22]'),_0x2ee115=document['getElementById'](_0x356cb7(0xad)),_0x196d8d=document[_0x356cb7(0x349)](_0x356cb7(0x35a));_0x293879===_0x356cb7(0x456)?_0xbb0ab0['textContent']='จำนวนคู่:':_0xbb0ab0[_0x356cb7(0x271)]='จำนวนข้อ:',_0x293879==='multiple_choice'||_0x293879===_0x356cb7(0x2bc)||_0x293879===_0x356cb7(0x1f1)?_0x54122f[_0x356cb7(0x388)][_0x356cb7(0x2f8)](_0x356cb7(0x451)):_0x54122f[_0x356cb7(0x388)]['add']('hidden'),_0x2ee115['max']=_0x196d8d[_0x356cb7(0x429)];}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x35a))[_0x8cc7ce(0x200)]('input',_0x33182e=>{const _0x4d7062=_0x8cc7ce;document[_0x4d7062(0x349)](_0x4d7062(0xad))[_0x4d7062(0x347)]=_0x33182e['target']['value'];}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x287))['addEventListener']('change',_0x370eba=>{const _0x16a1a0=_0x8cc7ce,_0x3159dd=document['getElementById'](_0x16a1a0(0x3c6)),_0x386bb8=document['getElementById']('modal-timer-duration-label'),_0x1da023=document['getElementById'](_0x16a1a0(0x4b2));_0x370eba['target'][_0x16a1a0(0x429)]===_0x16a1a0(0x1e8)?_0x3159dd[_0x16a1a0(0x388)][_0x16a1a0(0x240)]('hidden'):(_0x3159dd['classList'][_0x16a1a0(0x2f8)]('hidden'),_0x370eba[_0x16a1a0(0x3e2)]['value']===_0x16a1a0(0x2d0)?_0x386bb8['textContent']=_0x16a1a0(0x517):_0x386bb8[_0x16a1a0(0x271)]=_0x16a1a0(0xc9));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0xfc))['addEventListener'](_0x8cc7ce(0x151),()=>{const _0x4c08c1=_0x8cc7ce;document['getElementById'](_0x4c08c1(0x12e))['classList'][_0x4c08c1(0x240)](_0x4c08c1(0x451));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x4e8))['addEventListener'](_0x8cc7ce(0x151),()=>{const _0x188ca3=_0x8cc7ce;document[_0x188ca3(0x349)](_0x188ca3(0x12e))[_0x188ca3(0x388)][_0x188ca3(0x240)](_0x188ca3(0x451));}),document[_0x8cc7ce(0x349)](_0x8cc7ce(0x44d))[_0x8cc7ce(0x200)](_0x8cc7ce(0x151),()=>{const _0x178e5f=_0x8cc7ce;document[_0x178e5f(0x349)](_0x178e5f(0x12e))[_0x178e5f(0x388)][_0x178e5f(0x240)](_0x178e5f(0x451)),showConfirmation(_0x178e5f(0x126),handleSaveChanges);});}function handleModeSwitch(){const _0x3a2b5a=_0xf78338,_0x4aeaae=document[_0x3a2b5a(0x349)](_0x3a2b5a(0x378));currentMode==='student'?(adminPasswordModal[_0x3a2b5a(0x388)]['remove'](_0x3a2b5a(0x451)),document[_0x3a2b5a(0x349)]('admin-password-input')[_0x3a2b5a(0x16b)]()):(currentMode=_0x3a2b5a(0x4a0),_0x4aeaae[_0x3a2b5a(0x3f5)]='<i\x20class=\x22fas\x20fa-user-shield\x20fa-lg\x22></i>',_0x4aeaae['title']='สลับไปโหมดผู้ควบคุม',showView(_0x3a2b5a(0x4a0)));}function handleAdminLogin(){const _0x3e6125=_0xf78338,_0x4da49f=document[_0x3e6125(0x349)](_0x3e6125(0x36c)),_0x441237=document[_0x3e6125(0x349)]('password-error-msg');if(_0x4da49f[_0x3e6125(0x429)]===_0x3e6125(0x414)){adminPasswordModal[_0x3e6125(0x388)][_0x3e6125(0x240)](_0x3e6125(0x451)),_0x4da49f[_0x3e6125(0x429)]='',_0x441237[_0x3e6125(0x388)][_0x3e6125(0x240)](_0x3e6125(0x451)),currentMode='admin';const _0x5c5aaf=document[_0x3e6125(0x349)](_0x3e6125(0x378));_0x5c5aaf['innerHTML']=_0x3e6125(0x20e),_0x5c5aaf[_0x3e6125(0x2f3)]=_0x3e6125(0xda),showView('admin-dashboard');}else _0x441237[_0x3e6125(0x388)][_0x3e6125(0x2f8)](_0x3e6125(0x451)),_0x4da49f[_0x3e6125(0x429)]='';}function switchProjectTab(_0x3d70f1){const _0x13ba08=_0xf78338;['manage',_0x13ba08(0x4f9),_0x13ba08(0x280)][_0x13ba08(0xff)](_0x3ca08d=>{const _0x92f464=_0x13ba08;document[_0x92f464(0x349)](_0x3ca08d+_0x92f464(0x12a))[_0x92f464(0x388)][_0x92f464(0x2f8)](_0x92f464(0x34b)),document['getElementById'](_0x3ca08d+_0x92f464(0x21c))['classList'][_0x92f464(0x240)]('hidden');}),document[_0x13ba08(0x349)](_0x3d70f1+_0x13ba08(0x12a))['classList'][_0x13ba08(0x240)](_0x13ba08(0x34b)),document[_0x13ba08(0x349)](_0x3d70f1+_0x13ba08(0x21c))[_0x13ba08(0x388)][_0x13ba08(0x2f8)]('hidden');}function switchQuizDetailTab(_0x24346f){const _0x4fb73f=_0xf78338,_0x40bec7={'analytics':{'btn':_0x4fb73f(0x31f),'content':'analytics-tab-content'},'scores':{'btn':_0x4fb73f(0x3ee),'content':_0x4fb73f(0x2b9)},'leaderboard-quiz':{'btn':_0x4fb73f(0x370),'content':'leaderboard-quiz-tab-content'}};for(const _0x5ca793 in _0x40bec7){document[_0x4fb73f(0x349)](_0x40bec7[_0x5ca793]['btn'])[_0x4fb73f(0x388)][_0x4fb73f(0x2f8)]('active'),document[_0x4fb73f(0x349)](_0x40bec7[_0x5ca793]['content'])[_0x4fb73f(0x388)][_0x4fb73f(0x240)](_0x4fb73f(0x451));}document['getElementById'](_0x40bec7[_0x24346f][_0x4fb73f(0x49c)])[_0x4fb73f(0x388)][_0x4fb73f(0x240)](_0x4fb73f(0x34b)),document[_0x4fb73f(0x349)](_0x40bec7[_0x24346f][_0x4fb73f(0xd5)])[_0x4fb73f(0x388)][_0x4fb73f(0x2f8)]('hidden');}function showMessage(_0x3f5d6f){const _0x5033b4=_0xf78338;modalMessage[_0x5033b4(0x271)]=_0x3f5d6f,messageModal[_0x5033b4(0x388)][_0x5033b4(0x2f8)]('hidden');}function showConfirmation(_0x1b26e4,_0x9f19fc){const _0xfebfb6=_0xf78338;document[_0xfebfb6(0x349)]('confirmation-message')['textContent']=_0x1b26e4,document[_0xfebfb6(0x349)](_0xfebfb6(0x47f))[_0xfebfb6(0x2c3)]('h3')['textContent']='ยืนยันการกระทำ',confirmAction=_0x9f19fc,confirmationModal[_0xfebfb6(0x388)]['remove']('hidden');}function listenForProjects(){const _0x366507=_0xf78338,_0x138fe4=collection(db,_0x366507(0x1b9)+appId+'/public/data/projects');unsubscribeProjectsListener=onSnapshot(_0x138fe4,_0x4165c9=>{const _0x35d814=_0x366507;allProjects=_0x4165c9[_0x35d814(0x431)][_0x35d814(0xfa)](_0x584fcf=>({'id':_0x584fcf['id'],..._0x584fcf[_0x35d814(0x4e3)]()})),renderProjects();},_0x177827=>{const _0x33b6a5=_0x366507;console[_0x33b6a5(0x266)](_0x33b6a5(0x132),_0x177827),showMessage('เกิดข้อผิดพลาดในการโหลดโปรเจค');});}async function renderProjects(){const _0x3d7aa0=_0xf78338,_0x405b88=document[_0x3d7aa0(0x349)]('project-search-input')[_0x3d7aa0(0x429)][_0x3d7aa0(0x171)](),_0x4245a6=document['getElementById'](_0x3d7aa0(0x23c))[_0x3d7aa0(0x429)];let _0x447568=allProjects['filter'](_0x159479=>_0x159479[_0x3d7aa0(0x3d6)][_0x3d7aa0(0x171)]()[_0x3d7aa0(0x2c9)](_0x405b88));_0x447568[_0x3d7aa0(0x198)]((_0x4580b1,_0x4ae90e)=>{const _0x283c3a=_0x3d7aa0;switch(_0x4245a6){case _0x283c3a(0x162):return _0x4580b1['projectName'][_0x283c3a(0x2e8)](_0x4ae90e[_0x283c3a(0x3d6)],'th');case _0x283c3a(0x230):return _0x4ae90e['projectName'][_0x283c3a(0x2e8)](_0x4580b1[_0x283c3a(0x3d6)],'th');case _0x283c3a(0x356):return new Date(_0x4580b1[_0x283c3a(0x4c7)])-new Date(_0x4ae90e[_0x283c3a(0x4c7)]);case _0x283c3a(0x442):default:return new Date(_0x4ae90e['createdAt'])-new Date(_0x4580b1[_0x283c3a(0x4c7)]);}});const _0x3fa7c3={};await Promise[_0x3d7aa0(0x1e0)](_0x447568['map'](async _0x5d2366=>{const _0x365d78=_0x3d7aa0,_0x31a4fd=query(collection(db,_0x365d78(0x1b9)+appId+_0x365d78(0x181)),where('projectId','==',_0x5d2366['id'])),_0x3b1934=await getDocs(_0x31a4fd);_0x3fa7c3[_0x5d2366['id']]=_0x3b1934[_0x365d78(0x3bc)];}));let _0x4913eb='';starredQuizzes[_0x3d7aa0(0x145)]>0x0&&(_0x4913eb+=_0x3d7aa0(0x178)+starredQuizzes[_0x3d7aa0(0x145)]+_0x3d7aa0(0x3e3)),_0x447568['forEach'](_0x2656f6=>{const _0x4456ea=_0x3d7aa0,_0x4b2f6a=_0x3fa7c3[_0x2656f6['id']]??0x0;_0x4913eb+=_0x4456ea(0x380)+_0x2656f6['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22font-bold\x20text-lg\x20text-indigo-800\x20pointer-events-none\x22>'+_0x2656f6[_0x4456ea(0x3d6)]+_0x4456ea(0x44e)+new Date(_0x2656f6[_0x4456ea(0x4c7)])[_0x4456ea(0x182)](_0x4456ea(0x23b))+_0x4456ea(0x2ed)+_0x4b2f6a+'\x20แบบทดสอบ</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x20mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-id=\x22'+_0x2656f6['id']+_0x4456ea(0x23f)+_0x2656f6['projectName']+_0x4456ea(0x213);}),projectList[_0x3d7aa0(0x3f5)]=_0x4913eb,noProjectsMsg['classList'][_0x3d7aa0(0x2fb)](_0x3d7aa0(0x451),_0x4913eb[_0x3d7aa0(0x145)]>0x0);}document[_0xf78338(0x349)](_0xf78338(0xc3))[_0xf78338(0x200)](_0xf78338(0x151),async()=>{const _0x3f0a34=_0xf78338,_0x4656bb=document[_0x3f0a34(0x349)](_0x3f0a34(0x36d)),_0x3459f0=_0x4656bb[_0x3f0a34(0x429)]['trim']();if(!_0x3459f0){showMessage(_0x3f0a34(0x1c1));return;}try{const _0x25cc2f=doc(collection(db,'artifacts/'+appId+_0x3f0a34(0x1a6)));await setDoc(_0x25cc2f,{'projectName':_0x3459f0,'students':[],'settings':{'resultsDisplay':_0x3f0a34(0x103),'shuffleSetting':_0x3f0a34(0x1e8),'defaultNumQuestions':0x5,'defaultNumChoices':0x4,'defaultPassingScore':0x3,'timerMode':_0x3f0a34(0x1e8),'timerDuration':0xa},'createdBy':userId,'createdAt':new Date()['toISOString']()}),_0x4656bb['value']='',createProjectModal['classList'][_0x3f0a34(0x240)]('hidden'),showMessage(_0x3f0a34(0x2b0));}catch(_0x39f959){console[_0x3f0a34(0x266)](_0x3f0a34(0x33b),_0x39f959),showMessage(_0x3f0a34(0x37e));}}),projectList[_0xf78338(0x200)](_0xf78338(0x151),async _0x54bee1=>{const _0x9bc66d=_0xf78338,_0x212277=_0x54bee1[_0x9bc66d(0x3e2)]['closest'](_0x9bc66d(0x4c0)),_0x572a3d=_0x54bee1[_0x9bc66d(0x3e2)][_0x9bc66d(0x32e)](_0x9bc66d(0x20b));if(_0x212277){const _0x387cf7=_0x212277['dataset']['id'];_0x387cf7===_0x9bc66d(0x3ec)?showStarredProjectView():(currentProjectId=_0x387cf7,await loadProjectDetails(currentProjectId),showView(_0x9bc66d(0x19e)));}else{if(_0x572a3d){const _0x138f3d=_0x572a3d[_0x9bc66d(0x441)]['id'],_0x2bd49f=_0x572a3d['dataset'][_0x9bc66d(0x30a)];showConfirmation(_0x9bc66d(0x15c)+_0x2bd49f+_0x9bc66d(0x4f8),()=>handleDeleteProject(_0x138f3d));}}});function showStarredProjectView(){const _0x132f3d=_0xf78338;currentProjectId=_0x132f3d(0x191),currentProjectData=null,projectTitle['textContent']=_0x132f3d(0x1b6),projectIdDisplay[_0x132f3d(0x271)]='pinned-items',showView(_0x132f3d(0x19e)),manageTab[_0x132f3d(0x388)][_0x132f3d(0x240)]('hidden'),leaderboardTab[_0x132f3d(0x388)][_0x132f3d(0x240)](_0x132f3d(0x451)),switchProjectTab(_0x132f3d(0x4f9)),renderQuizzes();}async function loadProjectDetails(_0x32dd90){const _0x15e4f7=_0xf78338,_0x30e831=doc(db,_0x15e4f7(0x1b9)+appId+_0x15e4f7(0x1a6),_0x32dd90),_0x2cefd3=await getDoc(_0x30e831);if(_0x2cefd3[_0x15e4f7(0x3f4)]()){manageTab[_0x15e4f7(0x388)]['remove'](_0x15e4f7(0x451)),leaderboardTab[_0x15e4f7(0x388)][_0x15e4f7(0x2f8)](_0x15e4f7(0x451)),currentProjectData=_0x2cefd3[_0x15e4f7(0x4e3)](),projectTitle[_0x15e4f7(0x271)]=currentProjectData['projectName'],projectIdDisplay['textContent']=_0x32dd90;const _0x5ac854=currentProjectData['settings']||{};document[_0x15e4f7(0x349)](_0x15e4f7(0x35a))[_0x15e4f7(0x429)]=_0x5ac854['defaultNumQuestions']||0x5,document['getElementById']('num-choices')['value']=_0x5ac854['defaultNumChoices']||0x4,document[_0x15e4f7(0x349)](_0x15e4f7(0xad))[_0x15e4f7(0x429)]=_0x5ac854[_0x15e4f7(0x21b)]||Math['floor']((_0x5ac854[_0x15e4f7(0x4b3)]||0x5)/0x2),document['getElementById'](_0x15e4f7(0xad))[_0x15e4f7(0x347)]=_0x5ac854['defaultNumQuestions']||0x5,document[_0x15e4f7(0x349)](_0x15e4f7(0x1b2))['value']=_0x5ac854[_0x15e4f7(0x106)]||_0x15e4f7(0x103),document[_0x15e4f7(0x349)]('shuffle-setting-select')[_0x15e4f7(0x429)]=_0x5ac854['shuffleSetting']||'none';const _0x5511e4=_0x5ac854[_0x15e4f7(0x2a9)]||'none',_0xe62ab5=_0x5ac854[_0x15e4f7(0x14c)]||0xa,_0x296e23=document[_0x15e4f7(0x349)](_0x15e4f7(0x4f2)),_0x13b3ef=document[_0x15e4f7(0x349)]('timer-duration-container'),_0x35c6db=document[_0x15e4f7(0x349)](_0x15e4f7(0x4bd));_0x296e23[_0x15e4f7(0x429)]=_0x5511e4,_0x35c6db['value']=_0xe62ab5;_0x5511e4===_0x15e4f7(0x1e8)?_0x13b3ef[_0x15e4f7(0x388)][_0x15e4f7(0x240)](_0x15e4f7(0x451)):_0x13b3ef[_0x15e4f7(0x388)]['remove']('hidden');_0x296e23[_0x15e4f7(0x36f)](new Event('change'));if(unsubscribeStudentsListener)unsubscribeStudentsListener();if(unsubscribeQuizzesListener)unsubscribeQuizzesListener();if(unsubscribeStudentProfilesListener)unsubscribeStudentProfilesListener();listenForStudents(_0x32dd90),listenForProjectQuizzes(_0x32dd90),listenForStudentProfiles(_0x32dd90);}else showMessage('ไม่พบโปรเจค'),showView(_0x15e4f7(0x3eb));}async function handleDeleteProject(_0x5a3d57){const _0x4c11c8=_0xf78338;try{const _0x4c4788=writeBatch(db),_0x12ecc8=collection(db,_0x4c11c8(0x1b9)+appId+_0x4c11c8(0x181)),_0x4d337b=query(_0x12ecc8,where(_0x4c11c8(0x2aa),'==',_0x5a3d57)),_0x3f0e85=await getDocs(_0x4d337b);for(const _0x5c86bf of _0x3f0e85[_0x4c11c8(0x431)]){const _0x97a46c=collection(db,_0x4c11c8(0x1b9)+appId+'/public/data/quizzes/'+_0x5c86bf['id']+_0x4c11c8(0x415)),_0x4e9e7d=await getDocs(_0x97a46c);_0x4e9e7d[_0x4c11c8(0xff)](_0x46bd1b=>{const _0x59daea=_0x4c11c8;_0x4c4788[_0x59daea(0x13a)](_0x46bd1b[_0x59daea(0x19a)]);}),_0x4c4788[_0x4c11c8(0x13a)](_0x5c86bf[_0x4c11c8(0x19a)]);}const _0x445c31=collection(db,_0x4c11c8(0x1b9)+appId+_0x4c11c8(0x1eb)+_0x5a3d57+'/studentProfiles'),_0x29e43f=await getDocs(_0x445c31);_0x29e43f[_0x4c11c8(0xff)](_0x3d1965=>{const _0x2987f9=_0x4c11c8;_0x4c4788[_0x2987f9(0x13a)](_0x3d1965['ref']);});const _0x234940=doc(db,_0x4c11c8(0x1b9)+appId+_0x4c11c8(0x1a6),_0x5a3d57);_0x4c4788[_0x4c11c8(0x13a)](_0x234940),await _0x4c4788[_0x4c11c8(0xb5)](),showMessage(_0x4c11c8(0x2f1)),showView(_0x4c11c8(0x3eb));}catch(_0x4fa145){console[_0x4c11c8(0x266)](_0x4c11c8(0x2e9),_0x4fa145),showMessage(_0x4c11c8(0x438));}}document[_0xf78338(0x349)](_0xf78338(0x10c))[_0xf78338(0x200)]('click',async()=>{const _0x4f4776=_0xf78338;if(!currentProjectId)return;const _0x396bff={'defaultNumQuestions':parseInt(document['getElementById']('num-questions')[_0x4f4776(0x429)]),'defaultNumChoices':parseInt(document[_0x4f4776(0x349)]('num-choices')[_0x4f4776(0x429)]),'defaultPassingScore':parseInt(document['getElementById'](_0x4f4776(0xad))[_0x4f4776(0x429)]),'resultsDisplay':document[_0x4f4776(0x349)](_0x4f4776(0x1b2))[_0x4f4776(0x429)],'shuffleSetting':document['getElementById'](_0x4f4776(0x3d2))[_0x4f4776(0x429)],'timerMode':document[_0x4f4776(0x349)]('timer-mode-select')['value'],'timerDuration':parseInt(document[_0x4f4776(0x349)]('timer-duration-input')[_0x4f4776(0x429)])};try{const _0x104d6f=doc(db,_0x4f4776(0x1b9)+appId+'/public/data/projects',currentProjectId);await updateDoc(_0x104d6f,{'settings':_0x396bff}),showMessage('บันทึกการตั้งค่าแล้ว');}catch(_0x4a632f){console[_0x4f4776(0x266)](_0x4f4776(0x223),_0x4a632f),showMessage('ไม่สามารถบันทึกการตั้งค่าได้');}});function listenForStudents(_0x61914d){const _0x2990=_0xf78338,_0x704a66=doc(db,_0x2990(0x1b9)+appId+_0x2990(0x1a6),_0x61914d);unsubscribeStudentsListener=onSnapshot(_0x704a66,_0x3d22c6=>{const _0x4c2693=_0x2990;if(_0x3d22c6['exists']()){const _0x36efd6=_0x3d22c6[_0x4c2693(0x4e3)]();currentProjectData=_0x36efd6,renderStudentList(_0x36efd6[_0x4c2693(0x334)]||[]);}});}function renderStudentList(_0x4b78ba){const _0x525fd4=_0xf78338,_0x2474ae=document[_0x525fd4(0x349)](_0x525fd4(0x22c));_0x4b78ba[_0x525fd4(0x145)]===0x0?(studentList[_0x525fd4(0x3f5)]=_0x525fd4(0x446),_0x2474ae[_0x525fd4(0x388)][_0x525fd4(0x240)](_0x525fd4(0x451))):(studentList[_0x525fd4(0x3f5)]=_0x4b78ba[_0x525fd4(0xfa)](_0x2c3713=>_0x525fd4(0x38b)+_0x2c3713+_0x525fd4(0x3ac)+_0x2c3713+_0x525fd4(0xb0))[_0x525fd4(0x396)](''),_0x2474ae['classList']['remove'](_0x525fd4(0x451)));}document[_0xf78338(0x349)](_0xf78338(0x143))[_0xf78338(0x200)](_0xf78338(0x151),async()=>{const _0x1a5251=_0xf78338;if(!currentProjectId)return;const _0x17f172=document['getElementById'](_0x1a5251(0x478)),_0x3967f6=_0x17f172['value'][_0x1a5251(0x197)]();if(!_0x3967f6){showMessage('กรุณาใส่ชื่อนักเรียน');return;}const _0x62541f=_0x3967f6['split']('\x0a')['map'](_0x261930=>_0x261930[_0x1a5251(0x197)]())[_0x1a5251(0x1f4)](_0x59f4cd=>_0x59f4cd);if(_0x62541f[_0x1a5251(0x145)]===0x0)return;try{const _0x321316=doc(db,_0x1a5251(0x1b9)+appId+_0x1a5251(0x1a6),currentProjectId),_0xdf2507=await getDoc(_0x321316);if(_0xdf2507[_0x1a5251(0x3f4)]()){const _0x1f0cca=_0xdf2507[_0x1a5251(0x4e3)]()['students']||[],_0x2beaa8=[...new Set([..._0x1f0cca,..._0x62541f])];await updateDoc(_0x321316,{'students':_0x2beaa8}),_0x17f172[_0x1a5251(0x429)]='';}}catch(_0x3af043){console['error']('Error\x20adding\x20students:',_0x3af043),showMessage(_0x1a5251(0x41e));}});function _0x4783(){const _0x5758be=['matching','Leaderboard\x20update\x20transaction\x20failed:\x20','submittedAt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20p-3\x20bg-blue-50\x20border-l-4\x20border-blue-400\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-blue-800\x22>คำอธิบาย:</strong>\x20','endTime','student-reading-area','เกิดข้อผิดพลาดในการแสดงรายละเอียดแบบทดสอบ','คัดลอกรหัสแล้ว!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20name=\x22question_single\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22\x22>--\x20เลือกคำตอบ\x20--</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<p><strong>คำตอบของคุณ:</strong>\x20<span\x20class=\x22','.regenerate-question-btn','.copy-quiz-id-list-btn','classWeaknesses','totalQuestions','</form>','):\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20คะแนน:\x20','\x22,\x20','passingScore','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22question-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20font-semibold\x20mb-2\x22>','true','createElement','Error\x20deleting\x20student:','rename-quiz-input','quiz-status-modal','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังบันทึก...','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<h2\x20class=\x22text-3xl\x20font-bold\x22>','next-question-timed-btn','Error\x20saving\x20quiz:','ทำแบบทดสอบเสร็จเร็วกว่าครึ่งของเวลาที่กำหนด','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quiz-generation-area','quizType','ring-purple-400','text-red-700\x20bg-red-100','student-name-input','Error\x20starting\x20live\x20race:','export-leaderboard-image-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-green-600\x22>(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-sm\x20text-gray-600\x22>','<button\x20type=\x22submit\x22\x20class=\x22w-full\x20mt-4\x20bg-purple-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-purple-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check-circle\x20mr-2\x22></i>ส่งคำตอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>','questions','confirmation-modal','เกิดข้อผิดพลาดในการเตรียมไฟล์:\x20','text/csv;charset=utf-8;','บันทึกการตั้งค่าสำเร็จ','ARRAY','\x22>ไม่ใช่</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','<div\x20class=\x22my-2\x20flex\x20justify-center\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','numeric','points','Error\x20listening\x20for\x20starred\x20quizzes:','ส่งคำตอบ','quiz-editor-questions-container','back-to-project-btn','specialist','firstScore','COMEBACK_KING','คุณแน่ใจหรือไม่ว่าต้องการลบนักเรียนทั้งหมดในโปรเจคนี้?\x20การกระทำนี้ไม่สามารถย้อนกลับได้','settings','<option\x20value=\x22','#ffffff','round','text-green-900','<p\x20class=\x22font-semibold\x22\x20id=\x22q-text-','<head><meta\x20charset=\x27utf-8\x27><title>Export\x20HTML\x20to\x20Word</title></head><body>','indexOf','short_answer','(คัดลอก)\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-white\x20text-gray-800\x20p-6\x20md:p-12\x20rounded-2xl\x20shadow-2xl\x20w-full\x20h-full\x20max-h-[90vh]\x20overflow-y-auto\x20fade-in\x20flex\x20flex-col\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','btn','isStarred','confirm-move-quiz-btn','leaderboard-table-body','student','viewBox','imageCode','Error\x20generating\x20worksheet:','values','เปิดใช้งาน','copy-quiz-id-btn','(ไม่มีชื่อ)','document','.\x20ให้มี\x20','.\x20For\x20each\x20question,\x20specify\x20its\x20\x27questionType\x27.\x20If\x20\x27questionType\x27\x20is\x20\x27multiple_choice\x27,\x20provide\x20\x27options\x27\x20and\x20\x27correctAnswerIndex\x27.\x20If\x20\x27questionType\x27\x20is\x20\x27short_answer\x27,\x20provide\x20\x27idealAnswer\x27.','earned-badges-container','quiz-type-select','touchstart','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','สำหรับแต่ละคำถาม\x20หากจำเป็นต้องมีรูปภาพประกอบ\x20(เช่น\x20รูปเรขาคณิต,\x20กราฟ)\x20ให้สร้างโค้ด\x20SVG\x20ที่สมบูรณ์สำหรับรูปนั้นๆ\x20แล้วใส่ไว้ใน\x20property\x20ชื่อ\x20\x22imageCode\x22.\x20ถ้าไม่จำเป็น\x20ไม่ต้องใส่\x20property\x20นี้.','badges','AI\x20generation\x20finished\x20with\x20an\x20issue.\x20Reason:\x20','modal-timer-duration-input','defaultNumQuestions','latestScore','index','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22inline-flex\x20items-center\x20mx-1\x22\x20title=\x22','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20ข้อมูลคำถามทั้งหมด:\x20','presentation-modal','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-semibold\x20text-sm\x22>','</span>','/public/data/liveGames','เปิด\x20(จับเวลา)','timer-duration-input','bg-purple-50','update','.project-card-content','สำหรับคำถามนี้\x20หากจำเป็นต้องมีรูปภาพประกอบ\x20(เช่น\x20รูปเรขาคณิต)\x20ให้สร้างโค้ด\x20SVG\x20ที่สมบูรณ์สำหรับรูปนั้นๆ\x20แล้วใส่ไว้ใน\x20property\x20ชื่อ\x20\x22imageCode\x22.','now','student-quiz-leaderboard-table-body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x20bg-indigo-100\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-award\x20text-5xl\x20text-indigo-500\x20mb-4\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-2\x22>ผู้เข้าสอบ:\x20<span\x20class=\x22font-semibold\x20text-indigo-800\x22>','innerText','confirm-global-live-btn','createdAt','modal-results-display-select','00:00','answer','presentation-short-answer-input','<option>กำลังโหลดโปรเจค...</option>','สิ้นสุดการทำแบบทดสอบ\x20กำลังส่งคำตอบ...','Error\x20deleting\x20quiz:','ดูสรุปผล','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mx-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-4\x20text-gray-600\x22>เยี่ยมเลย!\x20AI\x20กำลังสร้างแบบทดสอบชุดใหม่เพื่อทบทวนความเข้าใจ...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','admin-view','live-game-view','\x20ตัว\x20(options),\x20ดัชนีคำตอบที่ถูกต้อง\x20(correctAnswerIndex),\x20และคำอธิบาย\x20(explanation).\x20','_opt1\x22>ไม่ใช่</label></div>','quizId','<option\x20value=\x22\x22>ไม่พบรายชื่อนักเรียนในโปรเจคนี้</option>','#view-rankings-btn','.start-live-race-btn','G-V90KRM0L63','<p\x20class=\x22text-xs\x20text-gray-500\x20mt-1\x22>ปิด:\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20โปรดสร้างแบบทดสอบปรนัยชุดใหม่จำนวน\x202\x20ข้อ\x20เพื่อทดสอบความเข้าใจในหัวข้อเหล่านี้โดยเฉพาะ\x0a\x20\x20\x20\x20\x20\x20\x20\x20แต่ละข้อต้องมี\x204\x20ตัวเลือก,\x20คำตอบที่ถูกต้อง,\x20และคำอธิบายสั้นๆ\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้ผลลัพธ์เป็น\x20JSON\x20object\x20ที่มีโครงสร้างดังนี้:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20topic:\x20(string)\x20ตั้งชื่อหัวข้อว่า\x20\x22แบบทดสอบซ่อมเสริม\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20questions:\x20(array\x20of\x20objects)\x20โดยแต่ละ\x20object\x20มี:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20questionText:\x20(string)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20options:\x20(array\x20of\x204\x20strings)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20correctAnswerIndex:\x20(number)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20explanation:\x20(string)\x0a\x20\x20\x20\x20','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x22><span\x20class=\x22text-xs\x20font-medium\x20px-2.5\x20py-0.5\x20rounded-full\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-red-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-red-700\x20font-semibold\x22>คะแนนต่ำสุด</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-red-900\x22>','Error\x20deleting\x20all\x20students:','draggable-text','\x0a\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22radio\x22\x20id=\x22q','\x20คน):</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-600\x20pl-2\x22>','results-table-container','data','originalTopic','/public/data/quizzes/','quiz-results','createElementNS','cancel-quiz-edits-btn-footer','timer-duration-label','Error\x20processing\x20file\x20for\x20AI:','</span></td>','confirm-admin-login-btn','text-blue-700\x20bg-blue-100','```','back-to-dashboard-btn','bg-yellow-200\x20text-yellow-800','timer-bar','timer-mode-select','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Original\x20quiz\x20not\x20found','.quiz-settings-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','quiz-form','\x22?\x20ข้อมูลทั้งหมดในโปรเจคนี้\x20(รวมถึงแบบทดสอบและผลการส่งงาน)\x20จะถูกลบอย่างถาวร','results','ข้อต่อไป','setAttributeNS','สอบซ่อม','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-6\x20pt-6\x20border-t\x20flex\x20flex-col\x20sm:flex-row\x20items-center\x20justify-center\x20gap-4\x20w-full\x20max-w-md\x20mx-auto\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22view-rankings-btn\x22\x20class=\x22w-full\x20sm:w-auto\x20flex-1\x20bg-yellow-500\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-yellow-600\x20flex\x20items-center\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trophy\x22></i>ดูอันดับ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22','\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22\x22>--\x20เลือกคำตอบ\x20--</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loader','submission-status-chart','back-from-results-btn','removeChild','\x22.\x20Respond\x20with\x20only\x20\x22true\x22\x20or\x20\x22false\x22.','<tr><td\x20colspan=\x2210\x22\x20class=\x22text-center\x20p-4\x20text-gray-500\x22>ไม่มีรายชื่อนักเรียนในโปรเจคนี้</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>','\x20Points</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x22>คิดเป็น\x20','fa-rocket\x20text-purple-500','\x20<span\x20class=\x22text-2xl\x20font-normal\x20text-gray-600\x22>/\x20','quiz-id-input','รูปแบบไฟล์ไม่รองรับ\x20กรุณาเลือก\x20PDF\x20หรือ\x20.docx','cancel-global-live-btn','\x22\x20class=\x22copy-quiz-id-list-btn\x20text-blue-800\x20bg-blue-100\x20hover:bg-blue-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-id-card\x22></i>\x20คัดลอก\x20ID</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','leaderboard_','split','bestScore','getBBox','link-url-input','log','\x20Points</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-md\x22>คุณได้คะแนน\x20','generate-from-topic-btn','default','\x22\x20class=\x22live-answer-btn\x20p-4\x20rounded-lg\x20text-xl\x20text-center\x20bg-white\x20text-gray-800\x20hover:bg-indigo-100\x20transition-all\x20transform\x20hover:scale-105\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ระยะเวลา\x20(นาที):','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22text-xs\x20font-medium\x20px-2.5\x20py-0.5\x20rounded-full\x20','\x20คู่\x20','start-game-btn','project-search-input','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22bg-white/20\x20px-3\x20py-1\x20rounded-full\x20text-base\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ตอบแล้ว:\x20<span\x20id=\x22answer-counter\x22\x20class=\x22font-bold\x22>0/0</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22end-game-btn\x22\x20class=\x22bg-red-600\x20text-white\x20py-1\x20px-3\x20rounded-md\x20hover:bg-red-700\x20text-sm\x22>จบเกม</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-grow\x20flex\x20flex-col\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x20mb-8\x20text-center\x22>','score','circle','xmlns=\x27http://www.w3.org/TR/REC-html40\x27>','\x22\x20value=\x22false\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q','\x22\x20class=\x22star-quiz-btn\x20text-gray-400\x20hover:text-yellow-500\x20text-lg\x20p-1\x22\x20title=\x22ติดดาว\x22>\x0a\x20\x20\x20\x20<i\x20class=\x22','passing-score-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x22>','บันทึกการแก้ไข','\x22\x20class=\x22delete-student-btn\x20text-red-500\x20hover:text-red-700\x20p-1\x20text-xs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times-circle\x20pointer-events-none\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<h2\x20class=\x22text-3xl\x20font-bold\x22>หมดเวลา!</h2>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<p\x20class=\x22mt-8\x22>รอผู้ควบคุมเฉลยและไปข้อต่อไป...</p>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x20</div>','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20นี่คือข้อมูลสรุปของนักเรียนในห้อง:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22timer-container\x22\x20class=\x22mb-4\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x22>แบบทดสอบ:\x20','commit','open','\x20ข้อ)</span>\x0a</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-500\x22>โปรเจค:\x20','ai-quiz-app-aefee','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ตอบถูก\x20','.png','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังส่งคำตอบ...','281495dPqyDc','Copy\x20command\x20failed','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x22>','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','AI\x20กำลังวิเคราะห์ไฟล์และสร้างแบบทดสอบ...','fixed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-4\x20p-4\x20border\x20rounded-lg\x20relative\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20top-2\x20right-2\x20opacity-0\x20group-hover:opacity-100\x20transition-opacity\x20flex\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22','confirm-create-project-btn','.duplicate-quiz-btn','nickname-input','<p\x20class=\x22','แบบทดสอบนี้หมดเวลาแล้ว','\x20ตัวเลือก.\x20','ระยะเวลา\x20(วินาที):','per-question-timer-container','change','write','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fade-in\x20space-y-4\x20mt-4\x20border-t\x20pt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-semibold\x20text-green-700\x20mb-2\x22><i\x20class=\x22fas\x20fa-check-circle\x20mr-2\x22></i>จุดแข็งของห้องเรียน</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22list-disc\x20list-inside\x20space-y-1\x20bg-green-50\x20p-3\x20rounded-lg\x20text-green-800\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20bg-black/10\x20hover:bg-black/30\x20p-2\x20rounded-md\x20transition-colors\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-semibold\x20text-gray-300\x20w-8\x20inline-block\x22>','q-image-container-','modal-adaptive-quiz-checkbox','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20md:col-span-2\x20flex\x20flex-col\x20items-center\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22live-short-answer-input\x22\x20class=\x22w-full\x20max-w-lg\x20p-3\x20border\x20rounded-lg\x20text-gray-800\x20text-lg\x22\x20rows=\x223\x22\x20placeholder=\x22พิมพ์คำตอบของคุณ...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22live-submit-short-answer-btn\x22\x20class=\x22bg-green-500\x20hover:bg-green-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-paper-plane\x20mr-2\x22></i>ส่งคำตอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','font-bold\x20text-green-700','load-quiz-btn','gamePin','content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','เกิดข้อผิดพลาดในการโหลดสถานะ','เกิดข้อผิดพลาดในการโหลดข้อมูลแบบทดสอบ','Error\x20displaying\x20question\x20bank:','สลับไปโหมดนักเรียน','reduce','floor','admin-testing','status','<p\x20class=\x22text-green-700\x22><strong>คำตอบที่ถูกต้อง:</strong>\x20','uid','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','timer-container','<i\x20class=\x22fas\x20fa-search\x20mr-2\x22></i>ค้นหาแบบทดสอบ','Invalid\x20response\x20structure\x20from\x20AI:','สร้างแบบทดสอบ\x20','เกิดข้อผิดพลาดในการลบแบบทดสอบ','destroy','แบบทดสอบจากคลังส่วนตัว','parseFromString','player-count','\x22\x20class=\x22quiz-status-btn\x20text-gray-600\x20hover:text-indigo-600\x20text-lg\x20p-1\x22\x20title=\x22ตั้งค่าสถานะ\x22><i\x20class=\x22fas\x20fa-power-off\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-end\x20flex-wrap\x20gap-2\x20mt-3\x20pt-3\x20border-t\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-id=\x22','.\x20แต่ละข้อมี\x20','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20mb-4\x22>ให้นักเรียนเข้าร่วมด้วยรหัสนี้:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-white\x20text-gray-800\x20rounded-lg\x20p-4\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-6xl\x20font-bold\x20tracking-widest\x22>','.lastAnswerCorrect','abs','bg-amber-100\x20text-amber-800','jspdf','some','readAsDataURL','<i\x20class=\x22fas\x20fa-check\x20mr-3\x22></i>','\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20rows=\x223\x22\x20required></textarea>','ai-quiz-app-aefee.firebaseapp.com','players','fa-crown\x20text-yellow-500','map','leaderboard-tab-content','cancel-quiz-edits-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22timer-bar-container\x22\x20class=\x22w-full\x20bg-gray-200\x20rounded-full\x20h-2.5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22timer-bar\x22\x20class=\x22bg-indigo-600\x20h-2.5\x20rounded-full\x22\x20style=\x22width:\x20100%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-center\x20text-sm\x20text-gray-600\x20mt-1\x22>เหลือเวลา\x20<span\x20id=\x22per-q-countdown\x22>','onclick','forEach','\x22>ใช่</p>','global-quiz-list','text-green-600\x20font-bold','show_results_and_answers','\x22\x20value=\x22true\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q','badgesCount','resultsDisplay','265559OpIwjv','print','student-view','helvetica','cancel-quiz-settings-btn','save-settings-btn','\x22\x20value=\x22true\x22\x20','.save-to-bank-btn','\x22\x20class=\x22move-quiz-btn\x20text-purple-800\x20bg-purple-100\x20hover:bg-purple-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-project-diagram\x22></i>\x20ย้าย</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','เกิดข้อผิดพลาดในการสร้างใบงาน','<button\x20id=\x22cancel-test-btn\x22\x20class=\x22text-sm\x20text-gray-500\x20hover:text-red-600\x20font-semibold\x20py-1\x20px-2\x20rounded-md\x20hover:bg-red-50\x22><i\x20class=\x22fas\x20fa-times-circle\x20mr-1\x22></i>\x20ยกเลิกการทดสอบ</button>','.doc','.draggable-text','.delete-svg-btn','FIRST_TRY_ACE','_opt0\x22\x20name=\x22question','Error\x20starting\x20game:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>สถิติ:</strong>\x20นักเรียน\x20','แบบทดสอบไม่มีชื่อ','AI\x20กำลังสร้างใบงาน...','create-project-modal','\x22\x20class=\x22w-full\x20p-1\x20border\x20rounded-md\x20correct-response-input\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','opacity-50','bg-green-100\x20text-green-800','student-project-leaderboard-tab','scores','json','toLocaleString','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=','สำหรับบางข้อ\x20หากจำเป็น\x20ให้สร้างโค้ด\x20SVG\x20ที่เกี่ยวข้องกับโจทย์ด้วย','ไม่พบข้อมูลผู้ใช้','การแก้ไขแบบทดสอบจะทำให้ผลการสอบเก่าไม่สอดคล้องกับคำถามและเฉลยชุดใหม่\x20ซึ่งอาจทำให้การแสดงผลคะแนนเก่าเกิดความสับสนได้\x20คุณต้องการบันทึกการเปลี่ยนแปลงหรือไม่?','ผ่าน','confirm-quiz-status-btn','กำลังสร้างรูปภาพ...','-tab','API\x20call\x20failed\x20with\x20status:\x20','toFixed','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22copy-quiz-id-btn\x22\x20class=\x22mt-2\x20bg-green-600\x20text-white\x20py-1\x20px-3\x20rounded-md\x20hover:bg-green-700\x20text-sm\x22><i\x20class=\x22fas\x20fa-copy\x22></i>\x20คัดลอก</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22grid\x20grid-cols-1\x20lg:grid-cols-3\x20gap-3\x20mt-4\x22>\x0a\x20\x20\x20\x20<button\x20id=\x22start-live-race-generated-btn\x22\x20class=\x22w-full\x20bg-orange-500\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-orange-600\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-flag-checkered\x20mr-2\x22></i>แข่งขันสด\x0a\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22start-presentation-btn\x22\x20class=\x22w-full\x20bg-purple-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-purple-700\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-chalkboard-teacher\x20mr-2\x22></i>เริ่มโหมดนำเสนอ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22admin-try-quiz-btn\x22\x20class=\x22w-full\x20bg-teal-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-teal-700\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-vial\x20mr-2\x22></i>ทดลองทำข้อสอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quiz-editor-modal','student-name-selection-view','<span\x20class=\x22bg-white/30\x20px-3\x20py-1\x20rounded-full\x20text-sm\x22>','description','Error\x20listening\x20for\x20projects:','quick_thinker','editable-quiz-topic','<textarea\x20name=\x22question','คัดลอกแบบทดสอบสำเร็จ','presentation-explanation','#results-table','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','delete','font-bold','global-quiz-search-input','end-game-btn','คำตอบผิด','totalPoints','ทำคะแนนเต็มในการทำครั้งแรก','project-detail-view','comeback_king','add-student-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20border\x20rounded-lg\x20bg-gray-50\x20question-editor-item\x22\x20data-q-type=\x22','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html\x20lang=\x22th\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<title>ใบงาน:\x20','กำลังสร้างคำถามข้อ\x20','input[name=\x22question_single\x22]:checked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22podium-step\x20text-center\x20flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-crown\x20text-6xl\x20mb-2\x20text-yellow-400\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-bold\x20text-3xl\x22>','\x20คะแนน</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-gray-400\x20text-gray-900\x20font-bold\x20p-4\x20rounded-t-lg\x20mt-2\x20h-32\x20flex\x20items-center\x20justify-center\x20text-5xl\x22>2</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','isCorrect','timerDuration','หมดเวลาสำหรับข้อนี้!','\x20ข้อ\x20เกี่ยวกับหัวข้อ\x20\x22','กรุณาใส่ชื่อใหม่','.docx','click','student-project-leaderboard-content','กฎเหล็ก:\x20นิพจน์ทางคณิตศาสตร์ทั้งหมดต้องอยู่ในรูปแบบ\x20LaTeX\x20ที่ถูกต้อง\x20และต้องถูกห่อหุ้มด้วยเครื่องหมายดอลลาร์\x20($)\x20เพียงคู่เดียว\x20ตัวอย่างเช่น\x20\x27ผลลัพธ์ของ\x20$3^2\x20\x5ctimes\x203^4$\x20คืออะไร\x27\x20หรือ\x20\x27คำตอบคือ\x20$3^{2+4}\x20=\x203^6$\x27\x20กฎเพิ่มเติม:\x201.\x20ใช้\x20`\x5ctimes`\x20สำหรับการคูณ\x20และ\x20`\x5cdiv`\x20สำหรับการหารเสมอ\x20ห้ามใช้คำอื่น\x202.\x20ตรวจสอบให้แน่ใจว่าวงเล็บปีกกา\x20`{}`\x20ทั้งหมดมีการเปิดและปิดที่ถูกต้อง\x203.\x20ห้ามใส่เครื่องหมายดอลลาร์ซ้อนกันหรือครอบแต่ละสัญลักษณ์เด็ดขาด\x20ให้ครอบทั้งนิพจน์เท่านั้น','first_try_ace','quiz-leaderboard-table','\x20<span\x20class=\x22text-xs\x20text-gray-500\x20pointer-events-none\x20ml-2\x22>(','bg-green-200\x20text-green-800','typesetPromise','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20bg-green-100\x20text-green-800\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x22>สร้างแบบทดสอบสำเร็จ!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>รหัสสำหรับทำแบบทดสอบ:\x20<strong\x20id=\x22quiz-id\x22\x20class=\x22text-lg\x20select-all\x22>','instructions','\x22\x20ไม่ผ่าน\x0a\x20\x20\x20\x20\x20\x20\x20\x20นี่คือคำอธิบายจากข้อที่นักเรียนตอบผิด:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','คุณแน่ใจหรือไม่ว่าต้องการลบโปรเจค\x20\x22','เกิดข้อผิดพลาดในการสร้างเนื้อหาทบทวน','Failed\x20to\x20fetch\x20quiz\x20for\x20admin:','false','padStart','hover:bg-indigo-100','name_asc','ใช่','ไม่มี','href','link-topic-input','<div\x20class=\x22flex-1\x22></div>','</title>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<script\x20src=\x22https://cdn.tailwindcss.com\x22></script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<link\x20href=\x22https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap\x22\x20rel=\x22stylesheet\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20\x27Sarabun\x27,\x20sans-serif;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@media\x20print\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20-webkit-print-color-adjust:\x20exact;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.no-print\x20{\x20display:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.question-item\x20{\x20page-break-inside:\x20avoid;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.answer-line\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20dotted\x20black;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2080%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<body\x20class=\x22p-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1\x20class=\x22text-2xl\x20font-bold\x22>ใบงานเรื่อง:\x20','Error\x20fetching\x20project\x20quizzes:','results-tab-content','focus','then','project-list','rgba(79,\x2070,\x20229,\x200.8)','student-quiz-leaderboard-content','targetId','toLowerCase','questionType','generate-worksheet-btn','student-list','button[type=\x22submit\x22]','players.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20space-y-2\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-container\x20bg-indigo-50\x20border-indigo-200\x20p-4\x20rounded-lg\x20shadow\x20hover:shadow-lg\x20transition-all\x20duration-300\x20flex\x20flex-col\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-content\x20cursor-pointer\x22\x20data-id=\x22starred-project\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22font-bold\x20text-lg\x20text-indigo-800\x20pointer-events-none\x22>แบบทดสอบที่ติดดาว\x20<i\x20class=\x22fas\x20fa-star\x20text-yellow-400\x22></i></h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x20pointer-events-none\x22>ทางลัดสำหรับแบบทดสอบที่ใช้บ่อย</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-700\x20mt-1\x20pointer-events-none\x22><i\x20class=\x22fas\x20fa-file\x20mr-1\x22></i>\x20','style','.question-editor-item','\x22\x20class=\x22start-presentation-list-btn\x20text-indigo-800\x20bg-indigo-100\x20hover:bg-indigo-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-chalkboard-teacher\x22></i>\x20นำเสนอ</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','attempts','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20max-w-md\x20bg-white/20\x20p-4\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-semibold\x20mb-2\x22>ผู้เล่นที่เข้าร่วม\x20(<span\x20id=\x22player-count\x22>0</span>)</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22player-list-lobby\x22\x20class=\x22flex\x20flex-wrap\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22start-game-btn\x22\x20class=\x22mt-6\x20bg-green-500\x20hover:bg-green-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x20transition-transform\x20hover:scale-105\x20disabled:bg-gray-400\x20disabled:cursor-not-allowed\x22\x20disabled>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-play\x22></i>\x20เริ่มการแข่งขัน\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x20คนที่ส่ง\x20ตอบถูก</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-green-700\x22>ตอบถูก\x20(','file-upload-input','cursor','/public/data/quizzes','toLocaleDateString','เซียนสมองไว','leaderboard-quiz','คุณแน่ใจหรือไม่ว่าต้องการลบแบบทดสอบ\x20\x22','slice','start-presentation-btn','width','.badges','input','touches','generate-from-text-btn','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้ผลลัพธ์เป็น\x20JSON\x20object\x20ที่มีโครงสร้างดังนี้:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20topic:\x20ชื่อหัวข้อของใบงาน\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20questions:\x20array\x20ของ\x20object\x20คำถาม\x20โดยแต่ละ\x20object\x20มี:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20questionText:\x20(string)\x20ตัวคำถาม\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20imageCode:\x20(string,\x20optional)\x20โค้ด\x20SVG\x20ถ้ามี\x0a\x20\x20\x20\x20','ไม่สามารถเชื่อมต่อกับฐานข้อมูลได้','<i\x20class=\x22fas\x20fa-times-circle\x20mr-2\x20text-red-600\x22></i>','<li>','starred','cancel-rename-quiz-btn','svg','</div><div\x20class=\x22space-y-2\x22>','ไม่พบเนื้อหาที่เพียงพอในลิงก์ที่ให้มา','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังเข้าร่วม...','trim','sort','toString','ref','Error\x20loading\x20quiz\x20for\x20student:','\x20mx-1\x20text-lg\x22></i></span>','เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลแบบทดสอบปัจจุบัน','project-detail','multiple_choice','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-h-60\x20overflow-y-auto\x20border\x20rounded-lg\x20p-2\x22>','Error\x20during\x20class\x20analysis:','message','question','latestSubmittedAt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-4\x20p-4\x20border\x20rounded-lg\x20','/public/data/projects','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.presentation-option','</h2>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<p\x20class=\x22mt-8\x22>รอผู้ควบคุมไปข้อต่อไป...</p>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09\x09\x20</div>','quiz-search-input','โดยให้\x20AI\x20วิเคราะห์หาหัวข้อหลักจากเนื้อหาที่ให้มาโดยอัตโนมัติ','เกิดข้อผิดพลาดในการโหลดแบบทดสอบ','.\x20แต่ละข้อต้องมีคำถาม\x20(questionText),\x20คำตอบที่เหมาะสม\x20(idealAnswer),\x20และคำอธิบาย\x20(explanation).\x20','กรุณาวางเนื้อหาก่อน','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>เฉลยที่ถูกต้อง:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','274192258111','perfect_score','results-display-select','<li\x20class=\x22','back-to-student-initial-btn','</li>','แบบทดสอบที่ติดดาว','เกิดข้อผิดพลาด:\x20ไม่พบโปรเจคที่เกี่ยวข้องกับแบบทดสอบนี้','qType','artifacts/','removeAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','modal-shuffle-select','\x20ครั้ง)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','Error\x20fetching\x20quiz\x20settings:','correctAnswerIndex','กรุณาใส่ชื่อโปรเจค','close','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20font-semibold\x20text-blue-600\x20mt-2\x22>+','ไม่สามารถเริ่มเกมได้','toISOString','from','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-semibold\x20text-blue-600\x22>','option','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x22>ส่งคำตอบแล้ว!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-8\x22>รอผู้เล่นคนอื่นสักครู่...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','<h1></h1>','470694lWHKLf','fas\x20fa-star\x20text-yellow-500','save-quiz-btn','ไม่พบแบบทดสอบ','per-q-countdown','Error\x20toggling\x20star\x20status:','<div\x20class=\x22p-3\x20text-gray-500\x22>ไม่พบแบบทดสอบ</div>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x20w-16\x22>อันดับ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ชื่อผู้ทำ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>คะแนน</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>สถานะ\x20(ผ่าน/ไม่ผ่าน)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>คะแนน\x20Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ไอคอนรางวัล</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20','label','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20max-w-4xl\x20grid\x20grid-cols-1\x20md:grid-cols-2\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','admin-action-buttons','เกิดข้อผิดพลาดในการบันทึก','prev-question-btn','</option>','.edit-question-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x20bg-green-100\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check-circle\x20text-5xl\x20text-green-500\x20mb-4\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-2\x22>ผู้เข้าสอบ:\x20<span\x20class=\x22font-semibold\x20text-green-800\x22>','user-id-display','strength-weakness-analysis-container','<p\x20class=\x22text-2xl\x20font-bold\x20mt-2\x20px-4\x20py-1\x20rounded-full\x20inline-block\x20','keys','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22bg-blue-100\x20text-blue-800\x20text-xs\x20font-medium\x20mr-2\x20px-2.5\x20py-0.5\x20rounded-full\x22>ส่งแล้ว\x20(','all','mousedown','1959730Leltnv','Error\x20opening\x20quiz\x20editor:','stem','/users/','ผู้ควบคุม\x20(ทดสอบ)','contents','none','แก้ไขข้อนี้','<div\x20class=\x22loader\x20mx-auto\x22></div>','/public/data/projects/','\x22\x20class=\x22start-live-race-btn\x20text-orange-800\x20bg-orange-100\x20hover:bg-orange-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-flag-checkered\x22></i>\x20แข่งขันสด</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','#student-project-leaderboard-content\x20thead','parts','สร้างคำถามแบบเติมคำในช่องว่าง\x20','keyup','mixed','\x22\x20class=\x22edit-question-btn\x20text-blue-600\x20hover:text-blue-800\x20p-1\x22\x20title=\x22แก้ไขข้อนี้\x22><i\x20class=\x22fas\x20fa-pen\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22','findIndex','filter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fa-fire\x20text-orange-500','loader-text','ไม่พบตารางสำหรับ\x20Export','submission','export-excel-btn','question-analytics-container','</label>\x0a\x20\x20\x20\x20</div>\x0a','\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','startsWith','scheduled','addEventListener','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20font-semibold\x22>','back-to-home-manual-release','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>','manage-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20จากข้อมูลทั้งหมด\x20โปรดวิเคราะห์และสรุปผลออกมาเป็น\x20JSON\x20object\x20ที่มีโครงสร้างดังนี้เท่านั้น:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20classStrengths:\x20จุดแข็งโดยรวมของห้องเรียนนี้\x20หรือคอนเซ็ปต์ที่นักเรียนส่วนใหญ่เข้าใจตรงกัน\x20(array\x20ของ\x20string)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20classWeaknesses:\x20จุดอ่อนโดยรวม\x20หรือความเข้าใจผิดที่พบบ่อยที่สุด\x20(array\x20ของ\x20string)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20teacherSuggestions:\x20ข้อเสนอแนะเชิงปฏิบัติ\x202-3\x20ข้อสำหรับครู\x20เพื่อนำไปพัฒนาการสอนในครั้งต่อไป\x20(array\x20ของ\x20string)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ตอบเป็นภาษาไทยทั้งหมด\x0a\x20\x20\x20\x20','ชื่อเล่นนี้ถูกใช้ไปแล้ว\x20กรุณาใช้ชื่ออื่น','schedule','ไม่ผ่าน','.delete-project-btn','adaptive-quiz-checkbox','questionStatus','<i\x20class=\x22fas\x20fa-user-graduate\x20fa-lg\x22></i>','\x22>ไม่ใช่</p>','create-project-btn','questions_only','contentEditable','\x22\x20class=\x22delete-project-btn\x20text-red-500\x20hover:text-red-700\x20text-sm\x20p-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x20ลบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','isArray','<p\x20class=\x22text-xs\x20text-gray-500\x20mt-1\x22>เปิด:\x20','text/html','กรุณาป้อนหัวข้อสำหรับใบงาน','เกี่ยวกับหัวข้อ\x20\x22','.star-quiz-btn','_opt1\x22\x20name=\x22question','defaultPassingScore','-tab-content','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22text-xs\x20font-medium\x20mr-2\x20px-2.5\x20py-0.5\x20rounded-full\x20','>\x20<label\x20for=\x22status-inactive\x22>ปิดใช้งาน\x20(Inactive)</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20name=\x22status-option\x22\x20value=\x22schedule\x22\x20id=\x22status-schedule\x22\x20','originalQuestion','generated-quiz-container','string','teacherSuggestions','Error\x20saving\x20settings:','BOOLEAN','\x20ตัวเลือก,\x20ระบุคำตอบที่ถูกต้อง,\x20และเพิ่มคำอธิบายสั้นๆ.\x20','results-quiz-title','createObjectURL','join-live-game-btn','display','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังโหลด...','student-quiz-leaderboard-tab','delete-all-students-btn','.score','12nAiLEB','Programmatic\x20checks\x20failed.\x20Deferring\x20to\x20AI\x20for\x20grading.','name_desc','กรุณาเลือกสถานะ','font-bold\x20text-red-700\x20line-through','สร้างชุดคำถามจับคู่\x20','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-8\x22>รอผู้ควบคุมเริ่มเกมสักครู่...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mt-4\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','%)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-yellow-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-yellow-700\x20font-semibold\x22>คะแนนสูงสุด</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-yellow-900\x22>','download','\x22\x20class=\x22rename-quiz-btn\x20text-yellow-800\x20bg-yellow-100\x20hover:bg-yellow-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-edit\x22></i>\x20แก้ไขชื่อ</button>\x0a\x09\x09\x09\x09\x09\x09\x09\x20<button\x20data-quiz-id=\x22','<p\x20class=\x22text-red-500\x20text-center\x22>ขออภัย,\x20ไม่สามารถสร้างแบบทดสอบจากลิงก์ได้</p>','\x20ข้อ\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>','th-TH','project-sort-select','class','answers','\x22\x20data-name=\x22','add','684438pTqIrr','outerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20นักเรียนคนหนึ่งทำแบบทดสอบเรื่อง\x20\x22','เกิดข้อผิดพลาด:\x20','Error\x20joining\x20live\x20game:','แบบทดสอบนี้ปิดใช้งานอยู่','เกิดข้อผิดพลาดในการโหลดการตั้งค่า','<i\x20class=\x22fas\x20fa-home\x20mr-2\x22></i>กลับไปหน้าแรก','border-4','cancel-admin-login-btn','\x22\x20class=\x22text-center\x20p-4\x20text-gray-500\x22>ยังไม่มีนักเรียนส่งแบบทดสอบนี้</td></tr>','min','\x0a\x20\x20\x20\x20\x20\x20\x20\x20สร้างชุดคำถามสำหรับใบงานที่พิมพ์ได้\x20จำนวน\x20','Error\x20generating\x20from\x20link:','rows','confirm-quiz-settings-btn','เกี่ยวกับหัวข้อ\x20\x27ความรู้ทั่วไป\x27','\x22>ใช่</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22','.\x20แต่ละข้อต้องมีคำถาม\x20(questionText),\x20คำตอบที่ถูกต้อง\x20(correctAnswer\x20เป็น\x20true\x20หรือ\x20false),\x20และคำอธิบาย\x20(explanation).\x20','<i\x20class=\x22fas\x20fa-save\x22></i>\x20บันทึกการแก้ไข','.rename-quiz-btn','onload','generate-from-link-btn','body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22quiz-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20saving\x20submission:','ยังไม่ส่ง','Error\x20fetching\x20student\x20rankings:','submit','Enter','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22presentation-options\x22\x20class=\x22grid\x20grid-cols-1\x20md:grid-cols-2\x20gap-4\x20md:gap-6\x20items-stretch\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','num-choices','.delete-student-btn','rgba(79,\x2070,\x20229,\x201)','bg-white/30','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x20w-16\x22>อันดับ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ชื่อผู้เล่น</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-center\x22>คะแนนรวม\x20(Points)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-2\x20px-3\x20text-left\x22>ไอคอนรางวัลที่ได้รับ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22presentation-explanation\x22\x20class=\x22hidden\x20mt-8\x20p-4\x20bg-blue-50\x20text-blue-800\x20rounded-lg\x20text-left\x20text-lg\x20md:text-xl\x20max-w-4xl\x20mx-auto\x20leading-relaxed\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22font-bold\x22>คำอธิบาย:</strong>\x20','error','MathJax\x20typeset\x20error\x20(analytics):','allResponses','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-1/2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20name=\x22question','worksheet-input-area','<p\x20class=\x22text-center\x20text-red-500\x22>ไม่สามารถโหลดคลังข้อสอบได้</p>','.</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-circle\x20mr-2\x20text-gray-300\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','กรุณาวาง\x20URL\x20ของบทความก่อน','เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลแบบทดสอบของเกมนี้','\x20ข้อ,\x20โดยให้มีทั้งคำถามแบบปรนัย\x20(questionType:\x20\x27multiple_choice\x27)\x20และแบบเติมคำที่ให้พิมพ์ตอบเอง\x20(questionType:\x20\x27short_answer\x27)\x20คละกันไป.\x20สำหรับปรนัย\x20ให้มี\x20','bg-red-200\x20text-red-800','textContent','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ไม่มีคำอธิบาย','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x22>-</td>','\x22\x20class=\x22w-full\x20sm:w-auto\x20flex-1\x20bg-blue-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-blue-700\x20flex\x20items-center\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','scheduled_pending','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','border-green-500','quiz-schedule-start-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-8\x20w-full\x20max-w-lg\x20bg-black/20\x20p-4\x20rounded-lg\x20text-left\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20mb-3\x20text-center\x22>อันดับอื่นๆ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x20text-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<td\x20class=\x22py-2\x20px-4\x20border-b\x22>-</td>','เกิดข้อผิดพลาดในการสร้างแบบทดสอบ\x20โปรดลองอีกครั้ง','studentName','.correctStreak','\x22\x20value=\x22false\x22\x20','leaderboard','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-500\x22>จากเรื่อง:\x20','text-purple-600','close-game-final-btn','<i\x20class=\x22fas\x20fa-save\x20mr-2\x22></i>บันทึกและสร้างรหัส','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-bold\x20text-indigo-800\x20mb-2\x22>ส่งคำตอบเรียบร้อยแล้ว</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-700\x20mb-2\x22>นี่คือคะแนนของคุณ:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-5xl\x20font-bold\x20my-2\x22>','appendChild','modal-timer-mode-select','เกิดข้อผิดพลาดในการอัปเดตสถานะ','global-live-game-modal','revealed','48goSPnF','.live-answer-btn,\x20#live-submit-short-answer-btn','แบบทดสอบซ่อมเสริม','กำลังสร้างแบบทดสอบจากหัวข้อ...','questionText','กรุณาป้อนหัวข้อก่อน','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20คำตอบรายข้อ:\x20','<td\x20class=\x22py-2\x20px-4\x20border-b\x22><span\x20class=\x22bg-yellow-100\x20text-yellow-800\x20text-xs\x20font-medium\x20mr-2\x20px-2.5\x20py-0.5\x20rounded-full\x22>ยังไม่ส่ง</span></td>','</p>','<br>','/questionBank','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','text','ลบแบบทดสอบสำเร็จแล้ว','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-green-600\x20font-bold\x22>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-sm\x20font-normal\x20px-2\x20py-1\x20rounded\x20','\x22\x20value=\x22','</td>','cancel-create-project-btn','touchmove','text-input-area','ไม่พบข้อมูลแบบทดสอบสำหรับทดลอง','#per-question-options\x20select','leaderboard-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','answeredCurrentQuestion','<p><strong>คำตอบของคุณ:</strong>\x20','จากเนื้อหาต่อไปนี้:\x20\x22','timerMode','projectId','ตั้งเวลา\x20(เปิด)','getContext','</div>','ตอบถูก\x203\x20ข้อติดต่อกัน','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22start-remedial-quiz-btn\x22\x20class=\x22mt-4\x20bg-indigo-600\x20text-white\x20py-2\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-indigo-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20เข้าใจแล้ว\x20ลองอีกครั้ง!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','สร้างโปรเจคสำเร็จ!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20จากหัวข้อเหล่านี้ที่นักเรียนยังไม่เข้าใจ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','lastAnswerCorrect','analytics','บันทึกคำถามลงคลังข้อสอบส่วนตัวแล้ว','choices_only','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-bold\x20text-purple-700\x20mb-2\x22>ผลการทดสอบ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-4xl\x20font-bold\x20my-2\x22>','fullscreenElement','AIzaSyBgBJ28OshxBTnqUzCKsv7nve2Xj899fwA','scores-tab-content','\x22\x20name=\x22question_single\x22\x20value=\x22','remedialContent','fill_in_with_choices','student-result-area','currentQuestionIndex','Invalid\x20response\x20structure\x20from\x20AI.','<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22\x20data-answer=\x22true\x22>ใช่</button>','editable-text-','replace','querySelector','button','blockReason','topic-input','เกิดข้อผิดพลาดในการสร้างแบบทดสอบซ่อมเสริม','stringify','includes','per_question','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20font-semibold\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22radio\x22\x20name=\x22correct-answer-','.pdf','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22per-question-timer-container\x22\x20class=\x22mb-4\x22></div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-6\x20p-4\x20border\x20rounded-lg\x20bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22font-semibold\x20mb-3\x22\x20id=\x22per-question-text\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x22\x20id=\x22per-question-options\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22next-question-timed-btn\x22\x20class=\x22w-full\x20mt-4\x20bg-indigo-600\x20text-white\x20py-3\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-indigo-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-arrow-right\x20mr-2\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','whole_quiz','application/json','\x20ข้อ)</span></p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x20pointer-events-none\x22>สร้างเมื่อ:\x20','#bank-input-area\x20input[type=\x22checkbox\x22]:checked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22badge-icon\x20text-center\x20p-2\x20bg-white\x20rounded-lg\x20shadow\x22\x20style=\x22animation-delay:\x20','random','AI\x20request\x20was\x20blocked.\x20Reason:\x20','per-question-options','bg-green-500','fa-bolt\x20text-blue-500','</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20mb-8\x20text-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>ชื่อ:\x20....................................................................</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>วันที่:\x20......./......./.........</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>คะแนน:\x20.................</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','editor-quiz-topic','live-game','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-test-btn','getAttributeNS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','.edit-quiz-btn','mouseup','line-through\x20text-red-700','แบบทดสอบนี้จะเปิดให้ทำในวันที่\x20','find','2-digit','FileReader\x20error:','localeCompare','Error\x20deleting\x20project:','ownerSVGElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-semibold\x20text-red-700\x20mb-2\x22><i\x20class=\x22fas\x20fa-exclamation-circle\x20mr-2\x22></i>จุดอ่อน\x20/\x20ความเข้าใจผิดที่พบบ่อย</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22list-disc\x20list-inside\x20space-y-1\x20bg-red-50\x20p-3\x20rounded-lg\x20text-red-800\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','OBJECT','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-700\x20mt-1\x20pointer-events-none\x22><i\x20class=\x22fas\x20fa-file\x20mr-1\x22></i>\x20','xmlns:w=\x27urn:schemas-microsoft-com:office:word\x27\x20','image/png','MathJax','ลบโปรเจคสำเร็จแล้ว','<div\x20id=\x22q-image-container-','title','toDataURL','push','54299yoxAsN','user','remove','candidates','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22close-game-final-btn\x22\x20class=\x22mt-8\x20bg-red-600\x20text-white\x20py-2\x20px-6\x20rounded-lg\x20hover:bg-red-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times-circle\x20mr-2\x22></i>จบเกมและกลับหน้าหลัก\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toggle','file-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22admin-action-buttons\x22\x20class=\x22text-center\x20mt-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22reveal-answer-btn\x22\x20class=\x22bg-yellow-500\x20hover:bg-yellow-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20เฉลย\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','preventDefault','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20py-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mx-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-4\x20text-gray-600\x22>AI\x20กำลังวิเคราะห์ภาพรวม...\x20อาจใช้เวลาสักครู่</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','podium','\x22.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20คำถามควรเป็นแบบปลายเปิด,\x20เติมคำ,\x20หรือคำนวณ\x20ที่นักเรียนสามารถเขียนคำตอบได้\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20class=\x22delete-quiz-btn\x20text-red-500\x20hover:text-red-700\x20text-lg\x20p-1\x20ml-auto\x22\x20title=\x22ลบแบบทดสอบ\x22><i\x20class=\x22fas\x20fa-trash-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','options','Error\x20showing\x20quiz\x20detail\x20view:','topic','<div><input\x20type=\x22radio\x22\x20id=\x22q','opacity','true_false','name','STOP','.ideal-answer-input','\x20ข้อ.\x20แต่ละข้อต้องมีคำถาม\x20(questionText\x20containing\x20\x27.....\x27),\x20คำตอบที่เหมาะสม\x20(idealAnswer),\x20และคำอธิบาย\x20(explanation).\x20','กรุณาเลือกข้อสอบอย่างน้อย\x201\x20ข้อ','\x20ครั้ง)</span></td>','เกิดข้อผิดพลาดในการคัดลอกแบบทดสอบ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-start\x20gap-3\x20p-2\x20border-b\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20value=\x27','text-white','data:application/vnd.ms-word;charset=utf-8,','\x5cdiv','border-green-300\x20bg-green-50','export-image-btn','link-input-area','.\x20แต่ละข้อต้องมีคำถาม\x20(questionText\x20containing\x20\x27.....\x27),\x20คำตอบที่เหมาะสม\x20(idealAnswer),\x20และคำอธิบาย\x20(explanation).\x20','_opt','\x22\x20class=\x22w-full\x20p-1\x20border\x20rounded-md\x20ideal-answer-input\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ไม่สามารถโหลดรายการโปรเจคได้','quiz-start-time','<p\x20class=\x22text-center\x20text-red-500\x22>ไม่ได้รับข้อมูลการวิเคราะห์จาก\x20AI</p>','<i\x20class=\x22fas\x20fa-sign-in-alt\x20mr-2\x22></i>เข้าร่วม','analytics-tab-btn','</p></div>','topic-input-area','results_','.move-quiz-btn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','เกิดข้อผิดพลาดในการบันทึกคำตอบของคุณ','กรุณาเลือกโปรเจคปลายทาง','<i\x20class=\x22fas\x20fa-arrow-left\x20mr-2\x22></i>กลับไปหน้าจัดการโปรเจค','create-from-bank-btn','\x20รายการ\x20เพื่อใช้เป็นตัวเลือกใน\x20dropdown.\x20','worksheet-topic-input','text-content-input','export-leaderboard-pdf-btn','การยืนยันตัวตนล้มเหลว','closest','correctStreak','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22my-4\x20flex\x20justify-center\x22>','live-options-container','input[type=\x22radio\x22]:checked','students','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-bold\x22>','student-join-game-view','คะแนน','fullscreenchange','touchcancel','ท็อปฟอร์ม','Error\x20creating\x20project:','\x20ข้อ.\x20แต่ละข้อต้องมีคำถาม\x20(questionText),\x20คำตอบที่ถูกต้อง\x20(correctAnswer\x20เป็น\x20true\x20หรือ\x20false),\x20และคำอธิบาย\x20(explanation).\x20','rename-quiz-modal','text-green-700\x20bg-green-100','mousemove','lobby','finishReason','เกิดข้อผิดพลาดในการบันทึกแบบทดสอบ','\x22\x20data-topic=\x22','<tr><td\x20colspan=\x22','<div\x20id=\x22generated-quiz-actions\x22\x20class=\x22mt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22save-quiz-btn\x22\x20class=\x22w-full\x20bg-green-600\x20text-white\x20py-2\x20px-4\x20rounded-lg\x20font-semibold\x20hover:bg-green-700\x22><i\x20class=\x22fas\x20fa-save\x20mr-2\x22></i>บันทึกและสร้างรหัส</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','quiz-settings-modal','max','admin','getElementById','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-bold\x20text-green-600\x22>','active','student-quiz-area','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x22>','modal-message','Error\x20moving\x20quiz:','undefined','\x20class=\x22accent-green-600\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','q-text-','delete-svg-btn','%</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22earned-badges-container\x22\x20class=\x22mt-4\x20flex\x20justify-center\x20gap-4\x20flex-wrap\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-2xl\x20font-bold\x20mb-2\x22>เริ่มเกม:\x20','date_asc','pointsLastQuestion','start-live-race-generated-btn','):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20rows=\x222\x22>','num-questions','cancel-delete-btn','explanation','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ไม่ได้ตอบ','ไม่สามารถโหลดข้อมูลอันดับได้','1:274192258111:web:4120c9118229b5644dd48a','confirm-rename-quiz-btn','save','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','\x20ข้อ.\x20แต่ละข้อต้องมีประโยคคำถามที่มีช่องว่าง\x20(questionText\x20containing\x20\x27.....\x27),\x20ตัวเลือก\x20','get','>\x20<label\x20for=\x22status-active\x22>เปิดใช้งาน\x20(Active)</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20name=\x22status-option\x22\x20value=\x22inactive\x22\x20id=\x22status-inactive\x22\x20','[data-is-correct=\x22true\x22]','<option\x20value=\x22\x22>ไม่มีโปรเจคอื่นให้ย้ายไป</option>','หมดเวลา!\x20กำลังส่งคำตอบ...','<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20text-center\x20flex\x20flex-col\x20items-center\x20justify-center\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x22>คุณเข้าร่วมแล้ว!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x20mt-2\x22>ชื่อของคุณคือ:\x20<span\x20class=\x22font-bold\x22>','inactive','admin-password-input','project-name-input','startTime','dispatchEvent','leaderboard-quiz-tab-btn','\x22></i>\x0a</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','disabled','Error\x20listening\x20for\x20student\x20profiles:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x20font-semibold\x20text-indigo-600\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20renaming\x20quiz:','9rujmkK','mode-switcher-btn','<div\x20class=\x22','modal-passing-score-input','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20text-left\x20p-2\x20border-b\x20hover:bg-gray-50\x20flex\x20items-center\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22font-semibold\x22>\x0a\x20\x20','start-remedial-quiz-btn','\x22\x20class=\x22my-4\x20flex\x20justify-center\x22>','ไม่สามารถสร้างโปรเจคได้','close-student-rankings-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-container\x20bg-white\x20p-4\x20rounded-lg\x20shadow\x20hover:shadow-lg\x20transition-all\x20duration-300\x20border\x20border-gray-200\x20flex\x20flex-col\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22project-card-content\x20cursor-pointer\x22\x20data-id=\x22','next-question-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22mt-2\x20p-2\x20bg-gray-100\x20text-sm\x22><strong\x20class=\x22text-gray-700\x22>คำตอบที่คาดหวัง:</strong>\x20<span\x20id=\x22q-ideal-','link-tab','shuffle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20name=\x22status-option\x22\x20value=\x22active\x22\x20id=\x22status-active\x22\x20','confirm-join-game-btn','classList','per-question-text','results-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20p-1\x20hover:bg-gray-100\x20rounded\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','.pointsLastQuestion','bank-input-area','idealAnswer','currentTarget','กำลังดึงข้อมูลจากลิงก์...','PERFECT_SCORE','isRemedial','select','entries','q-explanation-','join','checked','project-quizzes-list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22podium-step\x20text-center\x20flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-circle\x20text-6xl\x20mb-2\x20text-gray-300\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-bold\x20text-2xl\x22>','no-projects-msg','score-distribution-chart','icon','project-dashboard-view','/studentProfiles','isAdaptive','quiz-schedule-end-container','check-presentation-answer-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','generated-quiz-actions','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-grow\x20flex\x20flex-col\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-3xl\x20font-bold\x20mb-8\x20text-center\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-4\x20border\x20rounded-lg\x20hover:bg-gray-50\x20flex\x20flex-col\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-start\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quiz-result-card\x20cursor-pointer\x20flex-grow\x22\x20data-quiz-id=\x22','setFont','move-quiz-project-select','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22live-game-bg\x20text-white\x20rounded-lg\x20p-8\x20flex\x20flex-col\x20h-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20text-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>ข้อที่\x20','autoTable','height','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-student-name=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22next-live-question-btn\x22\x20class=\x22bg-blue-500\x20hover:bg-blue-600\x20text-white\x20font-bold\x20py-3\x20px-8\x20rounded-lg\x20text-2xl\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังตรวจ...','\x22?\x20ข้อมูลคะแนนและป้ายรางวัลของนักเรียนคนนี้จะถูกลบไปด้วย','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x22>','\x20คน)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-green-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-green-700\x20font-semibold\x22>คะแนนเฉลี่ย</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-green-900\x22>','clientX','type','on_fire','setAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-semibold\x20text-blue-700\x20mb-2\x22><i\x20class=\x22fas\x20fa-chalkboard-teacher\x20mr-2\x22></i>ข้อเสนอแนะสำหรับครู</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22list-disc\x20list-inside\x20space-y-1\x20bg-blue-50\x20p-3\x20rounded-lg\x20text-blue-800\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ผู้ไม่ยอมแพ้','</span>\x20วินาที</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','topic-tab','mouseleave','size','export-leaderboard-word-btn','STRING','ข้อมูลไม่ครบถ้วน\x20ไม่สามารถบันทึกได้','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20','textarea','Error\x20saving\x20quiz\x20edits:','เกิดข้อผิดพลาดในการลบนักเรียนทั้งหมด','สร้างคำถามแบบใช่/ไม่ใช่\x20','modal-timer-duration-container','bg-red-100\x20text-red-800','QUICK_THINKER','perseverance','_opt0\x22>ใช่</label></div>','endsWith',',\x20โดยให้มีทั้งคำถามแบบปรนัย\x20(questionType:\x20\x27multiple_choice\x27)\x20และแบบเติมคำที่ให้พิมพ์ตอบเอง\x20(questionType:\x20\x27short_answer\x27)\x20คละกันไป.\x20สำหรับปรนัย\x20ให้มี\x20','\x22\x20class=\x22admin-try-quiz-list-btn\x20text-teal-800\x20bg-teal-100\x20hover:bg-teal-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-vial\x22></i>\x20ทดลอง</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','.quiz-status-btn','Firebase\x20initialization\x20failed:','far\x20fa-star','ไม่พบข้อมูลแบบทดสอบ','shuffle-setting-select','.answeredCurrentQuestion','\x22\x20class=\x22duplicate-quiz-btn\x20text-gray-800\x20bg-gray-100\x20hover:bg-gray-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-copy\x22></i>\x20คัดลอก</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-sm\x20text-gray-600\x22>','projectName','td,\x20th','<div\x20class=\x22mt-2\x20p-2\x20bg-blue-50\x20text-xs\x22><strong\x20class=\x22text-blue-700\x22>คำอธิบาย:</strong>\x20<span\x20id=\x22q-explanation-','quiz-status-options','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>เฉลยที่ถูกต้อง\x20(คู่ของคำถามนี้):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','ผ่านฉลุย','อัปเดตสถานะสำเร็จ','parse','<tr><td\x20colspan=\x224\x22\x20class=\x22text-center\x20p-4\x20text-gray-500\x22>ยังไม่มีข้อมูลคะแนนสำหรับตารางผู้นำ</td></tr>','จำนวนนักเรียน','N/A','export-word-btn','target','\x20แบบทดสอบ</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x20mt-2\x20h-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Adaptive\x20flow\x20failed:','raw','analyze-strengths-btn','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','input[type=\x22text\x22]','input[name=\x22status-option\x22]','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-gray-600\x22>\x20คนส่ง</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','admin-dashboard','starred-project','admin-password-modal','scores-tab-btn','สร้างแบบทดสอบปรนัย\x20','</h3>','fa-user-astronaut\x20text-blue-700','fa-dumbbell\x20text-gray-700','bank-tab','exists','innerHTML','baseVal','http://www.w3.org/2000/svg','POST','Error\x20fetching\x20projects\x20for\x20move:','quiz-leaderboard-table-container','คำถามถัดไป','</span></div>','สร้างคำถามแบบเติมคำในช่องว่าง\x201\x20ข้อ\x20','\x20text-lg\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quiz-results-view','fill_in_the_blank','answering','bg-blue-100\x20text-blue-800','\x22><i\x20class=\x22fas\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20จากข้อมูลข้างต้น\x20โปรดสรุปเนื้อหาสำคัญเพื่อสอนซ่อมเสริมนักเรียนคนนี้\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้อธิบายด้วยภาษาที่เข้าใจง่าย\x20เป็นกันเอง\x20เหมือนติวเตอร์ใจดี\x0a\x20\x20\x20\x20\x20\x20\x20\x20สรุปมาเป็นย่อหน้าเดียวหรือสองย่อหน้าสั้นๆ\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ให้ผลลัพธ์เป็น\x20JSON\x20object\x20ที่มี\x20key\x20ชื่อ\x20\x22remedialContent\x22\x20เท่านั้น\x0a\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-indigo-700\x20pointer-events-none\x22>','student-name-select','ตอบถูกทุกข้อในแบบทดสอบนี้','\x22\x20class=\x22edit-quiz-btn\x20text-blue-800\x20bg-blue-100\x20hover:bg-blue-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-edit\x22></i>\x20แก้ไข</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22','ring-2','export-leaderboard-excel-btn','<div\x20class=\x22mt-2\x20space-y-1\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22','#student-quiz-leaderboard-content\x20thead','</body></html>','substring','Authentication\x20failed:','next-live-question-btn','live-submit-short-answer-btn','<p\x20class=\x22text-green-700\x22><strong>คำตอบที่เหมาะสม:</strong>\x20','#10B981','2741','/submissions','move-quiz-modal','NUMBER','\x5ctimes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>ตัวเลือกและเฉลย:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x20mt-1\x22>','show_results_only','Error\x20generating\x20quiz:','\x20<i\x20class=\x22fas\x20fa-arrow-right\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<html\x20xmlns:o=\x27urn:schemas-microsoft-com:office:office\x27\x20','ไม่สามารถเพิ่มนักเรียนได้','include-images-checkbox','file-input-area','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ส่งแล้ว','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-700\x20mb-1\x22>คำถามข้อที่\x20','fill_in_no_choices','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x20md:col-span-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22presentation-short-answer-input\x22\x20class=\x22w-full\x20p-4\x20text-2xl\x20border-2\x20border-gray-300\x20rounded-lg\x20bg-white\x20text-gray-800\x22\x20rows=\x222\x22\x20placeholder=\x22พิมพ์คำตอบที่นี่...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22check-presentation-answer-btn\x22\x20class=\x22mt-4\x20bg-blue-600\x20text-white\x20py-3\x20px-6\x20rounded-lg\x20text-xl\x20hover:bg-blue-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20ตรวจคำตอบ\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22presentation-ai-result\x22\x20class=\x22hidden\x20mt-4\x20text-2xl\x20font-bold\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','results-table','script,\x20style,\x20nav,\x20footer,\x20header,\x20aside','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','value','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','>\x20<label\x20for=\x22status-schedule\x22>ตั้งเวลาเปิด/ปิด\x20(Schedule)</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20/\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>AI\x20กำลังตรวจคำตอบ...','\x20คู่.\x20สำหรับแต่ละคู่\x20ให้สร้างเป็น\x20JSON\x20object\x20แยกกัน\x20โดยแต่ละ\x20object\x20ต้องมี:\x20\x27questionType\x27\x20(ตั้งค่าเป็น\x20\x27matching_item\x27),\x20\x27stem\x27\x20(คำถามฝั่งซ้าย),\x20\x27correctResponse\x27\x20(คำตอบที่ถูกต้องฝั่งขวา),\x20และ\x20\x27explanation\x27.\x20นอกจากนี้\x20ให้สร้าง\x20key\x20ชื่อ\x20\x27allResponses\x27\x20ซึ่งเป็น\x20array\x20ที่รวบรวม\x20\x27correctResponse\x27\x20ทั้งหมด\x20','correctResponse','execCommand','docs','position','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20id=\x22q_opt_true\x22\x20name=\x22question_single\x22\x20value=\x22true\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q_opt_true\x22>ใช่</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22radio\x22\x20id=\x22q_opt_false\x22\x20name=\x22question_single\x22\x20value=\x22false\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required><label\x20for=\x22q_opt_false\x22>ไม่ใช่</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-gray-600\x22>เฉลย:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-1\x20mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22><input\x20type=\x22radio\x22\x20name=\x22correct-answer-','bg-green-300','fa-shield-alt\x20text-gray-600','removeEventListener','เกิดข้อผิดพลาดในการลบโปรเจค','quiz-end-time','close-presentation-btn','correctAnswer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','จากไฟล์ที่แนบมานี้,\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a','ข้อที่\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-blue-100\x20p-4\x20rounded-lg\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-blue-700\x20font-semibold\x22>อัตราการส่ง</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x20text-blue-900\x22>','dataset','date_desc','cancel-quiz-status-btn','matching_item','\x0a\x20\x20\x20\x20\x20\x20\x20\x20คุณคือนักวิเคราะห์การศึกษาผู้เชี่ยวชาญ\x20ภารกิจของคุณคือการวิเคราะห์ภาพรวมของห้องเรียนจากข้อมูลการทำแบบทดสอบ\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20แบบทดสอบเรื่อง:\x20\x22','<p\x20class=\x22text-gray-400\x20text-center\x20p-2\x22>ยังไม่มีนักเรียนในโปรเจคนี้</p>','quiz','<span\x20title=\x22','\x0a\x20\x20<span\x20class=\x22text-sm\x20font-normal\x20text-gray-500\x22>(','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x20font-semibold\x20text-blue-600\x22>','onerror','คัดลอกไม่สำเร็จ','save-quiz-edits-btn','</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x20pointer-events-none\x22>สร้างเมื่อ:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-6\x20bg-amber-50\x20border-l-4\x20border-amber-400\x20rounded-r-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20text-amber-800\x22>ทบทวนก่อนไปต่อนะ!</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-2\x20text-gray-700\x22>','ไม่ใช่','hidden','6022320ZXDwbH','manual_release','AI\x20grading\x20failed:','result'];_0x4783=function(){return _0x5758be;};return _0x4783();}function handleDeleteStudent(_0x447b69){const _0x1f37b9=_0xf78338;showConfirmation('คุณแน่ใจหรือไม่ว่าต้องการลบนักเรียนชื่อ\x20\x22'+_0x447b69+_0x1f37b9(0x3af),async()=>{const _0x114050=_0x1f37b9;if(!currentProjectId||!currentProjectData)return;const _0x3fa563=currentProjectData[_0x114050(0x334)][_0x114050(0x1f4)](_0x57c12d=>_0x57c12d!==_0x447b69);try{const _0xbbac4f=doc(db,'artifacts/'+appId+_0x114050(0x1a6),currentProjectId),_0x4ab084=doc(db,_0x114050(0x1b9)+appId+_0x114050(0x1eb)+currentProjectId+'/studentProfiles',_0x447b69),_0x3893dc=writeBatch(db);_0x3893dc[_0x114050(0x4bf)](_0xbbac4f,{'students':_0x3fa563}),_0x3893dc[_0x114050(0x13a)](_0x4ab084),await _0x3893dc[_0x114050(0xb5)]();}catch(_0x223a61){console[_0x114050(0x266)](_0x114050(0x46b),_0x223a61),showMessage('เกิดข้อผิดพลาดในการลบนักเรียน');}});}function handleDeleteAllStudents(){const _0x5e3316=_0xf78338;showConfirmation(_0x5e3316(0x490),async()=>{const _0x43a572=_0x5e3316;if(!currentProjectId)return;try{const _0x11e08f=doc(db,_0x43a572(0x1b9)+appId+'/public/data/projects',currentProjectId),_0x11a3eb=collection(db,_0x43a572(0x1b9)+appId+_0x43a572(0x1eb)+currentProjectId+_0x43a572(0x39e)),_0x31d751=await getDocs(_0x11a3eb),_0x3ca679=writeBatch(db);_0x3ca679['update'](_0x11e08f,{'students':[]}),_0x31d751['forEach'](_0x349561=>_0x3ca679[_0x43a572(0x13a)](_0x349561[_0x43a572(0x19a)])),await _0x3ca679[_0x43a572(0xb5)]();}catch(_0x466056){console[_0x43a572(0x266)](_0x43a572(0x4de),_0x466056),showMessage(_0x43a572(0x3c4));}});}async function handleFileUpload(_0x42b8f8){const _0x51a681=_0xf78338,_0x375326=_0x42b8f8['target']['files'][0x0];if(!_0x375326)return;if(_0x375326[_0x51a681(0x3b3)]!=='application/pdf'&&!_0x375326[_0x51a681(0x30a)][_0x51a681(0x3cb)](_0x51a681(0x150))){showMessage(_0x51a681(0x50a)),_0x42b8f8[_0x51a681(0x3e2)][_0x51a681(0x429)]='';return;}const _0x4dd4b3=document['getElementById'](_0x51a681(0x4ff)),_0x475017=document[_0x51a681(0x349)](_0x51a681(0x1f7)),_0x2b2e73=document[_0x51a681(0x349)](_0x51a681(0x220));document[_0x51a681(0x349)]('quiz-generation-area')[_0x51a681(0x388)]['remove']('hidden'),_0x2b2e73[_0x51a681(0x3f5)]='',_0x4dd4b3[_0x51a681(0x388)]['remove'](_0x51a681(0x451)),_0x475017['textContent']='กำลังอ่านและเตรียมไฟล์...';const _0xeef11a=new FileReader();_0xeef11a[_0x51a681(0xf4)](_0x375326),_0xeef11a[_0x51a681(0x256)]=async()=>{const _0x23a17f=_0x51a681;try{const _0x5c2f90=_0xeef11a[_0x23a17f(0x455)][_0x23a17f(0x50e)](',')[0x1],_0x31f813=_0x375326['type'];await generateQuizFromFile(_0x31f813,_0x5c2f90);}catch(_0x604464){console['error'](_0x23a17f(0x4ea),_0x604464),showMessage(_0x23a17f(0x480)+_0x604464['message']),_0x4dd4b3[_0x23a17f(0x388)]['add'](_0x23a17f(0x451));}finally{_0x42b8f8[_0x23a17f(0x3e2)][_0x23a17f(0x429)]='';}},_0xeef11a[_0x51a681(0x44b)]=_0x188215=>{const _0x170e09=_0x51a681;console[_0x170e09(0x266)](_0x170e09(0x2e7),_0x188215),showMessage('เกิดข้อผิดพลาดในการอ่านไฟล์'),_0x4dd4b3[_0x170e09(0x388)][_0x170e09(0x240)]('hidden');};}function sanitizeQuizData(_0x442803){const _0x281b07=_0xf78338;if(!_0x442803||!_0x442803[_0x281b07(0x47e)])return _0x442803;const _0x17c394={'imes':_0x281b07(0x418),'div':_0x281b07(0x314)},_0x1d5998=_0x1269b4=>{const _0x429d44=_0x281b07;if(typeof _0x1269b4!==_0x429d44(0x221))return _0x1269b4;let _0xbf512f=_0x1269b4;for(const [_0x52d480,_0x5d23c4]of Object[_0x429d44(0x394)](_0x17c394)){const _0xec44de=new RegExp('\x5cb'+_0x52d480+'\x5cb','g');_0xbf512f=_0xbf512f[_0x429d44(0x2c2)](_0xec44de,_0x5d23c4);}return _0xbf512f;};return _0x442803[_0x281b07(0x306)]&&(_0x442803[_0x281b07(0x306)]=_0x1d5998(_0x442803[_0x281b07(0x306)])),_0x442803[_0x281b07(0x47e)][_0x281b07(0xff)](_0x52113e=>{const _0x1e0c50=_0x281b07;_0x52113e[_0x1e0c50(0x28f)]=_0x1d5998(_0x52113e['questionText']),_0x52113e[_0x1e0c50(0x304)]&&(_0x52113e['options']=_0x52113e[_0x1e0c50(0x304)][_0x1e0c50(0xfa)](_0x1d5998)),_0x52113e[_0x1e0c50(0x35c)]&&(_0x52113e[_0x1e0c50(0x35c)]=_0x1d5998(_0x52113e['explanation'])),_0x52113e[_0x1e0c50(0x1e4)]&&(_0x52113e[_0x1e0c50(0x1e4)]=_0x1d5998(_0x52113e['stem'])),_0x52113e[_0x1e0c50(0x42f)]&&(_0x52113e[_0x1e0c50(0x42f)]=_0x1d5998(_0x52113e[_0x1e0c50(0x42f)])),_0x52113e['allResponses']&&(_0x52113e['allResponses']=_0x52113e[_0x1e0c50(0x268)][_0x1e0c50(0xfa)](_0x1d5998));}),_0x442803;}const mathPromptInstruction=_0xf78338(0x153);async function handleGenerateFromLink(){const _0x3a6d2e=_0xf78338,_0xb444e7=document[_0x3a6d2e(0x349)](_0x3a6d2e(0x511)),_0x1f21af=document[_0x3a6d2e(0x349)](_0x3a6d2e(0x166)),_0x26632e=_0xb444e7[_0x3a6d2e(0x429)][_0x3a6d2e(0x197)](),_0x3f036d=_0x1f21af[_0x3a6d2e(0x429)][_0x3a6d2e(0x197)]();if(!_0x26632e){showMessage(_0x3a6d2e(0x26d));return;}const _0x5e410b=document[_0x3a6d2e(0x349)](_0x3a6d2e(0x4ff)),_0x33eefb=document[_0x3a6d2e(0x349)](_0x3a6d2e(0x1f7)),_0x4e3b38=document[_0x3a6d2e(0x349)](_0x3a6d2e(0x220)),_0x41800f=document['getElementById']('generate-from-link-btn');document[_0x3a6d2e(0x349)](_0x3a6d2e(0x474))[_0x3a6d2e(0x388)][_0x3a6d2e(0x2f8)]('hidden'),_0x4e3b38['innerHTML']='',_0x5e410b[_0x3a6d2e(0x388)]['remove']('hidden'),_0x33eefb['textContent']=_0x3a6d2e(0x390),_0x41800f[_0x3a6d2e(0x372)]=!![];try{const _0x3c205c='https://corsproxy.io/?'+encodeURIComponent(_0x26632e),_0x56cf1d=await fetch(_0x3c205c);if(!_0x56cf1d['ok'])throw new Error('ไม่สามารถดึงข้อมูลจาก\x20URL\x20ได้\x20(Status:\x20'+_0x56cf1d[_0x3a6d2e(0xde)]+')');const _0x3fcc07=await _0x56cf1d[_0x3a6d2e(0x298)](),_0x5adbf3=extractTextFromHtml(_0x3fcc07);if(!_0x5adbf3||_0x5adbf3[_0x3a6d2e(0x145)]<0x64)throw new Error(_0x3a6d2e(0x195));await generateQuiz(_0x3f036d,_0x5adbf3);}catch(_0x33d8f2){console[_0x3a6d2e(0x266)](_0x3a6d2e(0x24e),_0x33d8f2),showMessage(_0x3a6d2e(0x244)+_0x33d8f2[_0x3a6d2e(0x1a2)]),_0x4e3b38['innerHTML']=_0x3a6d2e(0x238);}finally{_0x5e410b[_0x3a6d2e(0x388)][_0x3a6d2e(0x240)]('hidden'),_0x41800f[_0x3a6d2e(0x372)]=![];}}function extractTextFromHtml(_0x268435){const _0x536908=_0xf78338,_0x239115=new DOMParser()[_0x536908(0xe9)](_0x268435,_0x536908(0x216));return _0x239115[_0x536908(0xb3)](_0x536908(0x427))['forEach'](_0x51113a=>_0x51113a[_0x536908(0x2f8)]()),_0x239115[_0x536908(0x258)][_0x536908(0x271)]||'';}document[_0xf78338(0x349)](_0xf78338(0x514))[_0xf78338(0x200)](_0xf78338(0x151),()=>{const _0x326bd1=_0xf78338,_0x3563fd=document[_0x326bd1(0x349)](_0x326bd1(0x2c6))[_0x326bd1(0x429)][_0x326bd1(0x197)]();if(!_0x3563fd){showMessage(_0x326bd1(0x290));return;}generateQuiz(_0x3563fd,null);}),document[_0xf78338(0x349)](_0xf78338(0x18c))[_0xf78338(0x200)](_0xf78338(0x151),()=>{const _0x294eaf=_0xf78338,_0x1bb567=document['getElementById'](_0x294eaf(0x32b))[_0x294eaf(0x429)][_0x294eaf(0x197)]();if(!_0x1bb567){showMessage(_0x294eaf(0x1ae));return;}generateQuiz(null,_0x1bb567);});async function generateQuiz(_0x3a2991,_0x476a3c,_0x20a2f7=null){const _0x5296bd=_0xf78338,_0xada7b4=document[_0x5296bd(0x349)](_0x5296bd(0x41f))[_0x5296bd(0x397)],_0x2a54c4=document[_0x5296bd(0x349)](_0x5296bd(0x4ac))[_0x5296bd(0x429)],_0x1df63f=document['getElementById'](_0x5296bd(0x35a))[_0x5296bd(0x429)],_0x20f01f=document[_0x5296bd(0x349)](_0x5296bd(0x260))['value'];let _0x5becb0='',_0x267af7='',_0x49f05e,_0x22143b=_0x5296bd(0x218)+_0x3a2991+'\x22';if(!_0x3a2991&&_0x476a3c)_0x22143b=_0x5296bd(0x1ab);else!_0x3a2991&&!_0x476a3c&&(_0x22143b=_0x5296bd(0x251));const _0x53fea5={'type':_0x5296bd(0x2ec),'properties':{'questionText':{'type':_0x5296bd(0x3be)},'options':{'type':_0x5296bd(0x483),'items':{'type':_0x5296bd(0x3be)}},'correctAnswerIndex':{'type':_0x5296bd(0x417)},'explanation':{'type':_0x5296bd(0x3be)},'imageCode':{'type':_0x5296bd(0x3be)}},'required':['questionText',_0x5296bd(0x304),_0x5296bd(0x1c0),_0x5296bd(0x35c)]},_0x4c9b0a={'type':_0x5296bd(0x2ec),'properties':{'questionText':{'type':_0x5296bd(0x3be)},'idealAnswer':{'type':'STRING'},'explanation':{'type':_0x5296bd(0x3be)},'imageCode':{'type':_0x5296bd(0x3be)}},'required':['questionText',_0x5296bd(0x38e),_0x5296bd(0x35c)]},_0x1636af={'type':'OBJECT','properties':{'questionText':{'type':_0x5296bd(0x3be)},'questionType':{'type':_0x5296bd(0x3be),'enum':[_0x5296bd(0x19f),'short_answer']},'options':{'type':_0x5296bd(0x483),'items':{'type':_0x5296bd(0x3be)}},'correctAnswerIndex':{'type':_0x5296bd(0x417)},'idealAnswer':{'type':'STRING'},'explanation':{'type':_0x5296bd(0x3be)},'imageCode':{'type':_0x5296bd(0x3be)}},'required':[_0x5296bd(0x28f),_0x5296bd(0x172),_0x5296bd(0x35c)]},_0x281943={'type':_0x5296bd(0x2ec),'properties':{'questionText':{'type':_0x5296bd(0x3be)},'correctAnswer':{'type':_0x5296bd(0x224)},'explanation':{'type':_0x5296bd(0x3be)},'imageCode':{'type':_0x5296bd(0x3be)}},'required':[_0x5296bd(0x28f),'correctAnswer',_0x5296bd(0x35c)]},_0x56c31e={'type':_0x5296bd(0x2ec),'properties':{'questionType':{'type':'STRING','enum':[_0x5296bd(0x444)]},'stem':{'type':_0x5296bd(0x3be)},'correctResponse':{'type':'STRING'},'allResponses':{'type':_0x5296bd(0x483),'items':{'type':_0x5296bd(0x3be)}},'explanation':{'type':_0x5296bd(0x3be)},'imageCode':{'type':_0x5296bd(0x3be)}},'required':[_0x5296bd(0x172),'stem',_0x5296bd(0x42f),_0x5296bd(0x268),_0x5296bd(0x35c)]};let _0x2b8771;if(_0x20a2f7!==null){const _0x246966=currentQuizData['questions'][_0x20a2f7][_0x5296bd(0x172)],_0x52688e=_0xada7b4?_0x5296bd(0x4c1):'';if(_0x246966==='multiple_choice')_0x5becb0='สร้างแบบทดสอบปรนัย\x201\x20ข้อ\x20'+_0x22143b+_0x5296bd(0x4a9)+_0x20f01f+_0x5296bd(0x225)+_0x52688e+'\x20'+mathPromptInstruction,_0x49f05e=_0x53fea5;else _0x246966===_0x5296bd(0x444)?(_0x5becb0='จากหัวข้อ\x20'+_0x22143b+'\x20สร้างคำถามจับคู่\x201\x20ข้อ\x20(1\x20คู่)\x20ที่อยู่ในหมวดหมู่เดียวกันกับคำถามเดิม\x20แต่ต้องแตกต่างออกไป.\x20รูปแบบคือ:\x20stem,\x20correctResponse,\x20และ\x20explanation.\x20'+_0x52688e+'\x20'+mathPromptInstruction,_0x49f05e={'type':_0x5296bd(0x2ec),'properties':{'questionType':{'type':_0x5296bd(0x3be),'enum':[_0x5296bd(0x444)]},'stem':{'type':'STRING'},'correctResponse':{'type':_0x5296bd(0x3be)},'explanation':{'type':_0x5296bd(0x3be)},'imageCode':{'type':_0x5296bd(0x3be)}},'required':['questionType','stem',_0x5296bd(0x42f),_0x5296bd(0x35c)]}):(_0x5becb0=_0x5296bd(0x3fd)+_0x22143b+_0x5296bd(0x1ad)+_0x52688e+'\x20'+mathPromptInstruction,_0x49f05e=_0x4c9b0a);_0x2b8771=_0x49f05e;}else{const _0x373ff9=_0xada7b4?_0x5296bd(0x4af):'';switch(_0x2a54c4){case _0x5296bd(0x19f):_0x5becb0=_0x5296bd(0x3ef)+_0x1df63f+'\x20ข้อ\x20'+_0x22143b+_0x5296bd(0xed)+_0x20f01f+_0x5296bd(0x225)+_0x373ff9+'\x20'+mathPromptInstruction,_0x49f05e=_0x53fea5;break;case'fill_in_with_choices':_0x5becb0=_0x5296bd(0x1ef)+_0x1df63f+'\x20ข้อ\x20'+_0x22143b+'.\x20แต่ละข้อต้องมีประโยคคำถามที่มีช่องว่าง\x20(questionText\x20containing\x20\x27.....\x27),\x20ตัวเลือก\x20'+_0x20f01f+'\x20ตัว\x20(options),\x20ดัชนีคำตอบที่ถูกต้อง\x20(correctAnswerIndex),\x20และคำอธิบาย\x20(explanation).\x20'+_0x373ff9+'\x20'+mathPromptInstruction,_0x49f05e=_0x53fea5;break;case _0x5296bd(0x424):_0x5becb0='สร้างคำถามแบบเติมคำในช่องว่าง\x20'+_0x1df63f+'\x20ข้อ\x20'+_0x22143b+_0x5296bd(0x318)+_0x373ff9+'\x20'+mathPromptInstruction,_0x49f05e=_0x4c9b0a;break;case _0x5296bd(0x1f1):_0x5becb0='สร้างแบบทดสอบ\x20'+_0x1df63f+_0x5296bd(0x239)+_0x22143b+_0x5296bd(0x3cc)+_0x20f01f+_0x5296bd(0xc8)+_0x373ff9+'\x20'+mathPromptInstruction+_0x5296bd(0x4aa),_0x49f05e=_0x1636af;break;case _0x5296bd(0x309):_0x5becb0=_0x5296bd(0x3c5)+_0x1df63f+'\x20ข้อ\x20'+_0x22143b+_0x5296bd(0x253)+_0x373ff9+'\x20'+mathPromptInstruction,_0x49f05e=_0x281943;break;case _0x5296bd(0x456):_0x5becb0=_0x5296bd(0x233)+_0x1df63f+_0x5296bd(0x519)+_0x22143b+'.\x20สำหรับแต่ละคู่\x20ให้สร้างเป็น\x20JSON\x20object\x20แยกกัน\x20โดยแต่ละ\x20object\x20ต้องมี:\x20\x27questionType\x27\x20(ตั้งค่าเป็น\x20\x27matching_item\x27),\x20\x27stem\x27\x20(คำถามฝั่งซ้าย),\x20\x27correctResponse\x27\x20(คำตอบที่ถูกต้องฝั่งขวา),\x20และ\x20\x27explanation\x27.\x20นอกจากนี้\x20ให้สร้าง\x20key\x20ชื่อ\x20\x27allResponses\x27\x20ซึ่งเป็น\x20array\x20ที่รวบรวม\x20\x27correctResponse\x27\x20ทั้งหมด\x20'+_0x1df63f+_0x5296bd(0x329)+_0x373ff9+'\x20'+mathPromptInstruction,_0x49f05e=_0x56c31e;break;}_0x2b8771={'type':'OBJECT','properties':{'topic':{'type':_0x5296bd(0x3be)},'questions':{'type':_0x5296bd(0x483),'items':_0x49f05e}},'required':[_0x5296bd(0x306),'questions']};}return _0x476a3c?(_0x5becb0=_0x5296bd(0x2a8)+_0x476a3c+_0x5296bd(0x466)+_0x5becb0,_0x267af7='กำลังวิเคราะห์เนื้อหาและสร้างแบบทดสอบ...'):_0x267af7=_0x5296bd(0x28e),handleApiCall(_0x5becb0,_0x267af7,_0x2b8771,_0x20a2f7);}async function generateQuizFromFile(_0xd73b45,_0x3adf7d){const _0x44e1e1=_0xf78338,_0x511d6b=document['getElementById'](_0x44e1e1(0x4ac))['value'],_0x11ab96=document[_0x44e1e1(0x349)](_0x44e1e1(0x35a))['value'],_0x25d1e5=document[_0x44e1e1(0x349)](_0x44e1e1(0x260))['value'],_0x4e71a8=document['getElementById'](_0x44e1e1(0x41f))[_0x44e1e1(0x397)];let _0x439997='',_0x4abde9;const _0x545986=_0x4e71a8?'สำหรับแต่ละคำถาม\x20หากจำเป็นต้องมีรูปภาพประกอบ\x20(เช่น\x20รูปเรขาคณิต,\x20กราฟ)\x20ให้สร้างโค้ด\x20SVG\x20ที่สมบูรณ์สำหรับรูปนั้นๆ\x20แล้วใส่ไว้ใน\x20property\x20ชื่อ\x20\x22imageCode\x22.\x20ถ้าไม่จำเป็น\x20ไม่ต้องใส่\x20property\x20นี้.':'';switch(_0x511d6b){case _0x44e1e1(0x19f):_0x439997=_0x44e1e1(0x3ef)+_0x11ab96+'\x20ข้อ.\x20แต่ละข้อมี\x20'+_0x25d1e5+_0x44e1e1(0x225)+_0x545986+'\x20'+mathPromptInstruction,_0x4abde9={'type':'OBJECT','properties':{'questionText':{'type':_0x44e1e1(0x3be)},'options':{'type':_0x44e1e1(0x483),'items':{'type':'STRING'}},'correctAnswerIndex':{'type':_0x44e1e1(0x417)},'explanation':{'type':_0x44e1e1(0x3be)},'imageCode':{'type':_0x44e1e1(0x3be)}},'required':[_0x44e1e1(0x28f),_0x44e1e1(0x304),_0x44e1e1(0x1c0),'explanation']};break;case _0x44e1e1(0x2bc):_0x439997=_0x44e1e1(0x1ef)+_0x11ab96+_0x44e1e1(0x364)+_0x25d1e5+_0x44e1e1(0x4d3)+_0x545986+'\x20'+mathPromptInstruction,_0x4abde9={'type':_0x44e1e1(0x2ec),'properties':{'questionText':{'type':_0x44e1e1(0x3be)},'options':{'type':_0x44e1e1(0x483),'items':{'type':_0x44e1e1(0x3be)}},'correctAnswerIndex':{'type':_0x44e1e1(0x417)},'explanation':{'type':_0x44e1e1(0x3be)},'imageCode':{'type':_0x44e1e1(0x3be)}},'required':[_0x44e1e1(0x28f),'options',_0x44e1e1(0x1c0),_0x44e1e1(0x35c)]};break;case _0x44e1e1(0x424):_0x439997=_0x44e1e1(0x1ef)+_0x11ab96+_0x44e1e1(0x30d)+_0x545986+'\x20'+mathPromptInstruction,_0x4abde9={'type':'OBJECT','properties':{'questionText':{'type':_0x44e1e1(0x3be)},'idealAnswer':{'type':_0x44e1e1(0x3be)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x44e1e1(0x3be)}},'required':[_0x44e1e1(0x28f),_0x44e1e1(0x38e),_0x44e1e1(0x35c)]};break;case _0x44e1e1(0x1f1):_0x439997=_0x44e1e1(0xe5)+_0x11ab96+_0x44e1e1(0x26f)+_0x25d1e5+_0x44e1e1(0xc8)+_0x545986+'\x20'+mathPromptInstruction+_0x44e1e1(0x4aa),_0x4abde9={'type':_0x44e1e1(0x2ec),'properties':{'questionText':{'type':_0x44e1e1(0x3be)},'questionType':{'type':'STRING','enum':[_0x44e1e1(0x19f),'short_answer']},'options':{'type':_0x44e1e1(0x483),'items':{'type':'STRING'}},'correctAnswerIndex':{'type':_0x44e1e1(0x417)},'idealAnswer':{'type':_0x44e1e1(0x3be)},'explanation':{'type':'STRING'},'imageCode':{'type':_0x44e1e1(0x3be)}},'required':[_0x44e1e1(0x28f),_0x44e1e1(0x172),_0x44e1e1(0x35c)]};break;case _0x44e1e1(0x309):_0x439997=_0x44e1e1(0x3c5)+_0x11ab96+_0x44e1e1(0x33c)+_0x545986+'\x20'+mathPromptInstruction,_0x4abde9={'type':_0x44e1e1(0x2ec),'properties':{'questionText':{'type':_0x44e1e1(0x3be)},'correctAnswer':{'type':_0x44e1e1(0x224)},'explanation':{'type':_0x44e1e1(0x3be)},'imageCode':{'type':'STRING'}},'required':['questionText',_0x44e1e1(0x43b),_0x44e1e1(0x35c)]};break;case _0x44e1e1(0x456):_0x439997=_0x44e1e1(0x233)+_0x11ab96+_0x44e1e1(0x42e)+_0x11ab96+_0x44e1e1(0x329)+_0x545986+'\x20'+mathPromptInstruction,_0x4abde9={'type':'OBJECT','properties':{'questionType':{'type':'STRING','enum':[_0x44e1e1(0x444)]},'stem':{'type':_0x44e1e1(0x3be)},'correctResponse':{'type':_0x44e1e1(0x3be)},'allResponses':{'type':_0x44e1e1(0x483),'items':{'type':_0x44e1e1(0x3be)}},'explanation':{'type':_0x44e1e1(0x3be)},'imageCode':{'type':_0x44e1e1(0x3be)}},'required':[_0x44e1e1(0x172),_0x44e1e1(0x1e4),_0x44e1e1(0x42f),'allResponses','explanation']};break;}const _0x437a29={'type':'OBJECT','properties':{'topic':{'type':_0x44e1e1(0x3be)},'questions':{'type':_0x44e1e1(0x483),'items':_0x4abde9}},'required':[_0x44e1e1(0x306),'questions']},_0x324007=_0x44e1e1(0x43d)+_0x439997,_0x1c848e={'contents':[{'parts':[{'text':_0x324007},{'inlineData':{'mimeType':_0xd73b45,'data':_0x3adf7d}}]}],'generationConfig':{'responseMimeType':_0x44e1e1(0x2d1),'responseSchema':_0x437a29}};return handleApiCall(_0x1c848e[_0x44e1e1(0x1e7)][0x0][_0x44e1e1(0x1ee)],_0x44e1e1(0xc0),_0x437a29);}async function handleApiCall(_0x115608,_0x6cb2ba,_0x57bc72,_0x50779b=null){const _0x175c11=_0xf78338,_0x20509a=document[_0x175c11(0x349)](_0x175c11(0x474)),_0x4ae582=document[_0x175c11(0x349)](_0x175c11(0x4ff)),_0x367abd=document['getElementById'](_0x175c11(0x1f7)),_0x301eab=document[_0x175c11(0x349)](_0x175c11(0x220));_0x20509a[_0x175c11(0x388)]['remove'](_0x175c11(0x451));_0x50779b===null&&(_0x301eab[_0x175c11(0x3f5)]='');_0x4ae582[_0x175c11(0x388)][_0x175c11(0x2f8)](_0x175c11(0x451)),_0x367abd['textContent']=_0x6cb2ba,document[_0x175c11(0x349)](_0x175c11(0x514))[_0x175c11(0x372)]=!![],document['getElementById'](_0x175c11(0x18c))['disabled']=!![],document[_0x175c11(0x349)](_0x175c11(0x257))['disabled']=!![];try{const _0x4b58d3={'responseMimeType':'application/json','responseSchema':_0x57bc72},_0x4183c5=Array[_0x175c11(0x214)](_0x115608)?_0x115608:[{'text':_0x115608}],_0x59ad96={'contents':[{'role':_0x175c11(0x2f7),'parts':_0x4183c5}],'generationConfig':_0x4b58d3},_0x28ced6='AIzaSyBgBJ28OshxBTnqUzCKsv7nve2Xj899fwA',_0x47f07a=_0x175c11(0x123)+_0x28ced6,_0x253bd0=await fetch(_0x47f07a,{'method':_0x175c11(0x3f8),'headers':{'Content-Type':_0x175c11(0x2d1)},'body':JSON[_0x175c11(0x2c8)](_0x59ad96)});if(!_0x253bd0['ok'])throw new Error(_0x175c11(0x12b)+_0x253bd0[_0x175c11(0xde)]);const _0x1f36d6=await _0x253bd0['json']();if(_0x1f36d6[_0x175c11(0x2f9)]?.[0x0]?.[_0x175c11(0xd5)]?.[_0x175c11(0x1ee)]?.[0x0]){let _0x419fe2=_0x1f36d6['candidates'][0x0]['content'][_0x175c11(0x1ee)][0x0]['text'],_0x46754e;try{if(_0x419fe2[_0x175c11(0x1fe)]('```json'))_0x419fe2=_0x419fe2[_0x175c11(0x40e)](0x7,_0x419fe2[_0x175c11(0x145)]-0x3)[_0x175c11(0x197)]();else _0x419fe2[_0x175c11(0x1fe)](_0x175c11(0x4ee))&&(_0x419fe2=_0x419fe2[_0x175c11(0x40e)](0x3,_0x419fe2['length']-0x3)[_0x175c11(0x197)]());_0x46754e=JSON[_0x175c11(0x3dd)](_0x419fe2);}catch(_0x4cce62){console[_0x175c11(0x266)]('Failed\x20to\x20parse\x20JSON\x20from\x20AI',_0x4cce62,_0x419fe2);throw new Error(_0x175c11(0x2bf));}if(_0x50779b!==null){if(_0x46754e['questionType']==='matching_item'){const _0xc1cb39=currentQuizData['questions'][_0x175c11(0xfa)](_0x1414e3=>_0x1414e3[_0x175c11(0x42f)]);_0x46754e[_0x175c11(0x268)]=_0xc1cb39;const _0x2efaf4=currentQuizData[_0x175c11(0x47e)][_0x50779b][_0x175c11(0x42f)],_0x5502de=_0xc1cb39[_0x175c11(0x498)](_0x2efaf4);_0x5502de>-0x1&&(_0xc1cb39[_0x5502de]=_0x46754e[_0x175c11(0x42f)]),currentQuizData[_0x175c11(0x47e)]['forEach'](_0x1e142f=>{const _0x54e037=_0x175c11;if(_0x1e142f[_0x54e037(0x172)]===_0x54e037(0x444))_0x1e142f[_0x54e037(0x268)]=_0xc1cb39;});}currentQuizData[_0x175c11(0x47e)][_0x50779b]=_0x46754e,displayGeneratedQuiz(currentQuizData);}else{currentQuizData=sanitizeQuizData(_0x46754e);const _0x4a3bbb=document[_0x175c11(0x349)](_0x175c11(0x4ac))['value'];currentQuizData[_0x175c11(0x475)]=_0x4a3bbb,currentQuizData[_0x175c11(0x47e)]&&currentQuizData[_0x175c11(0x47e)][_0x175c11(0xff)](_0x17ce54=>{const _0x48f699=_0x175c11;if(!_0x17ce54['questionType']){if(_0x4a3bbb==='fill_in_with_choices')_0x17ce54[_0x48f699(0x172)]=_0x48f699(0x19f);else _0x4a3bbb===_0x48f699(0x424)?_0x17ce54[_0x48f699(0x172)]='short_answer':_0x17ce54['questionType']=_0x4a3bbb;}}),displayGeneratedQuiz(currentQuizData);}}else{console['error'](_0x175c11(0xe4),JSON[_0x175c11(0x2c8)](_0x1f36d6));throw new Error('Invalid\x20response\x20structure\x20from\x20AI.');}}catch(_0x3c0b4e){console[_0x175c11(0x266)](_0x175c11(0x41b),_0x3c0b4e),showMessage(_0x175c11(0x27c)),_0x50779b===null&&(_0x301eab[_0x175c11(0x3f5)]='<p\x20class=\x22text-red-500\x20text-center\x22>ขออภัย,\x20ไม่สามารถสร้างแบบทดสอบได้</p>');}finally{_0x4ae582[_0x175c11(0x388)][_0x175c11(0x240)](_0x175c11(0x451)),document['getElementById'](_0x175c11(0x514))[_0x175c11(0x372)]=![],document[_0x175c11(0x349)]('generate-from-text-btn')[_0x175c11(0x372)]=![],document[_0x175c11(0x349)]('generate-from-link-btn')[_0x175c11(0x372)]=![];}}function displayGeneratedQuiz(_0x5168d4){const _0xb30565=_0xf78338,_0x24e8e4=document[_0xb30565(0x349)](_0xb30565(0x220));let _0x1a7d8e='<h3\x20class=\x22text-xl\x20font-bold\x20mb-3\x22\x20contenteditable=\x22true\x22\x20id=\x22editable-quiz-topic\x22>'+_0x5168d4['topic']+_0xb30565(0x3f0);_0x5168d4[_0xb30565(0x47e)][_0xb30565(0xff)]((_0x3f4ac8,_0xdfe4fa)=>{const _0x5736f1=_0xb30565,_0x2d62cd=_0x3f4ac8['questionType']||_0x5168d4['quizType'];_0x1a7d8e+=_0x5736f1(0xc2)+_0xdfe4fa+'\x22\x20class=\x22save-to-bank-btn\x20text-purple-600\x20hover:text-purple-800\x20p-1\x22\x20title=\x22เก็บเข้าคลังข้อสอบส่วนตัว\x22>\x0a\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-university\x22></i>\x0a</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-index=\x22'+_0xdfe4fa+_0x5736f1(0x1f2)+_0xdfe4fa+'\x22\x20class=\x22regenerate-question-btn\x20text-green-600\x20hover:text-green-800\x20p-1\x22\x20title=\x22สร้างข้อนี้ใหม่\x22><i\x20class=\x22fas\x20fa-sync-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';switch(_0x2d62cd){case _0x5736f1(0x444):_0x1a7d8e+=_0x5736f1(0x496)+_0xdfe4fa+'\x22>'+(_0xdfe4fa+0x1)+'.\x20'+_0x3f4ac8[_0x5736f1(0x1e4)]+'</p>';_0x3f4ac8[_0x5736f1(0x4a2)]&&(_0x1a7d8e+='<div\x20id=\x22q-image-container-'+_0xdfe4fa+_0x5736f1(0x37d)+_0x3f4ac8[_0x5736f1(0x4a2)]+_0x5736f1(0x2ad));_0x1a7d8e+='<div\x20class=\x22mt-2\x20p-2\x20bg-green-100\x20text-sm\x22><strong\x20class=\x22text-gray-700\x22>คำตอบที่ถูกต้อง:</strong>\x20<span\x20id=\x22q-correct-'+_0xdfe4fa+'\x22>'+_0x3f4ac8[_0x5736f1(0x42f)]+_0x5736f1(0x3fc),_0x1a7d8e+=_0x5736f1(0x3d8)+_0xdfe4fa+'\x22>'+_0x3f4ac8['explanation']+_0x5736f1(0x3fc);break;case'short_answer':_0x1a7d8e+=_0x5736f1(0x496)+_0xdfe4fa+'\x22>'+(_0xdfe4fa+0x1)+'.\x20'+_0x3f4ac8['questionText']+_0x5736f1(0x293);_0x3f4ac8[_0x5736f1(0x4a2)]&&(_0x1a7d8e+=_0x5736f1(0x2f2)+_0xdfe4fa+'\x22\x20class=\x22my-4\x20flex\x20justify-center\x22>'+_0x3f4ac8[_0x5736f1(0x4a2)]+_0x5736f1(0x2ad));_0x1a7d8e+=_0x5736f1(0x383)+_0xdfe4fa+'\x22>'+_0x3f4ac8[_0x5736f1(0x38e)]+'</span></div>',_0x1a7d8e+=_0x5736f1(0x3d8)+_0xdfe4fa+'\x22>'+_0x3f4ac8[_0x5736f1(0x35c)]+_0x5736f1(0x3fc);break;case'true_false':_0x1a7d8e+=_0x5736f1(0x496)+_0xdfe4fa+'\x22>'+(_0xdfe4fa+0x1)+'.\x20'+_0x3f4ac8[_0x5736f1(0x28f)]+_0x5736f1(0x293);_0x3f4ac8[_0x5736f1(0x4a2)]&&(_0x1a7d8e+=_0x5736f1(0x2f2)+_0xdfe4fa+_0x5736f1(0x37d)+_0x3f4ac8[_0x5736f1(0x4a2)]+_0x5736f1(0x2ad));_0x1a7d8e+=_0x5736f1(0x40b)+(_0x3f4ac8[_0x5736f1(0x43b)]===!![]?_0x5736f1(0x102):'')+_0x5736f1(0x252)+(_0x3f4ac8[_0x5736f1(0x43b)]===![]?_0x5736f1(0x102):'')+_0x5736f1(0x484),_0x1a7d8e+=_0x5736f1(0x3d8)+_0xdfe4fa+'\x22>'+_0x3f4ac8['explanation']+'</span></div>';break;case _0x5736f1(0x400):case _0x5736f1(0x19f):default:_0x1a7d8e+=_0x5736f1(0x496)+_0xdfe4fa+'\x22>'+(_0xdfe4fa+0x1)+'.\x20'+_0x3f4ac8['questionText']+_0x5736f1(0x293);_0x3f4ac8[_0x5736f1(0x4a2)]&&(_0x1a7d8e+=_0x5736f1(0x2f2)+_0xdfe4fa+'\x22\x20class=\x22my-4\x20flex\x20justify-center\x22>'+_0x3f4ac8[_0x5736f1(0x4a2)]+_0x5736f1(0x2ad));_0x1a7d8e+='<ul\x20class=\x22list-disc\x20list-inside\x20mt-2\x20space-y-1\x20text-sm\x22\x20id=\x22q-options-'+_0xdfe4fa+_0x5736f1(0x3a2)+_0x3f4ac8[_0x5736f1(0x304)][_0x5736f1(0xfa)]((_0x462440,_0x36e5b5)=>_0x5736f1(0x1b3)+(_0x36e5b5===_0x3f4ac8[_0x5736f1(0x1c0)]?'text-green-600\x20font-bold':'')+'\x22>'+_0x462440+_0x5736f1(0x1b5))[_0x5736f1(0x396)]('')+_0x5736f1(0x23a),_0x1a7d8e+=_0x5736f1(0x3d8)+_0xdfe4fa+'\x22>'+_0x3f4ac8['explanation']+_0x5736f1(0x3fc);break;}_0x1a7d8e+=_0x5736f1(0x2ad);}),_0x1a7d8e+=_0xb30565(0x345),_0x24e8e4[_0xb30565(0x3f5)]=_0x1a7d8e,document[_0xb30565(0xb3)](_0xb30565(0x1d9))[_0xb30565(0xff)](_0x222eb4=>_0x222eb4['addEventListener'](_0xb30565(0x151),handleEditQuestion)),document['querySelectorAll'](_0xb30565(0x460))[_0xb30565(0xff)](_0x6b13cd=>_0x6b13cd[_0xb30565(0x200)](_0xb30565(0x151),handleRegenerateQuestion)),document[_0xb30565(0xb3)](_0xb30565(0x10e))['forEach'](_0x5daaab=>_0x5daaab[_0xb30565(0x200)](_0xb30565(0x151),handleSaveToBank)),document[_0xb30565(0x349)](_0xb30565(0x1cd))['addEventListener'](_0xb30565(0x151),saveQuiz);if(window[_0xb30565(0x2f0)])window[_0xb30565(0x2f0)]['typesetPromise']([_0x24e8e4]);}function handleRegenerateQuestion(_0x413f91){const _0x36b99d=_0xf78338,_0x39c584=_0x413f91['currentTarget'][_0x36b99d(0x441)]['index'],_0x3bb12a=currentQuizData[_0x36b99d(0x306)];showMessage(_0x36b99d(0x147)+(parseInt(_0x39c584)+0x1)+'\x20ใหม่...'),generateQuiz(_0x3bb12a,null,parseInt(_0x39c584));}function getPointerPosition(_0x2730dc,_0x145b59){const _0x34a856=_0xf78338,_0x4a066=_0x2730dc['getScreenCTM']();let _0x3fdee2,_0x439f3b;return _0x145b59[_0x34a856(0x18b)]&&_0x145b59[_0x34a856(0x18b)][_0x34a856(0x145)]>0x0?(_0x3fdee2=_0x145b59[_0x34a856(0x18b)][0x0]['clientX'],_0x439f3b=_0x145b59[_0x34a856(0x18b)][0x0]['clientY']):(_0x3fdee2=_0x145b59[_0x34a856(0x3b2)],_0x439f3b=_0x145b59['clientY']),{'x':(_0x3fdee2-_0x4a066['e'])/_0x4a066['a'],'y':(_0x439f3b-_0x4a066['f'])/_0x4a066['d']};}function startDrag(_0x11b6ad){const _0x45154f=_0xf78338;_0x11b6ad[_0x45154f(0x3b3)]===_0x45154f(0x4ad)&&_0x11b6ad[_0x45154f(0x2fe)]();const _0x43a96f=_0x11b6ad[_0x45154f(0x3e2)]['closest'](_0x45154f(0x113));if(_0x43a96f){draggedSvgElement=_0x43a96f;const _0x13e2d0=draggedSvgElement[_0x45154f(0x2ea)],_0x5b9abb=getPointerPosition(_0x13e2d0,_0x11b6ad);svgOffset['x']=_0x5b9abb['x']-parseFloat(draggedSvgElement[_0x45154f(0x2df)](null,'x')),svgOffset['y']=_0x5b9abb['y']-parseFloat(draggedSvgElement['getAttributeNS'](null,'y'));}}function drag(_0xb5e87b){const _0x2c0103=_0xf78338;if(draggedSvgElement){_0xb5e87b[_0x2c0103(0x2fe)]();const _0x412f17=draggedSvgElement[_0x2c0103(0x2ea)],_0x2eff46=getPointerPosition(_0x412f17,_0xb5e87b),_0x500b05=_0x412f17[_0x2c0103(0x4a1)][_0x2c0103(0x3f6)];let _0x4bb555=_0x2eff46['x']-svgOffset['x'],_0x3a85f1=_0x2eff46['y']-svgOffset['y'];const _0x2f331b=draggedSvgElement[_0x2c0103(0x510)]();_0x4bb555=Math[_0x2c0103(0x347)](_0x500b05['x'],Math[_0x2c0103(0x24c)](_0x4bb555,_0x500b05['x']+_0x500b05[_0x2c0103(0x188)]-_0x2f331b[_0x2c0103(0x188)])),_0x3a85f1=Math['max'](_0x500b05['y'],Math['min'](_0x3a85f1,_0x500b05['y']+_0x500b05['height']-_0x2f331b['height'])),draggedSvgElement[_0x2c0103(0x4fb)](null,'x',_0x4bb555),draggedSvgElement[_0x2c0103(0x4fb)](null,'y',_0x3a85f1);}}function endDrag(_0x15cee2){draggedSvgElement=null;}function handleSvgEditClick(_0x543f8a){const _0x1ba56d=_0xf78338;if(_0x543f8a[_0x1ba56d(0x3e2)]['classList']['contains'](_0x1ba56d(0x353))){const _0x2eb4e3=_0x543f8a[_0x1ba56d(0x3e2)]['dataset'][_0x1ba56d(0x170)],_0x44c60a=_0x543f8a[_0x1ba56d(0x38f)],_0x57f405=_0x44c60a[_0x1ba56d(0x2c3)]('#'+_0x2eb4e3);_0x57f405&&_0x57f405[_0x1ba56d(0x2f8)](),_0x543f8a[_0x1ba56d(0x3e2)]['remove']();}}function handleEditQuestion(_0x2c9886){const _0x3cc66b=_0xf78338,_0x44c65d=_0x2c9886[_0x3cc66b(0x38f)],_0x4614ac=_0x44c65d[_0x3cc66b(0x441)][_0x3cc66b(0x4b5)],_0x3cf323=currentQuizData['questions'][_0x4614ac],_0x144b01=document[_0x3cc66b(0x349)](_0x3cc66b(0x352)+_0x4614ac),_0x24c3d0=document[_0x3cc66b(0x349)](_0x3cc66b(0x395)+_0x4614ac),_0x26f11f=document[_0x3cc66b(0x349)](_0x3cc66b(0xcf)+_0x4614ac);if(_0x44c65d[_0x3cc66b(0x3f5)][_0x3cc66b(0x2c9)]('fa-pen')){_0x44c65d[_0x3cc66b(0x3f5)]='<i\x20class=\x22fas\x20fa-save\x22></i>',_0x44c65d[_0x3cc66b(0x2f3)]=_0x3cc66b(0xaf);if(_0x144b01)_0x144b01['contentEditable']=!![];if(_0x24c3d0)_0x24c3d0[_0x3cc66b(0x212)]=!![];if(_0x26f11f){const _0x2486fd=_0x26f11f[_0x3cc66b(0x2c3)](_0x3cc66b(0x193));if(_0x2486fd){const _0x5991d7=_0x2486fd[_0x3cc66b(0xb3)](_0x3cc66b(0x298));_0x5991d7['forEach']((_0x35f69e,_0x1ac28c)=>{const _0x8285f4=_0x3cc66b,_0x153e13=_0x8285f4(0x2c1)+_0x4614ac+'-'+_0x1ac28c;_0x35f69e['id']=_0x153e13,_0x35f69e[_0x8285f4(0x388)][_0x8285f4(0x240)](_0x8285f4(0x4df)),_0x35f69e['style'][_0x8285f4(0x180)]='move';const _0x48dc56=document[_0x8285f4(0x4e7)](_0x8285f4(0x3f7),_0x8285f4(0x51e)),_0x2b939c=_0x35f69e[_0x8285f4(0x510)]();_0x48dc56[_0x8285f4(0x3b5)]('cx',String(_0x2b939c['x']+_0x2b939c['width']+0x5)),_0x48dc56[_0x8285f4(0x3b5)]('cy',String(_0x2b939c['y']+_0x2b939c[_0x8285f4(0x3aa)]/0x2-0x5)),_0x48dc56[_0x8285f4(0x3b5)]('r','5'),_0x48dc56['setAttribute']('fill','red'),_0x48dc56['setAttribute'](_0x8285f4(0x23d),_0x8285f4(0x353)),_0x48dc56[_0x8285f4(0x441)][_0x8285f4(0x170)]=_0x153e13,_0x35f69e['after'](_0x48dc56);}),_0x2486fd[_0x3cc66b(0x200)](_0x3cc66b(0x1e1),startDrag),_0x2486fd[_0x3cc66b(0x200)](_0x3cc66b(0x33f),drag),_0x2486fd['addEventListener'](_0x3cc66b(0x2e2),endDrag),_0x2486fd[_0x3cc66b(0x200)](_0x3cc66b(0x3bb),endDrag),_0x2486fd[_0x3cc66b(0x200)](_0x3cc66b(0x4ad),startDrag,{'passive':![]}),_0x2486fd[_0x3cc66b(0x200)](_0x3cc66b(0x29f),drag,{'passive':![]}),_0x2486fd[_0x3cc66b(0x200)]('touchend',endDrag),_0x2486fd['addEventListener']('touchcancel',endDrag),_0x2486fd[_0x3cc66b(0x200)]('click',handleSvgEditClick);}}if(_0x144b01)_0x144b01['focus']();}else{_0x44c65d[_0x3cc66b(0x3f5)]='<i\x20class=\x22fas\x20fa-pen\x22></i>',_0x44c65d[_0x3cc66b(0x2f3)]=_0x3cc66b(0x1e9);if(_0x144b01){_0x144b01[_0x3cc66b(0x212)]=![];const _0xf1317e=_0x3cf323[_0x3cc66b(0x172)]||currentQuizData['quizType'];_0xf1317e==='matching_item'?_0x3cf323[_0x3cc66b(0x1e4)]=_0x144b01[_0x3cc66b(0x4c5)][_0x3cc66b(0x40e)](_0x144b01['innerText'][_0x3cc66b(0x498)]('.')+0x2)[_0x3cc66b(0x197)]():_0x3cf323[_0x3cc66b(0x28f)]=_0x144b01[_0x3cc66b(0x4c5)]['substring'](_0x144b01['innerText'][_0x3cc66b(0x498)]('.')+0x2)[_0x3cc66b(0x197)]();}_0x24c3d0&&(_0x24c3d0['contentEditable']=![],_0x3cf323[_0x3cc66b(0x35c)]=_0x24c3d0[_0x3cc66b(0x4c5)]);if(_0x26f11f){const _0x174563=_0x26f11f[_0x3cc66b(0x2c3)](_0x3cc66b(0x193));if(_0x174563){const _0x4c23b8=_0x174563['cloneNode'](!![]);_0x4c23b8[_0x3cc66b(0xb3)](_0x3cc66b(0x114))[_0x3cc66b(0xff)](_0x30cdba=>_0x30cdba[_0x3cc66b(0x2f8)]()),_0x4c23b8[_0x3cc66b(0xb3)](_0x3cc66b(0x113))[_0x3cc66b(0xff)](_0x3dfc59=>{const _0x4217ba=_0x3cc66b;_0x3dfc59[_0x4217ba(0x388)]['remove']('draggable-text'),_0x3dfc59[_0x4217ba(0x179)][_0x4217ba(0x180)]=_0x4217ba(0x515),_0x3dfc59[_0x4217ba(0x1ba)]('id');}),_0x3cf323[_0x3cc66b(0x4a2)]=_0x4c23b8[_0x3cc66b(0x242)],_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x1e1),startDrag),_0x174563['removeEventListener'](_0x3cc66b(0x33f),drag),_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x2e2),endDrag),_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x3bb),endDrag),_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x4ad),startDrag),_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x29f),drag),_0x174563[_0x3cc66b(0x437)]('touchend',endDrag),_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x339),endDrag),_0x174563[_0x3cc66b(0x437)](_0x3cc66b(0x151),handleSvgEditClick),_0x174563[_0x3cc66b(0xb3)](_0x3cc66b(0x114))[_0x3cc66b(0xff)](_0xf2b4a0=>_0xf2b4a0[_0x3cc66b(0x2f8)]()),_0x174563['querySelectorAll']('.draggable-text')[_0x3cc66b(0xff)](_0x2a9d8b=>{const _0x2111c0=_0x3cc66b;_0x2a9d8b[_0x2111c0(0x388)][_0x2111c0(0x2f8)]('draggable-text'),_0x2a9d8b[_0x2111c0(0x179)][_0x2111c0(0x180)]='default';});}}}}let currentEditingQuizData=null;async function handleOpenQuizEditor(_0x16606b){const _0x2e016c=_0xf78338,_0x2740a3=document[_0x2e016c(0x349)]('quiz-editor-modal'),_0x2139a5=document[_0x2e016c(0x349)](_0x2e016c(0x48b));_0x2139a5[_0x2e016c(0x3f5)]='<div\x20class=\x22loader\x20mx-auto\x22></div>',_0x2740a3[_0x2e016c(0x388)][_0x2e016c(0x2f8)](_0x2e016c(0x451));try{const _0xadca58=doc(db,_0x2e016c(0x1b9)+appId+_0x2e016c(0x181),_0x16606b),_0x57e69a=await getDoc(_0xadca58);if(!_0x57e69a[_0x2e016c(0x3f4)]())throw new Error(_0x2e016c(0x1ce));currentEditingQuizData={'id':_0x16606b,..._0x57e69a[_0x2e016c(0x4e3)]()},renderQuizEditor(currentEditingQuizData);}catch(_0x44637c){console[_0x2e016c(0x266)](_0x2e016c(0x1e3),_0x44637c),showMessage(_0x2e016c(0xd8)),_0x2740a3['classList'][_0x2e016c(0x240)](_0x2e016c(0x451));}}function renderQuizEditor(_0x4edf47){const _0x486eb6=_0xf78338;document[_0x486eb6(0x349)](_0x486eb6(0x2db))[_0x486eb6(0x429)]=_0x4edf47[_0x486eb6(0x306)];const _0x3e3634=document[_0x486eb6(0x349)]('quiz-editor-questions-container');let _0x572f47=_0x4edf47['questions'][_0x486eb6(0xfa)]((_0x5484b9,_0x10fd75)=>{const _0x4dcd3d=_0x486eb6;let _0x3eda6e='';const _0x3692fb=_0x5484b9[_0x4dcd3d(0x172)]||_0x4edf47['quizType'];switch(_0x3692fb){case'multiple_choice':const _0x22be10=(_0x5484b9[_0x4dcd3d(0x304)]||[])['map']((_0x201d71,_0x21e03b)=>_0x4dcd3d(0x2cc)+_0x10fd75+'\x22\x20value=\x22'+_0x21e03b+'\x22\x20'+(_0x21e03b===_0x5484b9[_0x4dcd3d(0x1c0)]?_0x4dcd3d(0x397):'')+_0x4dcd3d(0x351)+_0x201d71+'\x22\x20class=\x22w-full\x20p-1\x20border\x20rounded-md\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x4dcd3d(0x396)]('');_0x3eda6e=_0x4dcd3d(0x419)+_0x22be10+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';break;case'short_answer':_0x3eda6e=_0x4dcd3d(0x1af)+(_0x5484b9[_0x4dcd3d(0x38e)]||'')+_0x4dcd3d(0x31a);break;case _0x4dcd3d(0x309):_0x3eda6e=_0x4dcd3d(0x434)+_0x10fd75+_0x4dcd3d(0x10d)+(_0x5484b9[_0x4dcd3d(0x43b)]===!![]?_0x4dcd3d(0x397):'')+'\x20class=\x22accent-green-600\x22>\x20<span>ใช่\x20/\x20ถูก</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22><input\x20type=\x22radio\x22\x20name=\x22correct-answer-'+_0x10fd75+_0x4dcd3d(0x27f)+(_0x5484b9[_0x4dcd3d(0x43b)]===![]?_0x4dcd3d(0x397):'')+'\x20class=\x22accent-green-600\x22>\x20<span>ไม่ใช่\x20/\x20ผิด</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';break;case'matching_item':_0x3eda6e=_0x4dcd3d(0x3da)+(_0x5484b9['correctResponse']||'')+_0x4dcd3d(0x11c);break;}const _0x30d6f5=_0x5484b9[_0x4dcd3d(0x28f)]||_0x5484b9[_0x4dcd3d(0x1e4)]||'';return _0x4dcd3d(0x144)+_0x3692fb+_0x4dcd3d(0x423)+(_0x10fd75+0x1)+'\x20('+_0x3692fb+_0x4dcd3d(0x359)+_0x30d6f5+_0x4dcd3d(0x3b0)+_0x3eda6e+_0x4dcd3d(0x324);})[_0x486eb6(0x396)]('');_0x3e3634[_0x486eb6(0x3f5)]=_0x572f47;}async function handleSaveChanges(){const _0x262407=_0xf78338,_0x128d7c=document[_0x262407(0x349)](_0x262407(0x44d));_0x128d7c[_0x262407(0x372)]=!![],_0x128d7c['innerHTML']=_0x262407(0x46e);try{const _0x159962=document['getElementById'](_0x262407(0x2db))[_0x262407(0x429)],_0x38e714=document['querySelectorAll'](_0x262407(0x17a));let _0x22c1a2=[];const _0x1278e7=Array[_0x262407(0x1c6)](_0x38e714)[_0x262407(0xfa)]((_0x58947e,_0x5ebe3b)=>{const _0x1fbd23=_0x262407,_0x99f2a3=_0x58947e['dataset'][_0x1fbd23(0x1b8)],_0x31bdab=_0x58947e[_0x1fbd23(0x2c3)](_0x1fbd23(0x3c2))[_0x1fbd23(0x429)];let _0x1a2db6={'questionType':_0x99f2a3};const _0x4f3aa4=currentEditingQuizData['questions'][_0x5ebe3b];switch(_0x99f2a3){case _0x1fbd23(0x19f):_0x1a2db6[_0x1fbd23(0x28f)]=_0x31bdab;const _0x5f4b8a=_0x58947e['querySelectorAll'](_0x1fbd23(0x3e8));_0x1a2db6[_0x1fbd23(0x304)]=Array[_0x1fbd23(0x1c6)](_0x5f4b8a)[_0x1fbd23(0xfa)](_0x592250=>_0x592250[_0x1fbd23(0x429)]);const _0x1aba51=_0x58947e[_0x1fbd23(0x2c3)](_0x1fbd23(0x333));_0x1a2db6['correctAnswerIndex']=_0x1aba51?parseInt(_0x1aba51[_0x1fbd23(0x429)]):0x0;break;case _0x1fbd23(0x499):_0x1a2db6[_0x1fbd23(0x28f)]=_0x31bdab,_0x1a2db6[_0x1fbd23(0x38e)]=_0x58947e[_0x1fbd23(0x2c3)](_0x1fbd23(0x30c))[_0x1fbd23(0x429)];break;case _0x1fbd23(0x309):_0x1a2db6[_0x1fbd23(0x28f)]=_0x31bdab;const _0x5f2382=_0x58947e[_0x1fbd23(0x2c3)](_0x1fbd23(0x333));_0x1a2db6[_0x1fbd23(0x43b)]=_0x5f2382?_0x5f2382[_0x1fbd23(0x429)]===_0x1fbd23(0x469):!![];break;case _0x1fbd23(0x444):_0x1a2db6[_0x1fbd23(0x1e4)]=_0x31bdab;const _0x1dd464=_0x58947e[_0x1fbd23(0x2c3)]('.correct-response-input');_0x1a2db6[_0x1fbd23(0x42f)]=_0x1dd464?_0x1dd464['value']:'',_0x22c1a2[_0x1fbd23(0x2f5)](_0x1a2db6['correctResponse']);break;default:_0x1a2db6[_0x1fbd23(0x28f)]=_0x31bdab;break;}return{..._0x4f3aa4,..._0x1a2db6};});_0x22c1a2[_0x262407(0x145)]>0x0&&_0x1278e7[_0x262407(0xff)](_0x191371=>{const _0x26dcca=_0x262407;_0x191371[_0x26dcca(0x172)]===_0x26dcca(0x444)&&(_0x191371[_0x26dcca(0x268)]=_0x22c1a2);});const _0x1e2d6b=doc(db,'artifacts/'+appId+_0x262407(0x181),currentEditingQuizData['id']);await updateDoc(_0x1e2d6b,{'topic':_0x159962,'questions':_0x1278e7}),showMessage('บันทึกการแก้ไขสำเร็จ'),document[_0x262407(0x349)](_0x262407(0x12e))[_0x262407(0x388)][_0x262407(0x240)](_0x262407(0x451));}catch(_0x4d9dfc){console[_0x262407(0x266)](_0x262407(0x3c3),_0x4d9dfc),showMessage(_0x262407(0x1d6));}finally{_0x128d7c[_0x262407(0x372)]=![],_0x128d7c[_0x262407(0x3f5)]=_0x262407(0x254);}}async function saveQuiz(){const _0x39fd43=_0xf78338;if(!currentQuizData||!currentQuizData[_0x39fd43(0x47e)]||!userId||!currentProjectId){showMessage(_0x39fd43(0x3bf));return;}const _0x39baee=document[_0x39fd43(0x349)](_0x39fd43(0x1cd));_0x39baee[_0x39fd43(0x372)]=!![],_0x39baee[_0x39fd43(0x3f5)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>กำลังบันทึก...',currentQuizData[_0x39fd43(0x306)]=document[_0x39fd43(0x349)](_0x39fd43(0x134))[_0x39fd43(0x4c5)];try{const _0x4d34fa={'resultsDisplay':document[_0x39fd43(0x349)]('results-display-select')['value'],'shuffle':document[_0x39fd43(0x349)](_0x39fd43(0x3d2))[_0x39fd43(0x429)],'timerMode':document[_0x39fd43(0x349)]('timer-mode-select')[_0x39fd43(0x429)],'timerDuration':parseInt(document[_0x39fd43(0x349)](_0x39fd43(0x4bd))[_0x39fd43(0x429)])||0xa,'passingScore':parseInt(document['getElementById'](_0x39fd43(0xad))[_0x39fd43(0x429)])||0x0,'passingScore':parseInt(document[_0x39fd43(0x349)]('passing-score-input')[_0x39fd43(0x429)])||0x0,'isAdaptive':document[_0x39fd43(0x349)](_0x39fd43(0x20c))['checked']},_0x47e9a5=(currentQuizData[_0x39fd43(0x47e)]||[])['map'](_0x346165=>{const _0x2ae991=_0x39fd43,_0x35776a=document[_0x2ae991(0x349)](_0x2ae991(0x4ac))[_0x2ae991(0x429)],_0x1734e6={'questionText':_0x346165['questionText']||'','explanation':_0x346165[_0x2ae991(0x35c)]||_0x2ae991(0x273),'questionType':_0x346165[_0x2ae991(0x172)]||_0x35776a,'imageCode':_0x346165[_0x2ae991(0x4a2)]||null};return(_0x1734e6[_0x2ae991(0x172)]==='multiple_choice'||_0x1734e6['questionType']===_0x2ae991(0x2bc)||_0x1734e6[_0x2ae991(0x172)]===_0x2ae991(0x1f1)&&_0x346165['options'])&&(_0x1734e6[_0x2ae991(0x304)]=_0x346165[_0x2ae991(0x304)]||[],_0x1734e6[_0x2ae991(0x1c0)]=_0x346165[_0x2ae991(0x1c0)]!==undefined?_0x346165[_0x2ae991(0x1c0)]:0x0),(_0x1734e6[_0x2ae991(0x172)]==='short_answer'||_0x1734e6['questionType']==='fill_in_no_choices'||_0x1734e6['questionType']===_0x2ae991(0x1f1)&&_0x346165[_0x2ae991(0x38e)])&&(_0x1734e6['idealAnswer']=_0x346165['idealAnswer']||''),_0x1734e6[_0x2ae991(0x172)]===_0x2ae991(0x309)&&(_0x1734e6[_0x2ae991(0x43b)]=_0x346165[_0x2ae991(0x43b)]===!![]),_0x1734e6[_0x2ae991(0x172)]===_0x2ae991(0x444)&&(_0x1734e6[_0x2ae991(0x1e4)]=_0x346165[_0x2ae991(0x1e4)]||'',_0x1734e6[_0x2ae991(0x42f)]=_0x346165['correctResponse']||'',_0x1734e6['allResponses']=_0x346165[_0x2ae991(0x268)]||[]),_0x1734e6;}),_0x45e1c7={'topic':currentQuizData[_0x39fd43(0x306)]||_0x39fd43(0x119),'quizType':currentQuizData['quizType']||_0x39fd43(0x19f),'questions':_0x47e9a5,'projectId':currentProjectId,'createdBy':userId,'createdAt':new Date()[_0x39fd43(0x1c5)](),'status':_0x39fd43(0x34b),'settings':_0x4d34fa};let _0x4528ac;while(!![]){_0x4528ac=Math[_0x39fd43(0xdc)](0x3e8+Math[_0x39fd43(0x2d5)]()*0x2328)[_0x39fd43(0x199)]();const _0x164a64=await getDoc(doc(db,_0x39fd43(0x1b9)+appId+_0x39fd43(0x181),_0x4528ac));if(!_0x164a64[_0x39fd43(0x3f4)]())break;}await setDoc(doc(db,_0x39fd43(0x1b9)+appId+'/public/data/quizzes',_0x4528ac),_0x45e1c7),currentQuizData[_0x39fd43(0x491)]=_0x4d34fa,currentQuizData['id']=_0x4528ac;const _0x5c018e=document['getElementById'](_0x39fd43(0x3a3));_0x5c018e[_0x39fd43(0x3f5)]=_0x39fd43(0x159)+_0x4528ac+_0x39fd43(0x12d),document[_0x39fd43(0x349)](_0x39fd43(0x4a6))[_0x39fd43(0x200)](_0x39fd43(0x151),()=>copyTextToClipboard(_0x4528ac,_0x39fd43(0x45d))),document[_0x39fd43(0x349)](_0x39fd43(0x358))['addEventListener'](_0x39fd43(0x151),()=>handleStartLiveRace(_0x4528ac)),document[_0x39fd43(0x349)](_0x39fd43(0x187))['addEventListener']('click',()=>startPresentation(currentQuizData)),document[_0x39fd43(0x349)]('admin-try-quiz-btn')[_0x39fd43(0x200)](_0x39fd43(0x151),startAdminTest),showMessage('บันทึกแบบทดสอบสำเร็จแล้ว!');}catch(_0x281205){console['error'](_0x39fd43(0x471),_0x281205),showMessage(_0x39fd43(0x342)),_0x39baee[_0x39fd43(0x372)]=![],_0x39baee[_0x39fd43(0x3f5)]=_0x39fd43(0x284);}}function _0x44e3(_0x5216df,_0x53c1dc){const _0x4783de=_0x4783();return _0x44e3=function(_0x44e3c8,_0x55886b){_0x44e3c8=_0x44e3c8-0xaa;let _0x100801=_0x4783de[_0x44e3c8];return _0x100801;},_0x44e3(_0x5216df,_0x53c1dc);}function copyTextToClipboard(_0x5db230,_0x257822){const _0x1d8050=_0xf78338,_0x45742f=document[_0x1d8050(0x46a)](_0x1d8050(0x3c2));_0x45742f[_0x1d8050(0x429)]=_0x5db230,_0x45742f[_0x1d8050(0x179)][_0x1d8050(0x432)]=_0x1d8050(0xc1),_0x45742f[_0x1d8050(0x179)][_0x1d8050(0x308)]='0',document[_0x1d8050(0x258)][_0x1d8050(0x286)](_0x45742f),_0x45742f[_0x1d8050(0x16b)](),_0x45742f[_0x1d8050(0x393)]();try{const _0x1bd21c=document[_0x1d8050(0x430)]('copy');showMessage(_0x1bd21c?_0x257822:_0x1d8050(0x44c));}catch(_0x4ef9d1){showMessage(_0x1d8050(0x44c)),console['error'](_0x1d8050(0xbd),_0x4ef9d1);}document[_0x1d8050(0x258)][_0x1d8050(0x502)](_0x45742f);}function listenForProjectQuizzes(_0xd9dddd){const _0x1260ab=_0xf78338,_0x1c5d5f=collection(db,'artifacts/'+appId+_0x1260ab(0x181)),_0x25b445=query(_0x1c5d5f,where(_0x1260ab(0x2aa),'==',_0xd9dddd));unsubscribeQuizzesListener=onSnapshot(_0x25b445,async _0x3bbd9a=>{const _0x482d34=_0x1260ab;allQuizzes=_0x3bbd9a[_0x482d34(0x431)][_0x482d34(0xfa)](_0x3c33c6=>({'id':_0x3c33c6['id'],..._0x3c33c6[_0x482d34(0x4e3)]()})),renderQuizzes();},_0x52a46e=>{const _0x2170c4=_0x1260ab;console[_0x2170c4(0x266)](_0x2170c4(0x169),_0x52a46e),document[_0x2170c4(0x349)](_0x2170c4(0x398))[_0x2170c4(0x3f5)]='<p\x20class=\x22text-red-500\x22>เกิดข้อผิดพลาดในการโหลดแบบทดสอบ</p>';});}async function renderQuizzes(){const _0x3bda89=_0xf78338,_0xd49169=document[_0x3bda89(0x349)](_0x3bda89(0x398)),_0x176a2d=document['getElementById'](_0x3bda89(0x1aa))['value'][_0x3bda89(0x171)]();let _0x530d85;currentProjectId===_0x3bda89(0x191)?_0x530d85=starredQuizzes:_0x530d85=allQuizzes;let _0x33bd40=_0x530d85[_0x3bda89(0x1f4)](_0x14b4eb=>_0x14b4eb[_0x3bda89(0x306)][_0x3bda89(0x171)]()[_0x3bda89(0x2c9)](_0x176a2d));_0x33bd40[_0x3bda89(0x198)]((_0x1585b1,_0x6a2f50)=>new Date(_0x6a2f50[_0x3bda89(0x4c7)])-new Date(_0x1585b1[_0x3bda89(0x4c7)]));if(_0x33bd40[_0x3bda89(0x145)]===0x0){_0xd49169['innerHTML']='<p\x20class=\x22text-gray-500\x22>ไม่พบแบบทดสอบที่ตรงกัน</p>';return;}const _0x58a9fe={},_0x13989b=_0x33bd40[_0x3bda89(0xfa)](async _0x3e656e=>{const _0x20fd0f=_0x3bda89,_0x3411d0=collection(db,_0x20fd0f(0x1b9)+appId+'/public/data/quizzes/'+_0x3e656e['id']+_0x20fd0f(0x415)),_0x5e1a12=await getDocs(_0x3411d0);_0x58a9fe[_0x3e656e['id']]=_0x5e1a12['size'];});await Promise['all'](_0x13989b);let _0x4c2e2e='';_0x33bd40[_0x3bda89(0xff)](_0x175aa7=>{const _0x33c32b=_0x3bda89,_0x226b0c=_0x58a9fe[_0x175aa7['id']]||0x0,_0x546be4=_0x175aa7[_0x33c32b(0xde)]||_0x33c32b(0x34b),_0x1e9ace=_0x175aa7[_0x33c32b(0x491)]?.[_0x33c32b(0x2a9)]||'none';let _0x2f857d='',_0x215b46='';const _0x2bd13d=new Date();let _0x4c9446=_0x546be4;if(_0x546be4===_0x33c32b(0x1ff)){const _0x3796c0=_0x175aa7[_0x33c32b(0x36e)]?new Date(_0x175aa7[_0x33c32b(0x36e)]):null,_0x34006a=_0x175aa7[_0x33c32b(0x45a)]?new Date(_0x175aa7['endTime']):null;if(_0x34006a&&_0x2bd13d>_0x34006a)_0x4c9446=_0x33c32b(0x36b);else _0x3796c0&&_0x2bd13d<_0x3796c0?_0x4c9446='scheduled_pending':_0x4c9446='active';}switch(_0x4c9446){case'inactive':_0x2f857d='ปิดใช้งาน',_0x215b46=_0x33c32b(0x477);break;case _0x33c32b(0x276):_0x2f857d='รอเปิด',_0x215b46=_0x33c32b(0x4ed);break;case _0x33c32b(0x34b):_0x2f857d=_0x1e9ace!==_0x33c32b(0x1e8)?_0x33c32b(0x4bc):_0x33c32b(0x4a5),_0x215b46=_0x33c32b(0x33e);break;default:_0x2f857d=_0x33c32b(0x2ab),_0x215b46=_0x33c32b(0x33e);}let _0x55bb78='';const _0x5a9ead={'day':'2-digit','month':_0x33c32b(0x2e6),'year':_0x33c32b(0x487),'hour':_0x33c32b(0x2e6),'minute':_0x33c32b(0x2e6),'hour12':![]};_0x546be4===_0x33c32b(0x1ff)&&(_0x175aa7['startTime']&&(_0x55bb78+=_0x33c32b(0x215)+new Date(_0x175aa7[_0x33c32b(0x36e)])[_0x33c32b(0x122)](_0x33c32b(0x23b),_0x5a9ead)+'</p>'),_0x175aa7[_0x33c32b(0x45a)]&&(_0x55bb78+=_0x33c32b(0x4da)+new Date(_0x175aa7['endTime'])[_0x33c32b(0x122)](_0x33c32b(0x23b),_0x5a9ead)+_0x33c32b(0x293))),_0x4c2e2e+=_0x33c32b(0x3a5)+_0x175aa7['id']+_0x33c32b(0x405)+_0x175aa7[_0x33c32b(0x306)]+_0x33c32b(0x156)+_0x175aa7[_0x33c32b(0x47e)][_0x33c32b(0x145)]+_0x33c32b(0x2d2)+new Date(_0x175aa7['createdAt'])[_0x33c32b(0x122)](_0x33c32b(0x23b))+_0x33c32b(0x4b9)+_0x226b0c+_0x33c32b(0x3ea)+_0x55bb78+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20font-semibold\x20px-2\x20py-1\x20rounded-full\x20'+_0x215b46+'\x22>'+_0x2f857d+_0x33c32b(0x363)+_0x175aa7['id']+_0x33c32b(0xeb)+_0x175aa7['id']+_0x33c32b(0xac)+(_0x175aa7[_0x33c32b(0x49d)]?_0x33c32b(0x1cc):_0x33c32b(0x3d0))+_0x33c32b(0x371)+_0x175aa7['id']+_0x33c32b(0x1ec)+_0x175aa7['id']+_0x33c32b(0x343)+_0x175aa7[_0x33c32b(0x306)]+_0x33c32b(0x237)+_0x175aa7['id']+_0x33c32b(0x408)+_0x175aa7['id']+'\x22\x20class=\x22quiz-settings-btn\x20text-cyan-800\x20bg-cyan-100\x20hover:bg-cyan-200\x20text-xs\x20font-semibold\x20py-1\x20px-3\x20rounded-md\x20flex\x20items-center\x20gap-1\x22><i\x20class=\x22fas\x20fa-cog\x22></i>\x20ตั้งค่า</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-quiz-id=\x22'+_0x175aa7['id']+_0x33c32b(0x3d4)+_0x175aa7['id']+_0x33c32b(0x10f)+_0x175aa7['id']+_0x33c32b(0x50c)+_0x175aa7['id']+_0x33c32b(0x17b)+_0x175aa7['id']+_0x33c32b(0x3cd)+_0x175aa7['id']+'\x22\x20data-topic=\x22'+_0x175aa7[_0x33c32b(0x306)]+_0x33c32b(0x303);}),_0xd49169[_0x3bda89(0x3f5)]=_0x4c2e2e,document[_0x3bda89(0xb3)]('.quiz-result-card')[_0x3bda89(0xff)](_0x1750e3=>{const _0x15ce20=_0x3bda89;_0x1750e3[_0x15ce20(0x200)](_0x15ce20(0x151),()=>{const _0x5e06f5=_0x15ce20,_0x2bcd8f=_0x1750e3[_0x5e06f5(0x441)]['quizId'];showQuizDetailView(_0x2bcd8f);});});}async function handleDuplicateQuiz(_0x29ae19){const _0x50d8a7=_0xf78338;try{const _0x57d85f=doc(db,_0x50d8a7(0x1b9)+appId+'/public/data/quizzes',_0x29ae19),_0x575e82=await getDoc(_0x57d85f);if(_0x575e82[_0x50d8a7(0x3f4)]()){const _0x5c52f2=_0x575e82[_0x50d8a7(0x4e3)](),_0x6f69d0={..._0x5c52f2,'topic':_0x50d8a7(0x49a)+_0x5c52f2[_0x50d8a7(0x306)],'createdAt':new Date()['toISOString']()};await addDoc(collection(db,'artifacts/'+appId+'/public/data/quizzes'),_0x6f69d0),showMessage(_0x50d8a7(0x136));}else throw new Error(_0x50d8a7(0x4f4));}catch(_0x59dfa4){console[_0x50d8a7(0x266)]('Error\x20duplicating\x20quiz:',_0x59dfa4),showMessage(_0x50d8a7(0x310));}}async function handleDeleteQuiz(_0x5cae45,_0x1f6413=!![]){const _0xa80752=_0xf78338;try{const _0x12b33a=writeBatch(db),_0x3bf9d1=collection(db,_0xa80752(0x1b9)+appId+'/public/data/quizzes/'+_0x5cae45+_0xa80752(0x415)),_0x315db4=await getDocs(_0x3bf9d1);_0x315db4['forEach'](_0x11c905=>{const _0x1869d1=_0xa80752;_0x12b33a[_0x1869d1(0x13a)](doc(_0x3bf9d1,_0x11c905['id']));});const _0x13c41d=doc(db,'artifacts/'+appId+_0xa80752(0x181),_0x5cae45);_0x12b33a[_0xa80752(0x13a)](_0x13c41d),await _0x12b33a[_0xa80752(0xb5)](),_0x1f6413&&showMessage(_0xa80752(0x299));}catch(_0xd5f38){console['error'](_0xa80752(0x4ce),_0xd5f38),_0x1f6413&&showMessage(_0xa80752(0xe6));}}async function showQuizDetailView(_0x4fb040){const _0xaa43e1=_0xf78338;if(unsubscribeSubmissionsListener)unsubscribeSubmissionsListener();switchQuizDetailTab(_0xaa43e1(0x2b3));try{const _0xdc8bb=doc(db,_0xaa43e1(0x1b9)+appId+_0xaa43e1(0x181),_0x4fb040),_0x3207c6=await getDoc(_0xdc8bb);if(!_0x3207c6[_0xaa43e1(0x3f4)]()){showMessage(_0xaa43e1(0x3d1));return;}const _0x512441={'id':_0x3207c6['id'],..._0x3207c6['data']()};currentQuizData=_0x512441;const _0x129fb6=doc(db,_0xaa43e1(0x1b9)+appId+_0xaa43e1(0x1a6),_0x512441['projectId']),_0x54b7a0=await getDoc(_0x129fb6);_0x54b7a0[_0xaa43e1(0x3f4)]()?(currentProjectData=_0x54b7a0[_0xaa43e1(0x4e3)](),currentProjectId=_0x512441['projectId']):(currentProjectData={'students':[]},currentProjectId=_0x512441[_0xaa43e1(0x2aa)]);document['getElementById'](_0xaa43e1(0x226))[_0xaa43e1(0x271)]=_0x512441[_0xaa43e1(0x306)],document['getElementById']('results-quiz-id-display')[_0xaa43e1(0x271)]=_0x4fb040;const _0x2d5681=collection(db,'artifacts/'+appId+_0xaa43e1(0x181),_0x4fb040,'submissions');unsubscribeSubmissionsListener=onSnapshot(_0x2d5681,_0x325fe6=>{const _0x164c12=_0xaa43e1,_0x4c61bb=_0x325fe6[_0x164c12(0x431)][_0x164c12(0xfa)](_0x3fdc52=>({'id':_0x3fdc52['id'],..._0x3fdc52[_0x164c12(0x4e3)]()}));renderAnalytics(_0x512441,_0x4c61bb),renderQuizResultsTable(currentProjectData[_0x164c12(0x334)],_0x4c61bb,_0x512441),renderQuizLeaderboard(_0x4c61bb,_0x512441,'quiz-leaderboard-table-body');}),showView('quiz-results');}catch(_0x21d08e){console[_0xaa43e1(0x266)](_0xaa43e1(0x305),_0x21d08e),showMessage(_0xaa43e1(0x45c));}}function renderQuizResultsTable(_0x1f7d26,_0x7a1f28,_0x4ca58c){const _0x231ba9=_0xf78338,_0xc09a59=_0x7a1f28[_0x231ba9(0xdb)]((_0x180bed,_0x37ddb6)=>{const _0x1ed2a7=_0x231ba9;return _0x180bed[_0x37ddb6[_0x1ed2a7(0x27d)]]=_0x37ddb6,_0x180bed;},{}),_0x56e01f=document[_0x231ba9(0x349)]('quiz-results-table-body');if(!_0x1f7d26||_0x1f7d26[_0x231ba9(0x145)]===0x0){_0x56e01f[_0x231ba9(0x3f5)]=_0x231ba9(0x504);return;}const _0x44d528=_0x4ca58c[_0x231ba9(0x392)]===!![],_0x537f65=_0x4ca58c[_0x231ba9(0x491)]?.[_0x231ba9(0x467)]??-0x1;let _0x5ac39b='';_0x1f7d26[_0x231ba9(0xff)](_0x2eeb3b=>{const _0x3fd26d=_0x231ba9,_0x4e1a2b=_0xc09a59[_0x2eeb3b];let _0x5a13f0=_0x3fd26d(0x27b),_0x42a382=_0x3fd26d(0x518)+(_0x44d528?_0x3fd26d(0xf1):_0x3fd26d(0x402))+'\x22>'+(_0x44d528?_0x3fd26d(0x4fc):'สอบปกติ')+_0x3fd26d(0x4eb);if(_0x4e1a2b){let _0x461d72;_0x44d528?_0x461d72=_0x4e1a2b[_0x3fd26d(0x50f)]===_0x4e1a2b['totalQuestions']:_0x461d72=_0x537f65!==-0x1&&_0x4e1a2b[_0x3fd26d(0x50f)]>=_0x537f65;if(_0x44d528||_0x537f65!==-0x1){const _0x2167a4=_0x461d72?'bg-green-100\x20text-green-800':_0x3fd26d(0x3c7),_0x519b23=_0x461d72?_0x3fd26d(0x127):_0x3fd26d(0x20a);_0x5a13f0=_0x3fd26d(0x21d)+_0x2167a4+'\x22>'+_0x519b23+'</span></td>';}const _0x53d72f=_0x3fd26d(0x1df)+(_0x4e1a2b['attempts']?.[_0x3fd26d(0x145)]||0x1)+_0x3fd26d(0x30f);_0x5ac39b+=_0x3fd26d(0x204)+_0x2eeb3b+_0x3fd26d(0x29a)+_0x4e1a2b[_0x3fd26d(0x50f)]+_0x3fd26d(0x42c)+_0x4e1a2b[_0x3fd26d(0x463)]+_0x3fd26d(0x296)+_0x5a13f0+_0x3fd26d(0xd6)+_0x42a382+_0x3fd26d(0x2cb)+_0x4e1a2b[_0x3fd26d(0x48e)]+_0x3fd26d(0x42c)+_0x4e1a2b[_0x3fd26d(0x463)]+_0x3fd26d(0x201)+_0x4e1a2b[_0x3fd26d(0x4b4)]+_0x3fd26d(0x44a)+(_0x4e1a2b['points']||0x0)+_0x3fd26d(0x296)+_0x53d72f+_0x3fd26d(0x47c)+new Date(_0x4e1a2b[_0x3fd26d(0x1a4)])[_0x3fd26d(0x122)](_0x3fd26d(0x23b))+_0x3fd26d(0x428);}else{const _0x1109c7=_0x3fd26d(0x292);_0x5ac39b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>'+_0x2eeb3b+_0x3fd26d(0xe1)+_0x42a382+_0x3fd26d(0x4ae)+_0x1109c7+_0x3fd26d(0x1f5);}}),_0x56e01f[_0x231ba9(0x3f5)]=_0x5ac39b;}function handleRenameQuiz(_0x16bdca,_0x267700){const _0x336ff8=_0xf78338;actionTargetId=_0x16bdca,document['getElementById'](_0x336ff8(0x46c))['value']=_0x267700,renameQuizModal[_0x336ff8(0x388)][_0x336ff8(0x2f8)](_0x336ff8(0x451));}async function confirmRenameQuiz(){const _0x4587a6=_0xf78338,_0x98d18e=document[_0x4587a6(0x349)](_0x4587a6(0x46c))[_0x4587a6(0x429)][_0x4587a6(0x197)]();if(!_0x98d18e){showMessage(_0x4587a6(0x14f));return;}if(!actionTargetId)return;const _0x315c71=doc(db,'artifacts/'+appId+_0x4587a6(0x181),actionTargetId);try{await updateDoc(_0x315c71,{'topic':_0x98d18e}),showMessage('เปลี่ยนชื่อแบบทดสอบสำเร็จ'),renameQuizModal[_0x4587a6(0x388)]['add'](_0x4587a6(0x451)),actionTargetId=null;}catch(_0x5fa84e){console[_0x4587a6(0x266)](_0x4587a6(0x376),_0x5fa84e),showMessage('เกิดข้อผิดพลาดในการเปลี่ยนชื่อ');}}async function handleMoveQuiz(_0x484a42){const _0x176196=_0xf78338;actionTargetId=_0x484a42;const _0x4e66a7=document[_0x176196(0x349)](_0x176196(0x3a7));_0x4e66a7[_0x176196(0x3f5)]=_0x176196(0x4cc),moveQuizModal[_0x176196(0x388)]['remove']('hidden');try{const _0x6004e7=collection(db,_0x176196(0x1b9)+appId+_0x176196(0x1a6)),_0x3c0e6a=await getDocs(_0x6004e7),_0x45fce5=_0x3c0e6a[_0x176196(0x431)][_0x176196(0xfa)](_0x25338a=>({'id':_0x25338a['id'],..._0x25338a[_0x176196(0x4e3)]()})),_0x4b3e16=_0x45fce5[_0x176196(0x1f4)](_0x23d07d=>_0x23d07d['id']!==currentProjectId);if(_0x4b3e16[_0x176196(0x145)]===0x0){_0x4e66a7['innerHTML']=_0x176196(0x368),document[_0x176196(0x349)](_0x176196(0x49e))[_0x176196(0x372)]=!![];return;}_0x4e66a7['innerHTML']=_0x4b3e16[_0x176196(0xfa)](_0x225dbe=>_0x176196(0x492)+_0x225dbe['id']+'\x22>'+_0x225dbe[_0x176196(0x3d6)]+_0x176196(0x1d8))[_0x176196(0x396)](''),document[_0x176196(0x349)]('confirm-move-quiz-btn')[_0x176196(0x372)]=![];}catch(_0x5dc644){console['error'](_0x176196(0x3f9),_0x5dc644),showMessage(_0x176196(0x31b)),moveQuizModal['classList']['add'](_0x176196(0x451));}}async function confirmMoveQuiz(){const _0x119995=_0xf78338,_0x58486b=document['getElementById'](_0x119995(0x3a7))[_0x119995(0x429)];if(!_0x58486b){showMessage(_0x119995(0x326));return;}if(!actionTargetId)return;const _0xc26304=doc(db,'artifacts/'+appId+_0x119995(0x181),actionTargetId);try{await updateDoc(_0xc26304,{'projectId':_0x58486b}),showMessage('ย้ายแบบทดสอบสำเร็จ'),moveQuizModal[_0x119995(0x388)]['add']('hidden'),actionTargetId=null;}catch(_0x265167){console[_0x119995(0x266)](_0x119995(0x34f),_0x265167),showMessage('เกิดข้อผิดพลาดในการย้ายแบบทดสอบ');}}async function handleQuizSettings(_0x38ad41){const _0x428129=_0xf78338;actionTargetId=_0x38ad41;const _0x347bdf=doc(db,'artifacts/'+appId+_0x428129(0x181),_0x38ad41);try{const _0x2a1033=await getDoc(_0x347bdf);if(_0x2a1033['exists']()){const _0x5a3d11=_0x2a1033['data'](),_0x53e776=_0x5a3d11['settings']||{},_0x1f8657=_0x5a3d11[_0x428129(0x47e)][_0x428129(0x145)];document['getElementById'](_0x428129(0x1bd))[_0x428129(0x429)]=_0x53e776[_0x428129(0x385)]||_0x428129(0x1e8),document[_0x428129(0x349)](_0x428129(0x4c8))[_0x428129(0x429)]=_0x53e776[_0x428129(0x106)]||_0x428129(0x103),document['getElementById']('modal-timer-mode-select')[_0x428129(0x429)]=_0x53e776['timerMode']||_0x428129(0x1e8),document[_0x428129(0x349)](_0x428129(0x4b2))[_0x428129(0x429)]=_0x53e776[_0x428129(0x14c)]||0xa,document[_0x428129(0x349)](_0x428129(0x37a))['value']=_0x53e776['passingScore']||Math['floor'](_0x1f8657/0x2),document[_0x428129(0x349)](_0x428129(0x37a))[_0x428129(0x347)]=_0x1f8657,document[_0x428129(0x349)](_0x428129(0xd0))[_0x428129(0x397)]=_0x53e776[_0x428129(0x39f)]||![],document['getElementById'](_0x428129(0x287))[_0x428129(0x36f)](new Event(_0x428129(0xcb))),quizSettingsModal['classList'][_0x428129(0x2f8)](_0x428129(0x451));}else showMessage(_0x428129(0x3d1));}catch(_0x83d517){console[_0x428129(0x266)](_0x428129(0x1bf),_0x83d517),showMessage(_0x428129(0x247));}}async function confirmQuizSettings(){const _0x12c115=_0xf78338;if(!actionTargetId)return;const _0x5ea662=doc(db,_0x12c115(0x1b9)+appId+_0x12c115(0x181),actionTargetId),_0xdcab55={'shuffle':document[_0x12c115(0x349)](_0x12c115(0x1bd))[_0x12c115(0x429)],'resultsDisplay':document[_0x12c115(0x349)](_0x12c115(0x4c8))[_0x12c115(0x429)],'timerMode':document[_0x12c115(0x349)]('modal-timer-mode-select')['value'],'timerDuration':parseInt(document[_0x12c115(0x349)](_0x12c115(0x4b2))[_0x12c115(0x429)])||0xa,'passingScore':parseInt(document[_0x12c115(0x349)](_0x12c115(0x37a))[_0x12c115(0x429)])||0x0,'passingScore':parseInt(document[_0x12c115(0x349)](_0x12c115(0x37a))['value'])||0x0,'isAdaptive':document['getElementById']('modal-adaptive-quiz-checkbox')['checked']};try{await updateDoc(_0x5ea662,{'settings':_0xdcab55}),showMessage(_0x12c115(0x482)),quizSettingsModal[_0x12c115(0x388)][_0x12c115(0x240)](_0x12c115(0x451)),actionTargetId=null;}catch(_0x75ff50){console[_0x12c115(0x266)]('Error\x20updating\x20quiz\x20settings:',_0x75ff50),showMessage(_0x12c115(0x1d6));}}async function handleQuizStatus(_0x24b2ae){const _0x5ba85f=_0xf78338;actionTargetId=_0x24b2ae;const _0x4556a9=doc(db,_0x5ba85f(0x1b9)+appId+_0x5ba85f(0x181),_0x24b2ae);try{const _0x3557e2=await getDoc(_0x4556a9);if(_0x3557e2[_0x5ba85f(0x3f4)]()){const _0x2725be=_0x3557e2[_0x5ba85f(0x4e3)](),_0x36b1d5=_0x2725be[_0x5ba85f(0xde)]||_0x5ba85f(0x34b),_0x1c6ef1=document[_0x5ba85f(0x349)](_0x5ba85f(0x3d9)),_0x28a1a0=document[_0x5ba85f(0x349)](_0x5ba85f(0x279)),_0x1530b6=document['getElementById'](_0x5ba85f(0x3a0));let _0x3906a2=_0x5ba85f(0x386)+(_0x36b1d5===_0x5ba85f(0x34b)?'checked':'')+_0x5ba85f(0x366)+(_0x36b1d5===_0x5ba85f(0x36b)?_0x5ba85f(0x397):'')+_0x5ba85f(0x21e)+(_0x36b1d5===_0x5ba85f(0x1ff)?'checked':'')+_0x5ba85f(0x42b);_0x1c6ef1[_0x5ba85f(0x3f5)]=_0x3906a2;const _0x4f34e1=_0x36b1d5===_0x5ba85f(0x1ff);_0x28a1a0['classList']['toggle'](_0x5ba85f(0x451),!_0x4f34e1),_0x1530b6[_0x5ba85f(0x388)]['toggle'](_0x5ba85f(0x451),!_0x4f34e1),document[_0x5ba85f(0x349)](_0x5ba85f(0x31c))[_0x5ba85f(0x429)]=_0x2725be[_0x5ba85f(0x36e)]?_0x2725be[_0x5ba85f(0x36e)][_0x5ba85f(0x40e)](0x0,0x10):'',document[_0x5ba85f(0x349)](_0x5ba85f(0x439))[_0x5ba85f(0x429)]=_0x2725be[_0x5ba85f(0x45a)]?_0x2725be[_0x5ba85f(0x45a)][_0x5ba85f(0x40e)](0x0,0x10):'',_0x1c6ef1['querySelectorAll'](_0x5ba85f(0x3e9))[_0x5ba85f(0xff)](_0x4538c7=>{const _0x534d3f=_0x5ba85f;_0x4538c7[_0x534d3f(0x200)]('change',_0x132dc1=>{const _0x2cd035=_0x534d3f,_0x31bab3=_0x132dc1[_0x2cd035(0x3e2)][_0x2cd035(0x429)]===_0x2cd035(0x209);_0x28a1a0[_0x2cd035(0x388)]['toggle'](_0x2cd035(0x451),!_0x31bab3),_0x1530b6[_0x2cd035(0x388)][_0x2cd035(0x2fb)](_0x2cd035(0x451),!_0x31bab3);});}),quizStatusModal['classList'][_0x5ba85f(0x2f8)]('hidden');}}catch(_0x3bb786){console[_0x5ba85f(0x266)]('Error\x20fetching\x20quiz\x20status:',_0x3bb786),showMessage(_0x5ba85f(0xd7));}}async function confirmQuizStatus(){const _0x3a0708=_0xf78338;if(!actionTargetId)return;const _0x51d75a=doc(db,_0x3a0708(0x1b9)+appId+'/public/data/quizzes',actionTargetId),_0x14b0fd=document['querySelector']('input[name=\x22status-option\x22]:checked');if(!_0x14b0fd){showMessage(_0x3a0708(0x231));return;}const _0x1f3fcd=_0x14b0fd[_0x3a0708(0x429)];let _0x498c18={};if(_0x1f3fcd===_0x3a0708(0x34b)||_0x1f3fcd===_0x3a0708(0x36b))_0x498c18={'status':_0x1f3fcd,'startTime':null,'endTime':null};else{if(_0x1f3fcd==='schedule'){const _0x56f302=document[_0x3a0708(0x349)]('quiz-start-time')[_0x3a0708(0x429)],_0x5743c2=document['getElementById'](_0x3a0708(0x439))[_0x3a0708(0x429)];if(!_0x56f302&&!_0x5743c2){showMessage('กรุณาเลือกเวลาเปิด\x20หรือ\x20เวลาปิด\x20อย่างน้อยหนึ่งอย่าง');return;}_0x498c18={'status':_0x3a0708(0x1ff),'startTime':_0x56f302?new Date(_0x56f302)[_0x3a0708(0x1c5)]():null,'endTime':_0x5743c2?new Date(_0x5743c2)['toISOString']():null};}}try{await updateDoc(_0x51d75a,_0x498c18),showMessage(_0x3a0708(0x3dc)),quizStatusModal[_0x3a0708(0x388)][_0x3a0708(0x240)](_0x3a0708(0x451)),actionTargetId=null;}catch(_0x123dec){console['error']('Error\x20updating\x20quiz\x20status:',_0x123dec),showMessage(_0x3a0708(0x288));}}function listenForStudentProfiles(_0x2484a9){const _0x382ff7=_0xf78338,_0xb39a96=collection(db,_0x382ff7(0x1b9)+appId+_0x382ff7(0x1eb)+_0x2484a9+_0x382ff7(0x39e));unsubscribeStudentProfilesListener=onSnapshot(_0xb39a96,_0x415b32=>{const _0x42e1b7=_0x382ff7,_0x3291d3=_0x415b32[_0x42e1b7(0x431)]['map'](_0x34621e=>_0x34621e[_0x42e1b7(0x4e3)]());renderLeaderboard(_0x3291d3,_0x42e1b7(0x49f));},_0x1cde05=>{const _0x57c648=_0x382ff7;console[_0x57c648(0x266)](_0x57c648(0x373),_0x1cde05),document[_0x57c648(0x349)]('leaderboard-table-body')[_0x57c648(0x3f5)]='<tr><td\x20colspan=\x224\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>เกิดข้อผิดพลาดในการโหลดข้อมูลผู้นำ</td></tr>';});}function renderLeaderboard(_0x19eedc,_0x318787){const _0x2ddd4f=_0xf78338,_0x1cfea5=document[_0x2ddd4f(0x349)](_0x318787);if(!_0x19eedc||_0x19eedc['length']===0x0){_0x1cfea5[_0x2ddd4f(0x3f5)]=_0x2ddd4f(0x3de);return;}_0x19eedc['sort']((_0x3b8877,_0x2f7c8e)=>{const _0x33164d=_0x2ddd4f,_0xdea337=(_0x2f7c8e[_0x33164d(0x13f)]||0x0)-(_0x3b8877[_0x33164d(0x13f)]||0x0);if(_0xdea337!==0x0)return _0xdea337;const _0x269189=(_0x2f7c8e['badgesCount']?.[_0x33164d(0x48d)]||0x0)-(_0x3b8877[_0x33164d(0x105)]?.[_0x33164d(0x48d)]||0x0);if(_0x269189!==0x0)return _0x269189;const _0x73242f=(_0x2f7c8e[_0x33164d(0x105)]?.[_0x33164d(0x154)]||0x0)-(_0x3b8877[_0x33164d(0x105)]?.[_0x33164d(0x154)]||0x0);if(_0x73242f!==0x0)return _0x73242f;const _0x2eb995=(_0x2f7c8e[_0x33164d(0x105)]?.[_0x33164d(0x1b1)]||0x0)-(_0x3b8877['badgesCount']?.[_0x33164d(0x1b1)]||0x0);if(_0x2eb995!==0x0)return _0x2eb995;const _0x223d66=(_0x2f7c8e[_0x33164d(0x105)]?.[_0x33164d(0x133)]||0x0)-(_0x3b8877[_0x33164d(0x105)]?.['quick_thinker']||0x0);if(_0x223d66!==0x0)return _0x223d66;return _0x3b8877[_0x33164d(0x27d)][_0x33164d(0x2e8)](_0x2f7c8e[_0x33164d(0x27d)],'th');});let _0x534dbf='';_0x19eedc[_0x2ddd4f(0xff)]((_0x15b237,_0x5bd956)=>{const _0x409035=_0x2ddd4f,_0x181508=_0x5bd956+0x1,_0x2940e1=_0x15b237[_0x409035(0x105)]||{};let _0x135819='';const _0x911830=[_0x409035(0x48d),_0x409035(0x1b1),_0x409035(0x154),_0x409035(0x133)];_0x911830[_0x409035(0xff)](_0x5ab29f=>{const _0x35c5be=_0x409035;if(_0x2940e1[_0x5ab29f]>0x0){const _0x535675=Object[_0x35c5be(0x4a4)](BADGES)[_0x35c5be(0x2e5)](_0x5d3925=>_0x5d3925['id']===_0x5ab29f);_0x535675&&(_0x5ab29f===_0x35c5be(0x48d)?_0x135819+=_0x35c5be(0x4b6)+_0x535675['name']+_0x35c5be(0x3b9)+_0x535675[_0x35c5be(0x39c)]+_0x35c5be(0x3fe):_0x135819+=_0x35c5be(0x4b6)+_0x535675['name']+'\x20('+_0x2940e1[_0x5ab29f]+_0x35c5be(0x1be)+_0x535675['icon']+'\x20text-lg\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22ml-1\x20text-sm\x20font-semibold\x22>'+_0x2940e1[_0x5ab29f]+_0x35c5be(0x42a));}}),_0x534dbf+=_0x409035(0x335)+_0x181508+_0x409035(0x505)+_0x15b237[_0x409035(0x27d)]+_0x409035(0x374)+(_0x15b237[_0x409035(0x13f)]||0x0)+_0x409035(0x505)+(_0x135819||'-')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x1cfea5[_0x2ddd4f(0x3f5)]=_0x534dbf;}function renderQuizLeaderboard(_0x29a8c2,_0x477ba2,_0x430ac3){const _0x3d7536=_0xf78338,_0x563cdb=document[_0x3d7536(0x349)](_0x430ac3),_0x5475bb=_0x430ac3===_0x3d7536(0x4c3),_0x27a887=_0x477ba2[_0x3d7536(0x47e)][_0x3d7536(0x145)];if(!_0x29a8c2||_0x29a8c2[_0x3d7536(0x145)]===0x0){_0x563cdb[_0x3d7536(0x3f5)]=_0x3d7536(0x344)+(_0x5475bb?0x6:0x8)+_0x3d7536(0x24b);return;}_0x29a8c2[_0x3d7536(0x198)]((_0x4e370a,_0x5b461d)=>{const _0x54dc97=_0x3d7536;if(_0x5b461d[_0x54dc97(0x50f)]!==_0x4e370a[_0x54dc97(0x50f)])return _0x5b461d[_0x54dc97(0x50f)]-_0x4e370a['bestScore'];return new Date(_0x4e370a[_0x54dc97(0x1a4)])-new Date(_0x5b461d[_0x54dc97(0x1a4)]);});const _0x264d9a=_0x477ba2[_0x3d7536(0x392)]===!![],_0x46153b=_0x477ba2[_0x3d7536(0x491)]?.[_0x3d7536(0x467)]??-0x1;let _0x119dd2='';_0x29a8c2['forEach']((_0x3a3251,_0x1d8c5e)=>{const _0x393eb7=_0x3d7536,_0xe1450a=_0x1d8c5e+0x1;let _0x2e1979=_0x393eb7(0x274);if(_0x264d9a||_0x46153b!==-0x1){let _0x37f395;_0x264d9a?_0x37f395=_0x3a3251[_0x393eb7(0x50f)]===_0x27a887:_0x37f395=_0x3a3251[_0x393eb7(0x50f)]>=_0x46153b;const _0x3c3ac3=_0x37f395?_0x393eb7(0x11e):_0x393eb7(0x3c7),_0x2700a3=_0x37f395?_0x393eb7(0x127):'ไม่ผ่าน';_0x2e1979=_0x393eb7(0x4dc)+_0x3c3ac3+'\x22>'+_0x2700a3+_0x393eb7(0x4eb);}const _0x4cb50b=_0x3a3251['attempts'][_0x3a3251[_0x393eb7(0x17c)][_0x393eb7(0x145)]-0x1],_0x5a7c5e=(_0x4cb50b[_0x393eb7(0x4b0)]||[])[_0x393eb7(0xfa)](_0x199f48=>{const _0xbef41c=_0x393eb7,_0x1e6063=Object[_0xbef41c(0x4a4)](BADGES)[_0xbef41c(0x2e5)](_0x3fd031=>_0x3fd031['id']===_0x199f48);return _0x1e6063?_0xbef41c(0x448)+_0x1e6063[_0xbef41c(0x30a)]+_0xbef41c(0x403)+_0x1e6063['icon']+_0xbef41c(0x19c):'';})[_0x393eb7(0x396)]('');_0x119dd2+=_0x393eb7(0x335)+_0xe1450a+_0x393eb7(0x505)+_0x3a3251[_0x393eb7(0x27d)]+_0x393eb7(0x34a)+_0x3a3251[_0x393eb7(0x50f)]+_0x393eb7(0x42c)+_0x27a887+_0x393eb7(0x486)+_0x2e1979+_0x393eb7(0x1c7)+(_0x3a3251[_0x393eb7(0x488)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5475bb?'':'<td\x20class=\x22py-2\x20px-4\x20border-b\x20text-center\x22>'+(_0x3a3251[_0x393eb7(0x17c)]?.[_0x393eb7(0x145)]||0x1)+_0x393eb7(0x29d))+_0x393eb7(0x1bc)+(_0x5475bb?'':_0x393eb7(0x3d5)+new Date(_0x3a3251[_0x393eb7(0x1a4)])[_0x393eb7(0x122)]('th-TH')+_0x393eb7(0x29d))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20border-b\x22>'+(_0x5a7c5e||'-')+_0x393eb7(0x2dd);}),_0x563cdb[_0x3d7536(0x3f5)]=_0x119dd2;}async function handleLoadQuiz(){const _0x3f2962=_0xf78338,_0x3cab95=document['getElementById'](_0x3f2962(0x509)),_0x272dc1=_0x3cab95[_0x3f2962(0x429)][_0x3f2962(0x197)]();if(!_0x272dc1){showMessage('กรุณาป้อนรหัสแบบทดสอบ');return;}loadQuizBtn['disabled']=!![],loadQuizBtn[_0x3f2962(0x3f5)]=_0x3f2962(0x22a);try{const _0x492e26=doc(db,_0x3f2962(0x1b9)+appId+_0x3f2962(0x181),_0x272dc1),_0x1a1a3e=await getDoc(_0x492e26);if(!_0x1a1a3e[_0x3f2962(0x3f4)]()){showMessage('ไม่พบแบบทดสอบสำหรับรหัสนี้');return;}currentQuizData=sanitizeQuizData({'id':_0x1a1a3e['id'],..._0x1a1a3e[_0x3f2962(0x4e3)]()});const _0x39b3b8=currentQuizData[_0x3f2962(0xde)]||'active',_0x4b1b72=new Date();if(_0x39b3b8===_0x3f2962(0x36b)){showMessage(_0x3f2962(0x246));return;}if(_0x39b3b8===_0x3f2962(0x1ff)){const _0x5b672a=currentQuizData['startTime']?new Date(currentQuizData['startTime']):null,_0x159fee=currentQuizData[_0x3f2962(0x45a)]?new Date(currentQuizData[_0x3f2962(0x45a)]):null;if(_0x5b672a&&_0x4b1b72<_0x5b672a){showMessage(_0x3f2962(0x2e4)+_0x5b672a[_0x3f2962(0x122)]('th-TH',{'hour12':![]}));return;}if(_0x159fee&&_0x4b1b72>_0x159fee){showMessage(_0x3f2962(0xc7));return;}}const _0x57d909=currentQuizData[_0x3f2962(0x2aa)];currentProjectId=_0x57d909;const _0x17654f=doc(db,_0x3f2962(0x1b9)+appId+_0x3f2962(0x1a6),_0x57d909),_0x455765=await getDoc(_0x17654f);if(!_0x455765[_0x3f2962(0x3f4)]()){showMessage(_0x3f2962(0x1b7));return;}const _0xf28a6e=_0x455765[_0x3f2962(0x4e3)]();currentStudentProjectData=_0xf28a6e,displayStudentNameSelector(_0xf28a6e[_0x3f2962(0x334)],currentQuizData[_0x3f2962(0x306)]);}catch(_0x37d959){console[_0x3f2962(0x266)](_0x3f2962(0x19b),_0x37d959),showMessage(_0x3f2962(0x1ac));}finally{loadQuizBtn[_0x3f2962(0x372)]=![],loadQuizBtn[_0x3f2962(0x3f5)]=_0x3f2962(0xe3);}}async function handleJoinLiveGame(){const _0x21147b=_0xf78338,_0x3e2a56=document[_0x21147b(0x349)]('game-pin-input'),_0x4847ff=document[_0x21147b(0x349)](_0x21147b(0xc5)),_0x34d1f9=document[_0x21147b(0x349)](_0x21147b(0x387)),_0xa65ee4=_0x3e2a56[_0x21147b(0x429)][_0x21147b(0x197)](),_0x52cc43=_0x4847ff[_0x21147b(0x429)]['trim']();if(!_0xa65ee4||!_0x52cc43){showMessage('กรุณากรอกรหัสเข้าร่วมและชื่อเล่นให้ครบถ้วน');return;}_0x34d1f9[_0x21147b(0x372)]=!![],_0x34d1f9[_0x21147b(0x3f5)]=_0x21147b(0x196);try{const _0x27a3c0=collection(db,_0x21147b(0x1b9)+appId+_0x21147b(0x4bb)),_0x234682=query(_0x27a3c0,where(_0x21147b(0xd4),'==',_0xa65ee4),where(_0x21147b(0xde),'==','lobby')),_0x30da5c=await getDocs(_0x234682);if(_0x30da5c['empty']){showMessage('ไม่พบเกมด้วยรหัสนี้\x20กรุณาตรวจสอบอีกครั้ง');return;}const _0x24166b=_0x30da5c[_0x21147b(0x431)][0x0],_0x53018d=_0x24166b['data']();currentLiveGameId=_0x24166b['id'];const _0x4b3d18=_0x53018d[_0x21147b(0x4d5)],_0x4ffd71=doc(db,_0x21147b(0x1b9)+appId+'/public/data/quizzes',_0x4b3d18),_0x4a062e=await getDoc(_0x4ffd71);if(!_0x4a062e['exists']()){showMessage(_0x21147b(0x26e));return;}currentQuizData=sanitizeQuizData({'id':_0x4a062e['id'],..._0x4a062e[_0x21147b(0x4e3)]()});if(_0x53018d[_0x21147b(0xf8)]&&_0x53018d[_0x21147b(0xf8)][_0x52cc43]){showMessage(_0x21147b(0x208));return;}const _0x54327f={};_0x54327f[_0x21147b(0x176)+_0x52cc43]={'score':0x0,'answered':![],'badges':[],'correctStreak':0x0},await updateDoc(doc(db,_0x21147b(0x1b9)+appId+'/public/data/liveGames',currentLiveGameId),_0x54327f),currentStudentName=_0x52cc43,listenForLiveGameUpdates();}catch(_0x1f9c78){console['error'](_0x21147b(0x245),_0x1f9c78),showMessage('เกิดข้อผิดพลาดในการเข้าร่วมเกม');}finally{_0x34d1f9[_0x21147b(0x372)]=![],_0x34d1f9['innerHTML']=_0x21147b(0x31e);}}function displayStudentNameSelector(_0x169d4a,_0x1ffa75){const _0x4d5145=_0xf78338,_0xe7f23b=document['getElementById'](_0x4d5145(0x406));document[_0x4d5145(0x349)]('student-quiz-topic')['textContent']='แบบทดสอบ:\x20'+_0x1ffa75,!_0x169d4a||_0x169d4a['length']===0x0?(_0xe7f23b[_0x4d5145(0x3f5)]=_0x4d5145(0x4d6),startQuizBtn[_0x4d5145(0x372)]=!![]):(_0xe7f23b[_0x4d5145(0x3f5)]='<option\x20value=\x22\x22>--\x20กรุณาเลือกชื่อ\x20--</option>',_0x169d4a[_0x4d5145(0xff)](_0x42d3d5=>{const _0x587382=_0x4d5145,_0x20be75=document[_0x587382(0x46a)](_0x587382(0x1c8));_0x20be75['value']=_0x42d3d5,_0x20be75['textContent']=_0x42d3d5,_0xe7f23b[_0x587382(0x286)](_0x20be75);}),startQuizBtn[_0x4d5145(0x372)]=![]),studentInitialView[_0x4d5145(0x388)][_0x4d5145(0x240)](_0x4d5145(0x451)),studentNameSelectionView[_0x4d5145(0x388)][_0x4d5145(0x2f8)](_0x4d5145(0x451));}function shuffleArray(_0x3a6854){const _0x5e4ce9=_0xf78338;for(let _0x35ee71=_0x3a6854[_0x5e4ce9(0x145)]-0x1;_0x35ee71>0x0;_0x35ee71--){const _0x3e3687=Math['floor'](Math[_0x5e4ce9(0x2d5)]()*(_0x35ee71+0x1));[_0x3a6854[_0x35ee71],_0x3a6854[_0x3e3687]]=[_0x3a6854[_0x3e3687],_0x3a6854[_0x35ee71]];}}function getShuffledQuiz(_0x3dbbf9){const _0x5b4279=_0xf78338;let _0x5bf8b5=JSON[_0x5b4279(0x3dd)](JSON['stringify'](_0x3dbbf9));const _0x208425=_0x5bf8b5[_0x5b4279(0x491)]?.[_0x5b4279(0x385)]||_0x5b4279(0x1e8);if(_0x208425===_0x5b4279(0x1e8))return _0x5bf8b5;return(_0x208425===_0x5b4279(0x211)||_0x208425==='both')&&shuffleArray(_0x5bf8b5[_0x5b4279(0x47e)]),(_0x208425===_0x5b4279(0x2b5)||_0x208425==='both')&&_0x5bf8b5[_0x5b4279(0x47e)]['forEach'](_0x49c2f8=>{const _0x222dca=_0x5b4279,_0x14b709=_0x49c2f8[_0x222dca(0x172)]||_0x5bf8b5['quizType'];if(_0x49c2f8['options']){let _0x3630c6=_0x49c2f8[_0x222dca(0x304)]['map']((_0x46e02a,_0x30d9ae)=>({'text':_0x46e02a,'isCorrect':_0x30d9ae===_0x49c2f8[_0x222dca(0x1c0)]}));shuffleArray(_0x3630c6),_0x49c2f8[_0x222dca(0x304)]=_0x3630c6[_0x222dca(0xfa)](_0x130e82=>_0x130e82['text']),_0x49c2f8[_0x222dca(0x1c0)]=_0x3630c6[_0x222dca(0x1f3)](_0x161838=>_0x161838['isCorrect']);}_0x14b709===_0x222dca(0x444)&&_0x49c2f8[_0x222dca(0x268)]&&shuffleArray(_0x49c2f8[_0x222dca(0x268)]);}),_0x5bf8b5;}function displayQuizForStudent(_0x31511f){const _0x40230f=_0xf78338;studentQuizArea['classList']['remove']('hidden'),currentDisplayedQuiz=getShuffledQuiz(_0x31511f);const _0x8f774b=currentDisplayedQuiz[_0x40230f(0x491)]?.[_0x40230f(0x2a9)]||_0x40230f(0x1e8);if(_0x8f774b===_0x40230f(0x2d0))renderFullQuizForm(),startWholeQuizTimer(currentDisplayedQuiz[_0x40230f(0x491)][_0x40230f(0x14c)]);else _0x8f774b===_0x40230f(0x2ca)?(currentQuestionIndex=0x0,studentAnswersPerQuestion=[],renderPerQuestionView()):renderFullQuizForm();}function renderFullQuizForm(){const _0x3e8e12=_0xf78338;let _0x2dcda9=_0x3e8e12(0xb4)+currentDisplayedQuiz[_0x3e8e12(0x306)]+_0x3e8e12(0x203)+(currentMode===_0x3e8e12(0xdd)?_0x3e8e12(0x111):'')+_0x3e8e12(0x259);currentDisplayedQuiz[_0x3e8e12(0x47e)][_0x3e8e12(0xff)]((_0x2c4d03,_0x2fa568)=>{const _0xf55257=_0x3e8e12,_0x5009a4=_0x2c4d03['questionType']||currentDisplayedQuiz['quizType'];_0x2dcda9+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-6\x20p-4\x20border\x20rounded-lg\x20bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22font-semibold\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x5009a4==='matching_item'?_0x2dcda9+='\x0a\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-1/2\x22>'+(_0x2fa568+0x1)+'.\x20'+_0x2c4d03[_0xf55257(0x1e4)]+_0xf55257(0x269)+_0x2fa568+_0xf55257(0x4fe)+_0x2c4d03[_0xf55257(0x268)][_0xf55257(0xfa)](_0x27ee2c=>_0xf55257(0x492)+_0x27ee2c+'\x22>'+_0x27ee2c+'</option>')[_0xf55257(0x396)]('')+_0xf55257(0x43e):(_0x2dcda9+='<p>'+(_0x2fa568+0x1)+'.\x20'+(_0x2c4d03[_0xf55257(0x15a)]||_0x2c4d03[_0xf55257(0x28f)])+_0xf55257(0x293),_0x2c4d03[_0xf55257(0x4a2)]&&(_0x2dcda9+=_0xf55257(0x331)+_0x2c4d03[_0xf55257(0x4a2)]+_0xf55257(0x2ad)));_0x2dcda9+=_0xf55257(0x194);switch(_0x5009a4){case _0xf55257(0x499):_0x2dcda9+=_0xf55257(0x135)+_0x2fa568+_0xf55257(0xf6);break;case _0xf55257(0x309):_0x2dcda9+='<div><input\x20type=\x22radio\x22\x20id=\x22q'+_0x2fa568+_0xf55257(0x116)+_0x2fa568+_0xf55257(0x104)+_0x2fa568+_0xf55257(0x3ca),_0x2dcda9+=_0xf55257(0x307)+_0x2fa568+_0xf55257(0x21a)+_0x2fa568+_0xf55257(0xab)+_0x2fa568+_0xf55257(0x4d4);break;case'matching_item':break;case _0xf55257(0x400):case'multiple_choice':default:_0x2dcda9+=_0x2c4d03[_0xf55257(0x304)][_0xf55257(0xfa)]((_0x4f40f0,_0x46b53f)=>_0xf55257(0x4e0)+_0x2fa568+_0xf55257(0x319)+_0x46b53f+'\x22\x20name=\x22question'+_0x2fa568+_0xf55257(0x29c)+_0x46b53f+'\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22q'+_0x2fa568+_0xf55257(0x319)+_0x46b53f+'\x22>'+_0x4f40f0+_0xf55257(0x1fc))['join']('');break;}_0x2dcda9+=_0xf55257(0x2a4);}),_0x2dcda9+=_0x3e8e12(0x47d),_0x2dcda9+=_0x3e8e12(0x464),studentQuizArea[_0x3e8e12(0x3f5)]=_0x2dcda9;if(currentMode===_0x3e8e12(0xdd)){const _0x2f6a4d=document[_0x3e8e12(0x349)]('cancel-test-btn');if(_0x2f6a4d)_0x2f6a4d[_0x3e8e12(0x200)]('click',cancelAdminTest);}document['getElementById'](_0x3e8e12(0x4f7))[_0x3e8e12(0x200)](_0x3e8e12(0x25d),handleSubmitQuiz);if(window[_0x3e8e12(0x2f0)])window[_0x3e8e12(0x2f0)][_0x3e8e12(0x158)]([studentQuizArea]);}async function handleSubmitQuiz(_0x77b65f){const _0x405818=_0xf78338;if(_0x77b65f)_0x77b65f[_0x405818(0x2fe)]();if(quizTimerInterval)clearInterval(quizTimerInterval);const _0x4a1404=document[_0x405818(0x349)]('quiz-form');if(!_0x4a1404)return;const _0x6be208=_0x4a1404[_0x405818(0x2c3)](_0x405818(0x175)),_0x30ea01=currentDisplayedQuiz[_0x405818(0x47e)][_0x405818(0xf3)](_0x1c6279=>_0x1c6279[_0x405818(0x172)]===_0x405818(0x499));_0x6be208&&(_0x6be208[_0x405818(0x372)]=!![],_0x30ea01?_0x6be208[_0x405818(0x3f5)]=_0x405818(0x42d):_0x6be208[_0x405818(0x3f5)]=_0x405818(0xbb));const _0x55a91f=new FormData(_0x4a1404),_0x4d8375=currentDisplayedQuiz[_0x405818(0x47e)]['map']((_0x16413b,_0x864b88)=>{const _0x344f45=_0x405818,_0x29f66c=_0x16413b[_0x344f45(0x172)]||currentDisplayedQuiz['quizType'],_0x411ae5=_0x55a91f['get'](_0x344f45(0x1a3)+_0x864b88);if(_0x411ae5!==null&&_0x411ae5!==undefined){if(_0x29f66c==='multiple_choice'||_0x29f66c===_0x344f45(0x400))return parseInt(_0x411ae5);return _0x411ae5;}return null;}),_0x5a2f23=currentQuizData['id'],_0x37a78b=doc(db,_0x405818(0x1b9)+appId+'/public/data/quizzes/'+_0x5a2f23+_0x405818(0x415),currentStudentName),_0x450611=await getDoc(_0x37a78b),_0x24fb82=_0x450611[_0x405818(0x3f4)]()?_0x450611[_0x405818(0x4e3)]():{},_0xb80dae=_0x24fb82[_0x405818(0x17c)]||[];await processAndSubmitAnswers(_0x4d8375,_0xb80dae);}async function gradeShortAnswerWithAI(_0x356fb5,_0x430b79){const _0x345814=_0xf78338;if(!_0x356fb5||!_0x430b79)return![];try{const _0x4f19ea='Please\x20evaluate\x20if\x20the\x20user\x27s\x20answer\x20is\x20correct\x20based\x20on\x20the\x20ideal\x20answer.\x20The\x20context\x20is\x20a\x20simple\x20quiz,\x20so\x20be\x20lenient\x20with\x20phrasing\x20but\x20strict\x20with\x20the\x20core\x20concept.\x20User\x20Answer:\x20\x22'+_0x356fb5+'\x22.\x20Ideal\x20Answer:\x20\x22'+_0x430b79+_0x345814(0x503),_0x2d4c5a={'contents':[{'role':_0x345814(0x2f7),'parts':[{'text':_0x4f19ea}]}]},_0x405d1c=_0x345814(0x2b8),_0x5b2ee5=_0x345814(0x123)+_0x405d1c,_0x11368a=await fetch(_0x5b2ee5,{'method':_0x345814(0x3f8),'headers':{'Content-Type':_0x345814(0x2d1)},'body':JSON['stringify'](_0x2d4c5a)});if(!_0x11368a['ok'])throw new Error('API\x20call\x20failed');const _0x2336e2=await _0x11368a[_0x345814(0x121)](),_0x4f6791=_0x2336e2['candidates'][0x0][_0x345814(0xd5)][_0x345814(0x1ee)][0x0][_0x345814(0x298)][_0x345814(0x197)]()[_0x345814(0x171)]();return _0x4f6791===_0x345814(0x469);}catch(_0xe6ed9a){return console[_0x345814(0x266)](_0x345814(0x454),_0xe6ed9a),![];}}async function processAndSubmitAnswers(_0x446c5b,_0x251311){const _0x17a6e3=_0xf78338;let _0x4c0595=0x0,_0x38b913=0x0,_0x33dd67=[];const _0x5e2a28=[],_0x4c0535=currentDisplayedQuiz[_0x17a6e3(0x47e)][_0x17a6e3(0x145)];let _0x23865a=0x0;const _0x2fdea6=currentDisplayedQuiz[_0x17a6e3(0x47e)];for(let _0x344b93=0x0;_0x344b93<_0x2fdea6[_0x17a6e3(0x145)];_0x344b93++){const _0x1d84bb=_0x2fdea6[_0x344b93],_0x4f62ce=_0x446c5b[_0x344b93],_0x2f02b4=_0x1d84bb[_0x17a6e3(0x172)]||currentDisplayedQuiz['quizType'];let _0x55f394=![];if(_0x4f62ce!==null&&_0x4f62ce!=='')switch(_0x2f02b4){case _0x17a6e3(0x444):_0x55f394=_0x4f62ce===_0x1d84bb[_0x17a6e3(0x42f)];break;case'true_false':const _0x581e1b=_0x4f62ce===!![]||_0x4f62ce===_0x17a6e3(0x469);_0x55f394=_0x581e1b===_0x1d84bb[_0x17a6e3(0x43b)];break;case _0x17a6e3(0x400):case _0x17a6e3(0x19f):default:_0x55f394=Number(_0x4f62ce)===_0x1d84bb[_0x17a6e3(0x1c0)];break;case _0x17a6e3(0x499):_0x55f394=await gradeShortAnswer(_0x4f62ce,_0x1d84bb);break;}_0x55f394?(_0x4c0595++,_0x23865a++,_0x23865a===0x3&&(_0x33dd67[_0x17a6e3(0x2f5)](BADGES['ON_FIRE']['id']),_0x23865a=0x0)):_0x23865a=0x0,_0x5e2a28[_0x17a6e3(0x2f5)]({'answer':_0x4f62ce,'isCorrect':_0x55f394,'originalQuestionText':_0x1d84bb[_0x17a6e3(0x1e4)]||_0x1d84bb[_0x17a6e3(0x28f)]});}_0x38b913=_0x4c0595*0xa;_0x4c0595===_0x4c0535&&_0x4c0535>0x0&&!currentDisplayedQuiz[_0x17a6e3(0x392)]&&(_0x38b913+=0x32,_0x33dd67[_0x17a6e3(0x2f5)](BADGES[_0x17a6e3(0x391)]['id']));const _0x127f91=currentDisplayedQuiz[_0x17a6e3(0x491)]?.[_0x17a6e3(0x467)]??Math[_0x17a6e3(0xdc)](_0x4c0535/0x2),_0x1cac0b=currentDisplayedQuiz[_0x17a6e3(0x491)]?.['timerMode'];if(_0x1cac0b==='whole_quiz'&&quizStartTime){const _0x43a392=(new Date()-quizStartTime)/0x3e8,_0x2d2512=currentDisplayedQuiz[_0x17a6e3(0x491)][_0x17a6e3(0x14c)]*0x3c;_0x4c0595>=_0x127f91&&_0x43a392<_0x2d2512/0x2&&(_0x38b913+=0x14,_0x33dd67[_0x17a6e3(0x2f5)](BADGES[_0x17a6e3(0x3c8)]['id']));}_0x251311[_0x17a6e3(0x145)]===0x0&&_0x4c0595===_0x4c0535&&_0x4c0535>0x0&&_0x33dd67[_0x17a6e3(0x2f5)](BADGES[_0x17a6e3(0x115)]['id']);if(_0x251311['length']>0x0){const _0x2fb496=_0x251311[0x0][_0x17a6e3(0x51d)];if(_0x2fb496<_0x127f91&&_0x4c0595>=_0x127f91){const _0x1114cf=_0x251311['some'](_0x5d6080=>(_0x5d6080[_0x17a6e3(0x4b0)]||[])[_0x17a6e3(0x2c9)](BADGES['COMEBACK_KING']['id']));!_0x1114cf&&_0x33dd67[_0x17a6e3(0x2f5)](BADGES[_0x17a6e3(0x48f)]['id']);}}_0x251311[_0x17a6e3(0x145)]===0x4&&_0x33dd67['push'](BADGES['PERSEVERANCE']['id']);const _0x2f4bf5=currentDisplayedQuiz['settings'][_0x17a6e3(0x106)];if(currentMode==='admin-testing'){handleResultDisplay(_0x2f4bf5,_0x4c0595,_0x38b913,_0x33dd67,_0x5e2a28,_0x4c0535);return;}const _0x3e9c51=currentQuizData['id'],_0x2eab57=doc(db,_0x17a6e3(0x1b9)+appId+_0x17a6e3(0x4e5)+_0x3e9c51+_0x17a6e3(0x415),currentStudentName);try{const _0x243b5a=[..._0x251311],_0x503262={'score':_0x4c0595,'points':_0x38b913,'badges':_0x33dd67,'submittedAt':new Date()[_0x17a6e3(0x1c5)](),'answers':_0x5e2a28};_0x243b5a[_0x17a6e3(0x2f5)](_0x503262);const _0x3efaff=_0x243b5a[0x0]['score'],_0x42ac23=Math[_0x17a6e3(0x347)](..._0x243b5a['map'](_0x3278cd=>_0x3278cd[_0x17a6e3(0x51d)])),_0x24fde9=_0x4c0595,_0x1e9990=_0x503262[_0x17a6e3(0x458)];await setDoc(_0x2eab57,{'studentName':currentStudentName,'totalQuestions':_0x4c0535,'attempts':_0x243b5a,'firstScore':_0x3efaff,'bestScore':_0x42ac23,'latestScore':_0x24fde9,'points':_0x38b913,'latestSubmittedAt':_0x1e9990}),await updateStudentProfile(currentQuizData[_0x17a6e3(0x2aa)],currentStudentName),handleResultDisplay(_0x2f4bf5,_0x4c0595,_0x38b913,_0x33dd67,_0x5e2a28,_0x4c0535);}catch(_0x164d56){console[_0x17a6e3(0x266)](_0x17a6e3(0x25a),_0x164d56),showMessage(_0x17a6e3(0x325));}}async function updateStudentProfile(_0x3e54df,_0x631f82){const _0xaf29c3=_0xf78338,_0x40ea07=doc(db,_0xaf29c3(0x1b9)+appId+_0xaf29c3(0x1eb)+_0x3e54df+_0xaf29c3(0x39e),_0x631f82);try{const _0x2e7d31=query(collection(db,_0xaf29c3(0x1b9)+appId+_0xaf29c3(0x181)),where('projectId','==',_0x3e54df)),_0x1d9eb3=await getDocs(_0x2e7d31),_0x412952=new Map(_0x1d9eb3[_0xaf29c3(0x431)][_0xaf29c3(0xfa)](_0x180e92=>[_0x180e92['id'],_0x180e92[_0xaf29c3(0x4e3)]()])),_0x337b65=Array['from'](_0x412952[_0xaf29c3(0x1de)]());await runTransaction(db,async _0x17d907=>{const _0x3953e6=_0xaf29c3;let _0x4ca832=0x0;const _0x529915={};let _0x4abea8=!![],_0x524273=0x0,_0x48661d=0x0;for(const _0x56b80b of _0x337b65){const _0xa4a2a6=_0x412952[_0x3953e6(0x365)](_0x56b80b),_0x2fd85=doc(db,'artifacts/'+appId+_0x3953e6(0x4e5)+_0x56b80b+_0x3953e6(0x415),_0x631f82),_0x498cd7=await _0x17d907[_0x3953e6(0x365)](_0x2fd85);if(_0x498cd7[_0x3953e6(0x3f4)]()){const _0x26b877=_0x498cd7[_0x3953e6(0x4e3)](),_0x170113=_0x26b877[_0x3953e6(0x17c)]||[];if(_0x170113[_0x3953e6(0x145)]>0x0){const _0x344169=_0x170113[_0x3953e6(0xdb)]((_0x5a83d2,_0x59430c)=>{const _0x3cc31f=_0x3953e6;if(_0x59430c[_0x3cc31f(0x51d)]>_0x5a83d2['score'])return _0x59430c;if(_0x59430c[_0x3cc31f(0x51d)]===_0x5a83d2['score'])return(_0x59430c[_0x3cc31f(0x488)]||0x0)>(_0x5a83d2[_0x3cc31f(0x488)]||0x0)?_0x59430c:_0x5a83d2;return _0x5a83d2;},{'score':-0x1,'points':-0x1});_0x344169['score']>-0x1&&(_0x4ca832+=_0x344169[_0x3953e6(0x488)]||0x0,(_0x344169[_0x3953e6(0x4b0)]||[])[_0x3953e6(0xff)](_0x3f5343=>{_0x529915[_0x3f5343]=(_0x529915[_0x3f5343]||0x0)+0x1;}));}}if(_0xa4a2a6[_0x3953e6(0x306)]!==_0x3953e6(0x28d)){_0x48661d++;if(_0x498cd7['exists']()){_0x524273++;const _0x3f67c1=_0x498cd7[_0x3953e6(0x4e3)]();_0x3f67c1[_0x3953e6(0x50f)]!==_0x3f67c1[_0x3953e6(0x463)]&&(_0x4abea8=![]);}else _0x4abea8=![];}}_0x48661d>0x0&&_0x524273===_0x48661d&&_0x4abea8?_0x529915[_0x3953e6(0x48d)]=0x1:_0x529915['specialist']=0x0,_0x17d907['set'](_0x40ea07,{'studentName':_0x631f82,'totalPoints':_0x4ca832,'unlockedBadges':Object['keys'](_0x529915)['filter'](_0x11d8fb=>_0x529915[_0x11d8fb]>0x0),'badgesCount':_0x529915},{'merge':!![]});});}catch(_0x5cefee){console['error'](_0xaf29c3(0x457),_0x5cefee),showMessage('เกิดข้อผิดพลาดในการอัปเดตตารางผู้นำ');}}function startAdminTest(){const _0xb033dd=_0xf78338;if(!currentQuizData){showMessage(_0xb033dd(0x2a1));return;}let _0x17b65b=JSON[_0xb033dd(0x3dd)](JSON['stringify'](currentQuizData));currentMode=_0xb033dd(0xdd),currentStudentName=_0xb033dd(0x1e6),adminView[_0xb033dd(0x388)][_0xb033dd(0x240)](_0xb033dd(0x451)),studentView[_0xb033dd(0x388)][_0xb033dd(0x2f8)](_0xb033dd(0x451)),studentInitialView[_0xb033dd(0x388)][_0xb033dd(0x240)](_0xb033dd(0x451)),studentNameSelectionView['classList'][_0xb033dd(0x240)](_0xb033dd(0x451)),studentResultArea['classList'][_0xb033dd(0x240)](_0xb033dd(0x451)),studentQuizArea[_0xb033dd(0x388)][_0xb033dd(0x2f8)](_0xb033dd(0x451)),quizStartTime=new Date(),displayQuizForStudent(_0x17b65b);}function handleResultDisplay(_0x107706,_0xc17e16,_0x111c47,_0x3a38d9,_0x3fe5c3,_0x512b20){const _0x4aafa2=_0xf78338,_0x135937=currentDisplayedQuiz[_0x4aafa2(0x491)]?.[_0x4aafa2(0x467)]??Math[_0x4aafa2(0xdc)](_0x512b20/0x2),_0x119a18=currentDisplayedQuiz[_0x4aafa2(0x491)]?.[_0x4aafa2(0x39f)]??![];if(_0x119a18&&_0xc17e16<_0x135937){startAdaptiveFlow(_0x3fe5c3,_0xc17e16,_0x512b20);return;}switch(_0x107706){case _0x4aafa2(0x103):displayResultsWithAnswers(_0xc17e16,_0x111c47,_0x3a38d9,_0x3fe5c3,_0x512b20);break;case _0x4aafa2(0x41a):displayResultsScoreOnly(_0xc17e16,_0x111c47,_0x3a38d9,_0x512b20);break;case _0x4aafa2(0x453):default:displaySubmissionConfirmation();break;}}async function startAdaptiveFlow(_0x197ab2,_0x47d54c,_0x175913){const _0x2aa700=_0xf78338,_0x25055a=_0x197ab2['map']((_0x1b6c4e,_0x191186)=>({..._0x1b6c4e,'originalQuestion':currentDisplayedQuiz[_0x2aa700(0x47e)][_0x191186]}))['filter'](_0x1e9c36=>!_0x1e9c36[_0x2aa700(0x14b)]&&_0x1e9c36['originalQuestion'][_0x2aa700(0x35c)])[_0x2aa700(0xfa)](_0x2fb327=>'-\x20'+_0x2fb327[_0x2aa700(0x21f)][_0x2aa700(0x35c)])['join']('\x0a');if(!_0x25055a){displayResultsScoreOnly(_0x47d54c,0x0,[],_0x175913);return;}studentQuizArea[_0x2aa700(0x388)][_0x2aa700(0x240)](_0x2aa700(0x451)),studentReadingArea[_0x2aa700(0x388)]['remove'](_0x2aa700(0x451)),studentReadingArea[_0x2aa700(0x3f5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x20mx-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-4\x20text-gray-600\x22>AI\x20กำลังวิเคราะห์จุดอ่อนและสร้างเนื้อหาทบทวนให้คุณโดยเฉพาะ...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';const _0x3651ae=_0x2aa700(0x243)+currentDisplayedQuiz[_0x2aa700(0x306)]+_0x2aa700(0x15b)+_0x25055a+_0x2aa700(0x404),_0x40d2ee={'type':_0x2aa700(0x2ec),'properties':{'remedialContent':{'type':_0x2aa700(0x3be)}},'required':[_0x2aa700(0x2bb)]};try{const _0x1a934d=await callAnalysisApi(_0x3651ae,_0x40d2ee),_0x171d3f=_0x1a934d[_0x2aa700(0x2bb)];studentReadingArea[_0x2aa700(0x3f5)]=_0x2aa700(0x44f)+_0x171d3f[_0x2aa700(0x2c2)](/\n/g,_0x2aa700(0x294))+_0x2aa700(0x2af),document['getElementById'](_0x2aa700(0x37c))[_0x2aa700(0x200)](_0x2aa700(0x151),()=>generateRemedialQuiz(_0x25055a));}catch(_0x3ca4fa){console[_0x2aa700(0x266)](_0x2aa700(0x3e4),_0x3ca4fa),showMessage(_0x2aa700(0x15d)),displayResultsScoreOnly(_0x47d54c,0x0,[],_0x175913);}}async function generateRemedialQuiz(_0x3e61ce){const _0x4aa860=_0xf78338;studentReadingArea[_0x4aa860(0x3f5)]=_0x4aa860(0x4d0);const _0x5402fa=_0x4aa860(0x2b1)+_0x3e61ce+_0x4aa860(0x4db),_0x3b18fe={'type':'OBJECT','properties':{'questionText':{'type':'STRING'},'options':{'type':_0x4aa860(0x483),'items':{'type':'STRING'}},'correctAnswerIndex':{'type':'NUMBER'},'explanation':{'type':_0x4aa860(0x3be)}},'required':[_0x4aa860(0x28f),'options',_0x4aa860(0x1c0),_0x4aa860(0x35c)]},_0x5cde38={'type':_0x4aa860(0x2ec),'properties':{'topic':{'type':'STRING'},'questions':{'type':'ARRAY','items':_0x3b18fe}},'required':[_0x4aa860(0x306),_0x4aa860(0x47e)]};try{const _0x44b0cd=await callAnalysisApi(_0x5402fa,_0x5cde38);_0x44b0cd[_0x4aa860(0x392)]=!![],studentReadingArea[_0x4aa860(0x388)][_0x4aa860(0x240)](_0x4aa860(0x451));const _0x293460={...currentDisplayedQuiz[_0x4aa860(0x491)],'isAdaptive':![],'resultsDisplay':_0x4aa860(0x103)};_0x44b0cd[_0x4aa860(0x491)]=_0x293460,displayQuizForStudent(_0x44b0cd);}catch(_0x4c9e64){console['error']('Remedial\x20quiz\x20generation\x20failed:',_0x4c9e64),showMessage(_0x4aa860(0x2c7)),showView('student');}}function cancelAdminTest(){const _0x46cef5=_0xf78338;if(quizTimerInterval)clearInterval(quizTimerInterval);if(perQuestionTimerInterval)clearInterval(perQuestionTimerInterval);currentMode=_0x46cef5(0x348),studentView[_0x46cef5(0x388)][_0x46cef5(0x240)]('hidden'),adminView[_0x46cef5(0x388)][_0x46cef5(0x2f8)]('hidden'),showView('project-detail');}function setupResultScreenBackButton(){const _0x2c107f=_0xf78338,_0x1747ff=_0x2c107f(0x501),_0x55e0c2=currentMode===_0x2c107f(0xdd),_0x3c1801=_0x55e0c2?_0x2c107f(0x327):_0x2c107f(0x248),_0x487c6c=_0x2c107f(0x4fd)+_0x1747ff+_0x2c107f(0x275)+_0x3c1801+_0x2c107f(0x3ab);studentResultArea['insertAdjacentHTML']('beforeend',_0x487c6c),studentResultArea[_0x2c107f(0x2c3)](_0x2c107f(0x4d7))[_0x2c107f(0x200)](_0x2c107f(0x151),handleShowStudentRankings),document[_0x2c107f(0x349)](_0x1747ff)[_0x2c107f(0x200)](_0x2c107f(0x151),()=>{const _0x2f2d6f=_0x2c107f;_0x55e0c2?(currentMode='admin',studentView[_0x2f2d6f(0x388)]['add'](_0x2f2d6f(0x451)),adminView['classList']['remove'](_0x2f2d6f(0x451)),showView(_0x2f2d6f(0x19e))):(showView('student'),document['getElementById'](_0x2f2d6f(0x509))[_0x2f2d6f(0x429)]='');});}function displayResultsWithAnswers(_0xdf7145,_0x43a680,_0x5bb6ac,_0x17e014,_0x3defe4){const _0x59bf3d=_0xf78338,_0xe1bad=_0x3defe4>0x0?_0xdf7145/_0x3defe4*0x64:0x0,_0xcea294=currentDisplayedQuiz[_0x59bf3d(0x491)]?.[_0x59bf3d(0x467)]??-0x1,_0x10df7a=currentDisplayedQuiz[_0x59bf3d(0x392)]===!![];let _0x55e0a0='';if(_0x10df7a||_0xcea294!==-0x1){let _0x18e6ba=_0x10df7a?_0xdf7145===_0x3defe4:_0xdf7145>=_0xcea294;const _0x8bee73=_0x18e6ba?_0x59bf3d(0x11e):'bg-red-100\x20text-red-800',_0x215cd1=_0x18e6ba?'ผ่าน':_0x59bf3d(0x20a);_0x55e0a0=_0x59bf3d(0x1dd)+_0x8bee73+'\x22>'+_0x215cd1+'</p>';}let _0x148c35='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-6\x20bg-indigo-100\x20rounded-lg\x20mb-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-2\x22>ผู้เข้าสอบ:\x20<span\x20class=\x22font-semibold\x20text-indigo-800\x22>'+currentStudentName+_0x59bf3d(0x2b6)+_0xdf7145+'\x20<span\x20class=\x22text-xl\x20font-normal\x20text-gray-600\x22>/\x20'+_0x3defe4+_0x59bf3d(0xbf)+_0x55e0a0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20font-semibold\x20text-blue-600\x20mt-2\x22>+'+_0x43a680+_0x59bf3d(0x513)+_0xe1bad[_0x59bf3d(0x12c)](0x0)+'%</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22earned-badges-container\x22\x20class=\x22mt-4\x20flex\x20justify-center\x20gap-4\x20flex-wrap\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-xl\x20font-bold\x20mb-4\x22>ทบทวนคำตอบ</h4>\x0a\x20\x20\x20\x20';currentDisplayedQuiz['questions'][_0x59bf3d(0xff)]((_0x41f3d9,_0x35b819)=>{const _0x21b8d2=_0x59bf3d,_0x3ca145=_0x17e014[_0x35b819],_0x11263b=_0x3ca145[_0x21b8d2(0x4ca)],_0x695c0f=_0x3ca145[_0x21b8d2(0x14b)],_0x1a1560=_0x41f3d9[_0x21b8d2(0x172)]||currentDisplayedQuiz[_0x21b8d2(0x475)];_0x148c35+=_0x21b8d2(0x1a5)+(_0x695c0f?_0x21b8d2(0x315):'border-red-300\x20bg-red-50')+_0x21b8d2(0xbe)+(_0x35b819+0x1)+'.\x20'+(_0x41f3d9[_0x21b8d2(0x1e4)]||_0x41f3d9[_0x21b8d2(0x28f)])+_0x21b8d2(0x177);switch(_0x1a1560){case _0x21b8d2(0x444):const _0x423f2f=_0x11263b||_0x21b8d2(0x35e),_0x57085c=_0x41f3d9[_0x21b8d2(0x42f)];_0x148c35+=_0x21b8d2(0x45f)+(!_0x695c0f?_0x21b8d2(0x2e3):'')+'\x22>'+_0x423f2f+'</span></p>';!_0x695c0f&&(_0x148c35+=_0x21b8d2(0xdf)+_0x57085c+_0x21b8d2(0x293));break;case _0x21b8d2(0x499):_0x148c35+=_0x21b8d2(0x2a7)+(_0x11263b||_0x21b8d2(0x35e))+_0x21b8d2(0x293),_0x148c35+=_0x21b8d2(0x412)+_0x41f3d9[_0x21b8d2(0x38e)]+'</p>';break;case _0x21b8d2(0x309):_0x148c35+=_0x21b8d2(0xc6)+(_0x41f3d9[_0x21b8d2(0x43b)]===!![]?_0x21b8d2(0xd2):'')+'\x20'+(_0x11263b===_0x21b8d2(0x469)&&!_0x695c0f?_0x21b8d2(0x2e3):'')+_0x21b8d2(0x100),_0x148c35+='<p\x20class=\x22'+(_0x41f3d9[_0x21b8d2(0x43b)]===![]?_0x21b8d2(0xd2):'')+'\x20'+(_0x11263b===_0x21b8d2(0x15f)&&!_0x695c0f?'line-through\x20text-red-700':'')+_0x21b8d2(0x20f);break;case _0x21b8d2(0x400):case'multiple_choice':default:_0x148c35+=_0x41f3d9[_0x21b8d2(0x304)][_0x21b8d2(0xfa)]((_0x3c4651,_0x4e412d)=>{const _0x12b9e7=_0x21b8d2;let _0x1dc32f='',_0xee40a5='';if(_0x4e412d===_0x41f3d9[_0x12b9e7(0x1c0)])_0x1dc32f='font-bold\x20text-green-700',_0xee40a5='<i\x20class=\x22fas\x20fa-check-circle\x20mr-2\x20text-green-600\x22></i>';else _0x4e412d===_0x11263b&&(_0x1dc32f=_0x12b9e7(0x232),_0xee40a5=_0x12b9e7(0x18f));return _0x12b9e7(0x379)+_0x1dc32f+'\x22>'+_0xee40a5+_0x3c4651+_0x12b9e7(0x2ad);})[_0x21b8d2(0x396)]('');break;}_0x148c35+=_0x21b8d2(0x459)+(_0x41f3d9[_0x21b8d2(0x35c)]||_0x21b8d2(0x273))+_0x21b8d2(0x375);}),studentResultArea['innerHTML']=_0x148c35,renderEarnedBadges(_0x5bb6ac,_0x59bf3d(0x4ab)),studentResultArea[_0x59bf3d(0x388)]['remove'](_0x59bf3d(0x451)),studentQuizArea[_0x59bf3d(0x388)][_0x59bf3d(0x240)]('hidden'),setupResultScreenBackButton();if(window[_0x59bf3d(0x2f0)])window[_0x59bf3d(0x2f0)][_0x59bf3d(0x158)]([studentResultArea]);}function displayResultsScoreOnly(_0xc049a0,_0x34f022,_0x1bd9d0,_0x18634f){const _0x3b506f=_0xf78338,_0x91a7cb=_0x18634f>0x0?_0xc049a0/_0x18634f*0x64:0x0,_0x4f79be=currentDisplayedQuiz['settings']?.[_0x3b506f(0x467)]??-0x1,_0x19f9ed=currentDisplayedQuiz[_0x3b506f(0x392)]===!![];let _0x3a9d80='';if(_0x19f9ed||_0x4f79be!==-0x1){let _0x19ab94;_0x19f9ed?_0x19ab94=_0xc049a0===_0x18634f:_0x19ab94=_0xc049a0>=_0x4f79be;const _0x2e3da8=_0x19ab94?_0x3b506f(0x11e):_0x3b506f(0x3c7),_0x3d9064=_0x19ab94?_0x3b506f(0x127):_0x3b506f(0x20a);_0x3a9d80=_0x3b506f(0x1dd)+_0x2e3da8+'\x22>'+_0x3d9064+_0x3b506f(0x293);}let _0x23e2b7=_0x3b506f(0x4c4)+currentStudentName+_0x3b506f(0x285)+_0xc049a0+_0x3b506f(0x508)+_0x18634f+_0x3b506f(0xbf)+_0x3a9d80+_0x3b506f(0x1c3)+_0x34f022+_0x3b506f(0x506)+_0x91a7cb[_0x3b506f(0x12c)](0x0)+_0x3b506f(0x354);studentResultArea[_0x3b506f(0x3f5)]=_0x23e2b7,renderEarnedBadges(_0x1bd9d0,'earned-badges-container'),studentResultArea[_0x3b506f(0x388)]['remove'](_0x3b506f(0x451)),studentQuizArea['classList'][_0x3b506f(0x240)](_0x3b506f(0x451)),setupResultScreenBackButton();}function displaySubmissionConfirmation(){const _0x5be436=_0xf78338;let _0x2983dc=_0x5be436(0x1da)+currentStudentName+'</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-bold\x20text-green-800\x20mb-2\x22>ส่งคำตอบเรียบร้อยแล้ว</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x22>ผู้ควบคุมจะแจ้งผลคะแนนให้ทราบภายหลัง</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-6\x20pt-6\x20border-t\x20flex\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22back-to-home-manual-release\x22\x20class=\x22bg-blue-600\x20text-white\x20py-3\x20px-6\x20rounded-lg\x20font-semibold\x20hover:bg-blue-700\x20flex\x20items-center\x20justify-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-home\x20mr-2\x22></i>กลับไปหน้าแรก\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';studentResultArea[_0x5be436(0x3f5)]=_0x2983dc,studentResultArea[_0x5be436(0x388)]['remove'](_0x5be436(0x451)),studentQuizArea[_0x5be436(0x388)][_0x5be436(0x240)](_0x5be436(0x451)),document['getElementById'](_0x5be436(0x202))[_0x5be436(0x200)](_0x5be436(0x151),()=>{const _0x4d294f=_0x5be436;showView('student'),document[_0x4d294f(0x349)](_0x4d294f(0x509))[_0x4d294f(0x429)]='';});}function renderEarnedBadges(_0xa155d,_0x221f8b){const _0x2ccec1=_0xf78338,_0x1cfca5=document['getElementById'](_0x221f8b);if(!_0x1cfca5||!_0xa155d||_0xa155d[_0x2ccec1(0x145)]===0x0)return;let _0x9fc355='';_0xa155d[_0x2ccec1(0xff)]((_0x4b6d2d,_0x5bd77a)=>{const _0x4ede2a=_0x2ccec1,_0x36404a=Object[_0x4ede2a(0x4a4)](BADGES)[_0x4ede2a(0x2e5)](_0x95bb45=>_0x95bb45['id']===_0x4b6d2d);_0x36404a&&(_0x9fc355+=_0x4ede2a(0x2d4)+_0x5bd77a*0.2+'s;\x22\x20title=\x22'+_0x36404a[_0x4ede2a(0x131)]+_0x4ede2a(0x4f6)+_0x36404a[_0x4ede2a(0x39c)]+'\x20text-3xl\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20font-semibold\x20mt-1\x22>'+_0x36404a[_0x4ede2a(0x30a)]+_0x4ede2a(0x297));}),_0x1cfca5[_0x2ccec1(0x3f5)]=_0x9fc355;}function startPresentation(_0xaaa112){const _0x1314ba=_0xf78338;currentQuizData=getShuffledQuiz(_0xaaa112),currentPresentationSlide=0x0,presentationModal[_0x1314ba(0x179)][_0x1314ba(0x229)]='flex',renderPresentationSlide(currentPresentationSlide);}function closePresentation(){const _0x5bad52=_0xf78338;document[_0x5bad52(0x2b7)]&&document['exitFullscreen'](),presentationModal[_0x5bad52(0x179)][_0x5bad52(0x229)]=_0x5bad52(0x1e8);}function renderPresentationSlide(_0x27cf97){const _0x1b9743=_0xf78338,_0x20f254=document[_0x1b9743(0x349)]('presentation-slide-container');if(!currentQuizData||!currentQuizData[_0x1b9743(0x47e)]||!currentQuizData[_0x1b9743(0x47e)][_0x27cf97]){_0x20f254['innerHTML']='<p\x20class=\x22text-2xl\x22>เกิดข้อผิดพลาด:\x20ไม่พบข้อมูลคำถาม</p>';return;}const _0x598919=currentQuizData[_0x1b9743(0x47e)][_0x27cf97],_0x2c91db=_0x598919[_0x1b9743(0x172)]||currentQuizData[_0x1b9743(0x475)];_0x20f254[_0x1b9743(0x3f5)]='';let _0xec9ee3=_0x1b9743(0x49b)+(_0x598919[_0x1b9743(0x4a2)]?_0x1b9743(0x331)+_0x598919[_0x1b9743(0x4a2)]+_0x1b9743(0x2ad):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20sm:text-3xl\x20lg:text-4xl\x20font-bold\x20mb-6\x20md:mb-12\x20leading-relaxed\x20text-center\x22>'+(_0x27cf97+0x1)+'.\x20'+(_0x598919[_0x1b9743(0x1e4)]||_0x598919[_0x1b9743(0x28f)])+_0x1b9743(0x25f);switch(_0x2c91db){case _0x1b9743(0x444):_0xec9ee3+=_0x598919['allResponses'][_0x1b9743(0xfa)](_0x2e8a00=>_0x1b9743(0x382)+_0x2e8a00+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x1b9743(0x396)]('');break;case _0x1b9743(0x309):_0xec9ee3+=_0x1b9743(0x2c0),_0xec9ee3+='<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22\x20data-answer=\x22false\x22>ไม่ใช่</button>';break;case _0x1b9743(0x424):case _0x1b9743(0x499):_0xec9ee3+=_0x1b9743(0x425);break;case _0x1b9743(0x400):case'multiple_choice':default:_0xec9ee3+=_0x598919[_0x1b9743(0x304)]['map']((_0x3c96b5,_0x461cc1)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22presentation-option\x20p-4\x20md:p-6\x20rounded-lg\x20text-lg\x20md:text-2xl\x20border-4\x20border-gray-300\x20hover:bg-indigo-100\x20transition-all\x20leading-normal\x20flex\x20items-center\x20justify-center\x20text-center\x22\x20data-index=\x22'+_0x461cc1+_0x1b9743(0x139)+_0x3c96b5+_0x1b9743(0x277))[_0x1b9743(0x396)]('');break;}_0xec9ee3+=_0x1b9743(0x265)+(_0x598919[_0x1b9743(0x35c)]||_0x1b9743(0x273))+_0x1b9743(0x2a5),_0x20f254[_0x1b9743(0x3f5)]=_0xec9ee3;if(window[_0x1b9743(0x2f0)])window['MathJax'][_0x1b9743(0x158)]([_0x20f254]);document[_0x1b9743(0xb3)](_0x1b9743(0x1a8))[_0x1b9743(0xff)](_0xce471=>{const _0x2ef0b4=_0x1b9743;_0xce471[_0x2ef0b4(0x200)](_0x2ef0b4(0x151),_0xd3337a=>revealAnswerForPresentation(_0x27cf97,_0xd3337a[_0x2ef0b4(0x38f)]));});const _0x3af0dc=document[_0x1b9743(0x349)](_0x1b9743(0x3a1));_0x3af0dc&&_0x3af0dc['addEventListener'](_0x1b9743(0x151),()=>checkShortAnswerForPresentation(_0x27cf97)),document[_0x1b9743(0x349)]('slide-counter')[_0x1b9743(0x271)]=_0x1b9743(0x43f)+(_0x27cf97+0x1)+_0x1b9743(0x42c)+currentQuizData[_0x1b9743(0x47e)][_0x1b9743(0x145)],document[_0x1b9743(0x349)](_0x1b9743(0x1d7))[_0x1b9743(0x372)]=_0x27cf97===0x0,document[_0x1b9743(0x349)](_0x1b9743(0x381))[_0x1b9743(0x372)]=_0x27cf97===currentQuizData['questions']['length']-0x1;}async function checkShortAnswerForPresentation(_0x5cdb62){const _0x3808e7=_0xf78338,_0x31de80=currentQuizData[_0x3808e7(0x47e)][_0x5cdb62],_0x364975=document['getElementById'](_0x3808e7(0x4cb)),_0x53021b=document[_0x3808e7(0x349)](_0x3808e7(0x3a1)),_0x54323c=document['getElementById']('presentation-ai-result'),_0x2f441d=document[_0x3808e7(0x349)](_0x3808e7(0x137));if(!_0x364975||!_0x53021b||!_0x54323c||!_0x2f441d)return;const _0x45fdc5=_0x364975[_0x3808e7(0x429)]['trim']();if(_0x45fdc5==='')return;_0x53021b[_0x3808e7(0x372)]=!![],_0x53021b['innerHTML']=_0x3808e7(0x3ae),_0x364975[_0x3808e7(0x372)]=!![];const _0x16d9d5=await gradeShortAnswer(_0x45fdc5,_0x31de80);_0x16d9d5?_0x54323c[_0x3808e7(0x3f5)]='<span\x20class=\x22text-green-500\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i>\x20ถูกต้อง</span>':_0x54323c['innerHTML']='<span\x20class=\x22text-red-500\x22><i\x20class=\x22fas\x20fa-times-circle\x22></i>\x20ไม่ถูกต้อง</span>\x20(คำตอบที่คาดหวัง:\x20'+_0x31de80[_0x3808e7(0x38e)]+')',_0x54323c[_0x3808e7(0x388)][_0x3808e7(0x2f8)](_0x3808e7(0x451)),_0x2f441d[_0x3808e7(0x388)][_0x3808e7(0x2f8)](_0x3808e7(0x451)),_0x53021b['classList']['add'](_0x3808e7(0x451));}function revealAnswerForPresentation(_0x480c96,_0x2340d9){const _0x10aa3c=_0xf78338,_0x558cff=currentQuizData[_0x10aa3c(0x47e)][_0x480c96],_0x296f67=_0x558cff[_0x10aa3c(0x172)]||currentQuizData['quizType'];document[_0x10aa3c(0xb3)]('.presentation-option')[_0x10aa3c(0xff)](_0x9ec771=>{const _0x29590=_0x10aa3c;_0x9ec771[_0x29590(0x372)]=!![],_0x9ec771['classList']['remove'](_0x29590(0x161));let _0x3a00f2=![];if(_0x296f67==='multiple_choice'||_0x296f67==='fill_in_the_blank'){const _0xec7399=parseInt(_0x9ec771[_0x29590(0x441)][_0x29590(0x4b5)]);_0x3a00f2=_0xec7399===_0x558cff[_0x29590(0x1c0)];}else{if(_0x296f67===_0x29590(0x309)){const _0x23e378=_0x9ec771[_0x29590(0x441)][_0x29590(0x4ca)]===_0x29590(0x469);_0x3a00f2=_0x23e378===_0x558cff[_0x29590(0x43b)];}else _0x296f67===_0x29590(0x444)&&(_0x3a00f2=_0x9ec771[_0x29590(0x271)][_0x29590(0x197)]()===_0x558cff[_0x29590(0x42f)]);}_0x3a00f2?_0x9ec771[_0x29590(0x388)][_0x29590(0x240)](_0x29590(0x2d8),_0x29590(0x312),'border-green-700'):_0x9ec771['classList']['add'](_0x29590(0x11d));}),_0x2340d9[_0x10aa3c(0x388)][_0x10aa3c(0x2f8)](_0x10aa3c(0x11d));let _0x36f1ea=![];if(_0x296f67===_0x10aa3c(0x19f))_0x36f1ea=parseInt(_0x2340d9[_0x10aa3c(0x441)][_0x10aa3c(0x4b5)])===_0x558cff['correctAnswerIndex'];else{if(_0x296f67===_0x10aa3c(0x309))_0x36f1ea=_0x2340d9[_0x10aa3c(0x441)]['answer']==='true'===_0x558cff[_0x10aa3c(0x43b)];else _0x296f67===_0x10aa3c(0x444)&&(_0x36f1ea=_0x2340d9[_0x10aa3c(0x271)][_0x10aa3c(0x197)]()===_0x558cff[_0x10aa3c(0x42f)]);}!_0x36f1ea&&_0x2340d9[_0x10aa3c(0x388)][_0x10aa3c(0x240)]('bg-red-500','text-white','border-red-700'),document[_0x10aa3c(0x349)](_0x10aa3c(0x137))[_0x10aa3c(0x388)]['remove']('hidden');}function startWholeQuizTimer(_0x4979d6){const _0x549bb4=_0xf78338,_0x149649=document[_0x549bb4(0x349)](_0x549bb4(0xe2));if(!_0x149649)return;const _0x204468=Date[_0x549bb4(0x4c2)]()+_0x4979d6*0x3c*0x3e8;_0x149649[_0x549bb4(0x3f5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20bg-gray-100\x20p-2\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-semibold\x20text-indigo-700\x22>เวลาที่เหลือ:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22countdown-display\x22\x20class=\x22font-bold\x20text-lg\x20text-red-600\x22>--:--</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x1724ce=document[_0x549bb4(0x349)]('countdown-display');quizTimerInterval=setInterval(()=>{const _0xdb756f=_0x549bb4,_0x4484fa=_0x204468-Date[_0xdb756f(0x4c2)]();if(_0x4484fa<=0x0)clearInterval(quizTimerInterval),_0x1724ce[_0xdb756f(0x271)]=_0xdb756f(0x4c9),showMessage(_0xdb756f(0x369)),handleSubmitQuiz(null);else{const _0xd90ea9=Math[_0xdb756f(0xdc)](_0x4484fa/0x3e8/0x3c%0x3c)[_0xdb756f(0x199)]()[_0xdb756f(0x160)](0x2,'0'),_0x94ff67=Math['floor'](_0x4484fa/0x3e8%0x3c)['toString']()[_0xdb756f(0x160)](0x2,'0');_0x1724ce['textContent']=_0xd90ea9+':'+_0x94ff67;}},0x3e8);}function renderPerQuestionView(){const _0x2e65b8=_0xf78338;if(perQuestionTimerInterval)clearInterval(perQuestionTimerInterval);const _0x5dbead=currentDisplayedQuiz[_0x2e65b8(0x47e)][currentQuestionIndex],_0x1e1024=_0x5dbead['questionType']||currentDisplayedQuiz[_0x2e65b8(0x475)];let _0x1645ae='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-gray-500\x22>คำถามที่\x20'+(currentQuestionIndex+0x1)+'\x20จาก\x20'+currentDisplayedQuiz[_0x2e65b8(0x47e)]['length']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(currentMode===_0x2e65b8(0xdd)?_0x2e65b8(0x111):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20mb-2\x20text-center\x22>แบบทดสอบ:\x20'+currentDisplayedQuiz['topic']+_0x2e65b8(0x2cf)+(currentQuestionIndex===currentDisplayedQuiz[_0x2e65b8(0x47e)]['length']-0x1?_0x2e65b8(0x48a):_0x2e65b8(0x3fb))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';studentQuizArea[_0x2e65b8(0x3f5)]=_0x1645ae;let _0xa446e8='',_0x2f4d1b='';switch(_0x1e1024){case _0x2e65b8(0x444):_0xa446e8=currentQuestionIndex+0x1+'.\x20'+_0x5dbead[_0x2e65b8(0x1e4)],_0x2f4d1b=_0x2e65b8(0x45e)+_0x5dbead[_0x2e65b8(0x268)][_0x2e65b8(0xfa)](_0x28e4c4=>_0x2e65b8(0x492)+_0x28e4c4+'\x22>'+_0x28e4c4+_0x2e65b8(0x1d8))[_0x2e65b8(0x396)]('')+_0x2e65b8(0x330);break;case _0x2e65b8(0x309):_0xa446e8=currentQuestionIndex+0x1+'.\x20'+_0x5dbead[_0x2e65b8(0x28f)],_0x2f4d1b=_0x2e65b8(0x433);break;case _0x2e65b8(0x499):case _0x2e65b8(0x424):_0xa446e8=currentQuestionIndex+0x1+'.\x20'+_0x5dbead[_0x2e65b8(0x28f)],_0x2f4d1b='<textarea\x20id=\x22per-q-textarea\x22\x20name=\x22question_single_text\x22\x20class=\x22w-full\x20p-2\x20border\x20border-gray-300\x20rounded-lg\x22\x20rows=\x223\x22\x20placeholder=\x22พิมพ์คำตอบของคุณที่นี่...\x22></textarea>';break;case _0x2e65b8(0x19f):case _0x2e65b8(0x2bc):default:_0xa446e8=currentQuestionIndex+0x1+'.\x20'+_0x5dbead[_0x2e65b8(0x28f)],_0x2f4d1b=_0x5dbead[_0x2e65b8(0x304)][_0x2e65b8(0xfa)]((_0x1bf878,_0x279931)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22radio\x22\x20id=\x22q_opt'+_0x279931+_0x2e65b8(0x2ba)+_0x279931+'\x22\x20class=\x22mr-2\x20accent-indigo-600\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22q_opt'+_0x279931+'\x22>'+_0x1bf878+_0x2e65b8(0x3e7))[_0x2e65b8(0x396)]('');break;}_0x5dbead['imageCode']&&(_0xa446e8+=_0x2e65b8(0x331)+_0x5dbead['imageCode']+_0x2e65b8(0x2ad));document['getElementById'](_0x2e65b8(0x389))['innerHTML']=_0xa446e8,document['getElementById'](_0x2e65b8(0x2d7))[_0x2e65b8(0x3f5)]=_0x2f4d1b;if(currentMode==='admin-testing'){const _0x23b306=document[_0x2e65b8(0x349)](_0x2e65b8(0x2de));if(_0x23b306)_0x23b306['addEventListener'](_0x2e65b8(0x151),cancelAdminTest);}document[_0x2e65b8(0x349)](_0x2e65b8(0x470))[_0x2e65b8(0x200)](_0x2e65b8(0x151),()=>handleNextQuestionInTimedMode(![]));if(window[_0x2e65b8(0x2f0)])window[_0x2e65b8(0x2f0)]['typesetPromise']([studentQuizArea]);startPerQuestionTimer();}function startPerQuestionTimer(){const _0x191e64=_0xf78338,_0x4d789c=currentDisplayedQuiz[_0x191e64(0x491)][_0x191e64(0x14c)],_0x2a27ab=document[_0x191e64(0x349)](_0x191e64(0xca));if(!_0x2a27ab)return;let _0x2329b7=_0x4d789c;_0x2a27ab['innerHTML']=_0x191e64(0xfd)+_0x2329b7+_0x191e64(0x3b8);const _0x579154=document[_0x191e64(0x349)](_0x191e64(0x4f1)),_0x35a1e1=document['getElementById'](_0x191e64(0x1cf));perQuestionTimerInterval=setInterval(()=>{const _0xd90336=_0x191e64;_0x2329b7--;const _0x1d94fc=_0x2329b7/_0x4d789c*0x64;_0x579154[_0xd90336(0x179)]['width']=_0x1d94fc+'%',_0x35a1e1[_0xd90336(0x271)]=_0x2329b7,_0x2329b7<=0x0&&(clearInterval(perQuestionTimerInterval),showMessage(_0xd90336(0x14d)),handleNextQuestionInTimedMode(!![]));},0x3e8);}function handleNextQuestionInTimedMode(_0x3f5469=![]){const _0x12ec21=_0xf78338;if(perQuestionTimerInterval)clearInterval(perQuestionTimerInterval);let _0x1eee0e=null;if(!_0x3f5469){const _0x37f326=currentDisplayedQuiz['questions'][currentQuestionIndex],_0x166a0b=_0x37f326[_0x12ec21(0x172)]||currentDisplayedQuiz['quizType'];if(_0x166a0b===_0x12ec21(0x499)||_0x166a0b===_0x12ec21(0x424)){const _0x4b262d=document[_0x12ec21(0x2c3)]('#per-question-options\x20textarea');_0x1eee0e=_0x4b262d?_0x4b262d[_0x12ec21(0x429)]['trim']():'';}else{if(_0x166a0b===_0x12ec21(0x444)){const _0x28fdde=document[_0x12ec21(0x2c3)](_0x12ec21(0x2a2));_0x1eee0e=_0x28fdde?_0x28fdde[_0x12ec21(0x429)]:'';}else{const _0x2a7b69=document[_0x12ec21(0x2c3)](_0x12ec21(0x148));if(_0x2a7b69){const _0x37bca9=_0x2a7b69[_0x12ec21(0x429)];_0x1eee0e=!isNaN(parseInt(_0x37bca9,0xa))&&_0x37bca9[_0x12ec21(0x197)]()!==''?parseInt(_0x37bca9,0xa):_0x37bca9;}}}}studentAnswersPerQuestion['push'](_0x1eee0e),currentQuestionIndex++,currentQuestionIndex>=currentDisplayedQuiz['questions'][_0x12ec21(0x145)]?finalizePerQuestionQuiz():renderPerQuestionView();}async function finalizePerQuestionQuiz(){const _0x31a547=_0xf78338,_0x5f36f7=currentDisplayedQuiz['questions'][_0x31a547(0xf3)](_0x46af3e=>_0x46af3e[_0x31a547(0x172)]==='short_answer');_0x5f36f7?showMessage('สิ้นสุดการทำแบบทดสอบ\x20AI\x20กำลังตรวจคำตอบอัตนัย...'):showMessage(_0x31a547(0x4cd));const _0x303f5a=currentQuizData['id'],_0x32018d=doc(db,_0x31a547(0x1b9)+appId+_0x31a547(0x4e5)+_0x303f5a+'/submissions',currentStudentName),_0x34b7a7=await getDoc(_0x32018d),_0x37703e=_0x34b7a7[_0x31a547(0x3f4)]()?_0x34b7a7['data']():{},_0x695c0d=_0x37703e[_0x31a547(0x17c)]||[];await processAndSubmitAnswers(studentAnswersPerQuestion,_0x695c0d);}function getResultsFilename(){const _0x292f35=_0xf78338,_0x174370=document[_0x292f35(0x349)](_0x292f35(0x226))[_0x292f35(0x271)]['replace'](/[^a-z0-9]/gi,'_')[_0x292f35(0x171)]();return _0x292f35(0x322)+(_0x174370||_0x292f35(0x447));}function exportResultsAsImage(){const _0x1e2a9f=_0xf78338,_0x487483=document[_0x1e2a9f(0x349)](_0x1e2a9f(0x4e2));showMessage(_0x1e2a9f(0x129)),html2canvas(_0x487483)[_0x1e2a9f(0x16c)](_0x37a90c=>{const _0x5b9c64=_0x1e2a9f,_0x1e1a2e=document[_0x5b9c64(0x46a)]('a');_0x1e1a2e[_0x5b9c64(0x236)]=getResultsFilename()+_0x5b9c64(0xba),_0x1e1a2e[_0x5b9c64(0x165)]=_0x37a90c[_0x5b9c64(0x2f4)](_0x5b9c64(0x2ef)),_0x1e1a2e[_0x5b9c64(0x151)](),messageModal['classList']['add'](_0x5b9c64(0x451));});}function exportResultsAsPDF(){const _0x3fc901=_0xf78338,{jsPDF:_0x4741cb}=window[_0x3fc901(0xf2)],_0x18e5db=new _0x4741cb();_0x18e5db[_0x3fc901(0x3a6)](_0x3fc901(0x10a),'normal'),_0x18e5db[_0x3fc901(0x3a9)]({'html':_0x3fc901(0x138)}),_0x18e5db[_0x3fc901(0x362)](getResultsFilename()+_0x3fc901(0x2cd));}function exportResultsAsWord(){const _0x1d474f=_0xf78338,_0x5aa445=_0x1d474f(0x41d)+_0x1d474f(0x2ee)+'xmlns=\x27http://www.w3.org/TR/REC-html40\x27>'+'<head><meta\x20charset=\x27utf-8\x27><title>Export\x20HTML\x20to\x20Word</title></head><body>',_0x513238='</body></html>',_0xdd5800=_0x5aa445+document[_0x1d474f(0x349)]('results-table-container')[_0x1d474f(0x3f5)]+_0x513238,_0x569767='data:application/vnd.ms-word;charset=utf-8,'+encodeURIComponent(_0xdd5800),_0x6a627c=document['createElement']('a');document['body'][_0x1d474f(0x286)](_0x6a627c),_0x6a627c[_0x1d474f(0x165)]=_0x569767,_0x6a627c[_0x1d474f(0x236)]=getResultsFilename()+'.doc',_0x6a627c[_0x1d474f(0x151)](),document[_0x1d474f(0x258)][_0x1d474f(0x502)](_0x6a627c);}function exportResultsAsExcel(){const _0x203ae3=_0xf78338,_0x5acb68=document[_0x203ae3(0x349)](_0x203ae3(0x426));let _0x5a8ea6=[];for(let _0x15dc16=0x0;_0x15dc16<_0x5acb68[_0x203ae3(0x24f)][_0x203ae3(0x145)];_0x15dc16++){let _0x321ccc=[],_0x2e8b75=_0x5acb68[_0x203ae3(0x24f)][_0x15dc16][_0x203ae3(0xb3)](_0x203ae3(0x3d7));for(let _0x4d7a9b=0x0;_0x4d7a9b<_0x2e8b75[_0x203ae3(0x145)];_0x4d7a9b++){_0x321ccc[_0x203ae3(0x2f5)]('\x22'+_0x2e8b75[_0x4d7a9b][_0x203ae3(0x4c5)][_0x203ae3(0x2c2)](/"/g,'\x22\x22')+'\x22');}_0x5a8ea6['push'](_0x321ccc[_0x203ae3(0x396)](','));}const _0x36a982=new Blob([new Uint8Array([0xef,0xbb,0xbf]),_0x5a8ea6[_0x203ae3(0x396)]('\x0a')],{'type':_0x203ae3(0x481)}),_0x299258=document[_0x203ae3(0x46a)]('a');_0x299258['href']=URL[_0x203ae3(0x227)](_0x36a982),_0x299258[_0x203ae3(0x236)]=getResultsFilename()+'.csv',_0x299258[_0x203ae3(0x151)]();}function exportTableAsImage(_0x2db6e0,_0x5d6aae){const _0x559a25=_0xf78338,_0x3f04ab=document[_0x559a25(0x349)](_0x2db6e0);if(!_0x3f04ab){showMessage(_0x559a25(0x1f8));return;}showMessage(_0x559a25(0x129)),html2canvas(_0x3f04ab)[_0x559a25(0x16c)](_0x34c08c=>{const _0x212f85=_0x559a25,_0x4cd047=document[_0x212f85(0x46a)]('a');_0x4cd047['download']=_0x5d6aae+_0x212f85(0xba),_0x4cd047['href']=_0x34c08c[_0x212f85(0x2f4)](_0x212f85(0x2ef)),_0x4cd047['click'](),messageModal[_0x212f85(0x388)]['add'](_0x212f85(0x451));});}function exportTableAsPDF(_0xec6dcd,_0x209d31){const _0x44d94b=_0xf78338,{jsPDF:_0xe887f4}=window[_0x44d94b(0xf2)],_0x144f83=new _0xe887f4();_0x144f83[_0x44d94b(0x3a6)](_0x44d94b(0x10a),'normal'),_0x144f83[_0x44d94b(0x3a9)]({'html':'#'+_0xec6dcd}),_0x144f83['save'](_0x209d31+_0x44d94b(0x2cd));}function exportTableAsWord(_0x488492,_0x350872){const _0x714830=_0xf78338,_0x246673=document['getElementById'](_0x488492);if(!_0x246673){showMessage(_0x714830(0x1f8));return;}const _0x10f6df=_0x714830(0x41d)+'xmlns:w=\x27urn:schemas-microsoft-com:office:word\x27\x20'+_0x714830(0xaa)+_0x714830(0x497),_0x55706f=_0x714830(0x40d),_0x3c750c=_0x10f6df+_0x246673['innerHTML']+_0x55706f,_0x30d9bb=_0x714830(0x313)+encodeURIComponent(_0x3c750c),_0x5a1475=document['createElement']('a');document[_0x714830(0x258)][_0x714830(0x286)](_0x5a1475),_0x5a1475[_0x714830(0x165)]=_0x30d9bb,_0x5a1475[_0x714830(0x236)]=_0x350872+_0x714830(0x112),_0x5a1475[_0x714830(0x151)](),document['body']['removeChild'](_0x5a1475);}function exportTableAsExcel(_0x4339bc,_0x1cf6d3){const _0xf0478c=_0xf78338,_0xf1f568=document[_0xf0478c(0x349)](_0x4339bc);if(!_0xf1f568){showMessage(_0xf0478c(0x1f8));return;}let _0xdae9a9=[];for(let _0x55a44e=0x0;_0x55a44e<_0xf1f568['rows'][_0xf0478c(0x145)];_0x55a44e++){let _0x2e8080=[],_0x4d73f1=_0xf1f568[_0xf0478c(0x24f)][_0x55a44e]['querySelectorAll']('td,\x20th');for(let _0x2cbe8c=0x0;_0x2cbe8c<_0x4d73f1[_0xf0478c(0x145)];_0x2cbe8c++){_0x2e8080['push']('\x22'+_0x4d73f1[_0x2cbe8c][_0xf0478c(0x4c5)]['replace'](/"/g,'\x22\x22')+'\x22');}_0xdae9a9[_0xf0478c(0x2f5)](_0x2e8080[_0xf0478c(0x396)](','));}const _0x2bff64=new Blob([new Uint8Array([0xef,0xbb,0xbf]),_0xdae9a9[_0xf0478c(0x396)]('\x0a')],{'type':_0xf0478c(0x481)}),_0x5062e9=document[_0xf0478c(0x46a)]('a');_0x5062e9[_0xf0478c(0x165)]=URL[_0xf0478c(0x227)](_0x2bff64),_0x5062e9['download']=_0x1cf6d3+'.csv',_0x5062e9[_0xf0478c(0x151)]();}function renderAnalytics(_0x4fd915,_0x16f42f){const _0x2846d0=_0xf78338,_0x1dfb2d=currentProjectData['students'][_0x2846d0(0x145)],_0x64f53b=_0x16f42f[_0x2846d0(0x145)],_0x3f825e=_0x1dfb2d-_0x64f53b,_0x535de8=_0x1dfb2d>0x0?_0x64f53b/_0x1dfb2d*0x64:0x0,_0x1a4a62=_0x16f42f[_0x2846d0(0xfa)](_0x5643f4=>_0x5643f4[_0x2846d0(0x4b4)]),_0x40c9e2=_0x1a4a62[_0x2846d0(0x145)]>0x0?_0x1a4a62[_0x2846d0(0xdb)]((_0x373033,_0x4435e2)=>_0x373033+_0x4435e2,0x0)/_0x1a4a62[_0x2846d0(0x145)]:0x0,_0x44fb29=_0x4fd915[_0x2846d0(0x47e)]['length'],_0x47c7cf=_0x44fb29>0x0?_0x40c9e2/_0x44fb29*0x64:0x0,_0x4423c2=document[_0x2846d0(0x349)]('analytics-summary-cards');_0x4423c2[_0x2846d0(0x3f5)]=_0x2846d0(0x440)+_0x535de8['toFixed'](0x0)+'%</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-blue-600\x22>('+_0x64f53b+'/'+_0x1dfb2d+_0x2846d0(0x3b1)+_0x40c9e2['toFixed'](0x2)+_0x2846d0(0x47b)+_0x47c7cf[_0x2846d0(0x12c)](0x0)+_0x2846d0(0x235)+(_0x1a4a62['length']>0x0?Math[_0x2846d0(0x347)](..._0x1a4a62):_0x2846d0(0x3e0))+_0x2846d0(0x4dd)+(_0x1a4a62[_0x2846d0(0x145)]>0x0?Math[_0x2846d0(0x24c)](..._0x1a4a62):'N/A')+_0x2846d0(0x4f3);const _0x3600ef=currentProjectData[_0x2846d0(0x334)]||[];renderSubmissionChart(_0x64f53b,_0x3f825e,_0x16f42f,_0x3600ef),renderScoreDistributionChart(_0x16f42f,_0x44fb29),renderQuestionAnalytics(_0x4fd915,_0x16f42f,_0x3600ef);}function renderSubmissionChart(_0x8265b2,_0x2ebe7a,_0x41a078,_0x3ae6b6){const _0x22d5a6=_0xf78338,_0x39dc4e=document[_0x22d5a6(0x349)](_0x22d5a6(0x500))[_0x22d5a6(0x2ac)]('2d'),_0x4930a4=_0x41a078[_0x22d5a6(0xfa)](_0x537bd1=>_0x537bd1[_0x22d5a6(0x27d)]),_0x16ddf9=_0x3ae6b6['filter'](_0x4eff72=>!_0x4930a4[_0x22d5a6(0x2c9)](_0x4eff72));chartInstances[_0x22d5a6(0x1f9)]&&chartInstances['submission'][_0x22d5a6(0xe7)](),chartInstances[_0x22d5a6(0x1f9)]=new Chart(_0x39dc4e,{'type':'doughnut','data':{'labels':[_0x22d5a6(0x422),_0x22d5a6(0x25b)],'datasets':[{'data':[_0x8265b2,_0x2ebe7a],'backgroundColor':[_0x22d5a6(0x413),'#F59E0B'],'borderColor':[_0x22d5a6(0x493),_0x22d5a6(0x493)],'borderWidth':0x2}]},'options':{'responsive':!![],'plugins':{'legend':{'position':'bottom'},'tooltip':{'callbacks':{'label':function(_0x30a44f){const _0x507dda=_0x22d5a6;let _0x589275=_0x30a44f[_0x507dda(0x1d3)]||'';return _0x589275&&(_0x589275+=':\x20'),_0x589275+=_0x30a44f[_0x507dda(0x3e5)],_0x589275;},'afterLabel':function(_0x5e4846){const _0x937d3c=_0x22d5a6;let _0x2363c5;return _0x5e4846['dataIndex']===0x0?_0x2363c5=_0x4930a4:_0x2363c5=_0x16ddf9,_0x2363c5['length']>0x0?_0x2363c5[_0x937d3c(0x396)]('\x0a'):_0x937d3c(0x164);}}}}}});}function renderScoreDistributionChart(_0x5736b9,_0x16699a){const _0x278910=_0xf78338,_0x318201=document[_0x278910(0x349)](_0x278910(0x39b))[_0x278910(0x2ac)]('2d'),_0x3534b0={};for(let _0x33fe5f=0x0;_0x33fe5f<=_0x16699a;_0x33fe5f++){_0x3534b0[_0x33fe5f]=0x0;}_0x5736b9[_0x278910(0xff)](_0x5de9e4=>{_0x3534b0[_0x5de9e4['latestScore']]!==undefined&&_0x3534b0[_0x5de9e4['latestScore']]++;}),chartInstances[_0x278910(0x51d)]&&chartInstances[_0x278910(0x51d)]['destroy'](),chartInstances['score']=new Chart(_0x318201,{'type':'bar','data':{'labels':Object[_0x278910(0x1de)](_0x3534b0),'datasets':[{'label':_0x278910(0x3df),'data':Object[_0x278910(0x4a4)](_0x3534b0),'backgroundColor':_0x278910(0x16e),'borderColor':_0x278910(0x262),'borderWidth':0x1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'ticks':{'stepSize':0x1}},'x':{'title':{'display':!![],'text':_0x278910(0x337)}}},'plugins':{'legend':{'display':![]},'tooltip':{'callbacks':{'afterLabel':function(_0x57294c){const _0xb63089=_0x278910,_0x3ea39a=_0x57294c[_0xb63089(0x1d3)],_0x25c432=_0x5736b9['filter'](_0x19c2c2=>_0x19c2c2[_0xb63089(0x4b4)]==_0x3ea39a)[_0xb63089(0xfa)](_0x26d08d=>_0x26d08d[_0xb63089(0x27d)]);return _0x25c432[_0xb63089(0x145)]>0x0?_0x25c432[_0xb63089(0x396)]('\x0a'):'';}}}}}});}function renderQuestionAnalytics(_0x5dd0e0,_0x2f95a5,_0x38a8cc){const _0x22bfa8=_0xf78338,_0x3de440=document['getElementById'](_0x22bfa8(0x1fb));if(_0x38a8cc[_0x22bfa8(0x145)]===0x0){_0x3de440[_0x22bfa8(0x3f5)]='<p\x20class=\x22text-gray-500\x20text-center\x22>ยังไม่มีนักเรียนในโปรเจคเพื่อวิเคราะห์รายข้อ</p>';return;}let _0x373d36='';const _0x5b8742=_0x2f95a5[_0x22bfa8(0xfa)](_0x134b85=>_0x134b85[_0x22bfa8(0x27d)]);_0x5dd0e0[_0x22bfa8(0x47e)][_0x22bfa8(0xff)]((_0x77d06d,_0x18e63d)=>{const _0x3823c2=_0x22bfa8;let _0x28cda2=0x0;const _0x15c14c=[],_0x4fd774=[],_0x41c539=_0x77d06d['stem']||_0x77d06d['questionText']||_0x77d06d[_0x3823c2(0x15a)];_0x2f95a5[_0x3823c2(0xff)](_0x36133a=>{const _0x42c5f6=_0x3823c2,_0x2d6688=_0x36133a['attempts'][_0x36133a['attempts'][_0x42c5f6(0x145)]-0x1];if(_0x2d6688&&_0x2d6688['answers']){const _0x5aa244=_0x2d6688[_0x42c5f6(0x23e)][_0x42c5f6(0x2e5)](_0x5814cc=>_0x5814cc['originalQuestionText']===_0x41c539);_0x5aa244&&(_0x5aa244[_0x42c5f6(0x14b)]?(_0x28cda2++,_0x15c14c[_0x42c5f6(0x2f5)](_0x36133a[_0x42c5f6(0x27d)])):_0x4fd774[_0x42c5f6(0x2f5)](_0x36133a['studentName']));}});const _0x1e09ff=_0x38a8cc[_0x3823c2(0x1f4)](_0x60d551=>!_0x5b8742[_0x3823c2(0x2c9)](_0x60d551)),_0x264f01=_0x2f95a5[_0x3823c2(0x145)]>0x0?_0x28cda2/_0x2f95a5['length']*0x64:0x0;_0x373d36+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<details\x20class=\x22bg-gray-50\x20p-3\x20rounded-lg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<summary\x20class=\x22flex\x20justify-between\x20items-center\x20cursor-pointer\x20font-semibold\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22w-3/4\x20truncate\x22>ข้อ\x20'+(_0x18e63d+0x1)+':\x20'+_0x41c539+_0x3823c2(0x29b)+(_0x264f01>=0x46?_0x3823c2(0x157):_0x264f01>=0x28?_0x3823c2(0x4f0):_0x3823c2(0x270))+_0x3823c2(0xb9)+_0x264f01[_0x3823c2(0x12c)](0x0)+'%\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-chevron-right\x20details-marker\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</summary>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20pt-3\x20border-t\x20text-sm\x20space-y-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>คำถาม:</strong>\x20'+_0x41c539+_0x3823c2(0x118)+_0x28cda2+'\x20จาก\x20'+_0x2f95a5['length']+_0x3823c2(0x17e)+_0x15c14c[_0x3823c2(0x145)]+_0x3823c2(0x4e1)+(_0x15c14c[_0x3823c2(0x145)]>0x0?_0x15c14c['join'](',\x20'):_0x3823c2(0x164))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-red-700\x22>ตอบผิด\x20('+_0x4fd774[_0x3823c2(0x145)]+_0x3823c2(0x4e1)+(_0x4fd774['length']>0x0?_0x4fd774[_0x3823c2(0x396)](',\x20'):'ไม่มี')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20text-gray-500\x22>ยังไม่ส่ง\x20('+_0x1e09ff['length']+_0x3823c2(0x4e1)+(_0x1e09ff[_0x3823c2(0x145)]>0x0?_0x1e09ff[_0x3823c2(0x396)](',\x20'):_0x3823c2(0x164))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</details>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x3de440['innerHTML']=_0x373d36;try{window[_0x22bfa8(0x2f0)]&&MathJax['typesetPromise']&&MathJax[_0x22bfa8(0x158)]([_0x3de440]);}catch(_0x3398b6){console[_0x22bfa8(0x266)](_0x22bfa8(0x267),_0x3398b6);}}async function handleAnalyzeClass(){const _0x1df155=_0xf78338;if(!currentQuizData||!currentQuizData['id']){showMessage(_0x1df155(0x19d));return;}const _0x41cc1a=collection(db,_0x1df155(0x1b9)+appId+_0x1df155(0x4e5)+currentQuizData['id']+_0x1df155(0x415)),_0x1d6f21=await getDocs(_0x41cc1a),_0xa94716=_0x1d6f21[_0x1df155(0x431)]['map'](_0x31fc21=>_0x31fc21[_0x1df155(0x4e3)]());if(_0xa94716[_0x1df155(0x145)]<0x2){showMessage('ต้องมีนักเรียนส่งงานอย่างน้อย\x202\x20คนขึ้นไป\x20จึงจะสามารถวิเคราะห์ภาพรวมได้');return;}const _0x3670a9=document[_0x1df155(0x349)](_0x1df155(0x1dc));_0x3670a9['innerHTML']=_0x1df155(0x2ff),document['getElementById'](_0x1df155(0x3e6))[_0x1df155(0x372)]=!![];const _0x50af31=_0xa94716['map']((_0x4e1df1,_0x142d2b)=>{const _0x4ddbad=_0x1df155,_0x1c9211=_0x4e1df1[_0x4ddbad(0x17c)][_0x4e1df1[_0x4ddbad(0x17c)][_0x4ddbad(0x145)]-0x1];if(!_0x1c9211)return'';return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20นักเรียนคนที่\x20'+(_0x142d2b+0x1)+'\x20('+_0x4e1df1[_0x4ddbad(0x27d)]+_0x4ddbad(0x465)+_0x1c9211[_0x4ddbad(0x51d)]+'/'+_0x4e1df1['totalQuestions']+_0x4ddbad(0x291)+JSON[_0x4ddbad(0x2c8)](_0x1c9211['answers'])+_0x4ddbad(0x300);})[_0x1df155(0x396)]('\x0a---\x0a'),_0x47a982=_0x1df155(0x445)+currentQuizData[_0x1df155(0x306)]+_0x1df155(0x4b7)+JSON[_0x1df155(0x2c8)](currentQuizData[_0x1df155(0x47e)])+_0x1df155(0xb2)+_0x50af31+_0x1df155(0x207),_0x1e5b31={'type':_0x1df155(0x2ec),'properties':{'classStrengths':{'type':'ARRAY','items':{'type':'STRING'}},'classWeaknesses':{'type':_0x1df155(0x483),'items':{'type':_0x1df155(0x3be)}},'teacherSuggestions':{'type':_0x1df155(0x483),'items':{'type':'STRING'}}},'required':['classStrengths',_0x1df155(0x462),_0x1df155(0x222)]};try{const _0x5282c6=await callAnalysisApi(_0x47a982,_0x1e5b31);displayClassAnalysis(_0x5282c6);}catch(_0x53afa6){console[_0x1df155(0x266)](_0x1df155(0x1a1),_0x53afa6),_0x3670a9[_0x1df155(0x3f5)]='<div\x20class=\x22text-red-500\x20text-center\x22><p>ขออภัย,\x20การวิเคราะห์ล้มเหลว:\x20'+_0x53afa6[_0x1df155(0x1a2)]+_0x1df155(0x320);}finally{document[_0x1df155(0x349)](_0x1df155(0x3e6))['disabled']=![];}}function displayClassAnalysis(_0x9702e1){const _0xea2349=_0xf78338,_0x17e001=document[_0xea2349(0x349)](_0xea2349(0x1dc));if(!_0x9702e1){_0x17e001[_0xea2349(0x3f5)]=_0xea2349(0x31d);return;}_0x17e001[_0xea2349(0x3f5)]=_0xea2349(0xcd)+_0x9702e1['classStrengths'][_0xea2349(0xfa)](_0x2b0ce8=>_0xea2349(0x190)+_0x2b0ce8+_0xea2349(0x1b5))[_0xea2349(0x396)]('')+_0xea2349(0x2eb)+_0x9702e1[_0xea2349(0x462)][_0xea2349(0xfa)](_0x1eb80b=>'<li>'+_0x1eb80b+_0xea2349(0x1b5))[_0xea2349(0x396)]('')+_0xea2349(0x3b6)+_0x9702e1[_0xea2349(0x222)][_0xea2349(0xfa)](_0x3bb81f=>_0xea2349(0x190)+_0x3bb81f+'</li>')[_0xea2349(0x396)]('')+_0xea2349(0x2e0);}function formatAndPrintWorksheet(_0x4963e8,_0xc2bbb7){const _0x236efd=_0xf78338,_0x1c50ee=_0x236efd(0x146)+_0x4963e8[_0x236efd(0x306)]+_0x236efd(0x168)+_0x4963e8['topic']+_0x236efd(0x2da)+_0x4963e8['questions'][_0x236efd(0xfa)]((_0x2bc8f9,_0x361141)=>_0x236efd(0x468)+(_0x361141+0x1)+'.\x20'+_0x2bc8f9[_0x236efd(0x28f)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2bc8f9[_0x236efd(0x4a2)]?_0x236efd(0x485)+_0x2bc8f9[_0x236efd(0x4a2)]+_0x236efd(0x2ad):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>ตอบ:</strong>\x20<span\x20class=\x22answer-line\x22></span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x236efd(0x396)]('')+_0x236efd(0x3c1);_0xc2bbb7[_0x236efd(0x4a8)][_0x236efd(0xcc)](_0x1c50ee),_0xc2bbb7[_0x236efd(0x4a8)][_0x236efd(0x1c2)](),_0xc2bbb7[_0x236efd(0x256)]=function(){const _0x2414f1=_0x236efd;_0xc2bbb7[_0x2414f1(0x108)]();};}async function generateWorksheet(){const _0x1bdf62=_0xf78338,_0x12fd55=document[_0x1bdf62(0x349)](_0x1bdf62(0x32a))['value'][_0x1bdf62(0x197)]();if(!_0x12fd55){showMessage(_0x1bdf62(0x217));return;}const _0x51a942=window[_0x1bdf62(0xb6)]('','_blank');_0x51a942['document'][_0x1bdf62(0xcc)](_0x1bdf62(0x1ca));const _0x2c340e=parseInt(document[_0x1bdf62(0x349)]('num-questions')[_0x1bdf62(0x429)]),_0x583d33=document[_0x1bdf62(0x349)](_0x1bdf62(0x41f))[_0x1bdf62(0x397)],_0x45faf7=_0x583d33?_0x1bdf62(0x124):'',_0x4b2836=_0x1bdf62(0x24d)+_0x2c340e+_0x1bdf62(0x14e)+_0x12fd55+_0x1bdf62(0x302)+_0x45faf7+_0x1bdf62(0x18d),_0x5eebf7={'type':_0x1bdf62(0x2ec),'properties':{'topic':{'type':_0x1bdf62(0x3be)},'questions':{'type':_0x1bdf62(0x483),'items':{'type':_0x1bdf62(0x2ec),'properties':{'questionText':{'type':'STRING'},'imageCode':{'type':'STRING'}},'required':[_0x1bdf62(0x28f)]}}},'required':[_0x1bdf62(0x306),_0x1bdf62(0x47e)]};document[_0x1bdf62(0x349)](_0x1bdf62(0x1f7))[_0x1bdf62(0x271)]=_0x1bdf62(0x11a),document[_0x1bdf62(0x349)](_0x1bdf62(0x4ff))[_0x1bdf62(0x388)][_0x1bdf62(0x2f8)](_0x1bdf62(0x451)),document[_0x1bdf62(0x349)](_0x1bdf62(0x474))[_0x1bdf62(0x388)][_0x1bdf62(0x2f8)]('hidden'),generateWorksheetBtn[_0x1bdf62(0x372)]=!![];try{const _0xb73915=await callAnalysisApi(_0x4b2836,_0x5eebf7);formatAndPrintWorksheet(_0xb73915,_0x51a942);}catch(_0x15eb79){console[_0x1bdf62(0x266)](_0x1bdf62(0x4a3),_0x15eb79);if(_0x51a942)_0x51a942[_0x1bdf62(0x1c2)]();showMessage(_0x1bdf62(0x110));}finally{document[_0x1bdf62(0x349)](_0x1bdf62(0x4ff))[_0x1bdf62(0x388)]['add'](_0x1bdf62(0x451)),document[_0x1bdf62(0x349)](_0x1bdf62(0x474))['classList'][_0x1bdf62(0x240)](_0x1bdf62(0x451)),generateWorksheetBtn[_0x1bdf62(0x372)]=![];}}async function callAnalysisApi(_0x42e81f,_0x26ab31){const _0x3cad3b=_0xf78338,_0x3cbb8e={'contents':[{'role':_0x3cad3b(0x2f7),'parts':[{'text':_0x42e81f}]}],'generationConfig':{'responseMimeType':'application/json','responseSchema':_0x26ab31}},_0x1f1bb7=_0x3cad3b(0x2b8),_0x13f150=_0x3cad3b(0x123)+_0x1f1bb7,_0x20d207=await fetch(_0x13f150,{'method':'POST','headers':{'Content-Type':_0x3cad3b(0x2d1)},'body':JSON[_0x3cad3b(0x2c8)](_0x3cbb8e)});if(!_0x20d207['ok'])throw new Error(_0x3cad3b(0x12b)+_0x20d207['status']);const _0x2bd063=await _0x20d207['json']();if(_0x2bd063[_0x3cad3b(0x2f9)]?.[0x0]?.[_0x3cad3b(0xd5)]?.[_0x3cad3b(0x1ee)]?.[0x0])return JSON['parse'](_0x2bd063['candidates'][0x0]['content'][_0x3cad3b(0x1ee)][0x0][_0x3cad3b(0x298)]);else{let _0x3cc5b0=_0x3cad3b(0x2bf);if(_0x2bd063['promptFeedback']?.['blockReason'])_0x3cc5b0=_0x3cad3b(0x2d6)+_0x2bd063['promptFeedback'][_0x3cad3b(0x2c5)]+'.';else _0x2bd063[_0x3cad3b(0x2f9)]?.[0x0]?.[_0x3cad3b(0x341)]&&_0x2bd063[_0x3cad3b(0x2f9)][0x0]['finishReason']!==_0x3cad3b(0x30b)&&(_0x3cc5b0=_0x3cad3b(0x4b1)+_0x2bd063[_0x3cad3b(0x2f9)][0x0][_0x3cad3b(0x341)]+'.');console[_0x3cad3b(0x266)](_0x3cc5b0,JSON['stringify'](_0x2bd063));throw new Error(_0x3cc5b0);}}initialize();
